---
title: Создание кода .xib в Xamarin.iOS
description: В этом документе описывается, как Xamarin.iOS создает код для сопоставления xib-файлы для C#, программно доступности визуальные элементы управления.
ms.prod: xamarin
ms.assetid: 365991A8-E07A-0420-D28E-BC4D32065E1A
ms.technology: xamarin-ios
author: lobrien
ms.author: laobri
ms.date: 03/21/2017
ms.openlocfilehash: 57988374b4383f5659e29edff3834958b8f99f1b
ms.sourcegitcommit: e268fd44422d0bbc7c944a678e2cc633a0493122
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/25/2018
ms.locfileid: "50103924"
---
# <a name="xib-code-generation-in-xamarinios"></a>Создание кода .xib в Xamarin.iOS

> [!IMPORTANT]
>  В этом документе объясняется Visual Studio для Mac в интеграции с помощью конструктора Interface Builder, так как действия и источники не используются в конструкторе Xamarin для iOS. Дополнительные сведения о конструкторе iOS, см. в статье [конструктор iOS](~/ios/user-interface/designer/index.md) документа.

Визуально разработки пользовательского интерфейса можно использовать средство Apple Interface Builder («IB»). Определения интерфейса, созданные IB сохраняются в **.xib** файлов. Мини-приложений и другими объектами в **.xib** файлов может предоставляться «класс identity», который может быть пользовательский определяемого пользователем типа. Благодаря этому можно настроить поведение мини-приложения и записывать пользовательские мини-приложения.

Эти пользовательские классы обычно являются подклассами класса классы контроллера пользовательского интерфейса. У них есть *розеток* (аналогичны свойствам) и *действия* (аналогично событий), можно подключить к объектов интерфейса. Во время выполнения, когда загружается файл IB, создания объектов и переменных экземпляров и действий подключены на различные объекты пользовательского интерфейса динамически. При определении этих управляемых классов, необходимо определить все действия и источники в соответствии с тем, которые ожидает IB. Visual Studio для Mac использует модель фонового кода по принципу для упрощения этого процесса. Это похоже на назначение Xcode для Objective-C, но на модели создания кода и соглашения оптимизировано для более привычными для разработчиков .NET.

Работа с **.xib** файлов не поддерживается в Xamarin.iOS для Visual Studio.

## <a name="xib-files-and-custom-classes"></a>xib-файлы и пользовательские классы

А также использование существующих типов из Cocoa Touch, можно определить пользовательские типы в **.xib** файлов. Можно также использовать типы, определенные в других **.xib** файлов или только в определенных C# кода. В настоящее время конструктор Interface Builder не учитывает сведений о типах, определенные за пределами текущего **.xib** файла, поэтому он не перечислить их или показать свои пользовательские переменные экземпляров и действия. Удалить это ограничение планируется в будущем.

Пользовательские классы могут быть определены в **.xib** файл с помощью команды «Добавить подкласс» на вкладке «Классы» конструктора Interface Builder. Мы называем их в качестве классов «Фонового кода». Если **.xib** файл имеет «. xib.designer.cs» какой файл в проекте, затем Visual Studio для Mac будет автоматически заполнить его с помощью определений разделяемых классов для всех пользовательских классов в **.xib**. Мы называем эти разделяемые классы «конструктора классов».

## <a name="generating-code"></a>Генерирование кода

Для любого  **{0}.xib** файл с действием сборки *страницы*, если  **{0}. xib.designer.cs** файл также существует в проекте Visual Studio для Mac создаст разделяемых классов в файл конструктора для всех пользовательских классов его можно найти в **.xib** файл со свойствами для переменных экземпляров и разделяемые методы для всех действий. Создание кода просто обеспечивается наличие этого файла.

Файл конструктора является автоматически обновляется, когда **.xib** изменения файлов и Visual Studio для Mac снова получит фокус. Файл конструктора не следует изменять вручную, как изменения будут перезаписаны очередном Visual Studio для Mac обновления файла.

## <a name="registration-and-namespaces"></a>Регистрация и пространства имен

Visual Studio для Mac создает классы конструктора, с помощью имен проекта по умолчанию для расположения файла конструктора, чтобы сделать его совместимым с обычной namespacing проекта .NET. Пространство имен конструктора файлов зависит от проекта «пространство имен по умолчанию» и его параметры «.NET именования политики». Имейте в виду, что при изменении имен проекта по умолчанию, MD приведет к повторному созданию классов в новом пространстве имен, поэтому может оказаться, что частичные классы больше не соответствуют.

Чтобы класс мог быть обнаружен средой выполнения Objective-C, применяется Visual Studio для Mac `[Register (name)]` классу атрибут. Несмотря на то, что Xamarin.iOS автоматически регистрирует `NSObject`-производные классы, он использует .NET полные имена. Этот атрибут применяется средой Visual Studio для Mac переопределяет, чтобы обеспечить каждый класс регистрируется с именем, используемых в **.xib** файла. Если вы используете пользовательские классы в IB без использования Visual Studio для Mac, необходимо создать файлы конструктора, может потребоваться применить его вручную, чтобы делать свои управляемые классы сопоставить ожидаемые имена классов Objective-C.

Классы нельзя определить в более чем одном **.xib**, или они будут конфликтовать.

## <a name="non-designer-class-parts"></a>Части класса без конструктора

Конструктора разделяемые классы не предназначены для использования в качестве-является. Переменные экземпляров являются закрытыми, а базовый класс не указан. Предполагается, что каждый класс будет иметь соответствующие части класса «не конструктор» в другом файле, который задает базовый класс, использует или предоставляет розетки и определяет конструкторы, которые необходимы для создания экземпляра класса из машинного кода при загрузке **.xib**. Значение по умолчанию **.xib** шаблоны сделать это, но для дополнительных производных классов пользовательских определять в **.xib**, необходимо вручную добавить часть не конструктора.

Причиной этого является необходимость гибкость. Например несколько классов фонового кода может подкласс общий управляемых абстрактный класс, который подклассы класса, для которого создаются подклассы, IB.

Он является обычной поместить эти данные  **{0}. xib.cs** файл рядом с  **{0}. xib.designer.cs** файл конструктора.

<a name="generated" />

## <a name="generated-actions-and-outlets"></a>Созданные действия и источники

В разделяемых классах конструктора Visual Studio для Mac создает свойства, соответствующие любой подключенные выходов, определенных в IB и частичные методы, соответствующие каких-либо связанных действий.

### <a name="outlet-properties"></a>Свойства переменной экземпляра

Классы конструктора содержат свойства, соответствующие все выходы, определенные в пользовательском классе. Тот факт, что они представляют свойства является задачей оптимизации и xamarin.IOS, чтобы мост Objective C, чтобы включить отложенную привязку. Вы должны рассматривать их как эквивалентные, к закрытым полям, предназначен для использования только из класса фонового кода. Если вы хотите сделать их общедоступными, добавление свойства метода доступа к части без конструктора класса, как это делается для закрытого поля.

Если переменной экземпляра свойства определены как имеющие тип элемента `id` (эквивалентно `NSObject`) а затем генератор кода конструктора в настоящее время определить сильные возможных типа, на основе объектов, подключенных к этой переменной экземпляра, для удобства.
Тем не менее это может не поддерживаться в будущих версиях, поэтому рекомендуется явно строго введите розеток при определении пользовательского класса.

### <a name="action-properties"></a>Свойства действия

Классы конструктора содержат разделяемые методы, соответствующие все действия, определенные для пользовательского класса. Это методы без реализации. Разделяемые методы предназначена этого две причины:

1.  Если ввести `partial` в теле класса части класс без конструктора Visual Studio для Mac предложит автозаполнения подписи всех разделяемых методов, отличных от реализации.
2.  Сигнатуры разделяемый метод иметь атрибут применен, предоставляет их мир Objective-C, поэтому они могут получить обрабатываться как соответствующее действие.


При желании можно игнорировать разделяемого метода и реализовать это действие путем применения атрибута к другой метод или перейдите к нему передаваться в базовый класс.

Если действия определяются для имеют тип отправителя `id` (эквивалентно `NSObject`), а затем генератор кода конструктора в настоящее время определить сильные возможных типа, на основе объектов, подключенных к этого действия. Тем не менее это может не поддерживаться в будущих версиях, поэтому рекомендуется явно строго введите действия при определении пользовательского класса.

Обратите внимание, что эти разделяемые методы создаются только для C#, так как CodeDOM не поддерживает разделяемые методы, поэтому они не создаются для других языков.

## <a name="cross-xib-class-usage"></a>Использование класса кросс XIB

В некоторых случаях пользователи желают, чтобы ссылаться на тот же класс из нескольких **.xib** файлы, например с контроллерами вкладки. Это можно сделать, явно ссылается на определение класса от другого **.xib** файл, либо определив то же имя класса снова во втором **.xib**.

В последнем случае может быть проблематично из-за Visual Studio для Mac обработки **.xib** файлы по отдельности. Он не может автоматически обнаруживать и слияния дублированные определения, поэтому может оказаться с конфликтами, применение атрибута Register несколько раз, когда тот же разделяемый класс определен в нескольких файлах конструктора. Последние версии Visual Studio для Mac попытаться устранить эту проблему, но он может не всегда работать должным образом. В будущем это скорее всего, не поддерживается, и вместо этого Visual Studio для Mac сделает все типы, определенные во всех **.xib** файлы и управляемого кода в проекте, видны напрямую из всех **.xib** файлов.

## <a name="type-resolution"></a>Разрешение типов

Типы, используемые в IB, имена типов Objective-C. Это связано с типами CLR, за счет использование атрибутов регистра. При создании переменной экземпляра и действия кода, Visual Studio для Mac будет устраните соответствующие типы CLR для всех типов Objective-C, перезаписанный Xamarin.iOS core и полные имена типов.

Тем не менее, генератор кода не удается разрешить в настоящее время типы CLR из Objective-C имена типов в коде пользователя или библиотеки, поэтому в таких случаях он выводит имя типа дословно. Это означает, что соответствующий тип CLR должен иметь имя, совпадающее с именем типа Objective-C и находиться в то же пространство имен, как код, который ее использует. Планируется, это можно решить некоторое время в будущем, если учесть все типы Objective-C в проекте во время создания кода.
