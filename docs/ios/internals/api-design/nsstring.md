---
title: NSString в Xamarin. iOS и Xamarin. Mac
description: В этом документе описывается, как Xamarin. iOS прозрачно преобразует объекты NSString C# в строковые объекты, если это не происходит.
ms.prod: xamarin
ms.assetid: 785744B3-42E2-4590-8F41-435325E609B9
ms.technology: xamarin-ios
author: davidortinau
ms.author: daortin
ms.date: 03/21/2017
ms.openlocfilehash: f744f4ed5619e4e7f4a9d85897c4451bf7e5b9bc
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73022352"
---
# <a name="nsstring-in-xamarinios-and-xamarinmac"></a>NSString в Xamarin. iOS и Xamarin. Mac

Структура вызовов Xamarin. iOS и Xamarin. Mac используется для предоставления собственного строкового типа .NET, `string`, для манипулирования строками в C# и других языках программирования .NET, а также для предоставления строки в качестве типа данных, предоставляемого API, а не типа данных `NSString` .

Это означает, что разработчикам не нужно хранить строки, предназначенные для вызова Xamarin. iOS & API Xamarin. Mac (унифицированный) в специальном типе (`Foundation.NSString`), они могут использовать `System.String` Mono для всех операций, и каждый раз, когда для API в Xamarin. iOS или Xamarin. Mac требуется строка, наша привязка API выполняет упаковку информации.

Например, свойство "Задание-C" "Text" в `UILabel` типа `NSString`объявляется следующим образом:

```objc
@property(nonatomic, copy) NSString *text
```

Он предоставляется в Xamarin. iOS как:

```csharp
class UILabel {
    public string Text { get; set; }
}
```

В фоновом режиме реализация этого свойства маршалирует C# строку в `NSString` и вызывает метод `objc_msgSend` таким же образом, как и цель-C.

Существует несколько сторонних API цели-C, которые не используют `NSString`, а вместо этого используют строку C (*символ "char*"). В таких случаях можно по-прежнему использовать C# строковый тип данных, но необходимо использовать атрибут [[плаинстринг]](~/cross-platform/macios/binding/objective-c-libraries.md) для информирования генератора привязки о том, что эта строка не должна упаковываться как `NSString`, а в виде строки C.

 <a name="Exceptions_to_the_Rule" />

## <a name="exceptions-to-the-rule"></a>Исключения из правила

В Xamarin. iOS и Xamarin. Mac было создано исключение из этого правила. Решение в случае, когда мы предоставляем `string`s, и когда мы делаем исключение и предоставляем `NSString`s, выполняется, если метод `NSString` может выполнить сравнение указателей вместо сравнения содержимого.

Это может произойти, когда API-интерфейсы задания C используют общедоступный `NSString` константу в качестве маркера, представляющего некоторое действие, вместо сравнения фактического содержимого строки.

В таких случаях доступны `NSString` API, и существует доля интерфейсов API, имеющих это. Также обратите внимание, что свойства NSString представлены в некоторых классах. Эти `NSString` свойства предоставляются для таких элементов, как уведомления. Эти свойства обычно выглядят следующим образом:

```csharp
class Foo {
     public NSString FooNotification { get; }
}
```

Уведомления — это ключи, которые используются для класса `NSNotification`, если необходимо выполнить регистрацию для конкретного события, транслируемого средой выполнения.

Ключи обычно выглядят примерно так:

```csharp
class Foo {
     public NSString FooBarKey { get; }
}
```

Другое место, где `NSString`s представлены в API, — это маркеры, используемые в качестве параметров для некоторых API в iOS или OS X, принимающие `NSDictionary` объекты в качестве параметров. Словарь обычно содержит ключи `NSString`. Xamarin. iOS, по соглашению, именует статические свойства `NSString`, добавляя имя "ключ".
