---
title: NSString в Xamarin. iOS и Xamarin. Mac
description: В этом документе описывается, как Xamarin. iOS прозрачно преобразует объекты NSString C# в строковые объекты, если это не происходит.
ms.prod: xamarin
ms.assetid: 785744B3-42E2-4590-8F41-435325E609B9
ms.technology: xamarin-ios
author: lobrien
ms.author: laobri
ms.date: 03/21/2017
ms.openlocfilehash: 589b584e0526ffdc56dd5ec26aa25a0b61e2141a
ms.sourcegitcommit: 5f972a757030a1f17f99177127b4b853816a1173
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2019
ms.locfileid: "69889892"
---
# <a name="nsstring-in-xamarinios-and-xamarinmac"></a>NSString в Xamarin. iOS и Xamarin. Mac

Структура вызовов Xamarin. iOS и Xamarin. Mac используется для предоставления собственного строкового типа .NET, `string`, для манипулирования строками в C# и других языках программирования .NET, а также для предоставления строки в качестве типа данных, предоставляемого API, а не  `NSString`тип данных.

Это означает, что разработчикам не нужно хранить строки, предназначенные для вызова в Xamarin. iOS & API Xamarin. Mac (Unified) в специальном типе (`Foundation.NSString`), они могут использовать `System.String` Mono для всех операций, и каждый раз, когда для API в Xamarin. iOS или Xamarin. Mac требуется строка, наша привязка API осуществляет упаковку информации.

Например, свойство `UILabel` «Text» с типом `NSString`«объектив-C» объявляется следующим образом:

```objc
@property(nonatomic, copy) NSString *text
```

Он предоставляется в Xamarin. iOS как:

```csharp
class UILabel {
    public string Text { get; set; }
}
```

В фоновом режиме реализация этого свойства маршалирует C# строку в `NSString` и вызывает `objc_msgSend` метод так же, как и цель-C.

Существует несколько сторонних API цели-C, которые не используют `NSString`, а вместо этого используют строку C (символ "*char*"). В таких случаях можно по-прежнему использовать C# строковый тип данных, но необходимо использовать атрибут [[плаинстринг]](~/cross-platform/macios/binding/objective-c-libraries.md) , чтобы сообщить генератору привязки, что эта строка не должна упаковываться как `NSString`, а в виде строки C.

 <a name="Exceptions_to_the_Rule" />

## <a name="exceptions-to-the-rule"></a>Исключения из правила

В Xamarin. iOS и Xamarin. Mac было создано исключение из этого правила. Решение в случае, когда мы `string`предоставляем s, и когда мы делаем исключение и предоставляйте `NSString`s `NSString` , выполняется, если метод может выполнить сравнение указателей вместо сравнения содержимого.

Это может произойти, когда API-интерфейсы задания с использованием общедоступной `NSString` константы в качестве токена, представляющего какое-либо действие, вместо сравнения фактического содержимого строки.

В таких случаях `NSString`  интерфейсы API предоставляются, и существует доля интерфейсов API, имеющих это. Также обратите внимание, что свойства NSString представлены в некоторых классах. Эти `NSString` свойства предоставляются для таких элементов, как уведомления. Эти свойства обычно выглядят следующим образом:

```csharp
class Foo {
     public NSString FooNotification { get; }
}
```

Уведомления — это ключи, которые используются для `NSNotification` класса, если необходимо выполнить регистрацию для конкретного события, транслируемого средой выполнения.

Ключи обычно выглядят примерно так:

```csharp
class Foo {
     public NSString FooBarKey { get; }
}
```

Другое место, `NSString`где s предоставляется в API, представляет собой токены, которые используются в качестве параметров для некоторых API в iOS или OS X `NSDictionary` , принимающих объекты в качестве параметров. Словарь обычно содержит `NSString` ключи. Xamarin. iOS, по соглашению, именует эти `NSString` статические свойства, добавляя имя "ключ".
