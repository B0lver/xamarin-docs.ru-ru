---
title: Широкую цветовую в Xamarin.iOS
description: В этом документе рассматриваются широкую цветовую и как он может использоваться в приложении Xamarin.iOS или Xamarin.Mac. Он также предоставляет высокоуровневый обзор многих важных цветовые концепции, как цветовых схем, каналы и в источниках.
ms.prod: xamarin
ms.assetid: 576E978A-F182-489A-83E4-D8CDC6890B24
ms.technology: xamarin-ios
author: bradumbaugh
ms.author: brumbaug
ms.date: 03/17/2017
ms.openlocfilehash: 173919e0d5feda6ab7d34895cc834c5f36d737a8
ms.sourcegitcommit: ea1dc12a3c2d7322f234997daacbfdb6ad542507
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/05/2018
ms.locfileid: "34788785"
---
# <a name="wide-color-in-xamarinios"></a>Широкую цветовую в Xamarin.iOS

_В этой статье рассматриваются широкую цветовую и как он может использоваться в приложении Xamarin.iOS или Xamarin.Mac._

iOS 10 и macOS Сьерра улучшает поддержку форматов пикселей расширенный диапазон и широким пробелов во всей системе, включая платформы, например Core графики, образ Core, системы и AVFoundation. Поддержка устройства с дисплеями широкую цветовую дальнейшей упрощают, предоставляя это поведение во всем стеке всей графики.

## <a name="about-wide-color"></a>О широкую цветовую

Как уже говорилось выше, iOS 10 и macOS Сьерра улучшает поддержку форматов пикселей расширенный диапазон и широким пробелов во всей системе, включая платформы, например Core графики, образ Core, системы и AVFoundation. Поддержка устройства с дисплеями широкую цветовую дальнейшей упрощают, предоставляя это поведение во всем стеке всей графики.

В 90 Apple создан ColorSync для обработки цвет обработки на компьютере Mac. Они также помогли найти консорциума цветов международной (ICC) для создания и повысить уровень набор стандартов для обработки цвета на оборудовании. Apple с ICC была включена в ColorSync, и он был создан в ядро OS X (теперь называется macOS).

Apple был области технологии отображения с оборудованием, таким как отобразить Сетчатка, новый P3 отображения и отображения P3 цветовое пространство (выпущены в iMac в 2015 г.) и TrueTone отображает в iPad, iPhone 7, а также iPhone 7, а также.

Широкую цветовую в macOS Сьерра и iOS 10 Apple изменяется механизм обработки цвет, который будет использовать все преимущества этих технологий отображения macOS и операций ввода-вывода.

## <a name="core-color-concepts"></a>Основные понятия цвета

Следующие основные понятия цвет должно распространяться перед выполнением более подробное рассмотрение цветом macOS и операций ввода-вывода:

### <a name="color-space"></a>Цветовое пространство

Цветовое пространство — это среда, в которой позволяет представить и сравнивать цвета. Это может быть пробелом от одной до четырех измерений, определяемый интенсивность его компонентов цвета. 

[![](wide-color-images/color00.png "Цветовое пространство")](wide-color-images/color00.png#lightbox)

### <a name="color-channels"></a>Цветовых каналов

Компоненты цвета может также называться цветовых каналов. Некоторые знакомые представления будет RGB пробелы, серый пробелы пространства CMYK или устройства независимых пробелы. 

[![](wide-color-images/color02.png "Компоненты цвета может также называться цветовых каналов")](wide-color-images/color02.png#lightbox)

### <a name="color-primaries"></a>Основные цвета

Основные цвета предоставляют системы координат, который используется для сравнения и вычисления цветов. Основные цвета обычно делятся на наиболее ресурсоемких версии данного цвета, которая может быть создана в канале цвет.

[![](wide-color-images/color01.png "Системы координат, который используется для сравнения и вычисления цветов предоставляют основные цвета")](wide-color-images/color01.png#lightbox)

В случае цветовое пространство RGB, представленные выше, где находятся основные цвета `1.0` являются закрепленными координаты (такие как `[1.0, 0.0, 0.0]` красный).

### <a name="color-gamut"></a>Диапазон цветов

Диапазон цветов ссылается на все цвета, которые могут быть определены как сочетание отдельных цветовых каналов в предоставляют цветовое пространство.

[![](wide-color-images/color03.png "Пример палитру цветов")](wide-color-images/color03.png#lightbox)

## <a name="what-is-wide-color"></a>Что такое широкую цветовую

Перед описанием в разделе широкую цветовую, обсуждение должно было о текущем стандартный цвета — Стандартная цветовое пространство RGB (sRGB). Он является наиболее широко используемых цветовое пространство в вычислениях сегодня и цветовое пространство по умолчанию для операций ввода-вывода и macOS.

SRGB цветовое пространство имеет следующие свойства:

- Он основан на стандарте BT.709 ITU-R.
- Он имеет приблизительное гамма 2.2.
- Он представляет типичный освещении (D65).

Так как sRGB широко используется в отрасли, разработчик может сделать некоторые предположения, цвет, указанный точно представлять на любом устройстве, на котором он отображается на. Тем не менее это может не всегда быть регистр. Кроме того существует несколько цветов, которые не помещаются в sRGB цветовое пространство и таким образом, не могут быть представлены в нем.

Например многие Текстильные изделия спроектированы потоки, использующие много краски и попадающие за пределами sRGB используются. Также многие продукты, которыми пользователь сталкивается в их повседневной жизни создаются с ярких яркие цветов, которые выходят за пределы sRGB цветовое пространство. Некоторые из самых убедительных примеры цветов, которые не могут быть представлены в sRGB, действия по своей природе sunsets, Осенние листья, экзотические цветов и тропический воды.

Пользователей, которые захват цифровых изображений в НЕОБРАБОТАННОМ формате могут иметь изображений на устройствах, которые содержат все данные этого цвета, даже в том случае, если он не может быть неправильно отражено в sRGB цветовое пространство и таким образом невозможно правильно отобразить на экране.

### <a name="the-display-p3-color-space"></a>Цветовое пространство отображения P3

2015 Apple выпущен новый продуктов (iMac и iPad Pro 9,7"), которые предоставляют новые отображения P3 цветовое пространство для обработки ошибок, созданных sRGB цветовое пространство.

[![](wide-color-images/color04.png "Новое пространство цвет для отображения P3")](wide-color-images/color04.png#lightbox)

Цветовое пространство отображения P3 имеет следующие свойства:

- Поддерживает широкий цветовое пространство для современных аппаратных платформ.
- На основе стандарта DCI SMPTE-P3. DCI P3 была разработана для цифровых проекторов, но Apple для поддержки мониторы, была изменена.
- Он имеет приблизительное гамма 2.2.
- Он представляет типичный освещении (D65).

В соответствии с Apple пользователи переходят в своих мобильных платформ рабочих процессов. Устранения проблем презентации цвет, представленный sRGB специалистов мобильных устройств (iPad специалистов), требуется нечто большее, включая широкий Цветной дисплей. Одно из решений было обновление калибровки фабрики, поэтому на обеспечение фабрики, что разных устройствах Цветной дисплей точных и согласованных откалиброван других устройств.

Другим решением является включение управления полных, системные цвета, созданной в iOS 10 и macOS Сьерра Apple. 

### <a name="the-extended-range-srgb-color-space"></a>Расширенный диапазон sRGB цветовое пространство

Для учетной записи для всех существующих приложений iOS, собранных и детально настраивать для sRGB имеет новый цвет всей системы управления iOS 10. Он был разработан, чтобы убедиться, что он не влияет либо цвет представление или приложение производительность эти существующие приложения.

Чтобы решить эту проблему, Apple включила sRGB расширенный диапазон цветовое пространство в iOS 10 (и macOS Сьерра).

Расширенный диапазон sRGB цветовое пространство имеет следующие свойства:

- Предоставляет те же sRGB в источниках.
- Он имеет приблизительное гамма 2.2.
- Он представляет типичный освещении (D65).
- Он поддерживает отрицательные значения и значения больше единицы (1).

Обеспечивая значения меньше нуля и больше единицы, sRGB расширенный диапазон, который цветовое пространство позволяет не только для существующих приложений присутствует цвета в sRGB без с производительностью или искажений, но он позволяет цветовое пространство для представления любой цвет внутри видимых спектра. Все это можно сделать сохраняя же узловые точки — sRGB цветовое пространство.

### <a name="extended-range-srgb-in-action"></a>Расширенный диапазон sRGB в действии

Чтобы увидеть работу значения вне нуля до единицы в расширенный диапазон sRGB цветовое пространство, рассмотрим следующий пример из насыщенность красного в цветовом пространстве экрана P3:

[![](wide-color-images/color05.png "Принципы работы значения вне нуля до единицы в расширенный диапазон sRGB цветовое пространство")](wide-color-images/color05.png#lightbox)

В P3 отображения этот цвет будет представлено как `[1.0, 0.0, 0.0]` и в расширенный диапазон sRGB было бы `[1.358, -0.074, -0.012]`. Из-за полного значения sRGB автономных внутри P3 отображения и отображаемое P3 значения размещения «вне» sRGB диапазонов.

Для физического оборудования, допускающем значения пикселей перейти от extreme положительный результат extreme отрицательные значения он может отображать любой цвет, видимого спектра и эти значения могут быть представлены в расширенный диапазон sRGB цветовое пространство.

### <a name="device-pixel-formats"></a>Форматы пикселей устройства 

Стандартизировать с помощью 8-битный формат пикселей, поскольку чаще всего 8 бит на канал цвета sRGB, цветовое пространство во многом было недостаточно для описания цвета sRGB. Это не идеальное, но достаточно хорошо, и это дает хороший баланс между использования памяти и процессора для отображения изображений.

Поскольку P3 отображения может представлять координаты цвет за пределами цветов sRGB, требуется 16 бит на канал цвета для правильного представления цвета sRGB расширенный диапазон цветовое пространство.

## <a name="system-wide-wide-color-support"></a>Поддержка широкую цветовую во всей системе

В полном объеме поддерживает широкую цветовую и широкого охвата внутри iOS 10 и macOS Сьерра, Apple расширила следующие платформы, чтобы воспользоваться всеми преимуществами sRGB расширенный диапазон цветовое пространство и P3 отображения:

- UIKit (только для iOS)
- SceneKit
- Основные графики
- ImageIO
- Образ Core
- WebKit
- SpriteKit
- Основной анимации
- AppKit (для macOS)

Кроме того, расширенный диапазон sRGB цветовое пространство была усовершенствована поддержка дисплей Retina и отображения P3 отображается.

Широкую цветовую поддерживается и может использоваться в следующих типов содержимого приложения:

- Статическое изображение ресурсы, включенные в пакет приложения.
- Документ и сети на основе ресурсы изображений.
- Дополнительные носители, такие как Live фотографий или изображений в НЕОБРАБОТАННОМ формате.
- 3D шейдера текстуры изображений.

## <a name="solving-the-color-problem"></a>Решением проблемы цвета

Содержимое, отображаемое в приложении могут поступать из широкого диапазона источников rich цвет. Кроме того это содержимое могут отображаться на обширном диапазоне устройств, каждая из которых собственные диапазон возможностей отображения цвета.

Приложение iOS 10 ликвидирует разницу между эти две проблемы, с помощью новых встроенных, системная цвет управления системы. Эта система гарантирует, что изображение выглядит одинаково на любое устройство iOS, независимо от того, какие цветовое пространство образ был закодирован в.

Управление цветом начинается с каждого изображения, имеющих связанный цветовое пространство (или цветовой профиль). Эта информация используется в _процесс сопоставления цветов_ где соответствует цветов в исходном изображении цветов в устройстве вывода. Поскольку каждого пикселя в образе должны быть сопоставлены цвет, его можно продолжительное время и привести к перегрузке после ЦП устройства.

Из-за особенностей _процесс сопоставления цветов_, это преобразование может быть потенциально «потерь», если устройство вывода имеет меньший охват исходного изображения.

К счастью, результаты вычислений, в которых _процесс сопоставления цветов_ могут легко быть с аппаратным ускорением (либо на ЦП или GPU) и Apple гарантирует его работы автоматически путем построения поддержки в базовый систем, таких как двухмерные Quartz ColorSync и основной анимацией. Чтобы воспользоваться преимуществами этих функций без написания кода необходим правильно с тегами содержимого.

Управление цветом поддерживался на каждой платформе следующим образом:

- **macOS** -macOS был цвет, управляемых с момента создания.
- **iOS** -iOS поддерживала управления автоматической цветовой начиная с iOS 9.3 (и более поздние версии).

### <a name="designing-for-wide-gamut"></a>Разработка для охвата широкого

С помощью расширенных цветовой широкого охвата содержимого образа в приложениях iOS и macOS и Apple имеет следующие рекомендации по проектированию:

- Использовать только содержимое широкого охвата убедитесь в себя ведет в приложении, они не должны автоматически использоваться везде.
- Используйте только содержимое широкого охвата где яркие цвета поможет повысить эффективность взаимодействия с пользователем.
- В нет необходимости изменять все содержимое на P3 для существующих приложений.

Цепочка инструментов Apple делает поддержка широкого охвата содержимого образа постепенное включить в программу, поддерживающие широкую цветовую в приложении не подразумевает ситуация.

### <a name="upgrading-existing-content-to-wide-color"></a>Обновление существующего содержимого на широкую цветовую

Apple имеет следующие рекомендации для обновления существующего содержимого образа до широкую цветовую:

- Не только «назначение» профиля P3 содержимое в приложении редактирования изображений. Это просто изменить сопоставление существующего цвета содержимого в новое пространство цвет с непредвиденным результатам, например растяжение цветов, чтобы поместиться в новое пространство, поэтому изменение изображения.
- Изображение потребуется «преобразовать» P3 отображения профиль с помощью редактирования приложения изображений.

### <a name="file-formats-and-color-profiles"></a>Форматы файлов и цветовые профили

Apple имеет следующие рекомендации для форматы файлов и профили цвета, используемые в содержимого образа приложения широкую цветовую:

- Используйте цветовой профиль «Отображения P3» для RGB рабочие пространства.
- Используйте 16 бит на канал цветового режима.
- Используйте iMac Late 2015 (или более поздней версии) для точного предварительного просмотра содержимого образа.
- Экспортируйте графические активы как 16-разрядных PNG-файлы с встроенным профилем ICC «P3 отображения».

> [!IMPORTANT]
> С помощью **сохранить для веб-** или **Экспорт активы** функции найти в наиболее популярных изменения программного обеспечения изображения _не будет_ работы для образов широкую цветовую, поскольку эти функции не были обновлены для поддержки спецификации формата необходимый файл еще.

### <a name="supporting-wide-color-with-asset-catalogs"></a>Поддержка широкую цветовую с каталогами активов

В iOS 10 и macOS Сьерра Apple был расширен каталоги активов используются для включения и классификации статическое изображение содержимое в пакет приложения для поддержки широкую цветовую.

С помощью средства каталоги предоставляют следующие преимущества для приложения:

- Они обеспечивают наилучший вариант развертывания активы статическое изображение.
- Они поддерживают автоматическую коррекцию цвета.
- Они поддерживают автоматическое пикселей формат оптимизации.
- Они поддерживают приложения создания срезов и Thinning приложения, который обеспечивает доставку только содержимое, соответствующие get на устройстве пользователя.

Для поддержки широкую цветовую Apple внес следующие усовершенствования в каталоги активов:

- Они поддерживают 16-разрядное (на канал цвета) исходного содержимого.
- Они поддерживают каталога содержимое, отображаемое палитру. Содержимое можно пометить sRGB или охваты P3 отображения.

Разработчик имеет три параметра для поддержки широкую цветовую содержимое в своих приложениях.

1. **Ничего не делать** -так, как содержимое широкую цветовую должен использоваться только в случае, если приложению требуется для отображения яркие цвета (где они будут улучшить взаимодействие с пользователем), содержимое после окончания этого требования следует оставить как-является. Она будет продолжать правильно отображен во всех ситуациях оборудования.
2. **Обновление существующего содержимого для отображения P3** -это требуется разработчику заменить существующее содержимое образа в их каталоге активов новый обновленный файл в формате P3 и пометить ее таким образом, в редакторе активов. Во время построения образа класс, производный от sRGB будут созданы из этих средств.
3. **Укажите оптимизированными средств содержимого** -в этом случае разработчик предоставить sRGB 8-разрядных и 16-разрядное видение P3 отображения каждого изображения в каталоге активов (правильно с тегом в редакторе активов).

### <a name="asset-catalog-deployment"></a>Каталог развертывания ОС

Если разработчик отправляет в приложение в магазине приложений с каталогами активов, включают широкую цветовую графического содержимого будет произойти следующее:

- При развертывании приложения для конечного пользователя Фрагментирование приложения позволит гарантировать, что соответствующие содержимого вариант доставляется на устройство пользователя.
- На устройстве, которое не поддерживает широкую цветовую нет никаких затрат полезных данных, для включения содержимого широкую цветовую как никогда не поставляется на устройстве.
- `NSImage` на macOS Сьерра (и более поздние версии) автоматически выбирает лучший содержимого представление для отображения оборудования.
- Отображаемое содержимое, автоматически обновляются при или изменить характеристики отображения оборудования устройства.

### <a name="asset-catalog-storage"></a>Хранилище каталога активов

Хранилище каталога активов имеет следующие свойства и последствия для приложения:

- Во время построения Apple пытается оптимизировать хранение содержимого образа через преобразование изображений высокого качества.
- 16 бит используются на канал цвета для широкую цветовую содержимого.
- Сжатие содержимого зависимый образ используется к ухудшению результата размеры содержимого. Для дальнейшей оптимизации размеров содержимого были добавлены новые сжатия «с потерей данных».

## <a name="colors-in-user-interfaces"></a>Цвета в пользовательском интерфейсе

При работе с цветами в пользовательском интерфейсе, большинство из пикселей на экране являются сплошным цветом. Кроме того большая часть этих точек не берутся из активы изображений, однако отображаются непосредственно в приложении (или операционной системы от имени приложения).

Расширенный палитру цветов может вызвать несколько трудности при работе на уровне ИП:

- **Взаимодействие цветов** — при рассмотрении цветов между проектировщикам и разработчикам обычно _предполагается, что_ sRGB участвующих цветовое пространство. Поэтому цвет могут передаваться как `rgb(128, 45, 56)` или `#FF0456`. В структуре широкого охвата эти представления не предоставляют достаточно сведений, чтобы точно представить указанный цвет, рабочее пространство цвет должен быть включен. Предлагает Apple с помощью `P3(128, 45, 56)` и `P3#FF0456` вместо него. 
- **Подбор цветов** - большинства популярных изображения редактирования и разработки программного обеспечения страдает от те же ограничения, что sRGB цветовое пространство при использовании их встроенных палитр. Конструктор следует убедиться, что они находятся в цветовом пространстве «P3 отображения» в палитре цветов при работе со схемами широкую цветовую.
- **Кодирование цвета** — оба `NSColor` (macOS) и `UIColor` (iOS и tvOS) имеют новые удобные методы для создания цвета P3 непосредственно, и оба были расширены для поддержки цветов в расширенный диапазон sRGB цветовое пространство также.
- **Хранение цвета** -следует соблюдать осторожность при хранение охвата широкого цвета в документе приложения. Там, где 8 бит на канал цвета работал правильно, для цветов sRGB, 16 бит на канал цвета можно использовать для широкого цветов. Разработчику необходимо также отслеживать экземпляры принятой цветовое пространство (поскольку в большинстве случаев все, что было sRGB только).

## <a name="colors-on-the-web"></a>Цвета в Интернете

Следует соблюдать осторожность при работе с широкую цветовую в веб-страниц и на устройствах, поддерживающих расширенные Цветной дисплей. Если все графического содержимого, которое было добавлено на веб-сайте соответствующие теги, iOS и macOS автоматически цвета совпадают и правильно отобразить их.

Медиа-запросами также доступны по устранению активы между устройствами, поддерживающими P3 и sRGB:

```xml
<picture>
    <source srcset="monkey-p3.jpg" media="(color-gamut: p3)">
    <source srcset="monkey-rpg.jpg">
</picture>
```

Apple также имеет WebKit предложение, которое позволит CSS с помощью других цветовых схем помимо пространство принятой sRGB.

## <a name="rendering-off-screen-images-in-app"></a>Подготовка к просмотру вне экрана изображений в приложении

В зависимости от типа создаваемого приложения он может позволить пользователю включать графического содержимого, они будут собраны из Интернета или создания изображения содержимого непосредственно внутри приложения (например, векторного рисунка приложения, например).

В обоих случаях приложение может отображать необходимые изображения находятся в широкую цветовую, используя расширенные возможности, добавленные для операций ввода-вывода и macOS.

### <a name="drawing-wide-color-in-ios"></a>Рисование широкую цветовую в iOS

Прежде чем обсуждать как правильно нарисовать изображение широкую цветовую в iOS 10, взгляните на следующий общий код рисования iOS:

```csharp
public UIImage DrawWideColorImage ()
{
    var size = new CGSize (250, 250);
    UIGraphics.BeginImageContext (size);

    ...
    
    UIGraphics.EndImageContext ();
    return image = UIGraphics.GetImageFromCurrentImageContext ();
}
```

Имеются проблемы с стандартный код, который необходимо устранить _перед_ он может использоваться для рисования изображения широкую цветовую. `UIGraphics.BeginImageContext (size)` Метод, используемый для запуска рисования изображения iOS имеет следующие ограничения:

- Не удается создать образ контексты с более чем 8 бит на канал цвета.
- Он не может представлять цвета sRGB расширенный диапазон цветовое пространство.
- Он не имеет возможность предоставить интерфейс создания контекстов в цветовом пространстве не sRGB из-за низкого уровня C подпрограммы, вызываемой в фоновом режиме.

Чтобы обработать эти ограничения и нарисовать изображение широкую цветовую в iOS 10, вместо этого используйте следующий код:

```csharp
public UIImage DrawWideColorImage ()
{
    var size = new CGSize (250, 250);
    var render = new UIGraphicsImageRenderer (size);

    var image = render.CreateImage ((UIGraphicsImageRendererContext context) => {
        var bounds = context.Format.Bounds;
        CGRect slice;
        CGRect remainder;
        bounds.Divide (bounds.Width / 2, CGRectEdge.MinXEdge, out slice, out remainder);

        var redP3 = UIColor.FromDisplayP3 (1.0F, 0.0F, 0.0F, 1.0F);
        redP3.SetColor ();
        context.FillRect (slice);

        var redRGB = UIColor.Red;
        redRGB.SetColor ();
        context.FillRect (remainder);
    });

    // Return results
    return image;
}
```

Новый `UIGraphicsImageRenderer` класс создает новый контекст изображения, может обрабатывать sRGB расширенный диапазон цветовое пространство и он имеет следующие особенности:

- Это полностью управляются по умолчанию цвет.
- Он поддерживает расширенный диапазон sRGB цветовое пространство по умолчанию.
- Интеллектуально решает, если его отрисовки в sRGB или расширенный диапазон sRGB цветовое пространство, в зависимости от возможностей устройства iOS, приложение выполняется на.
- Он полностью и автоматически управляет контекстом изображения (`CGContext`) время жизни, поэтому разработчику не нужно беспокоиться о вызове начинаются и заканчиваются контекстные команды.
- Она совместима с `UIGraphics.GetCurrentContext()` метод.

`CreateImage` Метод `UIGraphicsImageRenderer` класса вызывается для создания образа широкую цветовую и передается с контекстом изображение для отрисовки в обработчик завершения. Все рисование выполняется внутри этого обработчика завершения следующим образом:

- `UIColor.FromDisplayP3` Метод создает новый полностью насыщенный красный цвет в широкий охват отображения P3 цветовое пространство и используется для отрисовки в первой половине прямоугольника. 
- Вторая половина прямоугольника рисуется в обычном sRGB полностью пропускная способность красный цвет для сравнения.

### <a name="drawing-wide-color-in-macos"></a>Рисование в macOS широкую цветовую

`NSImage` Класс была расширена в macOS Сьерра для поддержки рисования широкую цветовую изображений. Пример:

```csharp
var size = CGSize(250,250);
var wideColorImage = new NSImage(size, false, (drawRect) =>{
    var rects = drawRect.Divide(drawRect.Size.Width/2,CGRect.MinXEdge);
    
    var color = new NSColor(1.0, 0.0, 0.0, 1.0).Set();
    var path = new NSBezierPath(rects.Slice).Fill();
    
    color = new NSColor(1.0, 0.0, 0.0, 1.0).Set();
    path = new NSBezierPath(rects.Remainder).Fill();
    
    // Return modified
    return true;
});
```

## <a name="rendering-on-screen-images-in-app"></a>Подготовка к просмотру на экране изображений в приложении

Для подготовки к просмотру широкую цветовую изображения на экране, процесс работает аналогично выводе изображения вне экрана широкую цветовую macOS и iOS, представленной выше.

### <a name="rendering-on-screen-in-ios"></a>Подготовка к просмотру на экране в iOS

Если приложению необходимо отобразить изображение в широкую цветовую на экране в iOS, переопределить `Draw` метод `UIView` рассматриваемый как обычно. Пример:

```csharp
using System;
using UIKit;
using CoreGraphics;

namespace MonkeyTalk
{
    public class MonkeyView : UIView
    {
        public MonkeyView ()
        {
        }

        public override void Draw (CGRect rect)
        {
            base.Draw (rect);

            // Draw the image to screen
            ...
        }
    }
}
``` 

Как и в iOS 10 с `UIGraphicsImageRenderer` класса, показанном выше, интеллектуально решает, если его отрисовки в sRGB или расширенный диапазон sRGB цветовое пространство, в зависимости от возможностей устройства iOS, на котором выполняется приложение, о том, когда `Draw` вызывается метод. Кроме того `UIImageView` цветом управляемых начиная с iOS 9.3.

Если приложение необходимо знать, как сделать визуализации на `UIView` или `UIViewController`, он может проверить новый `DisplayGamut` свойство `UITraitCollection` класса. Это значение будет `UIDisplayGamut` перечисления из следующих действий:

- P3
- SRGB
- Не указан

Если приложение хочет выбирать цветовое пространство используется для рисования изображения, можно использовать новый `ContentsFormat` свойство `CALayer` для указания нужного цветовое пространство. Это значение может быть `CAContentsFormat` перечисления из следующих действий:

- Gray8Uint
- Rgba16Float
- Rgba8Uint

### <a name="rendering-on-screen-in-macos"></a>Подготовка к просмотру на экране в macOS

Если приложению необходимо отобразить изображение в широкую цветовую на экране в macOS, переопределить `DrawRect` метод `NSView` рассматриваемый как обычно. Пример:

```csharp
using System;
using AppKit;
using CoreGraphics;
using CoreAnimation;

namespace MonkeyTalkMac
{
    public class MonkeyView : NSView
    {
        public MonkeyView ()
        {
        }

        public override void DrawRect (CGRect dirtyRect)
        {
            base.DrawRect (dirtyRect);

            // Draw graphics into the view
            ...
        }
    }
}
```

Еще раз, он интеллектуально решает, если его отрисовки в sRGB или расширенный диапазон sRGB цветовое пространство, в зависимости от возможностей оборудования Mac, на котором выполняется приложение, о том, когда `DrawRect` вызывается метод.

Если приложение хочет выбирать цветовое пространство используется для рисования изображения, можно использовать новый `DepthLimit` свойство `NSWindow` класс, чтобы указать нужный цветовое пространство. Это значение может быть `NSWindowDepth` перечисления из следующих действий:

- OneHundredTwentyEightBitRgb
- SixtyfourBitRgb
- TwentyfourBitRgb

## <a name="summary"></a>Сводка

В этой статье был проиллюстрирован широкую цветовую, а также способы, что он может реализуется и используется внутри Xamarin.iOS или Xamarin.Mac приложения.



## <a name="related-links"></a>Связанные ссылки

- [Примеры операций ввода-вывода 10](https://developer.xamarin.com/samples/ios/iOS10/)
