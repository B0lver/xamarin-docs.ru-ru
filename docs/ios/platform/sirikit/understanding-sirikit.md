---
title: "Основные сведения о концепциях SiriKit"
description: "В этой статье рассматриваются основные понятия, которые будут необходимы для работы с SiriKit приложения Xamarin.iOS."
ms.topic: article
ms.prod: xamarin
ms.assetid: 99EC5C1E-484F-4371-8555-58C9F60DE37F
ms.technology: xamarin-ios
author: bradumbaugh
ms.author: brumbaug
ms.date: 03/16/2017
ms.openlocfilehash: 0c1253391673e48f81c12b80719db485d276013d
ms.sourcegitcommit: 73bd0c7e5f237f0a1be70a6c1384309bb26609d5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2018
---
# <a name="understanding-sirikit-concepts"></a>Основные сведения о концепциях SiriKit

_В этой статье рассматриваются основные понятия, которые будут необходимы для работы с SiriKit приложения Xamarin.iOS._


Новые для iOS 10 SiriKit позволяет приложения Xamarin.iOS для предоставления служб, которые доступны пользователю, с помощью Siri и Maps приложения на устройстве iOS. Эта функциональность обеспечивается в один или несколько расширения приложения с использованием нового **целей** и **пользовательского интерфейса целей** платформ.

SiriKit позволяет приложению iOS предоставляют службы, которые доступны пользователю, с помощью Siri и Maps приложения на устройстве iOS с помощью расширений приложения и новых **целей** и **пользовательского интерфейса целей** платформ.

Siri работает с понятием **домены**, групп знать действия для связанных задач. Каждый диалог, приложение будет установлено с Siri необходимо относятся к одной известной службы доменов следующим образом:

- Аудио или видео вызова.
- Резервирования расстояния.
- Управление тренировки.
- Обмен сообщениями.
- Поиск фотографий.
- Отправки или приема платежей.

Когда пользователь выполняет запрос Siri, связанных с одним расширения приложения служб, SiriKit отправляет расширение **намерение** , описывающий запроса пользователя, а также все дополнительные данные. Расширение приложения создает соответствующий **ответ** объекта для заданного **намерение**, с подробными сведениями о том, как расширение сможет обработать запрос.

## <a name="the-intents-and-intents-ui-extensions"></a>Целей и целей расширения пользовательского интерфейса

Siri и приложение Maps взаимодействовать с службам приложения через два разных типа расширения приложения:

- **Способы расширения** -предоставляет Siri и сопоставляется с приложением содержимое и выполняет задачи, необходимые для выполнения любой из поддерживаемых целей.
- **Способы расширения пользовательского интерфейса** -предусматривается пользовательского интерфейса, который будет отображаться содержимое приложения внутри Siri или карты.

Приложение необходимо предоставить способы расширения для поддержки SiriKit и оно отвечает для предоставления сведений, Siri и карты можно предоставить пользователю, а также для обработки целей.

Не обязательно создавать целей расширения пользовательского интерфейса, поскольку Siri обычно обрабатывает все взаимодействие с пользователем, а также имеет стандартных, встроенных пользовательский Интерфейс для предоставления сведений в каждом из поддерживаемых доменов. Предоставляя целей расширения пользовательского интерфейса, можно использовать приложение **пользовательского интерфейса намерение** framework для представления сложных, пользовательские пользовательский интерфейс на базе приложения торговой марки и Дополнительные сведения.

## <a name="siri-and-the-maps-app-role"></a>Siri и ролью приложения карты

Пользовательские запросы произноситься не языка обработаны и проанализированы семантически по Siri, который преобразует эти запросы в практических целей, которые могут справляться с целью расширения.

Maps использует расширения намерение приложения для отображения сведений в интерфейсе карты в ответ на действия пользователя. Например запрос ближайших ресторанов или получения рассматриваются приложения ресторана.

Siri и карты управлять всеми взаимодействие с пользователем и отображение результатов с помощью интерфейса стандартной системы. Расширения роли приложения является главным образом для предоставления данных, который отображается. При необходимости приложение обеспечивают способы расширения пользовательского интерфейса и пользовательский интерфейс для улучшения интерфейса системы по умолчанию.

## <a name="interacting-with-siri-via-sirikit"></a>Взаимодействие с Siri через SiriKit

В этом разделе будет предоставлять общие сведения о том, как SiriKit позволяет пользователю взаимодействовать с приложением, с помощью Siri. Для данного примера мы будем использовать фиктивное MonkeyChat приложения:

[![](understanding-sirikit-images/monkeychat01.png "Значок MonkeyChat")](understanding-sirikit-images/monkeychat01.png#lightbox)

MonkeyChat сохраняет свой собственный контактов книга друзей пользователя, каждый связанный с именем экрана (например, Bobo, например) и пользователь может отправить текст разговоры каждый друг по его отображаемому имени.

Существует множество способов, что пользователь может инициировать взаимодействие с приложением, так как разные люди может стать тот же запрос в различных формах.

Например если пользователю было отправить сообщение их friend Bobo, они имеют следующие диалог с Siri:

_Пользователь: Привет Siri, отправьте сообщение MonkeyChat._<br />
_Siri: Кому?_<br />
_Пользователь: Bobo._<br />
_Siri: Выберите действие приветствие Bobo?_<br />
_Пользователь: Отправьте дополнительные "Бананы"._<br />

Другой пользователь может предоставить тот же запрос, с другой диалога.

_Пользователь: Bobo на MonkeyChat отправьте сообщение._<br />
_Siri: Выберите действие приветствие Bobo?_<br />
_Пользователь: Отправьте дополнительные "Бананы"._<br />

И другой пользователь может сделать запрос более краткую:

_Пользователь: MonkeyChat Bobo отправляйте дополнительные "Бананы"._<br />
_Siri: Ok, отправка сообщения отправьте дополнительные "Бананы" для Bobo на Monkeychat._<br />

Или даже использовать тот же запрос на другом языке.

_Пользователь: MonkeyChat Bobo s'il vous plaît envoyer плюс de bananes._<br />
_Siri: Oui, envoi сообщения s'il vous plaît envoyer плюс de bananes à Bobo sur Monkeychat._<br />

Еще другого пользователя может быть очень подробных сведений в их диалогу.

_Пользователь: Привет Siri, может Пожалуйста не мне приоритет и запустите приложение MonkeyChat для отправки текста с сообщением отправьте дополнительные "Бананы"._<br />
_Siri: Кому?_<br />
_Пользователь: My наиболее pal Bobo._<br />

Кроме того существует множество способов, которые Siri может ответить на запрос, некоторые зависимости от способа создания запроса:

- **Удерживая нажатой кнопку «Главная»** -Siri предоставит дополнительные visual ответы с ограниченной устные обратной связи.
- **С «Эй Siri»** -Siri будет более устные и предоставляют меньше visual ответов.

Siri также настроены для удовлетворения потребностей пользователя специальных возможностей взаимодействия и реагировать в зависимости от их потребностей.

Независимо от того, как выполняется запрос, или как Siri отвечает на запрос Siri обрабатывает диалог с пользователем, и приложение (через его расширения) предоставляет функциональные возможности.

Когда пользователь запрашивает устные Siri, это действия, которым будет следовать Siri:

[![](understanding-sirikit-images/monkeychat02.png "Действия, которым будет следовать Siri")](understanding-sirikit-images/monkeychat02.png#lightbox)

1. Во-первых, Siri принимает аудио пользователя **речи** и преобразует его в текст.
2. Далее, текст преобразуется в **намерение**, структурированный представление запроса пользователя.
3. На основе пожеланий, займет Siri **действия** для выполнения запроса пользователя.
4. Наконец, будут представлять Siri **ответов** (visual и устные) для пользователя, основанное на действии, которое выполняется.

Существует три основных способа, приложения могут участвовать в диалоге пользователя с Siri:

[![](understanding-sirikit-images/monkeychat03.png "Тремя разными способами, что приложения могут участвовать в диалоге пользователей с Siri")](understanding-sirikit-images/monkeychat03.png#lightbox)

1. **Словарь** -это, как приложение сообщает Siri слова, ей необходимо знать для работы с ней.
2. **Логика приложения** — действия, и на основе ответов, которые приложение выполнит указанных целей.
3. **Пользовательский интерфейс** -это необязательно, пользовательские пользовательский интерфейс, приложение может предоставлять его ответы в.

### <a name="example"></a>Пример

Учитывая приведенные выше сведения, изучите, как следующие диалог будет взаимодействовать с приложением MonkeyChat:

_Пользователь: Привет Siri, отправить сообщение Bobo на MonkeyChat._<br />
_Siri: Выберите действие приветствие Bobo?_<br />
_Пользователь: Отправьте дополнительные "Бананы"._<br />

Первая роль, которую приложение принимает диалог — помочь понять речи пользователя Siri:

[![](understanding-sirikit-images/monkeychat04.png "Помогает понять речи пользователей Siri")](understanding-sirikit-images/monkeychat04.png#lightbox)

Siri имеет имя «Bobo» в своей базе данных, но приложения и поделился эти сведения с Siri через словаря. Приложение также помогает понять, что Bobo является получателя, так как он указал их Siri как Siri *контакт*.

Siri знает, что более необходим передачи сообщений, чем просто получателя, чтобы быстро проверит с расширением приложения требуется содержимое сообщения. Так как MonkeyChat, Siri будет реагировать на пользователя с вопроса: *«Выберите действие приветствие Bobo?»*

В приведенном выше примере пользователь отправил ответ, *«"Отправьте дополнительные" Бананы»*, который Siri объединяются в структурированной **намерение**:

[![](understanding-sirikit-images/monkeychat05.png "Siri будет объединять ответ пользователя в структурированных назначение")](understanding-sirikit-images/monkeychat05.png#lightbox)

Структурированный намерение будет содержать следующие сведения:

- **Домен:** сообщения
- **Назначение:** sendMessage
- **Получатель:** Bobo
- **Содержимое:** отправьте дополнительные "Бананы"

В каждом домене есть как набор знать *действия* , можно выполнить в них и на основе домена и действие, ноль многих параметров, которые могут быть включены в назначение отправляются в приложение.

Назначение затем отправляется расширения приложения для обработки. В результате обработки, но цель приложение создаст **IntentResponse** которого будет объединено с целью и параметров, описывающих приложение приложений был с целью включения.

Также будет содержать каждого IntentResponse **код ответа** который сообщает Siri, если приложение не удалось выполнить запрос или нет. Некоторые домены имеют коды ответа конкретных ошибок, которые могут отправляться также.

Наконец, будет включать IntentResponse `NSUserActivity` (например, тех, которые используются для поддержки Рука Off). `NSUserActivity` Будет использоваться для запуска приложения, если ответ требует их, чтобы оставить Siri среды и ввести пароль для его завершения. 

Siri автоматического создания соответствующей `NSUserActivity` для запуска приложения и раскладки, когда пользователь был остановлен в среде Siri. Однако приложение может предоставить свой собственный `NSUserActivity` с настраиваемых сведений, если это необходимо.

После обработки цель и вернул ответ на Siri приложения, он затем возвращает результаты пользователю (устно и визуально):

[![](understanding-sirikit-images/monkeychat06.png "Результаты отображаются для пользователя устно и визуально")](understanding-sirikit-images/monkeychat06.png#lightbox)

Siri содержит несколько встроенных ответа пользовательские интерфейсы для каждого из доменов, доступных для приложения. Тем не менее поскольку MonkeyChat предоставил это дополнительное расширение назначение пользовательского интерфейса, он используется для представления результатов диалога пользователю в приведенном выше примере.

## <a name="the-intent-lifecycle"></a>Блокировка с намерением жизненного цикла

Существует три основных задач, которые расширение приложения необходимо выполнять при работе с целей:

[![](understanding-sirikit-images/monkeychat07.png "Блокировка с намерением жизненного цикла")](understanding-sirikit-images/monkeychat07.png#lightbox)

1. Приложение должно **Разрешить** каждый параметр события. В результате приложение будет вызван устраните несколько раз (один раз на каждый параметр), а иногда несколько раз для одного параметра до согласовать приложения и пользователя был запрошен.
2. Приложение должно **Подтверждение** , его можно обработать запрошенный цель и сообщить Siri об ожидаемый результат.
3. Наконец, приложение должно **обработки** цель и выполните действия, чтобы добиться запрошенный результат.

### <a name="the-resolve-stage"></a>На этапе разрешения

На этапе разрешения помогает понять значения, которые пользователь предоставил и гарантирует, что пользователь фактически означает что произойдет при обработке намерение приложения Siri. 

Этот этап также дает возможность приложению для оказания влияния на поведение Siri во время диалога с пользователем. Чтобы сделать это, приложение будет предоставлять **разрешение ответа**. Существует ряд готовых ответов на различные типы данных, который понимает Siri.

Наиболее распространенной разрешение ответа из приложения будет **успех**, то есть приложение соответствует конкретные данные из параметра (например, имя пользователя экрана) часть данных, ей известно.

Возможны ситуации, когда приложение должно убедиться, что для данного запроса соответствует правильный часть сведений, которые, как известно. В таких случаях будет отправлять **ConfirmationRequired** ответ на вопрос yes или no пользователю например *«Отправка сообщения в Bobo широкие?»*

Возможно, других случаях, когда приложению требуется пользователю выбрать из краткого списка параметров. В этом случае приложение будет предоставлять **устранения неоднозначности** ответ, содержащий список параметров два — 10 для пользователя, такие как выбор: 

```csharp
Who do you want to message?

* Bobo the Great
* Bobo Jr.
* Little Bobo
```

Siri будет обрабатывать выделения устно и, взаимодействуя с помощью пользовательского интерфейса Siri пользователя и результат будет отправляться обратно в приложение.

В других случаях может быть достаточно сведений для приложения для решения параметр или может быть слишком много соответствий для устранения неоднозначности (например, 80 пользователей с Bobo в именах) с помощью. В этом случае приложение будет отправлять **NeedsMoreDetails** ответа и Siri предложит пользователю указать значение более точно.

Если пользователь не вводит значение, которое требуется для него назначение процессу, он может отправить **NeedsValue** ответ имеют Siri запрашивать у пользователя значение.

Если приложение не поддерживает значение, предоставленное пользователем для определенного параметра, он может отправить **UnsupportedWithReason** ответа, чтобы указать причину, почему значение не поддерживается. Siri затем пользователю будет предложено ввести полностью новое значение и учитывая их по причине она требуется.

Наконец, используйте **NotRequired** ответ, чтобы определить Siri, что приложение не требует значение для данного параметра. Если пользователь все равно предоставляет один, он просто будет игнорироваться, Siri.

### <a name="the-confirm-stage"></a>На этапе подтверждения

На этапе подтверждения служит двум целям:

- Чтобы сообщить Siri ожидаемый результат обработки целью, чтобы Siri можно уведомить пользователя, что должно произойти.
- Дает возможность проверку все необходимые состояния приложения может потребоваться выполнить запрос, представленный пользователя, такие как наличие достаточно деньги в банке запрошенного платежей.

Приложение будет предоставлять **ответа намерение** из шага подтверждения, должны устанавливаться как большой объем информации приложения имеет доступны, поэтому Siri можно его эффективное взаимодействие с пользователем.

В зависимости от типа домена и действие Siri может запросить у пользователя подтверждение, такие как до отправки платеж или игнорировать резервирования.

### <a name="the-handle-stage"></a>Дескриптор рабочей области

На этапе обработки является наиболее важной частью работает с целью, так как он является точкой, где приложение выполняет запрос пользователя, для выполнения задачи, которую запросил делать.

Приложения так же, как и на этапе подтверждения, должен обеспечить как можно больше сведений о результате Siri можно связать пользователя. Иногда эти сведения будут представлены визуально или других случаях Siri будет просто обратитесь к пользователю. 

Может возникнуть ситуации, когда приложение может потребоваться много времени для обработки данного запроса, такие как сетевые задержки вызова или если динамической пользователю требуется для выполнения запроса (например, завершение работы и доставки заказа или в своем автомобиле папку пользователя). Время ожидания ответа от приложения Siri, ожидания пользовательского интерфейса будет отображаться для пользователя о том, что приложение обрабатывает запрос.

В идеальном случае приложения должен предоставить Siri ответ в течение двух до трех секунд не более. Если приложение знает, может занять больше времени для обработки будет указанного ответа, необходимое для отправки **InProgress** код ответа для Siri. Siri сообщит о пользователь обрабатывает запрос в фоновом режиме и будет продолжать сделать это, даже если они покидают Siri среды приложения.

## <a name="adding-sirikit-to-the-app"></a>Добавление SiriKit для приложения

С SiriKit в iOS 10 Apple создала две новые точки расширения:

- **Способы расширения** — предоставляет Siri содержимое приложения и выполняет задачи, необходимые для выполнения любой из поддерживаемых целей.
- **Способы расширения пользовательского интерфейса** -предоставляет пользовательского интерфейса, который будет отображаться для приложений содержимого внутри Siri. 

Также является API-Интерфейс для предоставления Siri для облегчения распознавания в виде слова и фразы:

- **Словарь приложения** -слова и фразы, которые являются общими для каждого пользователя приложения.
- **Словарь пользователя** -слова и фразы, которые являются уникальными для пользователя приложения.

## <a name="the-intents-extension"></a>Расширение цели

Расширение целей отвечает за обработку основных взаимодействий между приложением и Siri следующим образом:

[![](understanding-sirikit-images/intents01.png "Расширение цели")](understanding-sirikit-images/intents01.png#lightbox)

Расширение цели может поддерживать один или несколько целей, разработчик должен решить, как они должны реализовать SiriKit в приложении. Разработчик также добавить отдельное назначение расширение для каждой цели требуется обработать.  С другой стороны, Apple запросов, что разработчик ограничить число намерение расширения, чтобы Siri не имеет несколько процессов, открытых для приложения, которых требуется больше памяти и времени для обработки.

Разработчику необходимо принимать во внимание намерение расширения, которые будут выполняться в фоновом режиме, пока активно Siri. Это позволяет Siri активно выполнять диалога с пользователем во время связи с расширением для обработки сведений о запросе.

## <a name="privacy-and-security-considerations"></a>Вопросы безопасности и конфиденциальности

Apple были предприняты никакие значительные меры, чтобы убедитесь, что пользователь частной, сведения о безопасности при работе с Siri и таким образом, существует несколько взаимодействия, которые пользователь должен войти на устройстве iOS. Например, при запросе расстояния или способах оплаты.

Кроме того существуют конкретные режимы, которые приложение может ограничить пользователя, регистрируются в устройство. В подобных случаях приложение может запросить **ограничения во время блокировки** поведение. Это выполняется через параметр в `Info.plist` файла.

Платформа локальной проверки подлинности для модуля цель, приложение может запрашивать у пользователя Дополнительные сведения для проверки подлинности, даже если устройство уже разблокирована.

И, наконец Apple Pay доступен для расширения цель, приложение может завершить транзакцию с помощью Apple Pay и встроенные Apple Pay листа будет отображаться над интерфейс Siri.

Кроме того, Apple хочет убедиться, что пользователи знает, когда они отправляют сведения приложению сторонних производителей и таким образом, пользователь **должен** сказать определенное имя приложения (как указано в отображаемое имя пакета приложения) при выполнении запроса.

Apple разработала Siri для выполнения естественным, жидкости диалоги с пользователем и по этой причине, имя пакета приложения можно использовать много частей речи, везде, где он соответствует естественным образом в запросе пользователя.

Одно из действий, которое пользователи будут выполнять является «verbify» имя приложения, другими словами, как имя приложения и использовать его как команда в запросе. Например *«MonkeyChat Bobo эти были отлично "Бананы".»*

## <a name="the-intents-ui-extension"></a>Способы расширения пользовательского интерфейса

Расширения пользовательского интерфейса для целей представляет возможность выпуска пользовательского интерфейса приложения и фирменной символики в среду Siri и пользователей, которые вы подключены к приложению. Данное расширение приложение может обеспечить фирменной символики, а также visual и других сведений на запись.

[![](understanding-sirikit-images/intents02.png "В выходных данных примера целей расширения пользовательского интерфейса")](understanding-sirikit-images/intents02.png#lightbox)

Расширения пользовательского интерфейса целей всегда будет возвращать `UIViewController` и приложения можно добавлять хочет внутри представление контроллер, например отображение дополнительных сведений, выходит за рамки первого ответа. Пользовательский Интерфейс целей можно также обновить пользователя с состоянием длительных события, например насколько дольше будет игнорировать, автомобиль до их положения для управления доступом.

Расширения пользовательского интерфейса целей будут всегда отображаться вместе с другим содержимым Siri как значок приложения и имя в верхней части пользовательского интерфейса или, на основе пожеланий, кнопок (например, отправки или "Отмена") может быть отображен в нижней.

Существует несколько экземпляров, где приложение может заменить сведения, Siri отображения для пользователя по умолчанию, например системы обмена сообщениями или карты, где приложения можно заменить по умолчанию среда для приложения.

> [!IMPORTANT]
> Хотя можно добавлять интерактивные элементы, такие как `UIButtons` или `UITextFields` для расширения пользовательского интерфейса намерение `UIViewController`, эти строго недопустимы в качестве намерения пользовательского интерфейса в неинтерактивной и пользователь не сможет взаимодействовать с ними.

Совершенно необязательно для приложения для предоставления намерение расширения пользовательского интерфейса, поскольку Siri содержит набор по умолчанию пользовательского интерфейса для каждого типа намерения. Кроме того интерфейсы целей пользовательского интерфейса доступны только для определенных целей, что Apple рассматриваются как бы полезными для пользователя.

## <a name="adding-sirikit-vocabulary"></a>Добавление SiriKit словаря

Заключительная часть реализации SiriKit находится в пределах приложения, предоставляя необходимые словаря. Многие приложения имеют уникальные способы задания сведения для пользователей и с оригинальным способом, что пользователь будет предоставлять сведения в приложение.

По этой причине Siri требуется помощь приложения для понимания слов и фраз, уникальные для приложения. Некоторые из этих фраз будут часть приложения, чтобы каждый пользователь будет знать и понимать их. Еще другие будут уникальны для данного пользователя приложения.

### <a name="app-specific-vocabulary"></a>Словарь определенного приложения

Терминологию конкретного приложения определяет конкретные слова и фразы, которые будет доступно для всех пользователей приложения, например типов транспортных средств или тренировки имена. Так как они являются частью приложения, они определены в `AppIntentVocabulary.plist` файле как часть пакета основным приложением. Кроме того эти слова и фразы должно быть локализовано.

Словарь, состоит из нескольких частей `AppIntentVocabulary.plist` файла:

- **Пример приложения использует** -они предоставляют ряд распространенных вариантов использования для запросов, которые пользователь может принять приложения. Например: *«Запуск тренировки с MonkeyFit».*
- **Параметры** -они предоставляют набор типов нестандартных параметров, относящиеся к приложению. Например имена тренировки MonkeyFit приложения. Они состоят из:
    - **Фраза** -позволяет приложению определить условия, уникальный для приложения. Например: тип тренировки «Bananarific» для приложения MonkeyFit. 
    - **Произношение** -дает указания произношения для Siri как простой правильность транскрипции, заданной фразы. Например, «определенная ri nana бизнес-аналитики».
    - **Пример** -приведен пример использования данного фразы в приложении. Например *«Запустить Bananarific в MonkeyFit»*.

Дополнительные сведения см. в разделе Apple [ссылка на формат файла словаря приложения](https://developer.apple.com/library/prerelease/content/documentation/Intents/Conceptual/SiriIntegrationGuide/CustomVocabularyKeys.html#//apple_ref/doc/uid/TP40016875-CH10-SW1).

### <a name="user-specific-vocabulary"></a>Словарь определенных пользователем

Словарь определенных пользователем должен предоставить слов или фраз, которые являются уникальными для отдельных пользователей приложения. Они будут представлены во время выполнения из основного приложения (не расширения приложения) в виде упорядоченный набор терминов, упорядоченные в наиболее значимых приоритет использования для пользователей с наиболее важные термины в начале списка.

Рассмотрим пример приложения MonkeyChat, представленной выше. MonkeyChat хранит список всех контактов пользователя, которые отправляет Siri через словарь определенных пользователем. Он также хранит список 10 последних контактов, которые пользователь сообщения регистрируются и имеет набор контакты Избранное для каждого пользователя. В этом примере избранных контактов должен быть в начале наш словарь конкретного пользователя, следуют последние контакты затем остальная часть контактов пользователя.

Поддерживает следующие типы данных словаря конкретного пользователя.

- Имя контактного лица.
- Имена тренировки.
- Названия альбомов фото.
- Ключевые слова фото.

Если приложение использует iOS адресную книгу, приложение не будет предпринимать никаких действий, как эта информация уже доступна для Siri. Приложения должен предоставить контактных имен, если приложение имеет свой собственный уникальную базу данных контактов.

При разработке терминологию, обеспечивают только необходимые значения, которые пользователи знать и важна. Не следует предоставлять сведения, например номер телефона или адрес электронной почты.

Приложение, также необходимо обновлять Siri немедленно в том случае, когда изменяется словарь определенных пользователем. Пользователи привыкли запросе информации из Siri момент добавлена на своем устройстве iOS. Например если пользователь добавит новый контакт в приложении, отправьте эти сведения Siri как только пользователь сохраняет его.

Более того, приложение _должен_ удалить сведения из словаря Siri незамедлительно, так как пользователь может стать расстраивать, если они удаляются часть информации, но Siri по-прежнему распознаются часов или дней.

> [!IMPORTANT]
> Приложение должно удалить все словарь определенных пользователем из Siri, если пользователь выберет Сброс приложения или их выхода из системы.

## <a name="sirikit-permissions"></a>SiriKit разрешения

Заключительная часть SiriKit выравнивается по центру вокруг разрешения. Так же, как с помощью других функций операций ввода-вывода (например, фотографии, камеры или контакты), пользователям необходимо предоставить явное разрешение для приложения, связавшись с Siri.

Это приложение может предоставить строку, определяющую, какие сведения, он будет предоставлять Siri и понять о том, почему пользователь должен предоставить такой доступ. 

Приложения должны запрашивать разрешение у пользователя, чтобы использовать время Siri первый пользователь открывает приложение после обновления для операций ввода-вывода 10 предлагает Apple. Это так, что сведения об интеграции Siri пользователей и можно предварительно утвержденные использование до внесения их первого запроса.

## <a name="sirikit-and-maps"></a>SiriKit и карты

SiriKit является неотъемлемой частью использования операций ввода-вывода и используют более крупной платформы целей добавлены iOS 10. Платформа целей была разработана для совместного использования общих и общих действий и целей с другими частями системы.

Платформа целей выходит за рамки просто Siri интеграции и содержит другие функции, такие как интеграция контактов, где приложение может стать телефонии по умолчанию или обмена сообщениями приложения для конкретных контактов. Способы также предоставляют тесная интеграция с CallKit для предоставления пользователям возможности наилучшее взаимодействие VOIP.

Сопоставления приложения в iOS 10 были добавлены функции, например расстояния общий доступ к которой пользователь можно регистрировать игнорировать непосредственно в пользовательском Интерфейсе карты. SiriKit обеспечивает общую точку расширения с картами, чтобы игнорировать целей управления доступом (и другие) может совместно использоваться Siri и карты. 

Это означает, что если приложения была внедрена SiriKit расширения, она также интеграции карты бесплатно. 

## <a name="designing-a-great-siri-experience"></a>Проектирование прекрасные возможности для Siri

Проектирование удобную работу пользователя при установке приложения в Siri отличается от создание превосходных приложений пользовательского интерфейса. В отличие от обычных ситуациях, когда пользователь взаимодействует с приложением напрямую на экран, при использовании Siri существует очень часто при visual интерфейс не отображается вообще. Например, когда пользователь начинает диалог с *«Эй Siri»*.

### <a name="how-siri-helps-the-developer"></a>Как Siri помогает разработчик

При разработке приложения взаимодействия с Siri, приложение будет построение *сетевого интерфейса*, то есть контекста является производным от диалога, для которого Siri с пользователем, от имени приложения.

При отсутствии визуального образца пользователь должен хранить список информация в их head. По этой причине Siri представляется исходного состояния системы минимум сведений, необходимых для достижения задачу, пользователь, которым необходимо выполнить.

Сетевого интерфейса имеет форму, вопросы и ответы от пользователя и Siri во время диалога. Поэтому очень важно решить, каким образом Siri задает вопроса и реагирующее на создание этого интерфейса.

Рассмотрим следующий пример создает сообщение, Siri может ответить на вопрос пользователя *«Готовые для отправки ему?»* . Пользователь может реагировать разными способами, например *«Отправить»*, *«Отмена»* или даже полностью связан с этим вопросом. Независимо от того, как диалога следовали Siri будет обрабатывать его для приложения и только отправку актуальную информацию мере доступности.

Существует несколько способов, что пользователь может инициировать диалог с Siri:

- Выбирая устройства, нажав кнопку «домой». В этом случае Siri появятся дополнительные интерфейсы visual и меньше устные ответов.
- Заявляет, *«Эй Siri»* , а затем запустить руки свободного диалога. В этом случае Siri будет более устные и менее visual.
- С помощью специальных возможностей, таких как bluetooth включен слуха вспомогательные средства, где можно настроить пользовательский Интерфейс для пользователей с особыми потребностями.
- С помощью Car воспроизведения, где требуется хранить их внимания пользователя основное внимание уделено эффективность за счет отвлекающие факторы к минимуму.

### <a name="how-the-developer-helps-siri"></a>Как разработчик помогает Siri

При установке приложения с Siri, разработчику необходимо протестировать часто такая интеграция и убедитесь, что они выполняют множество различных запросов, задав для той же части сведений или задачи несколькими способами, как можно.

Так как никакие два человека задержек так, при этом очень важно, разработчик получает тест-инженеры столько разных бета-версии можно для тонкой настройки интеграции Siri. Пользователи могут запросить сведения или делать запросы способами разработчик никогда не объекта и этот точной настройки может помочь обеспечить прекрасные возможности с помощью собственных приложений с Siri обширных группы пользователей.

Проверьте в различных ситуациях и сред. Инициирующие диалоги с Siri любым способом, можно гарантировать, что этих диалогов останутся жидкости и естественной. Тестирование в местах, где пользователь будет более скорее всего, использовать приложение, как и в центр тренажерном зале.

Убедитесь, что приложение содержит все сведения, что Siri для правильного представления запроса и результата для пользователя. Это особенно важно при использовании Siri в руках свободного ситуации.

### <a name="siri-design-guidelines"></a>Рекомендации по проектированию Siri

Всегда помните, что Siri возникают диалога с пользователем, от имени приложения. Разработчик хочет сомнения в том, что этот диалог остается как жидкости и естественным максимально.

Как и любой важного диалога, разработчику необходимо убедиться в следующем:

- Что приложение подготовлено для диалога.
- Приложение ожидает только пользователь пытается выполнить.
- Что приложение запрашивает соответствующие вопросы в нужное время.
- Что приложение отвечает на запрос с данными, поиск пользователя.

#### <a name="preparing-for-the-conversation"></a>Подготовка для диалога

В первую очередь необходимо помнить — пользователи приложения не требуется быть так же, как разработчик. Они могут поступать из разных стран, говорящих на разных языках или имеют особые потребности при работе с приложением.

Кроме того поскольку разработчик разрабатываются и создаются приложения, они имеют глубоко; глубоких знаний и приложения и его внутренней работы и функции, пока пользователь не будет. Поэтому разработчик может попросить запрос Siri иначе, чем обычный пользователь.

Именно поэтому крайне важно иметь как много разных людей, как можно взаимодействовать с приложениями с помощью Siri. Пользователи могут выполнять запросы приложение через Siri, разработчик никогда не имеет рассматривать или в сценарии, в которых разработчик не рекомендуется.

#### <a name="ensure-the-app-is-a-good-listener"></a>Убедитесь, что приложение является хорошим прослушивателя

Разработчик должен убедиться, что приложения является хорошим прослушивателем и скоро диалога особенности, которые соответствуют требованиям пользователя. Но возможно, что они могут не предоставлять все сведения, необходимые приложению для обеспечения требуемой задачи.

Существует несколько способов, что приложение может справиться с такой ситуацией:

- **Выбрать оптимальное значение по умолчанию значение отсутствует** — например расстояния, приложение для управления доступом может по умолчанию к текущему расположению пользователя, если они не были указаны, где они хотели считываются из.
- **Сделать более или менее точный** -с помощью определенные сведения, собранные приложения на пользователя, приложения смогут марки и менее точный на отсутствующие данные, например заполнение отсутствует номер мобильного телефона из контактные данные пользователя. Однако следует соблюдать осторожность во избежание неправильный непредвиденных ситуаций, таких как комплектации самый дорогостоящий вариант, и т. д.
- **Запрашивать Подробнее** -приложение может иметь Siri запрашивать у пользователя отсутствует значение. Тем не менее основная идея является обеспечение безопасности диалогов простой и к точке. Пользователи скоро станет разочарованы, если им требуется ответить на несколько вопросов для достижения свой запрос.
- **Достоверной корректной обработки** -пользователь может указать значение, приложение не ожидает или что он не может обработать в данном контексте. Убедитесь, что приложение относится пользователю в способом, который делает и понимания их для устранения этой ситуации.

Когда приложение получает одно значение, которое не гарантируется, предпочтительным способом решения этой — иметь Siri запрашивать подтверждение пользователя. Например *«Имелось в виду Bobo широкие?»* , которой может ответить с простым решением yes или no.

Есть ситуация, где несколько возможных вариантов может быть правильным для одного значения, устранения неоднозначности при обработки предпочтительный метод. В этом случае Siri можно предложить пользователю выбрать до десяти возможных варианта. Пример:

```csharp
Who do you want to send the message to?

* Bobo the Great!
* Bobo Jr.
* Little Bobo
```

Если по-прежнему в вопрос, имеют Siri запрашивать пользователя для предоставления совершенно новый, более конкретные ответов для определенного значения.

#### <a name="request-final-confirmation"></a>Конечное Подтверждение запроса

Прежде чем приложение фактически выполняет задачи для выполнения запроса пользователя, Siri проверит с расширением приложения, чтобы убедиться, что все данные на месте. Например у пользователя достаточно деньги в своей учетной записи для запрошенного оплаты?

Кроме того приложение, необходимо убедиться, что она предоставляет все возможные сведения для Siri, может предлагать пользователю и убедитесь, что задача будет выполняться соответствует их требованиям.

Как только пользователь подтвердила запрос и приложение производит его приложения необходимо снова убедитесь, что он предоставил все результаты обратно в Siri, его можно связать с пользователем.

#### <a name="responding-to-the-request"></a>Отвечает на запрос

Siri содержит несколько встроенных пользовательских интерфейсов для каждого из доменов и действия, которые ему известно. Однако при необходимости приложение может предоставить пользовательское расширение пользовательского интерфейса намерение расширить возможности пользователя, предоставляя приложения фирменная символика и пользовательского интерфейса или больше информации, чем присутствовал в запросе.

С другой стороны, солидарности следует использовать при разработке пользовательских интерфейсов для Siri. Как правило пользователь хотят получить как можно быстрее выполнить конкретную задачу и не хотите перегрузить с ненужные сведения.

Должны также соблюдать осторожность, чтобы пользовательского интерфейса выглядит и работает исправно во всех устройств различных операций ввода-вывода и ориентацию, пользователь может иметь или устройства.

При необходимости используйте SiriKit API Чтобы скрыть все избыточные сведения, присутствующие в Siri пользовательский Интерфейс по умолчанию. Еще убедитесь, что приложение по-прежнему содержит сведения для Siri, он может представлять устно в руках свободного ситуациях.

Может возникнуть ситуация, где Siri приводит к запуску приложения для удовлетворения запроса пользователя, например фотографии, которые пользователь запросил представления. В таких ситуациях не неожиданными для пользователя. Отображение ожидаемые данные без необходимости промежуточные этапы, а также дополнительные участия. Никогда не будут отображаться сведения или выполнять задачи, которую пользователь не ожидается.

### <a name="polishing-the-design"></a>Доводку структуры

Существуют несколько шагов, которые предлагают Apple для польского языка разработки сетевого интерфейсов. Во-первых — на примерах очистить и понятный терминологию и использования регистра для Siri.

Является одним из способов, что пользователь находит приложения, запуская диалог с Siri и запросом, *«Что можно сделать?»* Siri будут отображены несколько различных действий, его можно сделать, включая приложение разработчика и героя пример использования вариантов, которые он предоставил через его `plist` файла.

Способы написания хороший пример вариантов использования:

- Убедитесь, что примеры содержат имя приложения.
- Сохраните пример коротких и для точки.
- Предоставляют несколько примеров для этих целей, которые поддерживает приложение.
- Назначение приоритетов для целей и примеры их зависимости от наиболее распространенные варианты использования для приложения.
- Убедитесь, что приложение содержит локализованные примеры.
- Убедитесь, что каждый пример получает работает должным образом в приложении.
- Избежать адресации в примерах, чтобы не включать текст, например Siri *«Эй Siri...»*
- Например избежать все ненужные pleasantries *«обратитесь»* или *«Спасибо»*.

Выполнить соответствующее время для изучения и поэкспериментировать на способ формирования диалога, для которого Siri с пользователем, от имени приложения. Убедитесь, что возможность общаться с обычные пользователи на протяжении всего процесса, как их взаимодействия с и ожиданиям приложения могут измениться с течением времени.

Не забывайте тестировать приложение в различных ситуациях и все различные методы для вызова диалог с Siri. Тест в реальном мире местах пользователь может использовать приложения office и службы поддержки.

Стремиться к побеседовать с Siri (от имени приложения) жидкости, естественного и «испытывать просто». 

## <a name="summary"></a>Сводка

В этой статье рассматриваются основные понятия, необходимые для использования SiriKit и показано, что он может взаимодействовать с приложениями Xamarin.iOS для предоставления служб, которые доступны пользователю, с помощью Siri и Maps приложения на устройстве iOS.




## <a name="related-links"></a>Связанные ссылки

- [Образец ElizaChat](https://developer.xamarin.com/samples/monotouch/ios10/ElizaChat/)
- [Руководство по программированию SiriKit](https://developer.apple.com/library/prerelease/content/documentation/Intents/Conceptual/SiriIntegrationGuide/index.html)
- [Справочник по Framework целей](https://developer.apple.com/reference/intents)
- [Способы ссылке платформы пользовательского интерфейса](https://developer.apple.com/reference/intentsui)
