---
title: Основные сведения о понятиях SiriKit
description: В этом документе описываются основные понятия, необходимые для работы с SiriKit в приложении Xamarin.iOS. Например, здесь описываются способы реализации и проектировании расширения интерфейса Intents UI, SiriKit разрешения, удобной и многое другое.
ms.prod: xamarin
ms.assetid: 99EC5C1E-484F-4371-8555-58C9F60DE37F
ms.technology: xamarin-ios
author: lobrien
ms.author: laobri
ms.date: 05/02/2017
ms.openlocfilehash: b2a9e757e8a3407bbb19ae0580e5788eabe84cf0
ms.sourcegitcommit: 849bf6d1c67df943482ebf3c80c456a48eda1e21
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/12/2018
ms.locfileid: "51528875"
---
# <a name="understanding-sirikit-concepts"></a>Основные сведения о понятиях SiriKit

_В этой статье рассматриваются основные понятия, которые будут необходимы для работы с SiriKit в приложении Xamarin.iOS._


Новое в iOS 10, SiriKit позволяет приложения Xamarin.iOS для предоставления служб, доступных для пользователя с помощью Siri и приложения карты на устройстве iOS. Эта функциональность обеспечивается в один или несколько расширение приложения с помощью нового **Intents** и **интерфейса Intents UI** платформ.

SiriKit позволяет приложению iOS предоставлять услуги, которые доступны пользователю через Siri и приложения карты на устройстве iOS с помощью расширения приложений и новый **Intents** и **интерфейса Intents UI** платформ.

Siri работает с концепцией **домены**, групп знать действия для связанных задач. Каждое взаимодействие с приложения с Siri необходимо относятся к одной из своих доменов известной службы следующим образом:

- Аудио- или видеосвязь.
- Резервирования поездки.
- Управление тренировок.
- Обмен сообщениями.
- Поиск фотографий.
- Отправлять или получать платежи.

Когда пользователь выполняет запрос Siri, связанных с одним расширение приложения служб, SiriKit отправляет расширение **намерение** объект, который описывает запрос пользователя, а также все дополнительные данные. Расширение приложения затем создает соответствующий **ответа** объекта для заданного **намерение**, о том, как расширение может обработать запрос.

## <a name="the-intents-and-intents-ui-extensions"></a>Intents и Intents расширения пользовательского интерфейса

Siri и приложения карт взаимодействовать со службами приложений через два разных типа расширений приложений:

- **Расширение intents** -предоставляет Siri и карт с приложением содержимое и выполняет задачи, необходимые для выполнения любой поддерживаемой намерения.
- **Расширение intents UI** -предоставляет пользовательского интерфейса, который будет отображаться для содержимого приложения внутри приложения Siri или карты.

Приложение необходимо предоставить расширение Intents для поддержки SiriKit и он отвечает, для предоставления сведений, Siri и карт могут предоставить пользователю, а также для обработки намерения.

Создание расширения пользовательского интерфейса Intents является необязательным, так как Siri обычно обрабатывает все взаимодействия с пользователем, а также имеет стандартных, встроенных пользовательский Интерфейс для представления информации в каждом из поддерживаемых доменов. Предоставляя расширение Intents UI, приложение может использовать **пользовательского интерфейса намерение** framework для представления многофункциональных, настраиваемых пользовательский интерфейс на базе торговой марки приложения, а также дополнительные сведения.

## <a name="siri-and-the-maps-app-role"></a>Siri и роли приложения карт

Пользовательские голосовые запросы используют языковые настройки обработки и анализа семантически по Siri, который превращает эти запросы в практические способы, которые может обработать цель расширения.

Maps использует расширения намерение приложения для отображения сведений в интерфейс сопоставления в ответ на действия пользователя. Такие как запрос ближайших ресторанов или получение просматривает ресторана приложения.

Siri и карт управлять всеми взаимодействие с пользователем и отобразить результаты в интерфейсе стандартной системы. Расширения роли приложения является главным образом для предоставления данных, отображаемый. При необходимости приложение может предоставить расширение Intents UI и пользовательский интерфейс для улучшения интерфейса системы по умолчанию.

## <a name="interacting-with-siri-via-sirikit"></a>Взаимодействие с Siri через SiriKit

В этом разделе будут представлены общие сведения о том, как SiriKit позволяет пользователю взаимодействовать с приложением, с помощью Siri. Для данного примера мы будем использовать фиктивное приложение MonkeyChat:

[![](understanding-sirikit-images/monkeychat01.png "Значок MonkeyChat")](understanding-sirikit-images/monkeychat01.png#lightbox)

MonkeyChat сохраняет свой собственный контактов книга друзей пользователя, каждый связанный с именем экрана (например, Bobo для примера) и пользователь может отправить текст обсуждения каждый друг по его отображаемому имени.

Существует много способов, что пользователь может инициировать взаимодействие с приложением, так как разные люди могут сделать того же запроса в различных формах.

Например если пользователь хочет отправить сообщение их friend Bobo, ему может потребоваться следующие диалог с Siri:

_Пользователь: Привет Siri, отправить сообщение MonkeyChat._<br />
_Siri: Кому?_<br />
_Пользователь: Bobo._<br />
_Siri: Что вы хотите сказать Bobo?_<br />
_Пользователь: Отправьте дополнительные Bananas._<br />

Другой пользователь может предоставить тот же запрос с помощью разных диалога.

_Пользователь: Bobo на MonkeyChat отправьте сообщение._<br />
_Siri: Что вы хотите сказать Bobo?_<br />
_Пользователь: Отправьте дополнительные bananas._<br />

И другой пользователь может выполнять даже короче запрос:

_Пользователь: MonkeyChat Bobo отправьте дополнительные bananas._<br />
_Siri: Итак, отправка сообщения отправьте дополнительные bananas Bobo на Monkeychat._<br />

Или даже использовать тот же запрос на разных языках программирования:

_Пользователь: MonkeyChat Bobo s'il vous plaît envoyer, а также de bananes._<br />
_Siri: Oui, envoi сообщения s'il vous plaît envoyer плюс de bananes а Bobo sur Monkeychat._<br />

Пока другой пользователь может быть очень подробным в их диалогу:

_Пользователь: Привет Siri, возможность обратитесь мне писали и запустите приложение MonkeyChat для отправки текста с сообщением, пожалуйста, отправьте дополнительные bananas._<br />
_Siri: Кому?_<br />
_Пользователь: Мой лучший pal Bobo._<br />

Кроме того существует много способов, которые Siri может ответить на запрос, некоторые зависимости от того, как был сделан запрос:

- **Удерживая кнопку Home** -Siri предоставит дополнительные visual ответов с ограниченной устные обратной связи.
- **«Эй Siri»** -Siri будет более устные и предоставления меньше visual ответов.

Siri также настроены для удовлетворения потребностей специальных возможностей пользователя и будет взаимодействовать и отвечать в зависимости от их потребностей.

Независимо от того, как выполняется запрос, или как Siri отвечает на запрос Siri обрабатывает диалог с пользователем, и приложение (через его расширениям) предоставляет функциональные возможности.

Когда пользователь делает устных запросах Siri, ниже приведены действия, которые выполнить Siri.

[![](understanding-sirikit-images/monkeychat02.png "Действия, которые выполнить Siri")](understanding-sirikit-images/monkeychat02.png#lightbox)

1. Во-первых, Siri принимает аудио пользователя **речи** и преобразует его в текст.
2. После этого текст преобразуется в **намерение**, структурированные представлением запроса пользователя.
3. На основе пожеланий, займет Siri **действие** для выполнения запроса пользователя.
4. Наконец, представлю Siri **ответов** (visual и устных) для пользователя, в зависимости от действия.

Существует три основных способа, приложения могут принять участие в беседе пользователя с Siri:

[![](understanding-sirikit-images/monkeychat03.png "Тремя основными способами, что приложения могут принять участие в диалоге пользователей с Siri")](understanding-sirikit-images/monkeychat03.png#lightbox)

1. **Словарь** -это, как приложение сообщает Siri слов, он должен знать, для взаимодействия с ним.
2. **Приложение логики** — действия, и на основе ответов, которые приложение выполнит указанных целей.
3. **Пользовательский интерфейс** -это необязательно, пользовательские пользовательский интерфейс, который приложение может предоставить его ответы в.

### <a name="example"></a>Пример

Учитывая приведенные выше сведения, изучите, как следующие диалог будет взаимодействовать с приложением MonkeyChat:

_Пользователь: Привет Siri, отправить сообщение Bobo на MonkeyChat._<br />
_Siri: Что вы хотите сказать Bobo?_<br />
_Пользователь: Отправьте дополнительные bananas._<br />

Первая роль, которую приложение берет в диалоге — помочь понять речи пользователя Siri:

[![](understanding-sirikit-images/monkeychat04.png "Помогает понять речи пользователей Siri")](understanding-sirikit-images/monkeychat04.png#lightbox)

Siri не имеет имя «Bobo» в своей базе данных, но приложение и предоставил эту информацию с помощью Siri через пополнения словаря. Приложение также позволяет распознать, что Bobo является получателем, так как он указал их Siri как Siri *контакт*.

Siri знает, что несколько является обязательным для отправки сообщений, чем просто получателя, поэтому он проверит быстро с помощью расширения приложения, чтобы увидеть, если сообщение требует содержимое. Так как в случае MonkeyChat Siri, будут отвечать на пользователя в ответ: *«Что вы хотите сказать Bobo?»*

В приведенном выше примере пользователь ответил, *«Отправьте дополнительные bananas»*, который Siri объединяются в структурированной **намерение**:

[![](understanding-sirikit-images/monkeychat05.png "Siri будет объединить ответа пользователя в структурированных намерение")](understanding-sirikit-images/monkeychat05.png#lightbox)

Структурированные намерение будет содержать следующие сведения:

- **Домен:** сообщений
- **Цель:** sendMessage
- **Получатель:** Bobo
- **Содержимое:** отправьте дополнительные bananas

В каждом домене есть как набор знать *действия* , можно выполнять в них и на основе домена и действие, в приложение отправляются ноль, один ко многим параметры могут быть включены в назначение.

Цель затем отправляется расширение приложения для обработки. В результате обработки, но цель приложение создаст **IntentResponse** которого будет поставляться вместе с целью и включить параметры, описывающие приложение было с целью.

Также будет содержать каждый IntentResponse **код ответа** которое сообщает Siri, если приложение смогла выполнить запрос, или нет. Некоторые домены имеют очень конкретные ответа коды ошибок, которые могут быть также отправлены.

Наконец, будет включать IntentResponse `NSUserActivity` (например, тех, которые используются для поддержки вручную Off). `NSUserActivity` Будет использоваться для запуска приложения, если ответ они требуются для оставьте среде Siri и введите приложению, чтобы завершить его. 

Siri автоматически создаст соответствующий `NSUserActivity` для запуска приложения и pickup там, где остановились пользователя в среде Siri. Однако приложение может предоставить свой собственный `NSUserActivity` с помощью настраиваемых сведений, если это необходимо.

После обработки цель и возвратил ответ для Siri приложения, он затем возвращает результаты пользователю (словесно и визуально):

[![](understanding-sirikit-images/monkeychat06.png "Результаты, представленные пользователю словесно и визуально")](understanding-sirikit-images/monkeychat06.png#lightbox)

Siri имеет несколько встроенных ответа пользовательские интерфейсы для каждого из доменов, доступные для приложения. Тем не менее поскольку MonkeyChat предоставил это дополнительное расширение пользовательского интерфейса намерения, он используется для представления результатов диалога для пользователя в приведенном выше примере.

## <a name="the-intent-lifecycle"></a>Блокировка намерения жизненного цикла

Существует три основных задачи, которые требуется выполнять при работе с намерениями расширение приложения:

[![](understanding-sirikit-images/monkeychat07.png "Блокировка намерения жизненного цикла")](understanding-sirikit-images/monkeychat07.png#lightbox)

1. Приложение должно **устранить** каждого параметра события. Таким образом приложение вызывает Resolve несколько раз (один раз для каждого параметра) и иногда несколько раз на тот же параметр пока приложение и пользователем согласовать что запрашивается.
2. Приложение должно **Подтверждение** , он может обработать запрошенную цель и расскажите Siri о ожидаемый результат.
3. Наконец, приложение должно **обрабатывать** цель и выполните действия для достижения запрошенного результата.

### <a name="the-resolve-stage"></a>На этапе разрешения

На этапе разрешения помогает понять значения, которые предоставил пользователь и гарантирует, что пользователь фактически означало, что произойдет, когда цель обрабатывается приложением Siri. 

Этот этап также предоставляет возможность для приложения, которые влияют на поведение Siri при диалоге с пользователем. Чтобы сделать это, предоставит приложению **разрешение ответа**. Существует ряд готовых ответов на различные типы данных, который понимает Siri.

Наиболее часто разрешение ответа от приложения будет **успех**, то есть приложение соответствует определенной части данных из параметра (например, имя пользователя экрана) часть данных, известные ему.

Возможны ситуации, когда приложению необходимо убедиться, что конкретный запрос соответствует правильный часть сведений, которые, как известно. В этом случае он отправит **ConfirmationRequired** ответ на вопрос yes или no пользователю такие как *«Send message для Bobo значительных преимуществ?»*

Возможно, других случаях, когда приложению требуется, чтобы пользователь выбрал из краткого списка параметров. В этом случае приложение будет предоставлять **устранения неоднозначности** ответ с двух до десяти параметры для пользователя, такие как выбор: 

```csharp
Who do you want to message?

* Bobo the Great
* Bobo Jr.
* Little Bobo
```

Siri будет обрабатывать имя пользователя, отправившего выделение, словесно или посредством взаимодействия с пользовательским Интерфейсом Siri, а результат будет отправляться обратно к приложению.

В других случаях может быть достаточно информации для приложения устранить параметра или может быть слишком много соответствий, разрешение с помощью устранения неоднозначности (например, 80 пользователей с Bobo в имени). В этом случае приложение будет отправлять **NeedsMoreDetails** ответа и Siri предложит пользователю указать значение более точно.

Если пользователь не указал значение, для него должны обработать цель, он может отправить **NeedsValue** ответа для Siri запрашивать пользователя значение.

Если приложение не поддерживает значение, которое пользователь предоставил для определенного параметра, он может отправить **UnsupportedWithReason** ответ, чтобы указать причину, почему значение не поддерживается. Siri затем пользователю будет предложено ввести полностью новое значение и учитывая их причина он необходим.

Наконец используйте **NotRequired** ответ, чтобы определить Siri, что приложение не требует значение для данного параметра. Если пользователь все равно предоставляет один, оно будет просто учитывается функцией Siri.

### <a name="the-confirm-stage"></a>На этапе подтверждения

На этапе подтверждения служит двум целям:

- Чтобы сообщить Siri ожидаемый результат обработки объекта Intent, таким образом, чтобы Siri можно уведомить пользователя, что должно произойти.
- Предоставляет все необходимые состояния приложения может потребоваться выполнить запрос, представленный пользователем, такие как имеющий достаточно денег в банк, чтобы произвести оплату запрошенного проверку возможности.

Приложение будет предоставлять **ответа намерение** из шаг подтверждения, который должен быть заполнен как много информации приложения доступно, поэтому Siri можно его эффективное взаимодействие с пользователем.

В зависимости от типа домена и действие Siri может запросить у пользователя подтверждение, такие как перед передачей платеж или резервирования поездки.

### <a name="the-handle-stage"></a>Дескриптор рабочей области

На этапе обработки — это самая важная часть работы с помощью объекта Intent, так как он представляет собой точку, где приложение выполняет запрос пользователя, выполнив задачу, которую она была поставлена задача сделать.

Так же, как и на этапе подтверждения, приложения должен обеспечить как можно больше данных о результате Siri можно связать пользователя. Иногда эта информация будет визуального представления или других случаях Siri просто будет говорить пользователю. 

Возможны ситуации приложение может потребовать дополнительного времени для обработки данного запроса, такие как вызов задержки в сети или динамической необходимы им для выполнения запроса (например, завершение работы и доставки заказа или в своем автомобиле к расположению пользователя). Когда Siri ожидает ответа от приложения, он отображает пользовательский Интерфейс ожидания для пользователя, уведомляющее о том, что приложение обработки запроса.

В идеальном случае приложения должен предоставить ответ Siri в течение 2 – 3 секунд максимум. Если приложение знает, что ответ на запрос будет займет больше времени, к процессу, он должен отправить **InProgress** код ответа для Siri. Siri затем будет информировать пользователей, что приложение обработки запроса в фоновом режиме и будет продолжать сделать это, даже если они покидают среде Siri.

## <a name="adding-sirikit-to-the-app"></a>Добавление в приложение SiriKit

С помощью SiriKit в iOS 10 Apple создала две новые точки расширения:

- **Расширение intents** — предоставляет Siri содержимого приложения и выполняет задачи, необходимые для выполнения любой поддерживаемой намерения.
- **Расширение intents UI** -предоставляет пользовательского интерфейса, который будет отображаться для содержимого приложений внутри Siri. 

Также есть API, чтобы предоставить Siri для облегчения распознавания в виде слова и фразы:

- **Словарь приложения** -слов и фраз, которые являются общими для каждого пользователя приложения.
- **Словарь пользователя** -слов и фраз, которые уникальны для данного приложения пользователя.

## <a name="the-intents-extension"></a>Расширение Intents

Расширение Intents отвечает за обработку основных взаимодействий между приложением и Siri следующим образом:

[![](understanding-sirikit-images/intents01.png "Расширение Intents")](understanding-sirikit-images/intents01.png#lightbox)

Цель расширения может поддерживать один или несколько целей, разработчик должен решить, как они должны реализовать SiriKit в приложении. Разработчик также добавить отдельное расширение намерения для каждой цели, нужно обработать.  С другой стороны, Apple запросов, что разработчик ограничить количество расширений намерение таким образом, чтобы Siri не имеет несколько процессов, открытых для приложения, который требует больше памяти и времени для обработки.

Разработчику следует иметь в виду, что намерением расширения будут выполняться в фоновом режиме при активном Siri. Это позволяет Siri активно выполнять диалога с пользователем во время связи с расширением для обработки информации о запросе.

## <a name="privacy-and-security-considerations"></a>Вопросы безопасности и конфиденциальности

Apple были предприняты никакие отличный меры, чтобы убедиться, закрытый, защищена ли информация при работе с Siri и таким образом, существует несколько взаимодействия, которые пользователь должен войти на устройстве iOS пользователя. Например, при запросе поездки или способах оплаты.

Кроме того существуют конкретные режимы, которые приложение может потребоваться ограничить для пользователя, который входил в устройство. В подобных случаях приложение может запросить **ограничения во время блокировки** поведение. Это делается с помощью параметра в `Info.plist` файл.

Локальной инфраструктуры проверки подлинности доступна для расширения намерения, приложение может запрашивать у пользователя Дополнительные сведения для проверки подлинности, даже если устройство уже разблокирован.

И, наконец Apple Pay доступен для расширения намерения, приложение может завершить транзакцию с помощью Apple Pay и встроенные листа Apple Pay будет отображаться над интерфейсом Siri.

Кроме того, Apple хочет убедиться, что пользователи знает, когда они отправляют сведения к сторонним приложениям и таким образом, пользователь **необходимо** сказать конкретное имя приложения (как указано в отображаемое имя пакета приложения), при выполнении запроса.

Apple разработала Siri для выполнения плавно диалоги с пользователя, а также из-за этого, имя пакета приложения может использоваться в многих частей речи, везде, где она помещается в естественным образом в запросе пользователя.

Одной из распространенных задач, которые пользователи должны сделать является «verbify» имя приложения, другими словами, как имя приложения и использовать его как команда в запросе. Например *«MonkeyChat Bobo те были отличным bananas.»*

## <a name="the-intents-ui-extension"></a>Расширение Intents UI

Расширение Intents UI предоставит возможность перевести пользовательского интерфейса приложения и фирменной символики в интерфейс Siri и сделать пользователей чувствовать, подключенной к приложению. С помощью этого расширения приложение можно достичь торговой марки, а также visual и другие сведения в записи.

[![](understanding-sirikit-images/intents02.png "Пример выходных данных расширение Intents UI")](understanding-sirikit-images/intents02.png#lightbox)

Расширение Intents UI всегда будет возвращать `UIViewController` и приложения можно добавить что-либо его отметок "нравится" внутри контроллера представления, такие как отображение дополнительную информацию, которая выходит за рамки первоначальном ответе. Интерфейса Intents UI можно также обновлять пользователя состояние длительных события, например того, сколько еще займет поездке, совместное использование автомобиль до их положения.

Расширение Intents UI будут всегда отображаться вместе с другим содержимым Siri как значок приложения и имя в верхней части пользовательского интерфейса или, на основе пожеланий, кнопок (например, отправки или "Отмена"), которые могут отображаться в нижней.

Существует несколько экземпляров, где приложение может заменить сведения, Siri отображаются для пользователя по умолчанию, таких как обмен сообщениями или сопоставляет, где приложение может заменить взаимодействия по умолчанию одним специально для приложения.

> [!IMPORTANT]
> Хотя можно добавлять интерактивные элементы, такие как `UIButtons` или `UITextFields` для расширения пользовательского интерфейса намерение `UIViewController`, они являются строго запрещено как намерение пользовательский Интерфейс в Неинтерактивный режим и пользователь не сможет взаимодействовать с ними.

Это совершенно необязательно. приложение предоставить расширение пользовательского интерфейса намерения, так как Siri содержит набор по умолчанию пользовательского интерфейса для каждого типа намерений. Кроме того интерфейсы интерфейса Intents UI доступны только для определенных что намерения, что Apple расцениваются как могут быть полезными для пользователя.

## <a name="adding-sirikit-vocabulary"></a>Добавление словаря SiriKit

Заключительная часть реализация SiriKit находится внутри приложения, предоставляя необходимые словаря. Многие приложения содержат необычным способом описания сведения для пользователей и с необычным способом, что пользователь будет предоставлять сведения в приложение.

По этой причине Siri требуется помощь приложения для понимания слов и фраз, уникальные для приложения. Некоторые из этих фраз будет частью приложения, чтобы каждый пользователь будет знать и понимать их. Пока другие будет уникальным для данного пользователя приложения.

### <a name="app-specific-vocabulary"></a>Словарь приложения

Владеют специальной терминологией приложения определяет конкретные слова и фразы, будет доступен для всех пользователей приложения, такие как типы автомобиля или имена для тренировок. Так как они являются частью приложения, они определяются в `AppIntentVocabulary.plist` файл как часть набора основного приложения. Кроме того эти слова и фразы должно быть локализовано.

Это словарь, состоит из нескольких частей `AppIntentVocabulary.plist` файла:

- **Пример приложения использует** -они предоставляют набор часто используется для запросов, которые пользователь мог принять приложения. Например: *«Запуск тренировок с MonkeyFit».*
- **Параметры** -они предоставляют набор типов отличных от стандартных параметров, относящиеся к приложению. Например имена тренировок MonkeyFit приложения. Они состоят из:
    - **Фраза** -позволяет приложению определить уникальных условий для приложения. Например: «Bananarific» тип тренировок MonkeyFit приложения. 
    - **Произношение** -дает указания произношение для Siri как простой фонетическое написание заданного фразы. Например, «ba nana ri ходом в конкретное расположение».
    - **Пример** -приводится пример использования данного фразы в приложении. Например *«Запустить Bananarific в MonkeyFit»*.

Дополнительные сведения см. в разделе Apple [справочнике по формату файла словаря приложения](https://developer.apple.com/library/prerelease/content/documentation/Intents/Conceptual/SiriIntegrationGuide/CustomVocabularyKeys.html#//apple_ref/doc/uid/TP40016875-CH10-SW1).

### <a name="user-specific-vocabulary"></a>Словарь определенных пользователем

Словарь определенных пользователем будет обеспечивать слов или фраз, которые уникальны для отдельных пользователей приложения. Они будут представлены во время выполнения из основного приложения (не расширений приложений) в виде упорядоченного набора условий, упорядоченные в наиболее значимых приоритет по использованию для пользователей, наиболее важные условия в начале списка.

Взгляните на пример приложения MonkeyChat, представленной выше. MonkeyChat хранит список всех контактов пользователя, которые будет отправляться для Siri через словарь определенных пользователем. Он также хранит список 10 последних контактов, которые пользователь сообщения и имеет набор контактов, избранного для каждого пользователя. В этом примере избранные контакты должно быть в начале наших пользователей владеют специальной терминологией, следуют последние контакты затем остальная часть контакты пользователя.

Словарь определенных пользователем, поддерживаются следующие сведения:

- Имя контактного лица.
- Имена для тренировок.
- Photo Album имена.
- Ключевые слова фотографии.

Если приложение зависит от iOS адресной книги, приложение не будет предпринимать никаких действий, эта информация уже доступна для Siri. Приложению достаточно только для предоставления контактных имен, если приложение имеет собственную уникальную базу данных контактов.

При разработке словарь, обеспечивают только необходимые значения, которые пользователи знать и важна. Не следует предоставлять сведения, такие как номера телефонов или адреса электронной почты.

Приложению также требуется немедленно обновить Siri при изменении словарь определенных пользователем. Абоненты привыкли получать запросе информации из Siri момент был добавлен на устройствах iOS. Например если пользователь добавляет новый контакт в приложении, отправит эту информацию для Siri как только пользователь не сохранит его.

Что более важно, приложения _необходимо_ удалить сведения из словаря Siri немедленно, так как пользователь может стать неприятности, если они удалены часть сведений, но Siri по-прежнему распознаются несколько часов или дней.

> [!IMPORTANT]
> Приложение должно удалить все владеют специальной терминологией пользователя из Siri, если пользователь выберет Сброс приложения или их выхода.

## <a name="sirikit-permissions"></a>Разрешения SiriKit

Заключительная часть SiriKit основывается на динамике разрешения. Так же, как с помощью других функций операций ввода-вывода (например, фотографии, контакты или камеры), пользователям нужно предоставить явное разрешение для приложения, обратитесь в Siri.

Приложение может предоставить строку, определяющую, какие данные он должен предоставить Siri и понять, о том, почему пользователь должен предоставить такой доступ. 

Apple предлагает приложение должно запросить разрешение от пользователя использования Siri первый пользователь открывает приложение, после они будут обновлены до iOS 10. Это, чтобы пользователи сведения об интеграции Siri и можно предварительно утвержденных использования до внесения их первого запроса.

## <a name="sirikit-and-maps"></a>SiriKit и карты

SiriKit является неотъемлемой частью iOS и задействует более крупной платформы намерения, добавляемый в iOS 10. Объекты Intent framework была разработана для совместного использования распространенных и общих действий и намерения с другими частями системы.

Платформа намерения выходит за рамки просто интеграции Siri и предоставляет другие функции, такие как интеграция контакты, в которых приложение может стать телефонии по умолчанию или приложении для обмена сообщениями для конкретных контактов. Объекты Intent также предоставляют глубокую интеграцию с CallKit также обеспечивать наилучшее взаимодействие VOIP.

В приложении карты в iOS 10 добавлены функции, такие как совместное использование поездке, где пользователь может забронировать поездке непосредственно из карты пользовательского интерфейса. SiriKit предоставляет общую точку расширения с помощью карт, поэтому поездке способы управления доступом (и другие) могут совместно использоваться Siri и карт. 

Это означает, что если приложение была внедрена в SiriKit расширения, он также получит интеграция с картами бесплатно. 

## <a name="designing-a-great-siri-experience"></a>Проектирование удобной Siri

Разработка современного пользовательского интерфейса при интеграции приложения в Siri отличается от создание превосходных приложений пользовательского интерфейса. В отличие от нормальных условиях, когда пользователь взаимодействует с приложением непосредственно на экране, при использовании Siri существует являются многократно при visual интерфейс не отображается вообще. Например, когда пользователь начинает диалог с *«Эй Siri»*.

### <a name="how-siri-helps-the-developer"></a>Как Siri помогает разработчик

При разработке взаимодействия приложения с Siri, приложение будет производиться сборка *интерфейс с голосовым управлением*, то есть контекст является производным от диалога с Siri с пользователем, от имени приложения.

При отсутствии visual ссылку пользователь должен хранить список информация в их голосах. По этой причине Siri представляется исходного минимум сведений, необходимых для выполнения задачи, что пользователь хочет выполнить.

Интерфейс с голосовым управлением имеет форму, вопросы и ответы из Siri и пользователей во время диалога. Поэтому важно подумать о том, как Siri задает вопросы и реагирующее на создание этого интерфейса.

Рассмотрим следующий пример создания сообщения, Siri может ответить на вопрос пользователя *«Готовы отправить отчет?»* . Пользователь может ответить различными способами, такие как *«Отправить»*, *«Отмена»* или даже совершенно несвязанные на этот вопрос. Независимо от того, как диалог разыгрывается Siri будет обрабатывать его для приложения и только отправлять его релевантную информацию как она станет доступной.

Существует несколько разных способов, что пользователь может начать с Siri:

- Через эти новые устройства, нажав кнопку Home. В этом случае Siri представит дополнительные интерфейсы visual и меньше устные ответов.
- Необходимо указать *«Эй Siri»* и начала бесплатной руки диалога. В этом случае Siri будет менее visual и более устные.
- Использование специальных возможностей, например, bluetooth включен вашим отзывам. вспомогательные средства, где будет адаптировать пользовательский Интерфейс для пользователей с особыми потребностями.
- С помощью автомобиль воспроизведения, где пользователь должен сохранить их внимания уделяется манере, оставив отвлекающих факторов к минимуму.

### <a name="how-the-developer-helps-siri"></a>Как разработчик помогает Siri

При интеграции приложения с Siri, разработчику необходимо тестировать часто такой интеграции и убедитесь, что они берут много разных запросов, запрашивая для той же части сведений или задачи как различными способами максимально.

Так как никакие два человека обработки так, крайне важно, что разработчик получает столько разных инженерам максимально точно настроить для интеграции Siri. Пользователи могут запросить сведения или выполнять запросы способами разработчик никогда не менее объекта и этот точной настройки может помочь избежать что расширить группу пользователей более удобной с помощью собственных приложений с Siri.

Тестирование в различных ситуациях и сред. Инициирующие диалоги с Siri любым способом, можно обеспечить, что этих диалогов останутся жидкостей и естественным. Тестирование в местах, где пользователь скорее всего с помощью приложения, как и в матричном спортзале.

Убедитесь, что приложение предоставляет все сведения, что Siri необходимо должным образом представить запроса и результат пользователю. Это особенно верно при использовании Siri в руки свободного ситуации.

### <a name="siri-design-guidelines"></a>Рекомендации по проектированию Siri

Всегда помните, что Siri беседу с пользователя от имени приложения. Разработчик хочет сомнения в том, что этот диалог остается как бесперебойной и естественным максимальной.

Как и любой важного диалога, то разработчик должен убедиться в следующем:

- Приложение подготавливается для диалога.
- Что приложение ожидает передачи данных в точности то, что пользователь пытается выполнить.
- Что приложение запрашивает соответствующие вопросы в нужное время.
- Что приложение отвечает на запрос информацией, которая нужна пользователю.

#### <a name="preparing-for-the-conversation"></a>Подготовка для диалога

Первое, что нужно запомнить — что пользователи приложения не будет так же, как разработчик. Они могут поступать из разных стран, говорящих на разных языках или имеют особые потребности, при работе с приложением.

Кроме того поскольку разработчик разработано и создано приложение, они имеют глубокий и глубоких знаний приложение и его внутренней работы и функции, пока пользователь не будет. Поэтому разработчик может предложить запрос siri, если иначе, чем обычный пользователь.

Именно поэтому крайне важно иметь как много разных людей, как можно взаимодействовать с приложениями, с помощью Siri. Пользователи могут выполнять запросы приложения с помощью Siri, разработчик имеет никогда не думали, объекта или одним из способов, которые разработчик не учитывать.

#### <a name="ensure-the-app-is-a-good-listener"></a>Убедитесь, что приложение является хорошим прослушивателя

Разработчик должен обеспечить, что приложение является хорошим прослушивателем и начало диалога особенности, которые соответствуют ожиданиям пользователя. Но это также возможно, что они могут не предоставлять все сведения, необходимые приложению для достижения требуемой задачи.

Существует несколько способов, что приложение может обработать такой ситуации:

- **Выбрать оптимальное значение по умолчанию значение отсутствует** , например в поездке, приложение для управления доступом может по умолчанию текущее местоположение пользователя Если они не были указаны, где они хотели всегда извлекаются из.
- **Сделать информированное предположение** -с помощью конкретные сведения, которые собраны приложения для пользователя, приложение сможет марки и информированное предположение на отсутствующие данные, например заполнения отсутствующих номер мобильного телефона из контактных данных пользователя. Однако следует соблюдать осторожность во избежание неправильный сюрпризов, такие как выбор наиболее затратный и т. д.
- **Запрос для получения сведений** -приложение может иметь Siri запрашивать у пользователя отсутствует значение. Тем не менее основная идея мешает диалоги простой и точными. Пользователи скоро станет разочарованы, если им требуется ответить на несколько вопросов для достижения свой запрос.
- **Ошибочные сведения корректной обработки** -пользователь может предоставить значение, приложение не ожидается или он не может обработать в данном контексте. Убедитесь, что приложение относится этой ситуации для пользователя способом, который делает его простым и удобным для их устранения.

При появлении приложение с одним значением, не гарантируется, предпочтительный способ обрабатывать это – заставить Siri запрашивать подтверждение пользователя. Например *«Имелось в виду Bobo значительных преимуществ?»* , который можно ответить с помощью простой ответ Да или нет.

Есть ситуация, где несколько возможных вариантов может быть правильной одно значение, устранение неоднозначности при обработки предпочтительный метод. В этом случае Siri запрашивать пользователя с до десяти возможных вариантов для выбора. Пример:

```csharp
Who do you want to send the message to?

* Bobo the Great!
* Bobo Jr.
* Little Bobo
```

Если по-прежнему в вопросе, имеют Siri запрашивать пользователя для предоставления совершенно новое, более конкретное ответов для определенного значения.

#### <a name="request-final-confirmation"></a>Конечное Подтверждение запроса

Прежде чем приложение фактически выполняет задачу для выполнения запроса пользователя, Siri проверит с расширением приложения, чтобы убедиться, что все, что на месте. Например пользователь имеет достаточно денег в их учетной записи, чтобы произвести оплату запрошенного?

Кроме того приложение необходимо убедиться, что она предоставляет все возможные сведения для Siri чтобы представить их пользователю и убедитесь, что задача будет выполнена соответствует их требованиям.

Как только пользователь подтверждает запрос и оно производит его, приложение должно еще раз убедитесь, что он все результаты обратно в Siri, он сможет связать их для пользователя.

#### <a name="responding-to-the-request"></a>Ответа на запрос

Siri имеет несколько встроенных интерфейсов пользователя для каждого из доменов и действия, связанные с его. Тем не менее где это необходимо, приложение может сделать пользовательского расширения пользовательского интерфейса намерения для расширения возможностей пользователя, предоставляя приложения фирменную символику и пользовательского интерфейса или больше информации, чем присутствовал в запросе.

С другой стороны, ограничения, которые следует использовать при разработке пользовательских интерфейсов для Siri. Как правило пользователь хочет получить конкретную задачу, как можно быстрее и не хотите перегрузить с ненужную информацию.

Должны также соблюдать осторожность, чтобы пользовательский Интерфейс выглядит и корректно реагирует во всех устройств разных операций ввода-вывода и ориентаций, что пользователь может иметь или использовать устройство.

При необходимости используйте SiriKit API, чтобы скрыть все избыточные сведения, уже присутствующего в Siri пользовательский Интерфейс по умолчанию. Пока убедитесь, что приложение по-прежнему предоставляет информацию для Siri, чтобы представлять ее словесно в руки свободного ситуациях.

Могут возникнуть ситуации, где Siri приводит к запуску приложения для выполнения запроса пользователя, таких как фотографии, которые пользователь запросил представления. В таких ситуациях не неожиданными для пользователя. Отобразить ожидаемые данные без необходимости промежуточные этапы и дальнейшего участия. Никогда не отображать сведения или выполнить задачу, которую пользователь не предполагает, что.

### <a name="polishing-the-design"></a>Доведению разработки

Существуют несколько шагов, которые Apple предложить развить виды Разговорные интерфейсы. Во-первых — на примерах краткими, понятными словаря и использования регистра для Siri.

Является одним из способов, что пользователь обнаруживает приложения, запуская диалог с Siri и просить, *«Что можно сделать?»* Siri покажет несколько разные вещи, его можно сделать, включая приложение разработчика и методы герой пример использования, которые он предоставил через его `plist` файл.

Как написать хороший пример использования:

- Убедитесь, что примеры включают имя приложения.
- Упрощения этого примера, коротким и для точки.
- Предоставляют несколько примеров для каждого из намерений, которые поддерживает приложение.
- Определение приоритетов намерений и примеры, в их в зависимости от наиболее распространенные варианты использования для приложения.
- Убедитесь, что приложение предоставляет локализованные примеры.
- Убедитесь, что каждый пример, учитывая работает как ожидалось в приложении.
- Избежать адресации в примерах, чтобы не включать текст, например Siri *«Эй Siri...»*
- Такие как избежать любой ненужные pleasantries *«обратитесь»* или *«Спасибо»*.

Соответствующие времени для исследования и экспериментов на как приложение может формировать диалога с Siri с пользователем, от его имени. Убедитесь, что дает возможность общаться с обычным пользователям на протяжении всего процесса, как их взаимодействиях с и ожиданиям приложения могут изменяться с течением времени.

Не забывайте протестировать приложение в различных ситуациях и все различные методы для вызова диалог с Siri. Тест в реальном мире расположения пользователя может использовать приложения office и службы поддержки.

Стремимся диалогов с Siri (от имени приложения) быть жидкостей, естественного и «чувствовать себя как просто». 

## <a name="summary"></a>Сводка

Статья описывает основные понятия, необходимые для использования SiriKit и показано, что он может взаимодействовать с приложений Xamarin.iOS для предоставления служб, доступных для пользователя с помощью Siri и приложения карты на устройстве iOS.




## <a name="related-links"></a>Связанные ссылки

- [Пример ElizaChat](https://developer.xamarin.com/samples/monotouch/ios10/ElizaChat/)
- [Руководство по программированию в SiriKit](https://developer.apple.com/library/prerelease/content/documentation/Intents/Conceptual/SiriIntegrationGuide/index.html)
- [Ссылка на платформу намерений](https://developer.apple.com/reference/intents)
- [Ссылка на платформу пользовательского интерфейса intents](https://developer.apple.com/reference/intentsui)
