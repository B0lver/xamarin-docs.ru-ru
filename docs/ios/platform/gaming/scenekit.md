---
title: SceneKit в Xamarin.iOS
description: В этом документе описывается SceneKit 3D-сцена API graph, упрощает работу с трехмерной графикой путем абстрагирования сложности OpenGL.
ms.prod: xamarin
ms.assetid: 19049ED5-B68E-4A0E-9D57-B7FAE3BB8987
ms.technology: xamarin-ios
author: lobrien
ms.author: laobri
ms.date: 06/14/2017
ms.openlocfilehash: 0944978b34c8e164acd6e829db177bf4fd72dea9
ms.sourcegitcommit: e268fd44422d0bbc7c944a678e2cc633a0493122
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/25/2018
ms.locfileid: "50109865"
---
# <a name="scenekit-in-xamarinios"></a>SceneKit в Xamarin.iOS

SceneKit — это граф сцены API, который упрощает работу с трехмерной графикой. Он впервые появилась в OS X 10.8 и теперь пришло iOS 8. С помощью SceneKit создавать впечатляющие трехмерные визуализации и случайного трехмерных игр не требуется опыт в OpenGL. Основываясь на основные понятия, связанные с граф сцены, SceneKit упрощает OpenGL и OpenGL ES, упрощая добавление трехмерного содержимого в приложение. Тем не менее если вы являетесь экспертом OpenGL, SceneKit имеет хорошую поддержку привязки непосредственно с также OpenGL. Он также включает в себя множество функций, которые дополняют 3D-графики, таких как физики и очень хорошо интегрируется с несколько других платформ Apple, например, Core Animation, Core образа и Sprite Kit.

SceneKit очень легко работать с. Это декларативный API, который берет на себя подготовки к просмотру. Вы просто настроить сцены, добавить свойства и дескрипторы SceneKit отрисовку сцены.

Для работы с SceneKit создать граф сцены с помощью `SCNScene` класса. Сцена содержит иерархию узлов, представлены экземплярами `SCNNode`, определение расположения в трехмерном пространстве. Каждый узел имеет свойства, такие как geometry, освещение и материалы, которые влияют на его внешний вид, как показано на следующем рисунке:

![](scenekit-images/image7.png "Иерархии SceneKit") 

## <a name="create-a-scene"></a>Создание сцены

Чтобы отобразить на экране сцены, его, чтобы добавить `SCNView` , присвоив его свойству сцены представления. Кроме того, если вы внесете здесь изменения в сцену, `SCNView` будет обновляться для отображения изменений.

```csharp
scene = SCNScene.Create ();
sceneView = new SCNView (View.Frame);
sceneView.Scene = scene;
```

Может быть заполнен сцены, файлы, экспортированные с помощью средства моделирования трехмерной или программным способом геометрических примитивов. Например Вот как создать сферу и добавить его в сцену:

```csharp
sphere = SCNSphere.Create (10.0f);
sphereNode = SCNNode.FromGeometry (sphere);
sphereNode.Position = new SCNVector3 (0, 0, 0);
scene.RootNode.AddChildNode (sphereNode);
```

## <a name="adding-light"></a>Добавление освещения

На этом этапе сферы не будет отображаться никаких действий, из-за не освещения в сцене. Присоединение `SCNLight` экземпляров узлов создает источники света в SceneKit. Существует несколько типов источников света от различных форм направленное освещение до внешним освещением. Например, следующий код создает всенаправленные свет боковой части сферы:

```csharp
// omnidirectional light
var light = SCNLight.Create ();
var lightNode = SCNNode.Create ();
light.LightType = SCNLightType.Omni;
light.Color = UIColor.Blue;
lightNode.Light = light;
lightNode.Position = new SCNVector3 (-40, 40, 60);
scene.RootNode.AddChildNode (lightNode);
```

Всенаправленные освещения создает рассеянный отражения, в результате чего даже освещения, рода напоминает сияние фонарик. Создание внешнее освещение аналогично, несмотря на то, что они имеют не направление, она отлично справляется с одинаково во всех направлениях. Ее можно рассматривать настроения освещения :)

```csharp
// ambient light
ambientLight = SCNLight.Create ();
ambientLightNode = SCNNode.Create ();
ambientLight.LightType = SCNLightType.Ambient;
ambientLight.Color = UIColor.Purple;
ambientLightNode.Light = ambientLight;
scene.RootNode.AddChildNode (ambientLightNode);
```

С помощью индикатора в месте сферы теперь видна в сцене.

![](scenekit-images/image8.png "Сфера является видимым в сцене включен")
 
## <a name="adding-a-camera"></a>Добавление веб-камеры

Добавление веб-камеры (SCNCamera) в сцену изменяет точки зрения. Шаблон, чтобы добавить камеры похож. Создайте камеры, присоединить ее к узлу и добавьте узел в сцену.

```csharp
// camera
camera = new SCNCamera {
    XFov = 80,
    YFov = 80
};
cameraNode = new SCNNode {
    Camera = camera,
    Position = new SCNVector3 (0, 0, 40)
};
scene.RootNode.AddChildNode (cameraNode);
```

Как видно из кода выше объекты могут создаваться с использованием конструкторов SceneKit или из метода фабрики Create. Первый вариант позволяет использовать C# синтаксис инициализатора, но какой из них следует использовать это во многом вопрос предпочтений.

С камеры в месте всей сфере является видимым для пользователя:

![](scenekit-images/image9.png "Всего сферы является видимым для пользователя")
 
В сцену, также можно добавить дополнительные источники света. Вот, как выглядит с несколько более всенаправленные света:

![](scenekit-images/image10.png "Сферу с несколько больше всенаправленные света")
 
Кроме того, задав `sceneView.AllowsCameraControl = true`, пользователь может изменить точки зрения с помощью жестов касания.

### <a name="materials"></a>Материалы

Материалы создаются с помощью класса SCNMaterial. Например добавить изображение на поверхности сферы равным изображение материала *Диффузный* содержимое.

```csharp
material = SCNMaterial.Create ();
material.Diffuse.Contents = UIImage.FromFile ("monkey.png");
sphere.Materials = new SCNMaterial[] { material };
```

Это слои образ на узле, как показано ниже:

![](scenekit-images/image11.png "Иерархическое представление образ на сферу")
 
Материал может быть присвоено отвечать на другие виды освещения слишком. Например можно ли сделать объект Блестящий и иметь отражающий содержимое для отображения зеркального отражения, в результате чего ярко-место на поверхности, как показано ниже:

![](scenekit-images/image12.png "Объекта, выполненные Блестящий с зеркального отражения, приводит к ярко-место на рабочей области")
 
Материалы являются достаточно гибкими, предоставляя гораздо совсем немного кода. Например вместо того чтобы задавать изображение рассеянный содержимое, ему присвоено Светящийся содержимое вместо этого.

```csharp
material.Reflective.Contents = UIImage.FromFile ("monkey.png");
```

Теперь monkey отображается визуально находимся в сферу, независимо от точки зрения.

### <a name="animation"></a>Анимация

SceneKit предназначен для работы с функцией анимации. Можно создать явного или неявного анимации и можно даже отрисовка сцены с базовой анимации уровень дерева. При создании неявное анимации, SceneKit предоставляет свой собственный класс перехода `SCNTransaction`.

Ниже приведен пример, который вращается сферы.

```csharp
SCNTransaction.Begin ();
SCNTransaction.AnimationDuration = 2.0;
sphereNode.Rotation = new SCNVector4 (0, 1, 0, (float)Math.PI * 4);
SCNTransaction.Commit ();
```

Можно анимировать гораздо больше, чем поворота хотя. Многие свойства SceneKit анимируемым. Например, следующий код выполняет анимацию материала `Shininess` для увеличения зеркального отражения.

```csharp
SCNTransaction.Begin ();
SCNTransaction.AnimationDuration = 2.0;
material.Shininess = 0.1f;
SCNTransaction.Commit ();
```

SceneKit очень проста в использовании. Он предлагает множество дополнительных функций, в том числе ограничения, физики, декларативные действия, трехмерного текста, глубину поддержка, средства интеграции Sprite Kit и образ основных компонентов интеграции для именования несколько.