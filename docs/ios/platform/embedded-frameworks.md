---
title: Внедренные платформы в Xamarin. iOS
description: В этом документе описывается совместное использование кода с внедренными платформами в приложении Xamarin. iOS. Это можно сделать с помощью средства mtouch или машинных ссылок.
ms.prod: xamarin
ms.assetid: F8C61020-4106-46F1-AECB-B56C909F42CB
ms.technology: xamarin-ios
author: davidortinau
ms.author: daortin
ms.date: 06/05/2018
ms.openlocfilehash: cf74c31b149c24bc6e515c0f00803a60b10d5d1c
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73032540"
---
# <a name="embedded-frameworks-in-xamarinios"></a>Внедренные платформы в Xamarin. iOS

_В этом документе описывается, как разработчики приложений могут внедрять пользовательские платформы в свои приложения._

Благодаря iOS 8,0 Apple можно создать внедренную платформу для совместного использования кода между расширениями приложения и основным приложением в Xcode.

Xamarin. iOS 9,0 добавляет поддержку использования этих встраиваемых платформ (созданных с помощью Xcode) в приложениях Xamarin. iOS. *Невозможно создать внедренные платформы из любого типа проектов Xamarin. iOS **, будут использоваться** только существующие платформы машинного кода (цель-C).*

Существует два способа использования платформ в Xamarin. iOS:

- Передайте платформу в средство mtouch, добавив следующую команду в дополнительные аргументы mtouch в параметрах **сборки iOS** проекта:

  ```csharp
  --framework:/Path/To/My.Framework
  ```

  Он должен быть установлен для каждой конфигурации проекта.

- Добавление машинных ссылок из контекстного меню

# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio для Mac](#tab/macos)

Щелкните правой кнопкой мыши проект и выберите "добавить машинные ссылки"

![](embedded-frameworks-images/xam-native-refs.png "Select Add native references in Visual Studio for Mac")

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

Щелкните правой кнопкой мыши проект и выберите "добавить машинные ссылки"

![](embedded-frameworks-images/vs-native-refs.png "Select Add native references in Visual Studio")

-----

  Это будет работать для всех конфигураций.

В будущих версиях Visual Studio для Mac и средствах Xamarin для Visual Studio можно будет использовать платформы из интегрированной среды разработки (без редактирования файлов проекта вручную).

Несколько примеров проектов можно найти на сайте [GitHub](https://github.com/rolfbjarne/embedded-frameworks) .

## <a name="limitations"></a>Ограничения

- Внедренные платформы поддерживаются только в [Объединенных](~/cross-platform/macios/unified/index.md) проектах.
- Внедренные платформы поддерживаются только в проектах с целью развертывания по крайней мере iOS 8,0.
- Если для расширения требуется внедренная платформа, то приложение-контейнер должно также иметь ссылку на платформу, в противном случае платформа не будет включена в набор приложений.

## <a name="the-mono-runtime"></a>Среда выполнения Mono

Внутреннее приложение Xamarin. iOS использует эту функцию для связи со средой выполнения Mono в качестве платформы, а не для статической среды выполнения Mono в каждом расширении и в приложении-контейнере.

Это автоматически выполняется, если контейнерное приложение является единым приложением, оно содержит расширения, а целевое развертывание — iOS 8,0 или более поздней версии.

Приложения без расширений будут по-прежнему связываться со средой выполнения Mono статически, так как при использовании платформы имеется только одно приложение, ссылающееся на него.

Это поведение может быть переопределено разработчиком приложения путем добавления следующего аргумента mtouch в параметры сборки iOS проекта:

- `--mono:static`: статические ссылки с помощью среды выполнения Mono.
- `--mono:framework`: ссылки со средой выполнения Mono в качестве платформы.

Один из сценариев для связывания с средой выполнения Mono в качестве платформы даже для приложений без расширений — уменьшение размера исполняемого файла, чтобы преодолеть ограничения на размер исполняемого файла, применяемые компанией Apple. Для справки среда выполнения Mono добавляет около 1.7 МБ на архитектуру (начиная с Xamarin. iOS 8,12, но зависит от выпусков и даже между приложениями). Платформа Mono добавляет около 2.3 МБ на архитектуру, а это означает, что для одноархитектурного приложения без расширений, делая так, чтобы ссылка на приложение в среде выполнения Mono была в качестве платформы, сжимает исполняемый файл на ~ 1.7 МБ, но добавляется платформа ~ 2.3 МБ, что приведет к в приложении размером около 0,6 МБ больше указываться.
