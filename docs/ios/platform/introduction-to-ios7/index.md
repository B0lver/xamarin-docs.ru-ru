---
title: Введение в iOS 7
description: В этой статье рассматриваются основные новые интерфейсы API, впервые появился в iOS 7, включая переходы контроллера представления, усовершенствования UIView анимации, комплект средств для текста и UIKit Dynamics. Здесь также рассматриваются некоторые изменения в пользовательском интерфейсе и новые возможности многозадачность расширенная.
ms.prod: xamarin
ms.assetid: 2C33018F-D64A-4BAA-A34E-082EF311D162
ms.technology: xamarin-ios
author: lobrien
ms.author: laobri
ms.date: 03/19/2017
ms.openlocfilehash: db2ce779962947e2121ff03280544a080e193e2e
ms.sourcegitcommit: 4b402d1c508fa84e4fc3171a6e43b811323948fc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61037425"
---
# <a name="introduction-to-ios-7"></a>Введение в iOS 7

_В этой статье рассматриваются основные новые интерфейсы API, впервые появился в iOS 7, включая переходы контроллера представления, усовершенствования UIView анимации, комплект средств для текста и UIKit Dynamics. Здесь также рассматриваются некоторые изменения в пользовательском интерфейсе и новые возможности многозадачность расширенная._

iOS 7 представляет собой существенное обновление для iOS. В нем представлена совершенно новую разработке пользовательского интерфейса, который устанавливает фокус на содержимого, а не приложения chrome. Наряду с визуальные изменения iOS 7 добавляет множество новых интерфейсов API для создания более широкие взаимодействия и взаимодействия. Этот документ опросов новых технологий с iOS 7 и служит в качестве отправной точки для дальнейшего изучения.

## <a name="uiview-animation-enhancements"></a>Усовершенствования анимации UIView

iOS 7 расширяет поддержку анимации в UIKit, благодаря которой приложения могут выполнять действия, которые ранее требовалось удаление непосредственно в платформу Core Animation. Например `UIView` теперь может выполнять spring анимации, а также анимации с опорными кадрами, который ранее `CAKeyframeAnimation` применяется к `CALayer`.

### <a name="spring-animations"></a>Spring анимации

 `UIView` Теперь поддерживает анимации изменений свойств с помощью эффекта spring. Чтобы добавить это, вызовите `AnimateNotify` или `AnimateNotifyAsync` метод, передав значения для коэффициент затухания spring и скорость начальной spring, как описано ниже:

-  `springWithDampingRatio` — Значение от 0 до 1, где колебаний возрастает для меньшее значение.
-  `initialSpringVelocity` Скорость начальной spring в процентах от расстояния общее анимации в секунду.


В следующем коде создается эффект spring, при изменении center представление изображений:

```csharp
void AnimateWithSpring ()
{ 
    float springDampingRatio = 0.25f;
    float initialSpringVelocity = 1.0f;
    
    UIView.AnimateNotify (3.0, 0.0, springDampingRatio, initialSpringVelocity, 0, () => {
    
        imageView.Center = new CGPoint (imageView.Center.X, 400);   
            
    }, null);
}
```

Этот эффект spring приводит к смещению представления изображения для скачками по завершении анимации в новое расположение центра, как показано ниже:

 ![](images/spring-animation.png "Этот эффект spring приводит к смещению представления изображения для скачками по завершении анимации в новое расположение центра")

### <a name="keyframe-animations"></a>Анимации с опорными кадрами

`UIView` Теперь включает класс `AnimateWithKeyframes` метод для создания анимации с опорными кадрами на `UIView`. Этот метод похож на другие `UIView` анимации методы, кроме тех, которые еще `NSAction` передается как параметр для включения опорные кадры. В рамках `NSAction`, опорные кадры добавляются путем вызова `UIView.AddKeyframeWithRelativeStartTime`.

Например следующий фрагмент кода создает анимацию опорный кадр для анимации представления center также относительно Вращение вида:

```csharp
void AnimateViewWithKeyframes ()
{
    var initialTransform = imageView.Transform;
    var initialCeneter = imageView.Center;

    // can now use keyframes directly on UIView without needing to drop directly into Core Animation

    UIView.AnimateKeyframes (2.0, 0, UIViewKeyframeAnimationOptions.Autoreverse, () => {
        UIView.AddKeyframeWithRelativeStartTime (0.0, 0.5, () => { 
            imageView.Center = new CGPoint (200, 200);
        });

        UIView.AddKeyframeWithRelativeStartTime (0.5, 0.5, () => { 
            imageView.Transform = CGAffineTransform.MakeRotation ((float)Math.PI / 2);
        });
    }, (finished) => {
        imageView.Center = initialCeneter;
        imageView.Transform = initialTransform;

        AnimateWithSpring ();
    });
}
```

Первые два параметра для `AddKeyframeWithRelativeStartTime` метод укажите время начала и продолжительность опорного кадра, соответственно, в процентах от общей длины анимации. В примере выше результаты в изображение представления анимации его новый центр по первой секунды, а затем поворот на 90 градусов по следующей секунды. Поскольку анимация указывает `UIViewKeyframeAnimationOptions.Autoreverse` в качестве альтернативы оба ключевых кадров анимации в обратном порядке также. Наконец последний значения устанавливаются в исходное состояние, в обработчик завершения.

Снимке экрана ниже показан объединенный анимации с помощью опорных кадров:

 ![](images/keyframes.png "Этот снимки экрана показан объединенный анимации с помощью ключевых кадров")

## <a name="uikit-dynamics"></a>UIKit Dynamics

UIKit Dynamics — это новый набор API-интерфейсов в UIKit, которые позволяют приложениям для создания анимированных взаимодействий, в зависимости от физики. UIKit Dynamics инкапсулирует подсистему Двухмерная Физика для этого.

API является декларативным по своей природе. Объявить поведение физических взаимодействий путем создания объектов - вызывается *поведения* - express физики концепции, такие как гравитации, конфликтов, Спрингс и т. д. Затем присоедините реакции на события на другой объект, называется *динамическое animator*, который инкапсулирует представления. Динамические animator принимает различные применения поведения физики, объявленный в *динамические элементы* -элементы, реализующие `IUIDynamicItem`, такие как `UIView`.

Существует несколько простых моделей поведения доступность для запуска сложных взаимодействий, в том числе:

-  `UIAttachmentBehavior` — Присоединяется два динамических элементов таким образом, чтобы они перемещались вместе, или присоединяет динамического элемента до точки вложения.
-  `UICollisionBehavior` — Позволяет участвовать в конфликтах динамических элементов.
-  `UIDynamicItemBehavior` — Указывает общий набор свойств для применения к динамические элементы, такие как эластичности, плотности и трудностей.
-  `UIGravityBehavior` -Применяется gravity для динамического элемента, вызывая элементов для ускорения в гравитации направлении.
-  `UIPushBehavior` — Применяется принудительно для динамического элемента.
-  `UISnapBehavior` — Позволяет динамического элемента привязки в позицию с эффектом spring.


Несмотря на то, что существует множество примитивы, общий процесс для добавления в представление с помощью UIKit Dynamics взаимодействия на основе физики является одинаковым для всей поведения:

1.  Создание динамических animator.
1.  Создайте реакции на события.
1.  Добавляйте поведения динамического animator.


### <a name="dynamics-example"></a>Пример Dynamics

Давайте рассмотрим пример, который добавит гравитации и границу конфликтов `UIView`.

#### <a name="uigravitybehavior"></a>UIGravityBehavior

Добавлении gravity в представление изображения следует за 3 описанные выше шаги.

Мы будем работать `ViewDidLoad` метод для этого примера. Во-первых, добавьте `UIImageView` экземпляра следующим образом:

```csharp
image = UIImage.FromFile ("monkeys.jpg");

imageView = new UIImageView (new CGRect (new CGPoint (View.Center.X - image.Size.Width / 2, 0), image.Size)) {
                    Image =  image
                }

View.AddSubview (imageView);
```

Это создает представление изображение по центру по верхнему краю экрана. Чтобы сделать образ «fall» с гравитации, создайте экземпляр `UIDynamicAnimator`:

```csharp
dynAnimator = new UIDynamicAnimator (this.View);
```

`UIDynamicAnimator` Принимает экземпляр ссылку `UIView` или `UICollectionViewLayout`, который содержит элементы, которые будет анимироваться на вложенные реакции на события.

Создайте `UIGravityBehavior` экземпляра. Вы можете передать один или несколько объектов, реализующая `IUIDynamicItem`, например `UIView`:

```csharp
var gravity = new UIGravityBehavior (dynItems);
```

Поведение передается массив `IUIDynamicItem`, таким образом, который содержит один `UIImageView` экземпляра, мы анимации.

Наконец добавьте поведение динамического animator:

```csharp
dynAnimator.AddBehavior (gravity);
```

Это приводит к изображение вниз анимации с помощью гравитации, как показано ниже:

![](images/gravity2.png "Начальное положение изображения") 
![](images/gravity3.png "конечное расположение образа")

Так как нет ничего ограничение границ экрана, представление изображений просто находится в нижней. Чтобы ограничить представление таким образом, чтобы изображение в противоречие с краев экрана, мы можем добавить `UICollisionBehavior`. Мы обсудим в следующем разделе.

#### <a name="uicollisionbehavior"></a>UICollisionBehavior

Начнем с создания `UICollisionBehavior` и добавив его в динамической animator, как мы это делали `UIGravityBehavior`.

Измените код, включив `UICollisionBehavior`:

```csharp
using (image = UIImage.FromFile ("monkeys.jpg")) {

    imageView = new UIImageView (new CGRect (new CGPoint (View.Center.X - image.Size.Width / 2, 0), image.Size)) {
        Image =  image
    };

    View.AddSubview (imageView);

    // 1. create the dynamic animator
    dynAnimator = new UIDynamicAnimator (this.View);

    // 2. create behavior(s)
    var gravity = new UIGravityBehavior (imageView);
    var collision = new UICollisionBehavior (imageView) {
        TranslatesReferenceBoundsIntoBoundary = true
    };

    // 3. add behaviors(s) to the dynamic animator
    dynAnimator.AddBehaviors (gravity, collision);
}
```

`UICollisionBehavior` Имеет свойство с именем `TranslatesReferenceBoundsIntoBoundry`. Этому параметру `true` делает ссылку границы представления для использования в качестве границ конфликтов.

Теперь когда изображение вниз анимируется с гравитации, он отскакивает немного нижней части экрана перед этим для rest существует.

<!--, as shown below:

 ![](images/bounce.png "Now, when the image animates downward with gravity, it bounces slightly off the bottom of the screen before settling to rest there")-->

#### <a name="uidynamicitembehavior"></a>UIDynamicItemBehavior

Мы Дополнительно можно управлять поведением падающим представления изображения с дополнительные поведения. Например, мы добавим `UIDynamicItemBehavior` для повышения эластичности, вызывая представление изображений пересылать сведения при встрече с нижней части экрана.

Добавление `UIDynamicItemBehavior` приведены те же действия, как и в случае с другими режимами. Сначала создайте поведение:

```csharp
var dynBehavior = new UIDynamicItemBehavior (dynItems) {
    Elasticity = 0.7f
};
```

Затем добавьте поведение к динамической animator:

 `dynAnimator.AddBehavior (dynBehavior);`

С этим поведением в месте представление изображения будет передаваться сведения при встрече с границей.

## <a name="general-user-interface-changes"></a>Пользовательский интерфейс общие изменения

В дополнение к новых интерфейсов API UIKit UIKit, переходы контроллера, и расширенные UIView анимации, описанных выше iOS 7 появились разнообразные визуальные изменения в пользовательский интерфейс и связанных изменений API для различных представлений и элементов управления. Дополнительные сведения см. в разделе [iOS 7 Обзор пользовательского интерфейса](~/ios/platform/introduction-to-ios7/ios7-ui.md).

## <a name="text-kit"></a>Текст пакета

Комплект для текста является новый API, который предлагает мощные текст функции макета и подготовки к просмотру. Он опирается на низком уровне framework основного текста, но гораздо проще в использовании, чем основного текста.

Дополнительные сведения см. в разделе наших [TextKit](~/ios/platform/textkit.md)

## <a name="multitasking"></a>Многозадачность

iOS 7 изменяется, когда и как выполняется фоновой работы. Выполнение задачи в iOS 7 больше не поддерживает приложения переходит в спящий режим, если задачи выполняются в фоновом режиме, и приложения активируются для фоновой обработки несмежных образом. iOS 7 также добавляет три новых интерфейсов API для обновления приложений новым содержимым в фоновом режиме:

-  Получение фоновых данных — приложения для обновления содержимого в фоновом режиме с регулярными интервалами.
-  Удаленные уведомления - позволяет приложениям обновить содержимое, при получении Push-уведомление. Уведомления могут быть либо автоматической или отображения баннер на экране блокировки.
-  Фоновая служба передачи — разрешает отправку и скачивание данных, например больших файлов без фиксированное ограничение времени.


Дополнительные сведения о новых возможностях, многозадачность см. в разделах iOS Xamarin [руководство по фоновой обработке](~/ios/app-fundamentals/backgrounding/index.md).

## <a name="summary"></a>Сводка

В этой статье рассматриваются несколько основных добавлений к iOS. Во-первых он демонстрирует добавление пользовательских переходов контроллеров представления. Затем показано, как использовать переходы в представлениях коллекции, на страницах в контроллер навигации, а также интерактивно между представления коллекций. Затем в нем представлены некоторые усовершенствования, внесенные в UIView анимации, показывающий, как приложения используют UIKit для таких вещей, которые ранее требовали напрямую с базовой анимации. И, наконец новый API Dynamics UIKit, привносящий ядра физики UIKit, впервые появился вместе с поддержку форматированного текста, теперь доступен в структуре текста пакета.

## <a name="related-links"></a>Связанные ссылки

- [Введение в iOS 7 (пример)](https://developer.xamarin.com/samples/monotouch/IntroToiOS7)
- [Обзор пользовательского интерфейса iOS 7](~/ios/platform/introduction-to-ios7/ios7-ui.md)
- [Фоновая обработка](~/ios/app-fundamentals/backgrounding/index.md)
