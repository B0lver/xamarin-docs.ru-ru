---
title: Индикаторы хода выполнения и активности в Xamarin. iOS
description: В этом документе рассматривается использование индикаторов хода выполнения и активности в Xamarin. iOS. В нем описывается, как использовать их как программно, так и с помощью раскадровки.
ms.prod: xamarin
ms.assetid: 7AA887E4-51F7-4867-82C5-A8D2EA48AE07
ms.technology: xamarin-ios
author: davidortinau
ms.author: daortin
ms.date: 07/11/2017
ms.openlocfilehash: 76e1ee54a5e1b729fdcb0b0a2c1f278703b2b4d6
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73021962"
---
# <a name="progress-and-activity-indicators-in-xamarinios"></a>Индикаторы хода выполнения и активности в Xamarin. iOS

Вполне вероятно, что приложению придется выполнять длительные задачи, такие как загрузка или обработка данных, и что эта задержка может вызвать задержку при обновлении пользовательского интерфейса. В течение этого времени следует всегда использовать индикатор выполнения, чтобы убедиться в том, что система занята. Это дает пользователю контроль над тем, что приложение работает над своим запросом, что оно не ожидает ввода данных, и может предоставить подробные сведения о том, как долго они должны ждать.

iOS предоставляет два основных способа предоставления индикатора хода выполнения в приложении: Индикаторы действий (включая конкретный индикатор активности _сети_ ) и индикаторы выполнения.

## <a name="activity-indicator"></a>Индикатор действия

Индикаторы действий должны отображаться, когда приложение выполняет длительный процесс, но неизвестно точное время, которое потребуется задаче.

В Apple имеются следующие рекомендации по работе с индикаторами действий.

- По **возможности используйте индикаторы выполнения,** так как индикатор действия дает пользователю никаких отзывов о том, как долго выполняется процесс, и всегда используйте индикатор выполнения, если длина известна (например, количество байтов для загрузки в файле).
- **Сохранение индикатора анимированных** — пользователи связывают стационарный индикатор активности с остановленным приложением, поэтому индикатор должен быть анимирован во время его отображения.
- **Опишите обрабатываемую задачу** . просто отображение индикатора активности само по себе не является достаточным, пользователь должен сообщить о том, какой процесс ожидает. Включите осмысленную метку (как правило, одно выражение), которая четко определяет задачу.

### <a name="implementing-an-activity-indicator"></a>Реализация индикатора действия

Индикатор действия реализуется через класс [`UIActivityIndictorView`](xref:UIKit.UIActivityIndicatorView) , чтобы указать, что выполняется `UIActivity`.

### <a name="activity-indicators-and-storyboards"></a>Индикаторы действий и раскадровки

Если вы используете конструктор iOS для создания пользовательского интерфейса, индикатор действия можно добавить в макет из панели элементов. Следующие свойства можно изменить с Панель свойств:

![Панель свойств](progress-activity-indicator-images/progress-indicator1.png)

### <a name="managing-activity-indicator-behavior"></a>Управление поведением индикатора действия

Используйте методы `StartAnimating()` и `StopAnimating()` для запуска и завершения анимации индикатора действия.

Задайте для свойства `HidesWhenStopped` значение `true`, чтобы индикатор действия исчезал после вызова `StopAnimating()`. По умолчанию задано значение `true`. В любой момент можно увидеть, выполняет ли индикатор действия вращающуюся анимацию, проверив свойство `IsAnimating`. 

### <a name="managing-activity-indicator-appearances"></a>Управление внешним видом индикаторов действий

Перечисление `UIActivityIndicatorViewStyle` может быть передано в качестве параметра при создании экземпляра индикатора действия. Его можно использовать для задания стиля оформления `Gray`, `White`или `WhiteLarge`, например:

```csharp
activitySpinner = new UIActivityIndicatorView(UIActivityIndicatorViewStyle.WhiteLarge);
```

Можно переопределить цвет, предоставленный `UIActivityIndicatorViewStyle`, установив свойство `Color`.

## <a name="progress-bar"></a>Progress Bar

Индикатор выполнения представляет собой линию, которая заполняется цветом для указания состояния и длины длительной задачи. Индикаторы выполнения всегда должны использоваться, если длина задач известна или может быть вычислена.

В Apple имеются следующие рекомендации по работе с индикаторами выполнения.

- **Точный отчет** . индикаторы выполнения всегда должны быть точным представлением времени, необходимого для выполнения задачи. Никогда не иным время, чтобы приложение было занято.
- **Используйте для хорошо определенных индикаторов длительности** . индикатор выполнения должен не только показывать длительную задачу, но и предоставить пользователю сведения о том, какая часть задачи завершена, и оценить оставшееся время.

### <a name="implementing-an-progress-bar"></a>Реализация индикатора выполнения

Индикатор выполнения создается путем создания экземпляра [`UIProgressView`](xref:UIKit.UIProgressView)

### <a name="progress-bars-and-storyboards"></a>Индикаторы выполнения и раскадровки

При использовании конструктора iOS можно также добавить индикатор выполнения в пользовательский интерфейс. Найдите **представление ход выполнения** на **панели элементов** и перетащите его в представление.

На панели свойств можно настроить следующие свойства:

![Панель свойств](progress-activity-indicator-images/progress-indicator3.png)

### <a name="managing-progress-bar-behavior"></a>Управление поведением индикатора выполнения

Ход выполнения линейки можно изначально задать с помощью свойства `Progress`:

```csharp
ProgressBar.Progress = 0f;
```

Ход выполнения можно настроить с помощью метода `SetProgress` и передачи логического объявления, если требуется, чтобы изменение было анимировано.

```csharp
ProgressBar.SetProgress(1.0f, true);
```

Дополнительные сведения об использовании индикатора выполнения см. в разделе о [ходе выполнения отчетов](https://github.com/xamarin/recipes/tree/master/Recipes/cross-platform/networking/download_progress) и в [примере уикаталог tvOS](https://docs.microsoft.com/samples/xamarin/ios-samples/tvos-uicatalog).

### <a name="managing-progress-bar-appearance"></a>Управление видом индикатора выполнения

Как и индикатор действия, перечисление `UIProgressViewStyle` может быть передано в качестве параметра при создании экземпляра индикатора выполнения.

Для изменения хода выполнения и отслеживания изображения и цвета оттенок можно использовать следующие свойства:

```csharp
progressBar = new UIProgressView(UIProgressViewStyle.Default)
            {
                ProgressImage = UIImage.FromBundle("TrackImage"),
                ProgressTintColor = UIColor.Cyan,
                TrackImage = UIImage.FromBundle("TrackImage"),
                TrackTintColor = UIColor.Magenta
            }; 
```
