---
title: Общие сведения о фоновой обработке в iOS
description: 'В этом документе описывается фоновый режим в iOS: состояния приложения, методы жизненного цикла приложений и обновлений приложения в фоновом режиме.'
ms.prod: xamarin
ms.assetid: E214F2C7-E74E-46C7-B5BA-080B30D61250
ms.technology: xamarin-ios
author: bradumbaugh
ms.author: brumbaug
ms.date: 07/24/2018
ms.openlocfilehash: 621a2d25a8b800ad95be2c8b71a5e6cdf6abca21
ms.sourcegitcommit: aa9b9b203ab4cd6a6b4fd51e27d865e2abf582c1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/30/2018
ms.locfileid: "39351207"
---
# <a name="introduction-to-backgrounding-in-ios"></a>Общие сведения о фоновой обработке в iOS

iOS регулирует фоновой обработки очень тесно и предлагает три подхода к его реализации:

-  **Зарегистрировать фоновую задачу,** — Если приложению для выполнения важных задач, оно может запросить у iOS не для того, чтобы прервать задачу переноса приложения в фоновом режиме. Например приложение может потребоваться завершить вход пользователя или завершения загрузки большого файла.
-  **Зарегистрировать в качестве фона необходимые приложения** -приложение можно зарегистрировать как конкретный тип приложения, котором известно, определенным требованиям фоновой обработки, таких как *аудио* , *VoIP* ,  *Внешних периферийных устройств* , *Newsstand* , и *расположение* . Эти приложения могут непрерывная Фоновая обработка привилегии до тех пор, пока они выполняют задачи, которые находятся в параметры зарегистрированного типа приложения.
-  **Включить обновления в фоновом режиме** -приложений можно активировать обновления в фоновом режиме с *область мониторинга* или посредством прослушивания *значительные изменения расположения* . Начиная с версии iOS 7, приложения также могут регистрировать для обновления содержимого в фоновом режиме с помощью *фоновое получение* или *удаленные уведомления* .


## <a name="application-states-and-application-delegate-methods"></a>Состояния приложения и методов делегата приложения

Прежде чем углубляться в код для фоновой обработки в iOS, необходимо понять как фоновая обработка оказывает влияние на жизненный цикл приложения iOS.

Жизненный цикл приложений iOS является коллекцией из состояния приложения и способы перемещения между ними. Приложение переходит между состояниями на основе поведения пользователя и backgrounding требованиям приложения. Перемещение проиллюстрирован на следующей схеме:

 [![](introduction-to-backgrounding-in-ios-images/applicationlifecycle-.png "Схема состояний приложения и методов делегата приложения")](introduction-to-backgrounding-in-ios-images/applicationlifecycle-.png#lightbox)

-  **Не запущена** -приложение еще не запущена на устройстве.
-  **Выполнение/активный** -приложение на экране и выполняет код на переднем плане.
-  **Неактивные** -приложения прерывается, телефонный звонок, текст или другие прерывания.
-  **В фоновом режиме** -приложения перемещаются в фоновом режиме и продолжает выполнение фонового кода.
-  **SUSPENDED** — Если приложение не имеет никакой код для выполнения в фоновом режиме, или если весь код завершен, приложение будет *Suspended* Операционной системой. Процесс приостановки приложения остается активным, но приложение не может выполнить любой код в этом состоянии.
-  **Вернуться к не запущена или остановки (Rare)** — в некоторых случаях процесс приложения уничтожается, и приложение возвращается к *не запущена* состояния. Это происходит в ситуациях нехватки памяти, или если пользователь вручную завершает работу приложения.


С появлением поддержку многозадачности, редко завершает простаивающие приложения iOS и вместо этого хранит свои процессы *Suspended* в памяти. Поддержания процесс приложения гарантирует, что приложение быстро запускается при очередном открытии. Это также означает, приложения могут свободно перемещаться из *Suspended* состояния обратно в *Backgrounded* состояния без рисования на системные ресурсы. iOS 7 использует эту функцию с помощью новых API, позволяют приложениям приостановить фоновые задачи, когда устройство переходит в спящий режим, содержимое обновления непосредственно в фоновом режиме без взаимодействия с пользователем и многое другое. Будут рассмотрены новые интерфейсы API в [методы фоновой обработки в iOS](~/ios/app-fundamentals/backgrounding/ios-backgrounding-techniques/index.md).

## <a name="application-lifecycle-methods"></a>Методы жизненного цикла приложения

При изменении состояния приложения iOS уведомляет приложение через методы событий в `AppDelegate` класса:

-  `OnActivated` -Это называется при первом запуске приложения, и каждый раз, чтобы приложение возвращается на передний план. Это место для размещения кода, которое должно выполняться каждый раз при открытии приложения.
-  `OnResignActivation` — Если пользователь получает прерывания, таких как текст или телефонный звонок, этот метод вызывается, и приложения оно временно отключается. Должен ли пользователь принять телефонный звонок, приложения будут отправляться в фоновом режиме.
-  `DidEnterBackground` — Вызывается, когда приложение backgrounded состояния, этот метод предоставляет приложения примерно через пять секунд для подготовки к возможное прекращение. Это время можно использовать для сохранения сведений о пользователях и задачи и удалить конфиденциальную информацию на экране.
-  `WillEnterForeground` — Когда пользователь возвращает приложению в фоновом режиме или приостановленных и запустившая его на передний план `WillEnterForeground` вызывается. Это время для подготовки к приложению делать на переднем плане, восстановление любое состояние, сохраненное во время `DidEnterBackground` .  `OnActivated` вызывается сразу после завершения этого метода.
-  `WillTerminate` -Завершить работу приложения и его процесса уничтожается. Этот метод вызывается только если многозадачность на устройстве или конкретной версии ОС, недоступен, если не хватает памяти, или если пользователь вручную завершает backgrounded приложения. Обратите внимание, что приостановленных приложений, прерываться не будет вызывать метод `WillTerminate` .


На следующей схеме показано, как состояния приложения и методы жизненного цикла работают вместе:

 [![](introduction-to-backgrounding-in-ios-images/image2.png "Схема иллюстрирует, как состояния приложения и методы жизненного цикла работают вместе")](introduction-to-backgrounding-in-ios-images/image2.png#lightbox)

## <a name="user-controls-for-backgrounding-in-ios"></a>Пользовательские элементы управления для фоновой обработке в iOS

iOS 7 появился несколько функций, чтобы предоставить пользователям дополнительный контроль над backgrounded состояния приложения. Оба переключателя приложений и фоновое обновление приложения влияет на жизненного цикла приложения.

### <a name="app-switcher"></a>Приложение переключателя

Переключателя приложений — это важный элемент управления функция, впервые появился в iOS 7. Он запускается, дважды коснитесь **Главная** кнопку и содержит приложений, процессы проверки активности:

 [![](introduction-to-backgrounding-in-ios-images/app-switcher-.png "Перемещение между приложениями с помощью переключателя приложений")](introduction-to-backgrounding-in-ios-images/app-switcher-.png#lightbox)

С помощью переключателя приложений, пользователи могут прокручивать моментальные снимки всех приложений в фоновом режиме и приостановленных. При нажатии кнопки приложение запускается на передний план. Проведение пальцем по экрану вверх удаляет приложение из фона, завершает его процесс. Мы обратим поближе переключателя приложений в [iOS Демонстрация жизненного цикла приложения](~/ios/app-fundamentals/backgrounding/application-lifecycle-demo.md) в следующем разделе.

> [!IMPORTANT]
> Переключатель приложения не видно разницы в фоновом режиме и приостановленных приложений.



### <a name="background-app-refresh-settings"></a>Параметры обновления приложения фона

iOS 7 повышает контроль над жизненным циклом приложения, позволяя пользователям отказаться от фоновой обработки для приложений [зарегистрирован для фоновой обработки](~/ios/app-fundamentals/backgrounding/ios-backgrounding-techniques/registering-applications-to-run-in-background.md). *Это не позволяет запускать фоновые задачи приложения*.

Пользователи могут изменять этот параметр, перейдя по адресу <span class="uiitem">параметры > Общие > фоновое обновление приложения</span> и редактирования backgrounding привилегии для выбранного приложения. Если фоновое обновление приложения имеет значение off, приложение будет приостановлен немедленно при входе в фоновом режиме, а запрещено выполнить все фоновые задачи:

 [![](introduction-to-backgrounding-in-ios-images/settings-.png "Параметры обновления приложения фона")](introduction-to-backgrounding-in-ios-images/settings-.png#lightbox)

Разработчикам можно проверить состояние фона обновление приложения с `BackgroundRefreshStatus` API. Пример, см. в разделе [рецепт проверьте фоновый обновить параметр](https://github.com/xamarin/recipes/tree/master/Recipes/ios/multitasking/check_background_refresh_setting).

После рассмотрения основ iOS жизненного цикла приложения и средства для управления жизненным циклом приложений. Теперь давайте посмотрим, жизненный цикл приложений iOS в действии.

