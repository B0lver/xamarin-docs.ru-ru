---
title: Работа со значениями по умолчанию пользователя, в Xamarin.iOS
description: В этой статье рассматривается работа с NSUserDefaults, чтобы сохранить параметры по умолчанию в приложение Xamarin iOS или расширения. Он описывает NSUserDefaults на высоком уровне и обсуждаются способы чтения и записи значений.
ms.prod: xamarin
ms.assetid: DAE7FFC4-B8C9-4D9E-886A-9B2388452EEB
ms.technology: xamarin-ios
author: lobrien
ms.author: laobri
ms.date: 06/07/2016
ms.openlocfilehash: 688db534d6c99a8fadb7535f0532f9c1e9564707
ms.sourcegitcommit: 4b402d1c508fa84e4fc3171a6e43b811323948fc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61153391"
---
# <a name="working-with-user-defaults-in-xamarinios"></a>Работа со значениями по умолчанию пользователя, в Xamarin.iOS

_В этой статье рассматривается работа с NSUserDefault, чтобы сохранить параметры по умолчанию в приложении Xamarin.iOS или расширения._


`NSUserDefaults` Класс предоставляет способ для iOS, приложений и расширений для программного взаимодействия с системой по умолчанию используется во всей системе. С помощью системы по умолчанию, пользователь может настроить поведение приложения или стиля в соответствии с их предпочтения (на основе дизайна приложения). Например, для представления данных в Visual Studio метрик Имперский измерения или выберите заданного тему пользовательского интерфейса.

При использовании групп приложений, `NSUserDefaults` также предоставляет способ для обмена данными между приложениями (или расширения) из данной группы.

<a name="About-User-Defaults" />

## <a name="about-user-defaults"></a>О пользователя по умолчанию

Как уже говорилось, исходные параметры пользователя (`NSUserDefaults`) можно добавить в приложение (или расширения) и используется для предоставления настраиваемых параметров, которые конечный пользователь может изменять для настройки внешнего вида или работы приложения во время выполнения.

Когда приложение сначала выполняет, `NSUserDefaults` считывает ключи и значения из базы данных приложения пользователя по умолчанию и кэширует их в память во избежание Открытие и чтение базы данных каждый раз, значение является обязательным. 

> [!IMPORTANT]
> Компания Apple больше не рекомендует вызов разработчика `Synchronize` метод для синхронизации кэша в памяти с базой данных напрямую. Вместо этого он будет автоматически вызываться с периодическими интервалами для синхронизации кэша в памяти с базой данных значения по умолчанию для пользователя.

`NSUserDefaults` Класс содержит несколько удобных методов для чтения и записи значения предпочтения для основных типов данных, такие как: строка, целое число, число с плавающей запятой, логическое значение и URL-адреса. Другие типы данных можно архивировать с помощью `NSData`, затем считывается или записывается в базу данных пользователя по умолчанию. Дополнительные сведения см. в разделе Apple [предпочтения и руководство по программированию на параметры](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/UserDefaults/Introduction/Introduction.html#//apple_ref/doc/uid/10000059i).

<a name="Accessing-the-Shared-NSUserDefaults-Instance" />

## <a name="accessing-the-shared-nsuserdefaults-instance"></a>Доступ к экземпляру Общие параметры NSUserDefaults 

Экземпляр по умолчанию общего пользователя предоставляет доступ к исходные параметры пользователя для текущего пользователя устройства. Если объект Общие параметры по умолчанию не существует, он создается первый раз, он имеет доступ и инициализировать со следующими сведениями:

- `NSArgumentDomain` Состоящий из значения по умолчанию, извлеченными из текущего приложения.
- Идентификатор пакета домена приложения.
- `NSGlobalDomain` Состоящий из значения по умолчанию, совместно используемое всеми приложениями.
- Отдельный домен для каждого пользователя предпочитаемых языков.
- `NSRegistrationDomain` С набором временные значения по умолчанию, которые могут быть изменены в приложении, чтобы обеспечить поиск всегда выполняется успешно.

Чтобы получить доступ к общим пользователя по умолчанию используется экземпляр, используйте следующий код:

```csharp
// Get Shared User Defaults
var plist = NSUserDefaults.StandardUserDefaults;
```

<a name="Accessing-an-App-Group-NSUserDefaults-Instance" />

## <a name="accessing-an-app-group-nsuserdefaults-instance"></a>Обращения к экземпляру NSUserDefaults групп приложений

Как уже говорилось, с помощью групп приложений, `NSUserDefaults` может использоваться для обмена данными между приложениями (или расширения) из данной группы. Во-первых, необходимо убедиться, что эту группу приложений и необходимые идентификаторы приложений правильно настроены в **сертификаты, идентификаторы и профили** разделе [Центр разработчиков iOS](https://developer.apple.com/devcenter/ios/) и были установлены в среде разработки.

Далее приложение и/или расширения проектов необходимо иметь одно из допустимых идентификаторов приложений, созданной выше и `Entitlements.plist` файл должен быть включены в пакет приложений с помощью групп приложений включены и указано.

С помощью все это в месте общего приложения группы пользователя по умолчанию может осуществляться с использованием следующий код:

```csharp
// Get App Group User Defaults
var plist = new NSUserDefaults ("group.com.xamarin.todaysharing", NSUserDefaultsType.SuiteName);
```

Где `group.com.xamarin.todaysharing` создается в эту группу приложений **сертификаты, идентификаторы и профили** , необходимо получить доступ. Дополнительные сведения см. в разделе [возможностей групп приложений](~/ios/deploy-test/provisioning/capabilities/app-groups-capabilities.md) документации.

<a name="Reading-Default-Values" />

## <a name="reading-default-values"></a>Считывание значений по умолчанию

После запуска пользователя по умолчанию базой данных, можно считывать значения из значения по умолчанию, с помощью пары "ключ-значение" и несколько удобных методов, в зависимости от типа данных, считываемых:

- `ArrayForKey` — Возвращает массив `NSObjects` для данного значения ключа.
- `BoolForKey` — Возвращает логическое значение для указанного ключа.
- `DataForKey` — Возвращает `NSData` объекта для указанного ключа.
- `DictionaryForKey` — Возвращает `NSDictionary` для указанного ключа.
- `DoubleForKey` — Возвращает значение типа double для указанного ключа.
- `FloatForKey` — Возвращает значение с плавающей запятой для указанного ключа.
- `IntForKey` — Возвращает целочисленное значение для указанного ключа.
- `StringArrayForKey` — Возвращает массив `String` объекты из заданного значения ключа.
- `StringForKey` — Возвращает строковое значение для указанного ключа.
- `URLForKey` — Возвращает `NSUrl` значение для указанного ключа.

Например следующий код будет считывать логическое значение из исходные параметры пользователя:

```csharp
// Get Shared User Defaults
var plist = NSUserDefaults.StandardUserDefaults;
...

// Get value
var useHeader = plist.BoolForKey("UseHeader");

```

<a name="Writing-Default-Values" />

## <a name="writing-default-values"></a>Запись значений по умолчанию

Так же, как чтение значений выше, после запуска пользователя по умолчанию базой данных, можно записывать значения в значения по умолчанию, с помощью пары "ключ-значение" и несколько удобных методов, в зависимости от типа данных, записываемых:

- `SetBool` -Записывает заданное логическое значение с заданным ключом.
- `SetDouble` -Записывает заданное значение типа double с заданным ключом.
- `SetFloat` — Записывает значение заданного типа float с заданным ключом.
- `SetString` -Записывает заданное строковое значение с заданным ключом.
- `SetURL` -Записывает заданный URL-адрес (`NSUrl`) значение с заданным ключом.

Например следующий код будет выведено значение типа boolean исходные параметры пользователя:

```csharp
// Get Shared User Defaults
var plist = NSUserDefaults.StandardUserDefaults;
...

// Save value
plist.SetBool(useHeader, "UseHeader");
...

```

> [!IMPORTANT]
> Когда приложение сначала выполняет, `NSUserDefaults` считывает ключи и значения из базы данных приложения пользователя по умолчанию и кэширует их в память во избежание Открытие и чтение базы данных каждый раз, значение является обязательным.



<a name="Summary" />

## <a name="summary"></a>Сводка

В этой статье подробно рассматривается `NSUserDefaults` класс и как его можно использовать для предоставления набора параметров, которые конечный пользователь может использовать для настройки приложения Xamarin.iOS. Кроме того он рассматривается использование группы приложений для обмена данными между расширением и его родительское приложение или в разных приложениях в группе.


## <a name="related-links"></a>Связанные ссылки

- [Примеры tvOS](https://developer.xamarin.com/samples/tvos/all/)
- [Параметров и настроек, руководство по программированию](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/UserDefaults/Introduction/Introduction.html#//apple_ref/doc/uid/10000059i)
- [Параметры NSUserDefaults](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/#//apple_ref/doc/constant_group/NSUserDefaults_Domains)
