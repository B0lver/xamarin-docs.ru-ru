---
title: Функции безопасности и конфиденциальности iOS
description: В этом документе описываются функции обеспечения безопасности и конфиденциальности в iOS и обсуждаются способы их использования с Xamarin. iOS. Он рассматривает обновления, внесенные в iOS 10, и доступ к личным данным пользователя.
ms.prod: xamarin
ms.assetid: 718C8721-C359-4650-878A-D68E159A3F53
ms.technology: xamarin-ios
author: davidortinau
ms.author: daortin
ms.date: 03/16/2017
ms.openlocfilehash: cdc59c4eb3863435482acf5eb0dcd1368beea693
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73009666"
---
# <a name="ios-security-and-privacy-features"></a>Функции безопасности и конфиденциальности iOS

_В этой статье рассматривается работа с безопасностью и конфиденциальностью в iOS и их влияние на приложение Xamarin. iOS._

Компания Apple внесла несколько усовершенствований в безопасность и конфиденциальность в iOS 10 (и более поздних версиях), которые помогут разработчику повысить безопасность своих приложений и обеспечить конфиденциальность конечного пользователя. В этой статье рассматривается реализация этих функций в приложении Xamarin. iOS.

<a name="General-Enhancements" />

## <a name="general-enhancements"></a>Общие улучшения

В iOS 10 были внесены следующие общие изменения в безопасность и конфиденциальность.

- API общей архитектуры безопасности данных (CDSA) является устаревшим и должен быть заменен API Секкэй для создания асимметричных ключей.
- Новый ключ `NSAllowsArbitraryLoadsInWebContent` можно добавить в файл **info. plist** приложения и разрешить правильную загрузку веб-страниц, пока защита Apple Transport Security (ATS) все еще включена для остальной части приложения. Дополнительные сведения см. в документации по [безопасности транспорта приложений](~/ios/app-fundamentals/ats.md) .
- Так как новый буфер обмена в iOS 10 и macOS Sierra позволяет пользователю копировать и вставлять данные между устройствами, API был развернут, чтобы позволить буферу обмена быть ограниченным на определенное устройство и иметь отметки времени для автоматического сброса в заданной точке. Кроме того, именованные монтажные панели больше не сохраняются и должны быть заменены контейнерами общих монтажных столе.
- Для всех подключений SSL/TLS симметричный Шифр RC4 теперь отключен по умолчанию. Кроме того, API защищенного транспорта больше не поддерживает SSLv3, и рекомендуется как можно быстрее приостанавливаться к использованию шифрования SHA-1 и 3DES.

<a name="Accessing-Private-User-Data" />

## <a name="accessing-private-user-data"></a>Доступ к личным данным пользователя

Приложения, выполняющиеся в iOS 10 (или более поздней версии), должны статически объявлять свои цели для доступа к конкретным функциям или сведениям о пользователях, вводя один или несколько ключей конфиденциальности в файлы **info. plist** , объясняющие пользователю, почему приложение хочет получить доступ.

> [!IMPORTANT]
> Приложения, которым не удается предоставить необходимые ключи, будут автоматически завершаться системой при попытке получить доступ к одной из ограниченных функций или информации о пользователе _без ошибок_. Если приложение неожиданно завершает работу в iOS 10, убедитесь, что указаны все необходимые **сведения. plist** .

Доступны следующие ключи, связанные с конфиденциальностью:

- **Конфиденциальность — описание использования Apple Music** (`NSAppleMusicUsageDescription`). позволяет разработчику описать, почему приложение хочет получить доступ к библиотеке мультимедиа пользователя.
- **Конфиденциальность — описание использования периферийных устройств Bluetooth** (`NSBluetoothPeripheralUsageDescription`). позволяет разработчику описать, почему приложение хочет получить доступ к Bluetooth на устройстве пользователя.
- **Конфиденциальность — описание использования календарей** (`NSCalendarsUsageDescription`). позволяет разработчику описать, почему приложение хочет получить доступ к календарю пользователя.
- **Конфиденциальность — описание использования камеры** (`NSCameraUsageDescription`). позволяет разработчику описать, почему приложение хочет получить доступ к камере устройства.
- **Конфиденциальность — описание использования контактов** (`NSContactsUsageDescription`). позволяет разработчику описать, почему приложение хочет получить доступ к контактам пользователя.
- **Конфиденциальность — описание использования общего ресурса исправности** (`NSHealthShareUsageDescription`). позволяет разработчику описать, почему приложение хочет получить доступ к данным о работоспособности пользователя. Дополнительные сведения см. в [справочнике по классу Хкхеалссторе](https://developer.apple.com/reference/healthkit/hkhealthstore)Apple.
- **Конфиденциальность — описание использования обновления работоспособности** (`NSHealthUpdateUsageDescription`). позволяет разработчику описать, почему приложение хочет изменить данные о работоспособности пользователя. Дополнительные сведения см. в [справочнике по классу Хкхеалссторе](https://developer.apple.com/reference/healthkit/hkhealthstore)Apple.
- **Конфиденциальность — описание использования HomeKit** (`NSHomeKitUsageDescription`). позволяет разработчику описать, почему приложение хочет получить доступ к данным конфигурации HomeKit пользователя.
- **Конфиденциальность — описание использования "всегда использование** " (`NSLocationAlwaysUsageDescription`). позволяет разработчику описать, почему приложение хочет всегда иметь доступ к расположению пользователя.
- Не рекомендуется **Конфиденциальность — описание использования расположения** (`NSLocationUsageDescription`). позволяет разработчику описать, почему приложение хочет получить доступ к расположению пользователя. *Примечание. Этот ключ является устаревшим в iOS 8 (и более поздних версиях). Вместо этого используйте `NSLocationAlwaysUsageDescription` или `NSLocationWhenInUseUsageDescription`.*
- **Конфиденциальность — расположение при использовании описание использования** (`NSLocationWhenInUseUsageDescription`). позволяет разработчику описать, почему приложение хочет получить доступ к расположению пользователя во время его выполнения.
- Не рекомендуется **Конфиденциальность — описание использования библиотеки мультимедиа** . позволяет разработчику описать, почему приложение хочет получить доступ к библиотеке мультимедиа пользователя. *Примечание. Этот ключ является устаревшим в iOS 8 (и более поздних версиях). Вместо этого используйте `NSAppleMusicUsageDescription`.*
- **Конфиденциальность — описание использования микрофона** (`NSMicrophoneUsageDescription`). позволяет разработчику описать, почему приложение хочет получить доступ к микрофону устройств.
- **Конфиденциальность — описание использования движения** (`NSMotionUsageDescription`). позволяет разработчику описать, почему приложение хочет получить доступ к акселерометру устройства.
- **Конфиденциальность — описание использования библиотеки фотографий** (`NSPhotoLibraryUsageDescription`). позволяет разработчику описать, почему приложение хочет получить доступ к библиотеке фотографий пользователя.
- **Конфиденциальность — описание использования напоминаний** (`NSRemindersUsageDescription`). позволяет разработчику описать, почему приложение хочет получить доступ к напоминаниям пользователя.
- **Конфиденциальность — описание использования Siri** (`NSSiriUsageDescription`). позволяет разработчику описать, почему приложение хочет отправить данные пользователя в Siri.
- **Конфиденциальность — описание использования распознавания речи** (`NSSpeechRecognitionUsageDescription`). позволяет разработчику описать, почему приложение хочет отправить данные пользователя на серверы распознавания речи Apple.
- **Конфиденциальность — описание использования поставщика услуг ТВ** (`NSVideoSubscriberAccountUsageDescription`). позволяет разработчику описать, почему приложение хочет получить доступ к учетной записи поставщика телевизионных услуг.

Дополнительные сведения о работе с ключами **info. plist** см. в разделе [Справочник по ключам списка информационных свойств](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009248-SW1)Apple.

<a name="Setting-Privacy-Keys" />

## <a name="setting-privacy-keys"></a>Настройка ключей конфиденциальности

Рассмотрим следующий пример доступа к HomeKit в iOS 10 (и более поздней версии). разработчику потребуется добавить `NSHomeKitUsageDescription` ключ в файл **info. plist** приложения и предоставить строку, объявляющая, почему приложение хочет получить доступ к базе данных HomeKit пользователя. Эта строка будет представлена пользователю при первом запуске приложения:

![Пример оповещения Ншомекитусажедескриптион](security-privacy-images/info01.png "Пример оповещения Ншомекитусажедескриптион")

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

Xamarin. iOS для Visual Studio сейчас не поддерживает изменение ключей конфиденциальности **info. plist** в редакторе манифестов iOS по умолчанию. Вместо этого вам потребуется использовать универсальный редактор PList, поэтому выполните следующие действия.

1. Щелкните правой кнопкой мыши файл **info. plist** в **Обозреватель решений** и выберите команду **Открыть с помощью...** .
2. Выберите **универсальный редактор PList** из списка программ, чтобы открыть файл, а затем нажмите кнопку **ОК**.

    ![Выберите универсальный редактор PList](security-privacy-images/InfoEditorSelectionVs.png "Выберите универсальный редактор PList")
3. Нажмите кнопку **+** в последней строке редактора, чтобы добавить новую запись в список. Он будет называться "пользовательским свойством", для которого задан тип `String` и пустое значение.
4. Щелкните имя свойства, и отобразится раскрывающийся список.
5. В раскрывающемся списке выберите ключ конфиденциальности (например, **заявление о конфиденциальности — HomeKit Usage**): 

    ![Выберите ключ конфиденциальности](security-privacy-images/InfoPListEditorSelectKey.png "Выберите ключ конфиденциальности")
6. Введите описание в столбец значение, чтобы приложение захотело получить доступ к заданной функции или сведениям о пользователе. 

    ![Введите описание](security-privacy-images/InfoPListSetValue.png "Введите описание")
7. Сохраните изменения в файле.

# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio для Mac](#tab/macos)

Чтобы задать любой из ключей конфиденциальности, выполните следующие действия.

1. В **обозревателе решений** дважды щелкните файл **Info.plist**, чтобы открыть его для редактирования.
2. В нижней части экрана переключитесь в представление **исходного кода** .
3. Добавление новой **записи** в список.
4. В раскрывающемся списке выберите ключ конфиденциальности (например, **заявление о конфиденциальности — HomeKit Usage**): 

    ![Выберите ключ конфиденциальности](security-privacy-images/info02.png "Выберите ключ конфиденциальности")
5. Введите описание, по которому приложение хочет получить доступ к заданным функциям или сведениям о пользователе: 

    ![Введите описание](security-privacy-images/info03.png "Введите описание")
6. Сохраните изменения в файле.

-----

> [!IMPORTANT]
> В приведенном выше примере не удалось установить `NSHomeKitUsageDescription` ключ в файле **info. plist** , в результате чего приложение будет _автоматически завершаться сбоем_ (закрывается системой во время выполнения) без ошибок при выполнении в iOS 10 (или более поздней версии).

<a name="Summary" />

## <a name="summary"></a>Сводка

В этой статье были рассмотрены изменения в области безопасности и конфиденциальности, внесенные компанией Apple в iOS 10, и их влияние на приложение Xamarin. iOS.

## <a name="related-links"></a>Связанные ссылки

- [Примеры iOS 10](https://docs.microsoft.com/samples/browse/?products=xamarin&term=Xamarin.iOS+iOS10)
