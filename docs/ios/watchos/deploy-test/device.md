---
title: Тестирование на устройствах Apple Watch
description: В этом документе описывается, как развернуть приложение watchOS, созданное с помощью Xamarin, для тестирования на фактическом Apple Watch. Здесь обсуждаются устройства, профили подготовки, тестирование и предоставляются некоторые советы по устранению неполадок.
ms.prod: xamarin
ms.assetid: A72A7D38-FAE8-4DD2-843D-54B74C5078D7
ms.technology: xamarin-ios
author: davidortinau
ms.author: daortin
ms.date: 03/17/2017
ms.openlocfilehash: c049fb0bd05749db30d99603fb9179e710f815f7
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73028352"
---
# <a name="testing-on-apple-watch-devices"></a>Тестирование на устройствах Apple Watch

После выполнения [действий по развертыванию](~/ios/watchos/deploy-test/index.md) для создания идентификаторов приложений и групп приложений (при необходимости) используйте инструкции на этой странице:

- [Настройте устройства](#devices) в центре разработки Apple и
- [Создайте профили подготовки для разработки](#profiles), а затем
- [Развертывание и тестирование](#testing) на Apple Watch.

<a name="devices" />

## <a name="devices"></a>Устройства

Тестирование приложений iOS на реальном устройстве iPhone или iPad всегда требует, чтобы устройство было зарегистрировано в центре разработки. Список устройств выглядит следующим образом (щелкните знак "плюс" **+** , чтобы добавить новое устройство):

![](device-images/devices-sml.png "The device list looks like this")

Контрольные значения не различаются. Теперь необходимо добавить устройство Apple Watch перед развертыванием в нем приложений. Найдите UDID для наблюдения с помощью **Xcode** (список**устройств Windows >** ). При подключении связанного телефона отобразятся также сведения о часах.

[![](device-images/xcode-devices-sml.png "Paired Watch Information")](device-images/xcode-devices.png#lightbox)

Когда вы узнаете о UDIDе контрольных значений, добавьте его в список устройств в центре разработки:

![](device-images/devices-watch-sml.png "The Watch's UDID in the device list")

После добавления устройства контрольное значение убедитесь, что оно выбрано в новых или существующих создаваемых профилях подготовки или ad-hoc.

![](device-images/devices-provisioning.png "Available device list")

Не забывайте, что при изменении существующего профиля подготовки для скачивания и повторной установки!

<a name="profiles" />

## <a name="development-provisioning-profiles"></a>Профили подготовки для разработки

Чтобы выполнить сборку для тестирования на устройстве, необходимо создать **профиль подготовки разработки** для каждого идентификатора приложения в решении.

Если у вас есть идентификатор приложения с подстановочными знаками, *потребуется только один профиль подготовки*. но если у вас есть отдельный идентификатор приложения для каждого проекта, вам потребуется профиль подготовки для каждого идентификатора приложения:

![](device-images/provisioningprofile-development.png "The Development Provisioning Profile")

После создания всех трех профилей они будут отображаться в списке. Не забудьте скачать и установить каждый из них:

![](device-images/provisioningprofiles.png "The available Development Provisioning Profiles")

Вы можете проверить профиль подготовки в **параметрах проекта** , выбрав пункт **Сборка > Пакет iOS** **и выбрав** конфигурацию **iPhone или отладить** .

В списке **профиль подготовки** будут показаны все соответствующие профили. Вы увидите профили сопоставления, созданные в этом раскрывающемся списке:

![](device-images/options-selectprofile.png "The Provisioning Profile list")

<a name="testing" />

## <a name="testing-on-a-watch-device"></a>Тестирование на устройстве наблюдения

После настройки устройства, идентификаторов приложений и профилей подготовки, можно приступать к тестированию.

1. Убедитесь, что устройство iPhone подключено, а контрольные значения уже парны для iPhone.

2. Убедитесь, что для конфигурации задано значение **выпуск** или **Отладка**.

3. Убедитесь, что подключенное устройство iPhone выбрано в списке назначения.

4. Щелкните правой кнопкой мыши проект приложения iOS (не контрольное значение или расширение) и выберите пункт **Назначить запускаемым проектом**.

5. Нажмите кнопку " **выполнить** " (или выберите параметр **запуска** в меню " **выполнить** ").

6. Решение будет построено, а приложение iOS будет развернуто на iPhone.
  Если подготовка приложения iOS или расширения контрольных значений не задана правильно, развертывание на iPhone завершится сбоем.

7. Если развертывание завершается успешно, iPhone автоматически попытается отправить приложение Watch в парное контрольное значение. Значок приложения появится на экране контрольных значений с циклическим индикатором хода *установки* .

8. Если контрольное приложение успешно установлено, значок останется на экране контрольных значений. Нажимайте его, чтобы начать тестирование приложения!

## <a name="troubleshooting"></a>Устранение неполадок

Если во время развертывания возникает ошибка, используйте для просмотра дополнительных сведений об ошибке **представление > pad > Device log** . Ниже перечислены некоторые ошибки и их причины.

### <a name="error-mt3001-could-not-aot-the-assembly"></a>Ошибка MT3001: не удалось выполнить сборку в AOT

Это может произойти при построении в режиме отладки для развертывания на Apple Watch устройстве.

Чтобы *временно* обойти эту ошибку, отключите **добавочные сборки** в **параметрах проекта расширения просмотра > сборка > watchOS сборка** :

[![](device-images/disable-incremental-sml.png "The Incremental Builds checkbox")](device-images/disable-incremental.png#lightbox)

Это будет исправлено в следующем выпуске, после чего можно повторно включить добавочные сборки, чтобы воспользоваться преимуществами более быстрого времени сборки.

### <a name="watch-app-fails-to-start-while-debugging-on-device"></a>Не удается запустить приложение во время отладки на устройстве

При попытке отладки приложения наблюдения на физическом устройстве отображается только значок & загрузки счетчика (и в конечном итоге истечения времени ожидания). Это будет решено в следующем выпуске. обходной путь заключается в запуске сборки выпуска (которая не позволяет выполнять отладку).

### <a name="invalid-application-executable-or-application-verification-failed"></a>Недопустимый исполняемый файл приложения или сбой проверки приложения

```csharp
Failed to install [APPNAME]
Invalid executable/Application Verification Failed
```

![](device-images/invalid-application-executable.png "Invalid Application Executable alert")

Если эти сообщения появляются *на экране контрольных значений* после попытки установки приложения, может возникнуть несколько проблем:

- Само устройство просмотра не было добавлено в качестве устройства в центре разработки Apple. Следуйте инструкциям, чтобы [правильно настроить устройства](#devices).

- Для профилей подготовки разработки, используемых для тестирования, не установлено устройство наблюдения. или после добавления контрольных значений в профили подготовки они не были повторно скачаны и установлены повторно. Следуйте инструкциям, чтобы [правильно настроить профили подготовки](#profiles).

- Если **Журнал устройства iOS** содержит `The system version is lower than the minimum OS version specified for bundle...Have 8.2; need 8.3` то значение **info. plist** приложения Watch имеет неверное **минимумосверсион** .
  Это должно быть **8,2** . Если вы установили Xcode 6,3, возможно, потребуется вручную изменить источник, чтобы вставить его в 8,2.

- Неправильное назначение контрольных значений для приложения **. plist** имеет неверное право (например, группы приложений).

- **Идентификатор приложения** контрольного значения приложения имеет неправильное назначение (например, группы приложений) в центре разработки, которое не должно быть.

### <a name="install-never-finished"></a>Установка никогда не завершена

```csharp
SPErrorGizmoInstallNeverFinishedErrorMessage
```

Эта ошибка может указывать на ненужные (и недопустимые) ключи в файле **info. plist** приложения Watch. Не следует включать ключи, предназначенные для приложения iOS или расширения просмотра в приложении Watch.

<!--eg. NSLocationAlwaysUsageDescription -->

### <a name="waiting-for-debugger-to-connect"></a>"Ожидание подключения отладчика"

Если окно " **вывод приложения** " зависает

```csharp
waiting for debugger to connect
```

Проверьте, имеет ли какое-либо из NuGet, включенных в проект, зависимость от **Microsoft. BCL. Build**. Это автоматически добавляется в некоторые библиотеки, опубликованные корпорацией Майкрософт, включая популярные [клиентские библиотеки HTTP Microsoft](https://www.nuget.org/packages/Microsoft.Net.Http/).

Файл **Microsoft. BCL. Build. targets** , добавленный в **CSPROJ** , может повлиять на упаковку расширений iOS во время развертывания. Можно отвести к [ошибке](https://bugzilla.xamarin.com/show_bug.cgi?id=29912).
Возможный обходной путь состоит в том, чтобы изменить CSPROJ-файл и вручную переместить **Microsoft. BCL. Build. targets** в последний элемент.
