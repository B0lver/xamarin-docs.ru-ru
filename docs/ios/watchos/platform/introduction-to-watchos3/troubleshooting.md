---
title: Устранение неполадок watchOS 3
description: В этом документе приведены некоторые советы по устранению неполадок, которые полезны при работе с watchOS 3 в Xamarin. Советы относятся к действиям, Apple Pay, фоновому обновлению, Нсурлконнектион, конфиденциальности и т. д.
ms.prod: xamarin
ms.assetid: 5911D898-0E23-40CC-9F3C-5F61B4D50ADC
ms.technology: xamarin-ios
author: conceptdev
ms.author: crdun
ms.date: 03/17/2017
ms.openlocfilehash: f10fb237bca92f49ac77657778ada8a47ed69c49
ms.sourcegitcommit: 933de144d1fbe7d412e49b743839cae4bfcac439
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/04/2019
ms.locfileid: "70292173"
---
# <a name="watchos-3-troubleshooting"></a>Устранение неполадок watchOS 3

_Эта статья содержит несколько советов по устранению неполадок при работе с watchOS 3 в приложениях Xamarin Apple Watch._

На этой странице перечислены некоторые известные проблемы, которые могут возникнуть при использовании watchOS 3 с Xamarin, и решение этих проблем.

## <a name="activities"></a>Действия

Для правильной работы общего доступа к действиям все парные контрольные значения Apple должны работать под watchOS 3.

Известные проблемы:

- Ответ на уведомление о совместном использовании действий иногда завершается ошибкой.
- При ответе на уведомление о совместном использовании действий с сообщением может произойти сбой.
- Контекстный текст над сообщением с уведомлением о совместном использовании действий будет неверным.

## <a name="apple-pay"></a>Apple Pay

Известные проблемы:

- Если в Apple Pay введена неверная дата истечения срока действия или код во вт. при неудачном завершении **выполнения процесса** произойдет сбой.
- Покупки в приложении Apple Pay, для которых необходим ПИН-код, могут привести к сбою.

## <a name="auto-mac-unlock"></a>Автоматическая разблокировка Mac

Используя watchOS 3 Beta 2 (или более позднюю версию) и macOS Sierra Beta 2 (или более поздней версии), если для учетной записи пользователя iCloud включена двухфакторная проверка подлинности, они могут использовать их Apple Watch для автоматической разблокировки компьютеров Mac.

## <a name="background-refresh"></a>Фоновое обновление

Нарушение системных ресурсов приводит к сбою приложения watchOS 3 со следующими кодами исключений:

- **0xc51bad01** — приложение потребляет слишком много времени ЦП.
- **0xc51bad02** — приложение потребляет слишком много времени на стене.
- **0xc51bad03** — приложение не имеет достаточно времени выполнения для завершения текущей задачи.

## <a name="clock"></a>Clock

Сложности от недавно установленных Apple Watch приложений могут отображаться как пустые. Чтобы устранить эту проблему, перезагрузите Apple Watch.

## <a name="connectivity"></a>Подключение

Известные проблемы:

- watchOS не будет запрашивать у пользователя разрешение на доступ к защищенным данным пользователя на Apple Watch. Предоставьте доступ к приложению iPhone, прежде чем использовать данные в приложении для просмотра контрольных значений.
- Apple Watch может ввести состояние, при котором все передачи Ватчконнективити завершаются сбоем, перезагрузите Apple Watch для исправления.

## <a name="notifications"></a>Уведомления

Если вложение носителя слишком велико, оно будет представлено на устройстве iPhone пользователя, но не в его Apple Watch.

## <a name="nsurlconnection"></a>нсурлконнектион

Все `NSURLConnection` подключения, использующие старые протоколы TLS, завершатся ошибкой. Для всех подключений SSL/TLS симметричный Шифр RC4 теперь отключен по умолчанию. Кроме того, интерфейс API защищенного транспорта больше не поддерживает SSLv3, поэтому рекомендуется как можно быстрее приостанавливаться к работе приложения с шифрованием SHA-1 и 3DES.

Начиная с watchOS 3, безопасность SSL/TLS обеспечивает строгое применение Apple. Затронутые службы и приложения должны обновлять веб-серверы для использования последних версий протокола TLS.

## <a name="nsurlsession"></a>NSURLSession

Начиная с watchOS 3 `HTTPBodyStream` , свойство `NSMutableURLRequest` класса должно быть установлено в неоткрытый поток, `NSURLSession` так как `NSURLConnection` теперь это требование следует применять строго.

## <a name="privacy"></a>Конфиденциальность

Известные проблемы:

При работе с `https://` `NSURLSession` URL-адресами и `NSURLConnection` больше не поддерживаются комплекты шифров RC4 во время подтверждения TLS. Можно создать один из следующих кодов ошибок:

- **-1200 или-98** -для `NSURLErrorSecurityConnectionFailed` и секуретранспорт ошибок.
- **-1200 [3:-9824]** -ошибка при загрузке HTTP.
- **-**  -  1200`NSURLConnection` завершено с ошибкой.

Начиная с watchOS 3, безопасность SSL/TLS обеспечивает строгое применение Apple. Затронутые службы и приложения должны обновлять веб-серверы для использования последних версий протокола TLS. Дополнительные сведения см. в разделе [нсурлконнектион](#nsurlconnection) выше.

## <a name="snapshots"></a>Моментальные снимки

Приложения WatchKit, которые не приняли новый `HandelBackgroundTask` API, больше не будут получать периодические обновления в watchOS 3. 

## <a name="watchkit"></a>WatchKit

Сцены SpriteKit и SceneKit будут приостановлены, когда приложение войдет в фон на закрепление watchOS.

## <a name="related-links"></a>Связанные ссылки

- [Примеры watchOS](https://docs.microsoft.com/samples/browse/?products=xamarin&term=Xamarin.iOS+watchOS)
- [Новые возможности в watchOS 3](https://developer.apple.com/library/prerelease/content/releasenotes/General/WhatsNewInwatchOS/Articles/watchOS3.html#//apple_ref/doc/uid/TP40017085-SW1)
