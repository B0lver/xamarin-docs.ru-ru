---
title: "Быстрый способы взаимодействия watchOS 3"
description: "В этой статье рассматриваются способы вы узнали Apple были добавлены в watchOS 3 и способы их реализации в Xamarin.iOS для Apple Watch."
ms.topic: article
ms.prod: xamarin
ms.assetid: 26697F68-AF7E-4A36-988F-85E2674A4DD1
ms.technology: xamarin-ios
author: bradumbaugh
ms.author: brumbaug
ms.date: 03/17/2017
ms.openlocfilehash: 75a8e807a68a3fccfa76fc7ba1f260818b25174d
ms.sourcegitcommit: 6cd40d190abe38edd50fc74331be15324a845a28
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/27/2018
---
# <a name="quick-interaction-techniques-for-watchos-3"></a>Быстрый способы взаимодействия watchOS 3

_В этой статье рассматриваются способы вы узнали Apple были добавлены в watchOS 3 и способы их реализации в Xamarin.iOS для Apple Watch._

Обеспечивает взаимодействие с пользователем быстрого необходимы для создания привлекательных приложений Apple Watch и сложностей. Новые для watchOS 3 Apple добавлена поддержка распознавателей жестов, доступ к цифровой Главная и новые методы уведомления пользователя и навигации. Это, а также добавлена поддержка SceneKit и SpriteKit, разработчик мог легко создавать информативные, взгляда интерфейсы, которые являются быстрый и отвечать на запросы.

## <a name="what-are-quick-interactions"></a>Что такое быстрое взаимодействия

Для разработчика, который используется для создания приложений для iOS или macOS (где объем времени, которое пользователь взаимодействует с приложением измеряется в часах и минутах), разработка успешно приложения для Apple Watch может оказаться сложной задачей и требует другой подход.

В watchOS обычно пользователю необходимо вызывать их манжеты быстро взаимодействуют с приложением (обычно длятся несколько секунд), а затем удалите их манжеты и продолжить бы это ни было они занимались.

Ниже приведены некоторые примеры типичных быстрого взаимодействия на Apple Watch:

- Запуск таймера.
- Проверка погоды.
- Пометка элемента из списка задач.

Для достижения этих целей, должны быть приложения на Apple Watch.

- **Взгляда** -это означает, что с краткий обзор пользователя должны иметь возможность получить необходимую информацию. 
- **Готовые к работе** -означает, что пользователи должны иметь возможность принимать быстрый, хорошо обоснованные решения.
- **Отвечать на запросы** — то есть пользователь никогда не должна ждать для получения данных, которые они должны или для достижения действие, что пожелает.

### <a name="quick-interactions-length"></a>Длина быстрого взаимодействия

Открытостью взгляда приложений Apple Watch, Apple предполагает, что идеальный быстрого взаимодействия, длина не должна превышать двух секунд или менее. В результате этого два второй предел разработчику необходимо тратят значительное время, проектирование и реализация приложения Apple Watch. 

## <a name="new-watchos-3-features-and-apis"></a>Новый watchOS 3 функции и API

Apple добавил WatchKit, помогающее разработчик Добавление быстрого взаимодействия приложений Apple Watch несколько новых функций и API-интерфейсы:

- watchOS 3 предоставляет доступ к новые типы пользовательского ввода, такие как:
    - Распознаватель жестов
    - Цифровой Главная поворота 
- watchOS 3 предоставляет новые способы отображения и обновления сведений, таких как:
    - Улучшенные таблицы навигации
    - Поддержка новых framework уведомление пользователя
    - Интеграция SpriteKit и SceneKit

Путем реализации этих новых функций, разработчик для того чтобы их приложения watchOS 3 Glanceable, актуальной и выполняет.

### <a name="gesture-recognizer-support"></a>Поддержка распознаватель жестов

Если разработчик реализует распознавателей жестов в iOS, они должны быть хорошо знакомы с работе распознавателей жестов в watchOS 3. Чтобы обновить, распознавателей жестов являются объектами, которые синтаксического анализа событий сенсорного экрана нижнего уровня в распознаваемые, предварительно определенный жесты.

watchOS 3 поддерживает следующие четыре распознавателей жестов:

- Типы дискретных жестов:
    - Проведите жестов (`WKSwipeGestureRecognizer`).
    - Жеста касания (`WKTapGestureRecognizer`).
- Типы непрерывного жестов:
    - Жест панорамирование (`WKPanGestureRecognizer`).
    - Нажмите клавишу долго жестов (`WKLongPressGestureRecognizer`).

Чтобы реализовать один новый распознавателей жестов, перетащите его в рабочую область конструирования iOS конструктора в Visual Studio для Mac и настройте его свойства.

В коде ответ на действие распознаватель для обработки жест запускаться пользователем. Опять же это делается таким же образом, оно обрабатывается в iOS.

#### <a name="discrete-gesture-states"></a>Дискретных состояний жестов

Для дискретных жестов действие вызывается после распознавания жестов и состояние (`WKGestureRecognizerState`) присваивается в качестве:

[ ![](quick-interaction-techniques-images/quick01.png "Дискретных состояний жестов")](quick-interaction-techniques-images/quick01.png)

Все жесты дискретных начинать в `Possible` состояния и переход в один `Failed` или `Recognized` состояния. При использовании дискретных жесты, разработчик обычно не работать непосредственно с состоянием. Вместо этого они используют действие вызывается, когда жест распознается только.

#### <a name="continuous-gesture-states"></a>Непрерывные состояний жестов

Непрерывные жесты несколько отличаются от дискретных жесты, где действие вызывается несколько раз, как распознать жест:

[ ![](quick-interaction-techniques-images/quick02.png "Непрерывные состояний жестов")](quick-interaction-techniques-images/quick02.png)

Еще раз, непрерывные жесты запускается в `Possible` состояние, но их выполнение через несколько обновлений. Здесь разработчику необходимо учитывать состояния распознавателя и обновление пользовательского интерфейса приложения во время `Changed` этап до жест наконец `Recognized` или `Canceled`.

#### <a name="gesture-recognizer-usage-tips"></a>Советы по использованию распознаватель жестов

При работе с распознавателей жестов в watchOS 3, Apple предложить следующее:

- Добавьте распознавателей жестов с элементами группы вместо отдельных элементов управления. Поскольку Apple Watch имеет меньший размер физического экрана, группы элементов, как правило, больше и пользователь не нажмет проще конечных объектов. Кроме того распознавателей жестов могут конфликтовать с встроенными жесты уже в собственные элементы управления пользовательского интерфейса.
- Установите отношения зависимости в приложение watch раскадровки.
- Некоторые жестов имеют приоритет над другими типами жестов, таких как:
    - Прокрутка
    - Принудительно сенсорного ввода
 
### <a name="digital-crown-rotation"></a>Поворот цифровой Главная

Путем реализации поддержка цифрового Главная в своих приложениях watchOS 3, разработчик может предоставить навигации повысить скорость и точность взаимодействие для пользователей.

С момента watchOS 2, Apple Watch приложение сможет использовать `WKInterfacePicker` объекта для доступа, предоставляя список цифровых Главная `WKPickerItems` и выбора стиля (список, с накоплением или последовательность изображений). затем watchOS допускается пользователя, используемый цифровой Главная для выбора элемента из списка.

При использовании `WKInterfacePicker`, WatchKit обрабатывает большую часть работы по:

- Рисование списка и элементы отдельного интерфейса.
- Обработка событий цифровой Главная.
- Вызов действия, если элемент выбран.

Новые для watchOS 3 разработчик теперь имеет прямой доступ к цифровой Главная поворота события, что позволяет им создавать свои собственные элементы пользовательского интерфейса, которые реагируют на значения поворота.

Цифровой Главная доступа предоставляются следующие элементы:

- `WKCrownSequencer` -Предоставляет доступ к поворотов в секунду.
- `WKCrownDelegate` -Предоставляет доступ к событиям вращающимся изменений.

#### <a name="rotations-per-second"></a>Смена, в секунду

Доступ к поворотов в секунду цифровой Главная полезно при работе с физических на основе анимации. Для доступа к поворотов в секунду, используйте `CrownSequencer` свойство `WKInterfaceController` расширения контрольных значений. Пример:

```csharp
var rotationsPerSecond = CrownSequencer.RotationsPerSecond;
```

#### <a name="rotational-deltas"></a>Вращающимся дельты

Используйте вращающимся отклонений от цифровой Главная для подсчета числа поворотов. Используйте `CrownDidRotate` переопределить метод `WKCrownDelegate` для доступа к вращающимся отличиями. Пример:

```csharp
using System;
using WatchKit;
using Foundation;

namespace MonkeyWatch.MonkeySeeExtension
{
    public class CrownDelegate : WKCrownDelegate
    {
        #region Computed Properties
        public double AccumulatedRotations { get; set;}
        #endregion

        #region Constructors
        public CrownDelegate ()
        {
        }
        #endregion

        #region Override Methods
        public override void CrownDidRotate (WKCrownSequencer crownSequencer, double rotationalDelta)
        {
            base.CrownDidRotate (crownSequencer, rotationalDelta);

            // Accumulate rotations
            AccumulatedRotations += rotationalDelta;
        }
        #endregion
    }
}
```

Здесь приложение поддерживает аккумулятор (`AccumulatedRotations`) для определения числа поворотов. Один поворот цифровой Главная равен накопленная дельта `1.0` и половина поворота бы `0.5`.

Разработчик должен определить, как счетчики поворота соотноситься с учета изменений в элементе пользовательского интерфейса, который выполняется обновление остался Apple.

Знак (`+/-`) вращающимся разности указывает направление, что пользователь преобразовала цифровой Главная:

[ ![](quick-interaction-techniques-images/quick03.png "Знак вращающимся дельта указывает направление, что пользователь преобразовала цифровой Главная")](quick-interaction-techniques-images/quick03.png)


Если пользователь прокручивает вверх, WatchKit вернет положительное дельты и если прокрутку вниз отрицательное дельты будет возвращен, независимо от того, какие ориентации пользователь носить часами в.

#### <a name="digital-crown-focus"></a>Цифровой Главная фокус

Так же, как и другие элементы интерфейса цифровые Главная использует концепцию фокус. Можно перемещать этот фокус от цифровой Главная для других элементов интерфейса, в зависимости от того, как пользователь взаимодействует с часами. 

Например любой из следующих элементов управления может похитить фокус цифровой Главная:

- Средство выбора
- Slider
- Прокрутка контроллера

Это разработчик должен определить, когда их элемента пользовательского интерфейса должен быть фокус цифровой Главная. Apple предлагает, использовать новый распознавателей жестов для получения фокуса в пользовательский элемент пользовательского интерфейса.

### <a name="vertical-paging"></a>Вертикальная разбиения на страницы

Является стандартным способом, что пользователь переходит представление таблицы в приложении watchOS прокручивать нужный фрагмент данных, коснитесь кнопки для отображения в подробном представлении, нажмите кнопку "Назад" по окончании Просмотр сведений о конкретной строки и повторите процесс для любых других сведений, y интересуют из таблицы:

[ ![](quick-interaction-techniques-images/quick04.png "Перемещение между таблицей и подробное представление")](quick-interaction-techniques-images/quick04.png)

Новые для watchOS 3 разработчик можно включить вертикальной разбивка на страницы в своих элементах управления таблицы представления. Эта функция включена пользователь может воспользоваться прокруткой для поиска строк таблицы представления и коснитесь строке, чтобы просмотреть его сведения как до. Тем не менее они могут теперь проведите вверх выберите следующую строку в таблице или вниз, чтобы выбрать предыдущую строку (или используйте цифровой Главная), не компилируя вернуться к представлению таблицы сначала:

[ ![](quick-interaction-techniques-images/quick05.png "Перемещение между таблицей и подробное представление и проведение пальцем по экрану вверх и вниз для перемещения между другие строки")](quick-interaction-techniques-images/quick05.png)

Чтобы включить этот режим, откройте приложение watchOS раскадровки в Xcode для редактирования, выберите представление таблицы и проверьте **вертикальной подробное разбиение по страницам** флажок:

[ ![](quick-interaction-techniques-images/quick06.png "Установите флажок вертикальной подробное разбиение по страницам")](quick-interaction-techniques-images/quick06.png)

Убедитесь, что таблица использует Segues для отображения в подробном представлении и сохранить изменения в раскадровку и вернуться в Visual Studio для Mac для синхронизации.

Разработчик может программно выполнять вертикальное разбивка на страницы для конкретной строки, используя следующий код к представлению таблицы:

```csharp
// Segue into Vertical Paging and select the first row
MenuTable.PerformSegue (0);
```

При использовании вертикальной разбиение по страницам, разработчику необходимо Имейте в виду, что WatchKit автоматически будет обрабатывать предварительная загрузка контроллеров, и в результате некоторые методы жизненного цикла контроллера может быть вызван перед фактически отображается пользовательский Интерфейс.

### <a name="notification-enhancements"></a>Усовершенствования уведомления

Уведомления являются основной формой быстрого взаимодействия, который обычно выражается в watchOS для пользователя и были доступны с момента первого Apple Watch и watchOS 1.

Типичного взаимодействия краткое уведомление выглядит следующим образом:

1. Пользователь, в том числе Haptic уведомление при получении нового уведомления.
2. Они вызывают их манжеты, чтобы увидеть интерфейс короткий поиска для уведомления.
3. Если они продолжают поддерживать их манжеты возникает, watchOS автоматически перейдет в интерфейс Long выглядеть уведомления.

Существует несколько способов, которые пользователь может отвечать на уведомления:

- Для правильно определены и представления уведомлений пользователь не выполняют никаких действий и просто закрыть уведомление.
- Также они могут коснуться уведомления, чтобы запустить приложение watchOS.
- Получать уведомления, которая поддерживает настраиваемые действия пользователь может выбрать один из пользовательских действий. Это могут быть:
    - **Передний план действий** -они запускают приложение для выполнения действия.
    - **Фоновые действия** — всегда были направлены на iPhone в watchOS 2, но могут быть направлены на watchApp в watchOS 3.

Новые для watchOS 3:

* Уведомления используйте подобного API для всех платформ (iOS, watchOS, tvOS и macOS).
* Локальный уведомления могут быть назначены на Apple Watch.
* Фон уведомления направляются в расширение приложения, если они были запланированы на Apple Watch.

#### <a name="notification-scheduling-and-delivery"></a>Уведомления планирования и доставки

Уведомления из iPhone пользователя будет пересылать для Apple Watch при соблюдении следующих условий:

* IPhone экрана — off.
* Apple Watch идет неисправна и разблокирован.

В watchOS 3 локального уведомления могут быть назначены на Apple Watch и предоставляются только на часах. Он работает разработчику запланировать соответствующий iPhone уведомление, если это необходимо для приложения.

Включая тот же идентификатор уведомления на iPhone версии уведомлений и Apple Watch, он предотвращает повторяющихся уведомлений будут отображаться на часами. Версия Apple Watch уведомление будет иметь приоритет над версии iPhone.

Поскольку watchOS 3 использует тот же самый `UINotification` API платформы iOS 10, см. в разделе iOS 10 [Framework уведомления пользователя](~/ios/platform/user-notifications/index.md) документации для получения дополнительных сведений.

### <a name="using-spritekit-and-scenekit"></a>С помощью SpriteKit и SceneKit

Новые для watchOS 3 разработчик теперь можно использовать объекты SpritKit и SceneKit в свое приложение пользовательского интерфейса конструктора для представления двухмерной и трехмерной графики.

Для поддержки этой возможности были добавлены два новых класса интерфейса:

- `WKInterfaceSKScene` -Для работы с SpriteKit двумерной графики.
- `WKInterfaceSCNScene` -Для работы с трехмерной графикой SceneKit.

Чтобы использовать эти объекты, просто перетащите их в область конструктора внутри приложение watch раскадровки в Xcode интерфейс построителя и **атрибуты инспектора** для их настройки.

С этого момента работа с SpriteKit или SceneKit сцены работает так же, как это происходит внутри приложения iOS. Представляет приложение watch `WKInterfaceSKScene` путем вызова одного из `Present` методы. SceneKit, просто установите `Scene` свойство `WKInterfaceSCNScene` объекта.

## <a name="actionable-complications"></a>Пригодных к использованию сложностей.

В watchOS 2 Apple реализовала трудности для сторонних приложений. В watchOS 3 Apple с расширенными возможностями, которые разработчик может включить в осложнение данных WatchKit. 

Кроме того, несколько встроенных в Контрольное значение гарнитуры теперь можно включить сложности и существующие контрольные значения "окном", уже поддерживаемых сложности может теперь включено еще больше сложностей.

Также новые возможности для пользователя для быстро проведите влево или вправо для перехода по всем лиц Контрольные значения, установленного на их Apple Watch. С помощью новой коллекции в приложении iPhone дополнительное Apple Watch пользователя можно добавлять и настраивать фрагментов Контрольное значение и любой из сложностей, которые они могут включать.

Из-за этих новых функций Apple предлагает каждое приложение на Apple Watch также должна содержать по крайней мере один усложнения и таким образом, все приложения собственного Apple Watch теперь имеют сложностей.

Сложности обеспечивают следующие возможности для приложения:

- Они являются высокой взгляда, так как они всегда присутствуют на Циферблат часов.
- Сложностей watchOS часто обновляются. Любое приложение, которое включает в себя усложнения на пользователя в настоящее время отображается Циферблат часов обновляется по крайней мере два раза в час.
- Любое приложение с усложнения на отображаемой Циферблат часов пользователя сохраняется в памяти, который позволяет быстро запустить приложение и ускоряет ответов из приложения.
- Сложностей упрощают пользователю запускать определенных функциональных возможностей в приложении watchOS.

## <a name="glanceable-notification"></a>Взгляда уведомления

Уведомления на Apple Watch предоставляют значительные, настраиваемый способ быстро информирует пользователя о событиях или новых сведений, как входящие сообщения и достижения целей в приложении тренировки.

С помощью уведомления, ценные сведения могут быть быстро представлены пользователю. Во многих случаях хорошо спроектированной уведомлений можно удалить необходимость пользователю, фактически запустить приложение.

Новые watchOS 3, теперь поддерживают все уведомления:

- SpriteKit
- SceneKit
- Встроенные видео

## <a name="enhanced-ui-with-spritekit-and-scenekit"></a>Пользовательский Интерфейс с SpriteKit и SceneKit

Как правило разработчик может показаться игры пользовательского интерфейса при упоминаются SpriteKit и SceneKit. Тем не менее SpriteKit и SceneKit можно использовать для создания пользовательских интерфейсов, которые включают пользовательские макеты, содержимого и анимации, которые в противном случае невозможно в WatchKit сама по себе не игры.

Например уведомление пользователя к фотографиям, приложение для управления доступом можно использовать SpriteKit для предоставления в многофункциональном пользовательском интерфейсе, включая пользователя, выполнившего учет рисунка вместе с фактическим размерам изображения и другие пользовательские данные, которые обогащает взаимодействие с пользователем.

Кроме того SpriteKit и SceneKit можно комбинировать с стандартные элементы пользовательского интерфейса WatchKit при разработке пользовательского интерфейса приложения.

## <a name="simple-navigation"></a>Простой навигации

watchOS 3 представляется несколькими способами, что разработчик может упростить навигацию в свои приложения watchOS, например к новому [вертикальной подкачки](#Vertical-Paging), [поддержки распознаватель жестов](#Gesture-Recognizer-Support) и [цифровой Главная Поворот](#Digital-Crown-Rotation) возможности, представленные выше.

Цифровой Главная уникален для Apple Watch и может использоваться различными способами, для упрощения навигации. Например приложение таймера можно использовать цифровой Главная средствах через доступные таймера длины.

Пользовательских жестов может представлять новыми и уникальными способами пользователю взаимодействовать с приложением Контрольные значения и также может использоваться для упрощения навигации приложения.

Apple работаем над способами для объединения всех новых возможностей вы узнали, добавленных в watchOS 3 представляет широкие возможности, легко и быстро использовать интерфейсы watchOS приложения.

## <a name="finishing-the-quick-interaction"></a>Завершения быстрого взаимодействия

Хорошо спроектированные быстрого взаимодействие предоставит пользователям уверенность в том, чтобы удалить их манжеты (и отключите с приложением) после завершения текущего диалога.

Где специально это становится проблемой — при выполнении любого типа сетевого подключения или совместного использования информации с приложением iPhone его дополнительное приложения Контрольное значение. Это часто приводит к Индикатор ожидающего во время транзакции, который является нежелательным во время быстрого взаимодействия. Рассмотрим следующий пример:

[ ![](quick-interaction-techniques-images/quick07.png "Диаграмма приложения наблюдения за это сетевое подключение и совместного использования информации с приложением iPhone его помощник по поиску")](quick-interaction-techniques-images/quick07.png)

1. Пользователь выбирает элемент, чтобы приобрести на часах.
2. Они коснитесь кнопки покупки.
3. Приложение запускает транзакцию сети и отображает индикатор загрузки.
4. Некоторое время спустя завершения транзакции, и приложение отображает подтверждения покупки.
5. Пользователь отклоняет их манжеты и отключает с приложением.

От времени, пользователь нажимает кнопку Покупка до завершения транзакции они имеют свои манжеты возникает просмотрев индикатор загрузки. Чтобы исправить эту неполадку, Apple предлагает разработчику, должен представить сведения для пользователя вместо индикатора загрузки. 

С помощью предлагаемых модели Apple, взгляните на попытку же быстрого взаимодействия:

[ ![](quick-interaction-techniques-images/quick08.png "Схема яблоки предлагаемые модели")](quick-interaction-techniques-images/quick08.png)

1. Пользователь выбирает элемент, чтобы приобрести на часах.
2. Они коснитесь кнопки покупки.
3. Приложение запускает транзакцию сети и отображает сообщение о том, что покупки успешно запущена.
4. Пользователь отклоняет их манжеты и отключает с приложением.
5. Если спустя некоторое время успешного выполнения транзакции, приложение отображает локального уведомлений для информирования пользователей успешно покупки.

Это время, как только пользователь нажимает кнопку покупке, которую пользователи видят сообщение о том, что покупки был запущен, поэтому уверенного drop их манжеты и заканчиваться на этом этапе быстрого взаимодействия. Позднее они получат успех или сбой операции в уведомления пользователя. Таким образом пользователь «active» этапах процесса только взаимодействует с приложением.

Для приложений, которые выполняют сети, можно использовать фон `NSURLSession` для обработки сетевого взаимодействия с задачей «загрузки». Это позволит приложению быть выведены из спящего режима в фоновом режиме для обработки загруженные сведения. Для приложения, которые требуют фоновой обработки утверждение фона задач можно используйте для обработки необходимую обработку.

## <a name="quick-interaction-design-tips"></a>Советы по проектированию вы узнали

Так как требуемая длина быстрого взаимодействия двух секунд или менее разработчику следует уделить внимание структуру взаимодействия приложения с самого начала процесса проектирования. Поиск областей, где эти взаимодействия можно упростить, представив (используя метод, представленные выше) и использовать новые возможности watchOS 3, чтобы предоставить приложение быстро и отвечать на запросы.

Apple предлагает следующие:

- Сосредоточиться на быстрый диалоги, перенос вперед наиболее часто используемые компоненты приложения.
- Используйте сложности и уведомления для пользователей для отображения общих компонентов и функций.
- Создание сложных, взгляда пользовательский интерфейс с SceneKit и SpriteKit.
- По возможности Упрощайте навигации в приложении.
- Не вносите пользователя ожидания, давая возможность удалить их манжеты и отключите с приложением, как можно быстрее.

## <a name="summary"></a>Сводка

В этой статье был проиллюстрирован методы вы узнали Apple были добавлены в watchOS 3 и способы их реализации в Xamarin.iOS для Apple Watch.

## <a name="related-links"></a>Связанные ссылки

- [Примеры watchOS](https://developer.xamarin.com/samples/watchos/all/)
