---
title: "Работа с локализации"
description: "Адаптация watchOS приложения для нескольких языков"
ms.topic: article
ms.prod: xamarin
ms.assetid: 55834877-757B-4860-AF2F-933A948BE38D
ms.technology: xamarin-ios
author: bradumbaugh
ms.author: brumbaug
ms.openlocfilehash: 4dde338a7c289f228f877fa4d968d156a941ba16
ms.sourcegitcommit: 6cd40d190abe38edd50fc74331be15324a845a28
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/27/2018
---
# <a name="working-with-localization"></a>Работа с локализации

_Адаптация watchOS приложения для нескольких языков_

![](localization-images/both-languages-sml.png "Отображение локализованное содержимое Apple Watch")

локализованных watchOS приложений с помощью методов стандартных операций ввода-вывода:

- С помощью **ИД локализации** применительно к элементам раскадровки
- **.strings** файлы, связанные с раскадровки и
- **Localizable.strings** файлы для текста, используемого в коде.

По умолчанию раскадровки и ресурсы находятся в **базы** каталога и переводы для конкретного языка и другие ресурсы хранятся в **.lproj** каталоги.
iOS и OS Контрольные значения будут автоматически использовать Выбор языков интерфейса пользователя для загрузки правильных строк и ресурсы.

Поскольку приложения Apple Watch состоит из двух частей — приложение Watch и расширение Контрольные значения - локализованную строку, которую требуются ресурсы в двух местах, в зависимости от того, как они используются.

Локализованный текст и ресурсы будут *другой* в приложение watch и расширение контрольных значений.

## <a name="watch-app"></a>Просмотр приложения

Контрольное значение приложении содержит раскадровки, который описывает пользовательский интерфейс приложения. Все элементы (такие как `Label` и `Image`) у поддержка локализации **ИД локализации**.

Каждый языковой **.lproj** каталог должен содержать **.strings** файлы переводы для каждого элемента (с помощью **ИД локализации**), а также образы ссылка на раскадровку.

## <a name="watch-extension"></a>Контрольные значения расширения

Расширение Контрольные значения-, где выполняется код приложения. Любой текст, отображаемый для пользователя из кода необходимо локализовать в расширении, а не в приложение watch.

Расширение должно также содержать конкретного языка **.lproj** каталоги, но **.strings** файлы переводы нужны только для текста, который используется в коде.

## <a name="globalizing-the-watch-solution"></a>Глобализация решения Контрольное значение

Глобализация — это процесс создания локализуемого приложения.
Для приложений Контрольные значения, это значит, что разработка раскадровки с разной длины текста в виду обеспечивая каждого макета экрана корректирует соответствующим образом в зависимости от того, какой текст отображается. Необходимо также обеспечить все строки, указанные в коде расширения контрольных значений можно преобразовать с помощью `LocalizedString` метод.

### <a name="watch-app"></a>Просмотр приложения

По умолчанию приложение watch не настроен для локализации. Необходимо переместить файл раскадровки по умолчанию и создать некоторые каталоги для переводов.

1. Создание **Base.lproj** каталога и перемещения **Interface.storyboard** в него.

2. Создание  **<language>.lproj** каталоги для каждого поддерживаемого языка.

3. **.Lproj** каталоги должны содержать **Interface.strings** текстового файла (имя файла должно соответствовать имя storboard). При необходимости можно поместить все образы, требующих локализации в этих каталогах.

После этих изменений были внесены (только английский и испанский язык, добавленные файлы), в проект приложения для наблюдения за выглядит следующим образом:

  ![](localization-images/watchapp-solution.png "Проект приложения Контрольные значения с файлами, русский и испанский язык")

#### <a name="storyboard-text"></a>Раскадровка текста

При редактировании раскадровки, выберите каждый элемент и обратите внимание, **ИД локализации** , которая отображается в **свойства** заполнения:

  [ ![](localization-images/storyboard-sml.png "ИД локализации, которое отображается в панели свойств")](localization-images/storyboard.png)

В **Base.lproj** папке создайте пары "ключ значение", как показано ниже, где ключа формируется путем **ИД локализации** и имя свойства в элементе управления, соединена с точкой (`.`).

```csharp
"AgC-eL-Hgc.title" = "WatchL10nEN"; // interface controller title
"0.text" = "Welcome to WatchL10n"; // Welcome
"1.text" = "Language settings are in Apple Watch App"; // How to change language
"2.title" = "Greetings"; // Greeting
"6.title" = "Detail";
"39.text" = "Second screen";
```

Отметим в данном примере, **ИД локализации** может быть простой строки чисел (например) «0», «1» и т. д) или более сложную строку (например, «АРУ Эль Hgc»). `Label` элементы управления имеют `Text` свойство и `Button`имеют `Title` свойство, которое отражается в соответствии с их локализованные значения устанавливаются - обязательно используйте имя свойства в нижнем регистре, как показано в приведенном выше примере.

При отображении на часах раскадровки правильные значения автоматически извлекается и отображается в соответствии с на языке, выбранном пользователем.

#### <a name="storyboard-images"></a>Раскадровка изображений

Пример решения также включает  **gradient@2x.png**  изображения в папки для каждого языка. Этот образ может быть разным для каждого языка (например) он встроенных текст, который должен преобразования, или использовать локализованные иллюстрациях).

Просто задать изображение **изображения** свойства в раскадровку и правильное изображение отображается в Watch согласно языку, выбранному пользователем.

![](localization-images/storyboard-image.png "Свойства изображения изображения к раскадровке")

Примечание: Сетчатка отображается, только если у всех отслеживает Apple  **@2x**  необходима версия образа. Необходимо указать  **@2x**  в раскадровку.

### <a name="watch-extension"></a>Контрольные значения расширения

Модуль наблюдения за требует аналогичную структуру каталогов для поддержки локализации, однако нет не раскадровки. Локализованные строки в расширении допускаются только те ссылается код C#.

![](localization-images/watchextension-solution.png "Структуру каталогов Контрольное значение расширения для поддержки локализации")

#### <a name="strings-in-code"></a>Строки в коде

**Localizable.strings** файл имеет различную структуру, чем если он был связан с раскадровкой. В этом случае можно выбрать любую строку «ключ»; Apple рекомендуется использовать ключ, который отражает фактический текст, который будет отображаться на языке по умолчанию:

```csharp
"Breakfast time" = "Breakfast time!"; // morning
"Lunch time" = "Lunch time!"; // midday
"Dinner time" = "Dinner time!"; // evening
"Bed time" = "Bed time!"; // night
```

`NSBundle.MainBundle.LocalizedString` Метод используется для разрешения в аналогичными переведенные строки, как показано в приведенном ниже примере кода.

```csharp
var display = "Breakfast time";
var localizedDisplay =
  NSBundle.MainBundle.LocalizedString (display, comment:"greeting");
displayText.SetText (localizedDisplay);
```

#### <a name="images-in-code"></a>Образы в коде

Образы, которые заполняются кода можно задать двумя способами.

1. Вы можете изменить `Image` управления путем изменения его значения в строковое имя изображения, уже существует в приложении контрольных значений, например

  ```csharp
  displayImage.SetImage("gradient"); // image in Watch App (as shown above)
  ```

2. Изображение можно перемещать из модуля Контрольные значения с помощью `FromBundle` приложение будет автоматически выбран правильный рисунок для Выбор языков интерфейса пользователя. В этом примере решения — это изображение  **language@2x.png**  на этих языках папке и ее отображается на `DetailController` используя следующий код:

  ```csharp
  using (var image = UIImage.FromBundle ("language")) {
    displayImage.SetImage (image);
  }
  ```

  Обратите внимание, что необходимо указать  **@2x**  применительно к имени файла изображения.

Второй метод также применяется, если загрузить изображение из удаленного сервера для подготовки к просмотру на контрольные значения; Однако в этом случае следует убедиться, что выбранный образ загрузки правильно локализуется в соответствии с предпочтениями пользователя.

## <a name="localization"></a>Локализация

После настройки решения трансляторы необходимо обработать ваш **.strings** файлы и образы для каждого поддерживаемого языка.

Можно создать столько **.lproj** каталоги, как вы требуют (по одному для каждого поддерживаемого языка). Они именуются с помощью кодов языка, например **en**, **es**, **de**, **Япония**, **pt-BR**, т. д. (для английского языка. Испанский, немецкий, японский и португальский (Бразилия) соответственно).

Вложенные образец для демонстрации для локализации приложения watchOS используется переводы (сгенерированных).

### <a name="watch-app"></a>Просмотр приложения

Эти значения используются для преобразования пользовательского интерфейса, определенные в приложение watch раскадровки. *Ключ* значение представляет собой сочетание каждого элемента управления раскадровки **ИД локализации** и свойства.

Рекомендуется добавлять комментарии, содержащий исходный текст в файл, чтобы знать Трансляторы преобразование, которое должно быть.

#### <a name="eslprojinterfacestrings"></a>es.lproj/Interface.strings

Ниже приведены строки испанском языке (машинного перевода) для данной раскадровки. Рекомендуется добавлять комментарии к каждой строке, так как это сложно определить, что **ИД локализации** ссылается на, в противном случае:

```csharp
"AgC-eL-Hgc.title" = "Spanish"; // app screen heading
"0.text" = "Bienvenido a WatchL10n"; // Welcome to WatchL10n
"1.text" = "Ajustes de idioma están en Apple Watch App"; // Change the language in the Apple Watch App
"2.title" = "Saludos"; // Greetings
"6.title" = "2nd"; // second screen heading
"39.text" = "Segunda pantalla"; // second screen
```

### <a name="watch-extension"></a>Контрольные значения расширения

Эти значения используются в коде, чтобы перевод данных до их отображения для пользователя. *Ключ* выбранных разработчиком, пока они пишут код и обычно содержит фактические строки нужно перевести.

#### <a name="eslprojlocalizablestrings-file"></a>файл es.lproj/Localizable.strings

Строки языка Spansish (машинный перевод):

```csharp
"Breakfast time" = "la hora del desayuno"; // morning
"Lunch time" = "hora de comer"; // midday
"Dinner time" = "hora de la cena"; // evening
"Bed time" = "la hora de dormir"; // night
```

## <a name="testing"></a>Тестирование

Метод, чтобы изменить языковые параметры отличаются от симулятора и физические устройства.

### <a name="simulator"></a>Имитатор

В имитаторе, выберите язык для проверки с помощью iOS **параметры** приложения (значок шестеренки серой начального экрана имитатора).

  ![](localization-images/sim-settings-sml.png "Параметры локализации приложения iOS")

### <a name="watch-device"></a>Контрольное значение устройства

При тестировании с часами изменить язык Контрольные значения в **Apple Watch** приложении для iPhone парной.

  ![](localization-images/phone-settings-sml.png "Изменить язык Контрольные значения в приложении на iPhone парной Apple Watch")



## <a name="related-links"></a>Связанные ссылки

- [WatchLocalization (пример)](https://developer.xamarin.com/samples/monotouch/WatchKit/WatchLocalization/)
