---
title: "Прямое распространение"
description: "В этом документе приводится обзор методов прямого распространения, которые в основном используются для тестирования приложений Xamarin.iOS широкой группой людей."
ms.topic: article
ms.prod: xamarin
ms.assetid: 3B621CAD-103C-478A-97C3-829015F48D1A
ms.technology: xamarin-ios
author: bradumbaugh
ms.author: brumbaug
ms.date: 03/19/2017
ms.openlocfilehash: 3d01130989336ada855e936a6597b517fab5ee69
ms.sourcegitcommit: 30055c534d9caf5dffcfdeafd6f08e666fb870a8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/09/2018
---
# <a name="ad-hoc-distribution"></a>Прямое распространение

_В этом документе описаны методы прямого распространения, которые в используются преимущественно для тестирования приложений Xamarin.iOS широкой группой людей._

После разработки приложения Xamarin.iOS наступает следующий этап жизненного цикла разработки ПО — распространение приложения среди пользователей для его тестирования.

Одним из вариантов тестирования приложений является использование iTunes Connect. Более подробно этот вариант описан в руководстве [TestFlight](~/ios/deploy-test/testflight.md). Однако участникам корпоративной программы для разработчиков Apple недоступна служба iTunes Connect, поэтому для тестирования таких приложений лучше всего подходит *прямое* распространение.

Пользователи могут протестировать приложения Xamarin.iOS в рамках *прямого* распространения, доступного по программе для разработчиков Apple и корпоративной программе для разработчиков Apple и позволяющего проверить до 100 устройств iOS.

К преимуществам прямого распространения относится отсутствие необходимости утверждать приложения в App Store, а также возможность устанавливать приложения по беспроводной сети с веб-сервера или через iTunes. Однако в год участник может добавить не более **100** устройств, как для разработки, так и для распространения, которые к тому же необходимо добавить вручную в центре пользователей по их UDID. Дополнительные сведения о добавлении устройств см. в руководстве [Подготовка устройств](~/ios/get-started/installation/device-provisioning/manual-provisioning.md#adddevice).

Для прямого распространения необходимо, чтобы приложения были подготовлены с помощью настраиваемого *профиля подготовки*, в котором содержатся сведения о подписи кода, а также удостоверение приложения и данные об устройствах, на которые можно установить приложение.

В данном руководстве предоставлены сведения о подготовке приложений для прямого распространения и информация о том, как распространять приложения Xamarin.iOS.

<a name="setup" />

## <a name="setting-up-for-distribution"></a>Настройка для распространения

Даже если приложения Xamarin.iOS планируются только для корпоративного развертывания или в целях тестирования, необходимо создать профиль подготовки для прямого распространения. Этот профиль позволяет подписать приложение цифровой подписью для выпуска, чтобы его можно было установить на устройстве iOS.

В следующем разделе демонстрируется порядок настройки с использованием сертификата распространения и профиля подготовки распространения.

> [!NOTE]
>  Примечание. Создавать сертификаты распространения и профили подготовки могут только агенты команды и администраторы.

<a name="createcertificate" />

## <a name="create-a-distribution-certificate"></a>Создание сертификата распространения


1. Перейдите к разделу *Certificates, Identifiers & Profiles* (Сертификаты, профили и идентификаторы) в Центре разработчиков Apple.
2. В разделе *Certificates* (Сертификаты) выберите **Production** (Производство).
3. Нажмите кнопку **+**, чтобы создать новый сертификат.
4. В разделе *Production* (Производство) установите флажок **In-House and Ad Hoc** (Внутри компании и прямое) или **App Store and Ad Hoc** (В App Store и прямое) в зависимости от уровня участия в программе:

  [![](ad-hoc-distribution-images/cert-first-small.png "Выберите "Внутри компании и прямое" или "App Store и прямое"")](ad-hoc-distribution-images/cert-first-large.png#lightbox)

5. Нажмите кнопку "Continue" (Продолжить) и следуйте инструкциям, чтобы создать запрос подписи сертификата через доступ к цепочке ключей:

  [![](ad-hoc-distribution-images/createcertmanually02.png "Создание запроса подписи сертификата через доступ к цепочке ключей")](ad-hoc-distribution-images/createcertmanually02.png#lightbox)

6. После создания CSR согласно инструкции нажмите кнопку "Continue" (Продолжить) и отправьте CSR в центре участников:

  [![](ad-hoc-distribution-images/createcertmanually03.png "Отправка запроса подписи сертификата в центр участников")](ad-hoc-distribution-images/createcertmanually03.png#lightbox)

7. Нажмите "Generate" (Создать), чтобы создать сертификат.
8. Наконец, загрузите готовый сертификат и дважды щелкните файл, чтобы установить его.
9. На этом этапе сертификат должен быть установлен на компьютере, однако может потребоваться [обновить профили](~/ios/get-started/installation/device-provisioning/manual-provisioning.md#download), чтобы убедиться, что они видны в Xcode.

Можно также запросить сертификат в Xcode через диалоговое окно "Preferences" (Параметры). Выполните указанные ниже действия:

1.   Выберите команду и нажмите **Управление сертификатами…**: [![](ad-hoc-distribution-images/selectteam.png "Выбор команды")](ad-hoc-distribution-images/selectteam.png#lightbox)

2.   Затем щелкните **знак "плюс" (+)** и выберите пункт **iOS App Store**: [![](ad-hoc-distribution-images/selectcert.png "Выбор iOS App Store")](ad-hoc-distribution-images/selectcert.png#lightbox)

<a name="createprofile" />

## <a name="create-a-distribution-provisioning-profile"></a>Создание профиля подготовки распространения

<a name="createappid" />

### <a name="create-an-app-id"></a>Создание идентификатора приложения
Как и в случае с любым другим создаваемым профилем подготовки, идентификатор приложения требуется для идентификации приложения, которое будет распространяться на устройства пользователей. Если вы еще не создали идентификатор, выполните следующие действия, чтобы создать его:


1. В [центре разработчиков Apple](https://developer.apple.com/account/overview.action) перейдите в раздел *Certificates, Identifiers and Profiles* (Сертификаты, идентификаторы и профили). В разделе **Identifiers** (Идентификаторы) выберите элемент **App IDs** (ИД приложений).
2. Нажмите кнопку **+** и укажите **Name** (Имя) для идентификации приложения на портале.
3. Префикс приложения уже должен быть задан в качестве идентификатора вашей команды. Изменить его невозможно. Выберите "Explicit" (Явный) или "Wildcard App ID" (Шаблон ИД приложения), а затем введите идентификатор пакета (имя DNS в обратном порядке):
    - **Явный**: `com.[DomainName].[AppName]`
    - **Шаблон**: `com.[DomainName].*`
4. Выберите любые [службы приложений](~/ios/get-started/installation/device-provisioning/manual-provisioning.md#appservices), которые требуются вашему приложению.
5. Нажмите кнопку **Continue** (Продолжить) и следуйте инструкциям на экране, чтобы создать идентификатор приложения.

Получив компоненты, необходимые для создания профиля распределения, выполните следующие действия, чтобы создать его:

1. Вернитесь на портал подготовки Apple и выберите **Подготовка > Распространение**: [![](ad-hoc-distribution-images/distribute01.png "Выбор подготовки для распространения")](ad-hoc-distribution-images/distribute01.png#lightbox)

2. Нажмите кнопку **+** и выберите тип профиля распространения, который необходимо создать для **прямого распространения**:

    [![](ad-hoc-distribution-images/distribute02.png "Создание профиля прямого распространения")](ad-hoc-distribution-images/distribute02.png#lightbox)

3. Нажмите кнопку **Continue** (Продолжить) и выберите из раскрывающегося списка ИД приложения, для которого необходимо создать профиль распространения:

    [![](ad-hoc-distribution-images/distribute03.png "Выбор идентификатора приложения в раскрывающемся списке")](ad-hoc-distribution-images/distribute03.png#lightbox)

4. Нажмите кнопку **Continue** (Продолжить) и выберите сертификат распространения, необходимый для подписи приложения:

    [![](ad-hoc-distribution-images/distribute04.png "Выбор сертификата распространения, необходимого для подписи приложения")](ad-hoc-distribution-images/distribute04.png#lightbox)

6. Нажмите кнопку **Continue** (Продолжить) и введите **имя** нового профиля распространения:

    [![](ad-hoc-distribution-images/distribute06.png "Ввод имени нового профиля распространения")](ad-hoc-distribution-images/distribute06.png#lightbox)

7. Нажмите кнопку **Generate** (Создать), чтобы создать профиль и завершить процесс.

# <a name="visual-studio-for-mactabvsmac"></a>[Visual Studio для Mac](#tab/vsmac)

Может потребоваться выйти из программы Visual Studio для Mac, чтобы обновить список доступных удостоверений подписи и профилей подготовки в Xcode (в соответствии с инструкциями в разделе [Загрузка профилей и сертификатов в Xcode](~/ios/get-started/installation/device-provisioning/manual-provisioning.md#download)), прежде чем новый профиль распространения станет доступен в Visual Studio для Mac.

# <a name="visual-studiotabvswin"></a>[Visual Studio](#tab/vswin)

Может потребоваться выйти из программы Visual Studio, чтобы обновить список доступных удостоверений подписи и профилей подготовки в Xcode (на компьютере Mac узла сборки) (в соответствии с инструкциями в разделе [Загрузка профилей и сертификатов в Xcode](~/ios/get-started/installation/device-provisioning/manual-provisioning.md#download)), прежде чем новый профиль распространения станет доступен в Visual Studio.

-----

<a name="selectprofile" />

## <a name="selecting-a-distribution-profile-in-a-xamarinios-project"></a>Выбор профиля распространения в проекте Xamarin.iOS

Когда все готово к финальной сборке приложения Xamarin.iOS, выберите профиль распределения, который был создан выше.

# <a name="visual-studio-for-mactabvsmac"></a>[Visual Studio для Mac](#tab/vsmac)

 В Visual Studio для Mac выполните следующие действия:

1. Дважды щелкните проект в **обозревателе решений**, чтобы открыть его для редактирования.
2. Выберите **Подписывание пакета iOS** и тип сборки в соответствующих раскрывающихся списках в разделе **Конфигурация**:

    ![](ad-hoc-distribution-images/releasexs01.png "Выбор типа сборки из раскрывающегося списка "Конфигурация"")
3. В большинстве случаев в полях **Удостоверение подписывания** и **Профиль подготовки** можно оставить значения по умолчанию (**Автоматически**), чтобы программа Visual Studio для Mac выбрала подходящий профиль на основе идентификатора пакета в файле Info.plist:

    ![](ad-hoc-distribution-images/releasexs02.png "Для удостоверения подписывания и профиля подготовки заданы значения по умолчанию ("Автоматически")")
4. При необходимости выберите требуемое удостоверение подписывания и профиль распространения, созданный выше:

    ![](ad-hoc-distribution-images/releasexs03.png "Выбор удостоверения подписывания и профиля распространения")
5. Нажмите кнопку **ОК**, чтобы сохранить изменения.

# <a name="visual-studiotabvswin"></a>[Visual Studio](#tab/vswin)
 В Visual Studio выполните следующие действия:

1. Щелкните проект правой кнопкой мыши в **обозревателе решений** и выберите пункт **Свойства**, чтобы открыть его для изменения.
2. Выберите **Подписывание пакета iOS** и тип сборки в соответствующих раскрывающихся списках в разделе **Конфигурация**:

    ![](ad-hoc-distribution-images/releasevs01.png "Выбор типа сборки из раскрывающегося списка "Конфигурация"")
3. В большинстве случаев в полях **Удостоверение подписывания** и **Профиль подготовки** можно оставить значения по умолчанию (**Автоматически**), чтобы программа Visual Studio выбрала подходящий профиль на основе идентификатора пакета в файле Info.plist:

    ![](ad-hoc-distribution-images/releasevs02.png "Для удостоверения подписывания и профиля подготовки заданы значения по умолчанию ("Автоматически")")
4. При необходимости выберите требуемое удостоверение подписывания и профиль распространения, созданный выше:

    ![](ad-hoc-distribution-images/releasevs03.png "Выбор удостоверения подписывания и профиля распространения")
5. Сохраните изменения в свойствах проекта.

-----

<a name="adhoc" />

## <a name="ad-hoc-distribution"></a>Прямое распространение

Несмотря на то, что [TestFlight](~/ios/deploy-test/testflight.md) остается наиболее популярным средством тестирования и распространения бета-версий, этот компонент входит в iTunes Connect и недоступен участникам **корпоративной программы для разработчиков Apple**.

С помощью прямого распространения разработчики приложений могут тестировать бета-версии на широком спектре устройств, когда использование iTunes не представляется возможным. Прямое распространение аналогично внутреннему распространению внутри компании и требует создания IPA, который затем можно распространить по беспроводной сети или вручную через iTunes.

<a name="IPA_Creation" />

### <a name="ipa-support-for-ad-hoc-deployment"></a>Поддержка IPA для прямого развертывания

После подготовки приложения можно упаковать в файл, называемый *IPA*. Это ZIP-файл, содержащий приложение, а также дополнительные метаданные и значки. IPA используется для добавления приложения локально в iTunes, чтобы его можно было синхронизировать непосредственно на устройство, включенное в профиль подготовки.

Дополнительные сведения о создании IPA см. в руководстве [Поддержка IPA](~/ios/deploy-test/app-distribution/ipa-support.md).

## <a name="summary"></a>Сводка

В этой статье описываются механизмы прямого распространения, необходимые для тестирования приложений Xamarin.iOS.


## <a name="related-links"></a>Связанные ссылки

- [Распространение через Магазин приложений](~/ios/deploy-test/app-distribution/app-store-distribution/index.md)
- [Внутреннее распространение](~/ios/deploy-test/app-distribution/in-house-distribution.md)
- [Файл iTunesMetadata.plist](~/ios/deploy-test/app-distribution/itunesmetadata.md)
- [Поддержка IPA](~/ios/deploy-test/app-distribution/ipa-support.md)
