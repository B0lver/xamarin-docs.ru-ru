---
title: "Ресурсы и хранилище данных"
description: "В этой статье рассматривается работа с ресурсами и постоянного хранилища данных в приложении Xamarin.tvOS."
ms.topic: article
ms.prod: xamarin
ms.assetid: C56B5046-D2C0-4B63-9CE0-ADAA0EFD368A
ms.technology: xamarin-ios
author: bradumbaugh
ms.author: brumbaug
ms.date: 03/16/2017
ms.openlocfilehash: 768ee4a2f33475b5327bf9c0fd006f1da580d836
ms.sourcegitcommit: 6cd40d190abe38edd50fc74331be15324a845a28
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/27/2018
---
# <a name="resources-and-data-storage"></a>Ресурсы и хранилище данных

_В этой статье рассматривается работа с ресурсами и постоянного хранилища данных в приложении Xamarin.tvOS._

<a name="tvOS-Resource-Limitations" />

## <a name="tvos-resource-limitations"></a>tvOS ограничения ресурсов

В отличие от устройств iOS новый Apple TV предоставляет крайне ограничены постоянное и локальном хранилище для tvOS приложений и данных. Для небольших элементов (такие как предпочтения пользователя), tvOS приложения по-прежнему имеет доступ к `NSUserDefaults` с [ограничение в 500 КБ данных](https://forums.developer.apple.com/message/50696#50696). Тем не менее, если приложение Xamarin.tvOS должен хранить большие объемы информации, оно должно хранить и получение данных из [iCloud](#iCloud-Data-Storage).

Кроме того tvOS ограничивает размер приложения Apple TV, чтобы 200 МБ. Если вашему приложению требуется ресурсы сверх этого размера, их необходимо будет упаковываются и загружаются с помощью [ресурсы по требованию](#On-Demand-Resources) (до Дополнительно 2 ГБ). Учитывая эти ограничения, очень важно, правильно время загрузки дополнительных средств, которые требуется предоставлять наилучшее взаимодействие для пользователей приложения. Дополнительные сведения см. в разделе Apple [руководство ресурсы по требованию](https://developer.apple.com/library/prerelease/tvos/documentation/FileManagement/Conceptual/On_Demand_Resources_Guide/index.html#//apple_ref/doc/uid/TP40015083).

<a name="Non-Persistent-Downloads" />

## <a name="non-persistent-downloads"></a>Временные файлы для загрузки

Каждое приложение tvOS предоставляется каталога временном кэше, который его дополнительные ресурсы и ресурсы будут загружены. Этот каталог будет сохраняться до тех пор, пока приложение все еще выполняется. Тем не менее как должен освободить место для других приложений или использования системы Apple TV, можно удалить этот кэш.

В результате приложения нельзя полагаться на ранее загруженного содержимого, будут доступны при следующем запуске. Приложение Xamarin.tvOS проверки наличия необходимых ресурсов и должны загружать их при необходимости.

> [!IMPORTANT]
> **Примечание:** пока у вас есть возможность загружать других средств и ресурсов, при необходимости, Apple выдает предупреждение, для использования все пространство в кэше приложения, как это может привести к непредсказуемым результатам.




<a name="Managing-Resources" />

## <a name="managing-resources"></a>Управление ресурсами

Как упоминалось выше, из-за ограниченной непостоянные хранилища данных, доступных для tvOS приложений, эти ограничения требуют тщательного планирования создать отличное взаимодействие с пользователями в приложении Xamarin.tvOS.

<a name="iCloud-Data-Storage" />

### <a name="icloud-data-storage"></a>iCloud хранилища данных

Так как хранилище на Apple TV ограничен, не является только существует очень ограниченное постоянного локального хранилища, в приложении существует никакой гарантии, что все сведения, ранее загруженные будут доступны при очередном запуске.

В результате приложение Xamarin.tvOS необходимо хранить все данные пользователей в iCloud хранилища данных. Apple предоставляет два способа хранения данных на основе iCloud для tvOS приложений:

- **Значение ключа хранилища (KVS) iCloud** — для небольших участков, что приложения могут потребовать (как персональных настроек пользователя), можно использовать iCloud KVS хранилища данных (меньше 1 МБ). iCloud KVS данных автоматически синхронизирован в облако и всех устройств пользователя, под управлением одного приложения. Дополнительные сведения см. в разделе [хранилища ключ-значение](~/ios/data-cloud/introduction-to-icloud.md) часть наших [введение в iCloud](~/ios/data-cloud/introduction-to-icloud.md) документа или Apple [проектирование для ключа и значения данных в iCloud](https://developer.apple.com/library/prerelease/tvos/documentation/General/Conceptual/iCloudDesignGuide/Chapters/DesigningForKey-ValueDataIniCloud.html#//apple_ref/doc/uid/TP40012094-CH7) документация.
- **CloudKit** — для хранения большего размера блока данных (больше 1 МБ), используйте Apple CloudKit Framework. В отличие от iCloud KVS хранения CloudKit данные могут передаваться среди всех пользователей приложения (а также как закрытый одним пользователем). Формируют Дополнительные сведения см. наш [введение в CloudKit](~/ios/data-cloud/intro-to-cloudkit.md) документации или Apple [CloudKit быстрый запуск](https://developer.apple.com/library/prerelease/tvos/documentation/DataManagement/Conceptual/CloudKitQuickStart/Introduction/Introduction.html#//apple_ref/doc/uid/TP40014987).

<a name="On-Demand-Resources" />

### <a name="on-demand-resources"></a>Ресурсы по требованию

Ресурсы по требованию предоставления содержимого приложения и средств (отдельно от набора приложений), размещенные в магазине приложений и загружаются при необходимости в приложении. До Дополнительно 2 ГБ данных может быть предоставлен с помощью ресурсы по требованию. Они позволяют приложение начальной загрузки меньше по размеру (tvOS приложений может превышать 200 МБ), по-прежнему предоставляя широкие возможности средств.

Когда приложение tvOS запрашивает ресурсы по требованию, система автоматически управляет загрузки и хранения содержимого для каталога кэша для приложения. Приложение необходимо дождаться это содержимое для загрузки и становятся доступными для продолжения.

Эти ресурсы могут продолжать кэшироваться на Apple TV на протяжении нескольких запускает приложения, поэтому ускорение запуска цикла. Тем не менее приложения нельзя полагаться на ранее загруженного содержимого будут доступны при следующем запуске. В разделе [временный загружает](#Non-Persistent-Downloads) Дополнительные сведения см в разделе выше.

Xcode использовать для создания пакетов со связанным содержимым (например, все ресурсы для игры уровень 2), связанные с выдать тега ресурса. Позднее приложение будет запрашивать ресурсов по требованию, указав этот тег ресурса. Приложения должны предлагать пользователю о том, что содержимое пользовательского интерфейса, загружается. Дополнительные сведения см. в разделе Apple [руководство ресурсы по требованию](https://developer.apple.com/library/prerelease/tvos/documentation/FileManagement/Conceptual/On_Demand_Resources_Guide/index.html#//apple_ref/doc/uid/TP40015083).

> [!IMPORTANT]
> **Примечание:** следует соблюдать осторожность, чтобы соблюсти баланс между количество раз, это приложение должно загрузить ресурсы по требованию и размер отдельных загрузок. Пользователь может стать разочарованы вместе с приложением, если игрового процесса прерывается постоянно загрузить новое содержимое или загрузки занимает слишком много времени.




<a name="Summary" />

## <a name="summary"></a>Сводка

В этой статье был проиллюстрирован размер, ресурсов и данные хранилища ограничений, наложенных на приложения Xamarin.tvOS tvOS системой. Он представлены параметры, чтобы обойти эти ограничения и рекомендации для создания удобную работу пользователя для приложения.



## <a name="related-links"></a>Связанные ссылки

- [Образцы tvOS](https://developer.xamarin.com/samples/tvos/all/)
- [tvOS](https://developer.apple.com/tvos/)
- [tvOS человека направляющие интерфейса](https://developer.apple.com/tvos/human-interface-guidelines/)
- [Приложение руководство по программированию для tvOS](https://developer.apple.com/library/prerelease/tvos/documentation/General/Conceptual/AppleTV_PG/)
