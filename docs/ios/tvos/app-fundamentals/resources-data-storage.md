---
title: Ресурсы и хранилище данных tvOS в Xamarin
description: В этой статье описывается работа с ресурсами и постоянным хранилищем данных в приложении tvOS, созданном с помощью Xamarin. В нем обсуждаются ресурсы хранилища данных iCloud и по запросу.
ms.prod: xamarin
ms.assetid: C56B5046-D2C0-4B63-9CE0-ADAA0EFD368A
ms.technology: xamarin-ios
author: conceptdev
ms.author: crdun
ms.date: 03/16/2017
ms.openlocfilehash: 4b50ba09488f1f052f3e41302a42c691089727ff
ms.sourcegitcommit: 57f815bf0024b1afe9754c0e28054fc0a53ce302
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/06/2019
ms.locfileid: "70769653"
---
# <a name="tvos-resources-and-data-storage-in-xamarin"></a>Ресурсы и хранилище данных tvOS в Xamarin

_В этой статье рассматривается работа с ресурсами и хранением постоянных данных в приложении Xamarin. tvOS._

<a name="tvOS-Resource-Limitations" />

## <a name="tvos-resource-limitations"></a>Ограничения ресурсов tvOS

В отличие от устройств iOS, новый Apple TV предоставляет чрезвычайно ограниченное локальное хранилище для tvOS приложений или данных. Для очень мелких элементов (например, настроек пользователя) приложение tvOS по-прежнему имеет доступ `NSUserDefaults` к с [ограничением в 500 КБ данных](https://forums.developer.apple.com/message/50696#50696). Однако если ваше приложение Xamarin. tvOS должно сохранять большие объемы информации, он должен хранить и извлекать эти данные из [iCloud](#iCloud-Data-Storage).

Кроме того, tvOS ограничивает размер приложения Apple TV 200 МБ. Если приложению требуются ресурсы, превышающие этот размер, их необходимо упаковать и загрузить с помощью [ресурсов по требованию](#On-Demand-Resources) (до дополнительной 2 ГБ). Учитывая эти ограничения, крайне важно правильно загрузить дополнительные ресурсы, чтобы обеспечить оптимальную работу пользователей приложения. Дополнительные сведения см. в статье о [ресурсах по запросу](https://developer.apple.com/library/prerelease/tvos/documentation/FileManagement/Conceptual/On_Demand_Resources_Guide/index.html#//apple_ref/doc/uid/TP40015083)Apple.

<a name="Non-Persistent-Downloads" />

## <a name="non-persistent-downloads"></a>Не постоянные загрузки

Каждое приложение tvOS предоставляет временный каталог кэша, в который загружаются дополнительные ресурсы и активы. Этот каталог будет сохранен при условии, что приложение все еще выполняется. Однако, так как Apple TV необходимо освободить место для других приложений или использования системы, этот кэш можно удалить.

В результате приложение не может полагаться на ранее загруженное содержимое, доступное при следующем его запуске. Ваше приложение Xamarin. tvOS должно всегда проверять наличие необходимых ресурсов и скачивать их по мере необходимости.

> [!IMPORTANT]
> Несмотря на то, что вы можете скачивать другие активы и ресурсы по мере необходимости, Apple предупреждает о потреблении всего пространства в кэше вашего приложения, так как это может привести к непредсказуемым результатам.

<a name="Managing-Resources" />

## <a name="managing-resources"></a>Управление ресурсами

Как упоминалось выше, из-за ограниченного непостоянного хранилища информации, доступной для tvOS приложений, эти ограничения потребовали тщательного планирования создания отличного пользовательского интерфейса для вашего приложения Xamarin. tvOS.

<a name="iCloud-Data-Storage" />

### <a name="icloud-data-storage"></a>Хранилище данных iCloud

Поскольку хранилище на Apple TV ограничено, а не только очень ограниченно постоянным локальным хранилищем, ваше приложение не гарантирует, что все ранее скачанные данные будут доступны при следующем запуске.

В результате ваше приложение Xamarin. tvOS должно хранить данные пользователей в хранилище данных iCloud. Компания Apple предоставляет два варианта хранения данных на основе iCloud для приложений tvOS:

- **хранилище ключей iCloud (КВС)** — для небольших данных (менее 1 МБ), которые могут потребоваться приложению (например, пользовательские настройки), можно использовать хранилище iCloud КВС. данные КВС iCloud автоматически синхронизируются с облаком, а все устройства пользователя работают с одним и тем же приложением. Дополнительные сведения см. в разделе " [хранилище ключей и значений](~/ios/data-cloud/introduction-to-icloud.md) " статьи [Введение в документ ICloud](~/ios/data-cloud/introduction-to-icloud.md) или проектирование Apple [для получения данных о ключах в](https://developer.apple.com/library/prerelease/tvos/documentation/General/Conceptual/iCloudDesignGuide/Chapters/DesigningForKey-ValueDataIniCloud.html#//apple_ref/doc/uid/TP40012094-CH7) документации по iCloud.
- **CloudKit** — для хранения больших объемов информации (более 1 МБ) Используйте платформу Apple CloudKit Framework. В отличие от хранилища КВС iCloud, данные CloudKit могут совместно использоваться всеми пользователями приложения (а также частными для одного пользователя). Дополнительные сведения см. [в статье Введение в](~/ios/data-cloud/intro-to-cloudkit.md) документацию по CloudKit или Apple [CloudKit быстрое начало](https://developer.apple.com/library/prerelease/tvos/documentation/DataManagement/Conceptual/CloudKitQuickStart/Introduction/Introduction.html#//apple_ref/doc/uid/TP40014987).

> [!IMPORTANT]
> Компания Apple [предоставляет инструменты](https://developer.apple.com/support/allowing-users-to-manage-data/), которые помогают разработчикам надлежащим образом соблюдать Общий регламент по защите данных Европейского союза (GDPR).

<a name="On-Demand-Resources" />

### <a name="on-demand-resources"></a>Ресурсы по запросу

Ресурсы по запросу предоставляют содержимое и ресурсы приложения (отдельно от набора приложений), которые размещаются в магазине приложений и загружаются в соответствии с требованиями приложения. С помощью ресурсов по требованию можно обслуживать до дополнительных ГБ данных. Они позволяют уменьшить исходное скачивание приложения (приложения tvOS ограничены максимумом 200 МБ), при этом при необходимости по-прежнему предоставляются обширные активы.

Когда приложение tvOS запрашивает ресурсы по требованию, система будет автоматически управлять скачиванием и хранением этого содержимого в каталоге кэша приложения. Перед продолжением приложение должно дожидаться скачивания этого содержимого и сделать его доступным.

Эти ресурсы могут продолжать кэшироваться на Apple TV во время нескольких запусков приложения, что ускоряет цикл запуска. Однако приложение не может полагаться на все ранее скачанные материалы при следующем его запуске. Дополнительные сведения см. в разделе [загрузки, не являющиеся постоянными](#Non-Persistent-Downloads) .

Xcode используется для создания пакетов связанных содержимого (например, всех ресурсов для игрового уровня 2), связанных с тегом ресурса предоставления. Позже приложение будет запрашивать ресурс по запросу, указывая этот тег ресурса. Приложение должно предоставить пользователю пользовательский интерфейс, говорящий, что содержимое загружается. Дополнительные сведения см. в статье о [ресурсах по запросу](https://developer.apple.com/library/prerelease/tvos/documentation/FileManagement/Conceptual/On_Demand_Resources_Guide/index.html#//apple_ref/doc/uid/TP40015083)Apple.

> [!IMPORTANT]
> Следует уделить внимание правильному балансу между тем, сколько раз требуется, чтобы приложение загружало ресурсы по требованию и размер отдельных загружаемых файлов. Пользователь может стать разочарованным с вашим приложением, если игрового процесса постоянно прерывается для загрузки нового содержимого или если загрузка занимает слишком много времени.

<a name="Summary" />

## <a name="summary"></a>Сводка

В этой статье были рассмотрены ограничения по размеру, ресурсам и хранению данных, накладываемые на приложение Xamarin. tvOS системой tvOS. В нем представлены параметры для обхода этих ограничений и предложений по созданию отличного взаимодействия с пользователем для вашего приложения.

## <a name="related-links"></a>Связанные ссылки

- [Примеры tvOS](https://docs.microsoft.com/samples/browse/?products=xamarin&term=Xamarin.iOS+tvOS)
- [tvOS](https://developer.apple.com/tvos/)
- [Руководства по tvOSму интерфейсу](https://developer.apple.com/tvos/human-interface-guidelines/)
- [Руководством по программированию приложений для tvOS](https://developer.apple.com/library/prerelease/tvos/documentation/General/Conceptual/AppleTV_PG/)
