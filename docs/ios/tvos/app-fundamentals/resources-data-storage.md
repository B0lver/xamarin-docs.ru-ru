---
title: tvOS, ресурсы и хранилище данных в Xamarin
description: В этой статье описывается, как работать с ресурсов и хранилище постоянных данных в приложение tvOS, созданных с помощью Xamarin. Здесь рассматриваются ресурсы хранилища и по запросу данных iCloud.
ms.prod: xamarin
ms.assetid: C56B5046-D2C0-4B63-9CE0-ADAA0EFD368A
ms.technology: xamarin-ios
author: lobrien
ms.author: laobri
ms.date: 03/16/2017
ms.openlocfilehash: 8f8ecc115738fb97f71b4ea6b2cdcc5c2714372d
ms.sourcegitcommit: 4b402d1c508fa84e4fc3171a6e43b811323948fc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61208527"
---
# <a name="tvos-resources-and-data-storage-in-xamarin"></a>tvOS, ресурсы и хранилище данных в Xamarin

_В этой статье рассматривается работа с ресурсы и хранилище постоянных данных в приложении Xamarin.tvOS._

<a name="tvOS-Resource-Limitations" />

## <a name="tvos-resource-limitations"></a>Ограничения ресурсов tvOS

В отличие от устройств iOS новый Apple TV предоставляет крайне ограничены постоянное локальное хранилище для tvOS приложения и данные. Для небольших элементов (например, настройки пользователя), приложение tvOS по-прежнему имеет доступ к `NSUserDefaults` с [ограничение в 500 КБ данных](https://forums.developer.apple.com/message/50696#50696). Тем не менее, если Xamarin.tvOS приложение должно сохранять большие объемы информации, ее необходимо хранить и получения данных из [iCloud](#iCloud-Data-Storage).

Кроме того tvOS ограничивает размер приложения Apple TV в 200 МБ. Если приложению требуются ресурсы сверх этого размера, их необходимо будет упакован и загрузить с помощью [ресурсы по запросу](#On-Demand-Resources) (до Дополнительно 2 ГБ). Учитывая эти ограничения, крайне важно, правильно время загрузки дополнительных средств, чтобы обеспечить удобство для пользователей вашего приложения. Дополнительные сведения см. в разделе Apple [руководство по ресурсам по требованию](https://developer.apple.com/library/prerelease/tvos/documentation/FileManagement/Conceptual/On_Demand_Resources_Guide/index.html#//apple_ref/doc/uid/TP40015083).

<a name="Non-Persistent-Downloads" />

## <a name="non-persistent-downloads"></a>Временные файлы для загрузки

Каждое приложение tvOS предоставляется каталоге временного кэша, который его дополнительные ресурсы и ресурсы загружаются. Этот каталог будет сохраняться до тех пор, пока приложение по-прежнему выполняется. Тем не менее как Apple TV требуется освободить место для других приложений или использование системы, можно удалить этот кэш.

Таким образом приложение нельзя полагаться на ранее загруженное содержимое, будут доступны при следующем запуске. Приложение Xamarin.tvOS всегда должна проверить наличие необходимых ресурсов и скачать их при необходимости.

> [!IMPORTANT]
> Хотя у вас есть возможность загрузки других активов и ресурсов, при необходимости, Apple выдает предупреждение, для использования все пространство в кэше приложения, как это может привести к непредсказуемым результатам.




<a name="Managing-Resources" />

## <a name="managing-resources"></a>Управление ресурсами

Как упоминалось выше, из-за ограниченного, отличных от постоянного хранения данных, доступных для приложения tvOS, эти ограничения требуют тщательного планирования для создания современного пользовательского интерфейса для приложения Xamarin.tvOS.

<a name="iCloud-Data-Storage" />

### <a name="icloud-data-storage"></a>Хранилище данных iCloud

В силу ограничений хранения на Apple TV мало того, существует очень ограниченный постоянное локальное хранилище, ваше приложение получило никакой гарантии, что все сведения, ранее загруженные будут доступны при очередном запуске.

В результате Xamarin.tvOS приложения необходимо сохранить какие-либо данные в iCloud данных Store. Apple предоставляет два варианта хранения данных на основе iCloud для tvOS приложений:

- **iCloud хранилище ключ-значение (KVS)** — для небольших порций информации (менее 1 МБ), что приложение требует (наподобие предпочтений пользователей), можно использовать KVS хранилище iCloud. iCloud KVS данных автоматически синхронизируются с облаком и все его устройства под управлением того же приложения. Дополнительные сведения см. в разделе [хранилище ключ-значение](~/ios/data-cloud/introduction-to-icloud.md) части нашей [введение в iCloud](~/ios/data-cloud/introduction-to-icloud.md) документа или Apple [проектирование для данных ключ-значение в iCloud](https://developer.apple.com/library/prerelease/tvos/documentation/General/Conceptual/iCloudDesignGuide/Chapters/DesigningForKey-ValueDataIniCloud.html#//apple_ref/doc/uid/TP40012094-CH7) документация.
- **CloudKit** — для хранения большего размера блока данных (более 1 МБ), используйте платформы CloudKit Apple. В отличие от KVS хранилище iCloud CloudKit данных может быть общим для всех пользователей приложения (а также как закрытый для одного пользователя). Дополнительные сведения см. наш [введение в CloudKit](~/ios/data-cloud/intro-to-cloudkit.md) документации или Apple [CloudKit быстрый запуск](https://developer.apple.com/library/prerelease/tvos/documentation/DataManagement/Conceptual/CloudKitQuickStart/Introduction/Introduction.html#//apple_ref/doc/uid/TP40014987).

> [!IMPORTANT]
> Компания Apple [предоставляет инструменты](https://developer.apple.com/support/allowing-users-to-manage-data/), которые помогают разработчикам надлежащим образом соблюдать Общий регламент по защите данных Европейского союза (GDPR).

<a name="On-Demand-Resources" />

### <a name="on-demand-resources"></a>Ресурсы по запросу

Ресурсы по запросу предоставляют содержимое приложения и ресурсы (отдельно от набора приложений), размещенных на App Store и скачать в виде требований приложения. До Дополнительно 2 ГБ данных, может предоставляться с помощью ресурсы по запросу. Они позволяют загрузки первоначального приложения уменьшить (приложения tvOS, ограничение составляет 200 МБ), обеспечивая широкие возможности средств, при необходимости.

Когда приложение tvOS запрашивает ресурсы по запросу, система автоматически управляет загрузки и хранения это содержимое в каталог кэша приложения. Приложение должно ожидать это содержимое для загрузки и становятся доступными для продолжения.

Эти ресурсы могут продолжать кэшироваться на Apple TV на протяжении нескольких запусков приложения, тем самым ускорить цикл запуска. Тем не менее приложение нельзя полагаться на ранее загруженного содержимого, доступной при следующем запуске. См. в разделе [непостоянные загружает](#Non-Persistent-Downloads) разделе выше для получения дополнительных сведений.

Использовать Xcode для создания пакетов со связанным содержимым (например, все ресурсы для игр уровень 2), связанный с предоставленного тега ресурса. Позднее приложение будет запрашивать ресурсов по запросу, указав этот тег ресурса. Приложения должны представить пользовательский Интерфейс для пользователя сообщение о том, что содержимое загружается. Дополнительные сведения см. в разделе Apple [руководство по ресурсам по требованию](https://developer.apple.com/library/prerelease/tvos/documentation/FileManagement/Conceptual/On_Demand_Resources_Guide/index.html#//apple_ref/doc/uid/TP40015083).

> [!IMPORTANT]
> Чтобы найти правильный баланс между количество раз, приложение будет загружать ресурсы по запросу и размером отдельных загрузок следует соблюдать осторожность. Пользователь может стать разочарованы с вашим приложением, если игровой процесс прерывается постоянно, чтобы загрузить новое содержимое или загрузки занимает слишком много времени.




<a name="Summary" />

## <a name="summary"></a>Сводка

В этой статье подробно рассматривается объема ресурсов и данных хранилища ограничений, наложенных на приложение Xamarin.tvOS системой tvOS. Он представил параметры, чтобы обойти эти ограничения и рекомендации для создания современного пользовательского интерфейса для вашего приложения.



## <a name="related-links"></a>Связанные ссылки

- [Примеры tvOS](https://developer.xamarin.com/samples/tvos/all/)
- [tvOS](https://developer.apple.com/tvos/)
- [Человека направляющие интерфейса tvOS](https://developer.apple.com/tvos/human-interface-guidelines/)
- [Приложение руководство по программированию для tvOS](https://developer.apple.com/library/prerelease/tvos/documentation/General/Conceptual/AppleTV_PG/)
