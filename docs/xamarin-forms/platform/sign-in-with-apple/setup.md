---
Title: "шаги настройки. вход с Apple для Xamarin.Forms " Description: ". вход с помощью программы установки Apple зависит от платформы, для которой предназначено ваше мобильное приложение."
MS. произв. Xamarin MS. AssetID: 8F712802-395B-469B-B5BE-C927AD1A8391 MS. Technology: Xamarin-Forms author: давидортинау MS. author: даортин МС. Дата: 09/10/2019 No-Loc: [ Xamarin.Forms , Xamarin.Essentials ]
---

# <a name="setup-sign-in-with-apple-for-xamarinforms"></a>Настройка входа с помощью Apple дляXamarin.Forms

В этом руководстве описывается последовательность действий, необходимых для настройки межплатформенных приложений с целью совершения входа с помощью Apple. Хотя настройка Apple выполняется прямо вперед на портале разработчика Apple, необходимо выполнить дополнительные действия, чтобы создать безопасное отношение между Android и Apple. 

## <a name="apple-developer-setup"></a>Установка для разработчиков Apple

Прежде чем использовать вход с Apple в своих приложениях, необходимо выполнить некоторые действия по настройке в разделе [сертификаты, идентификаторы & профилей](https://developer.apple.com/account/resources/) на портале разработчика Apple.

### <a name="apple-sign-in-domain"></a>Домен Apple для входа

Зарегистрируйте имя домена и проверьте его с помощью Apple в [разделе "](https://developer.apple.com/account/resources/services/list) сертификаты" *, "идентификаторы & профили* ".

![Дополнительные разделы](sign-in-images/readme-signin-domain-configure.png)

Добавьте домен и нажмите кнопку **зарегистрировать**.

![Форма регистрации домена](sign-in-images/readme-signin-domain-more.png)

> [!NOTE]
> Если вы видите ошибку о том, что ваш домен не соответствует требованиям SPF, необходимо добавить запись типа TXT DNS в домен и дождаться ее распространения перед продолжением: возможно, текст SPF выглядит примерно так:`v=spf1 a a:myapp.com -all`

Затем необходимо подтвердить принадлежность домена, нажав кнопку **скачать** , чтобы получить `apple-developer-domain-association.txt` файл, и передать его в `.well-known` папку на веб-сайте вашего домена.

Когда `.well-known/apple-developer-domain-association.txt` файл будет отправлен и доступен, можно нажать кнопку **проверить** , чтобы подтвердить владение доменом Apple.

> [!NOTE]
> Apple проверит владение с помощью `https://` . Убедитесь, что настроен протокол SSL, и файл доступен по безопасному URL-адресу.

Для продолжения этот процесс успешно завершен.

## <a name="setup-your-app-id"></a>Настройка идентификатора приложения

В разделе [идентификаторы](https://developer.apple.com/account/resources/identifiers/list) создайте новый идентификатор и выберите **Идентификаторы приложений**. Если у вас уже есть идентификатор приложения, выберите его для редактирования.

![Создать новый идентификатор приложения](sign-in-images/readme-appid-create.png)

Включите **Вход с помощью Apple**. Скорее всего, будет использоваться параметр **включить как основной идентификатор приложения** .

![Включение входа с помощью Apple](sign-in-images/readme-appid-signin.png)

Сохраните изменения идентификатора приложения.

## <a name="create-a-service-id"></a>Создание идентификатора службы

В разделе [идентификаторы](https://developer.apple.com/account/resources/identifiers/list/serviceId) создайте новый идентификатор и выберите **Идентификаторы служб**.

![Создать новый идентификатор службы](sign-in-images/readme-serviceid-create.png)

Присвойте ИДЕНТИФИКАТОРу служб описание и идентификатор.  Этот идентификатор будет иметь ваш `ServerId` .  Обязательно включите **Вход с помощью Apple**.

Прежде чем продолжить, нажмите кнопку " **настроить** " рядом с включенным параметром " _Вход с помощью Apple_ ".

На панели конфигурация убедитесь, что выбран правильный **идентификатор основного приложения** .

Затем выберите ранее настроенный **веб-домен** .

Наконец, добавьте один или несколько **URL-адресов возврата**.  Все `redirect_uri` , что вы используете позднее, должно быть зарегистрировано здесь в точности так, как оно используется.  Убедитесь, что вы включили `http://` или `https://` в URL-адрес при вводе.

> [!NOTE]
> В целях тестирования нельзя использовать `127.0.0.1` или `localhost` , но можно использовать другие домены, такие как `local.test` .  Если вы решили сделать это, можно изменить файл компьютера, `hosts` чтобы разрешить этот вымышленный домен в локальный IP-адрес.

![Настройка входа Apple](sign-in-images/readme-serviceid-configure.png)

По завершении сохраните изменения.

## <a name="create-a-key-for-your-services-id"></a>Создание ключа для идентификатора служб

В разделе [ключи](https://developer.apple.com/account/resources/authkeys/list) создайте новый **ключ**.

Присвойте ключу имя и включите **Вход с помощью Apple**.

![Создание нового ключа](sign-in-images/readme-key-create.png)

Щелкните **настроить** рядом _с элементом вход с помощью Apple_.

Убедитесь, что выбран правильный **идентификатор основного приложения** , и нажмите кнопку **сохранить**.

Нажмите кнопку **продолжить** , а затем **Зарегистрируйтесь** , чтобы создать новый ключ.

Далее вы получите только одну шанс скачать только что созданный ключ.  Щелкните элемент **Загрузить**.

![Скачать ключ](sign-in-images/readme-key-download.png)

Кроме того, запишите **идентификатор ключа** на этом шаге. Он будет использоваться `KeyId` позже.

`.p8`Файл ключа будет скачан.  Этот файл можно открыть в блокноте или VSCode для просмотра текстового содержимого.  Они должны выглядеть примерно так:

```
-----BEGIN PRIVATE KEY-----
MIGTAgEAMBMGBasGSM49AgGFCCqGSM49AwEHBHkwdwIBAQQg3MX8n6VnQ2WzgEy0
Skoz9uOvatLMKTUIPyPCAejzzUCgCgYIKoZIzj0DAQehRANCAARZ0DoM6QPqpJxP
JKSlWz0AohFhYre10EXPkjrih4jTm+b0AeG2BGuoIWd18i8FimGDgK6IzHHPsEqj
DHF5Svq0
-----END PRIVATE KEY-----
```

Назовите этот ключ `P8FileContents` и обеспечьте его защиту в надежном месте. Он будет использоваться при интеграции этой службы в мобильное приложение.

## <a name="summary"></a>Сводка

В этой статье описаны шаги, необходимые для настройки входа с помощью Apple для использования в Xamarin.Forms приложениях.

## <a name="related-links"></a>Связанные ссылки

- [Вход с использованием рекомендаций Apple](https://developer.apple.com/design/human-interface-guidelines/sign-in-with-apple/overview/)
  