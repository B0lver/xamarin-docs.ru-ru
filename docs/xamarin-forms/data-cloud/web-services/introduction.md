---
title: Введение в веб-службы Xamarin. Forms
description: Это руководство содержит пошаговое руководство по использованию примера приложения Xamarin. Forms, которое демонстрирует взаимодействие с различными веб-службами. Хотя каждая веб-служба использует отдельный пример приложения, они функционально похожи и совместно используют общие классы.
ms.prod: xamarin
ms.assetid: A3FEB262-0D79-42E6-8F8B-A565618C490B
ms.technology: xamarin-forms
author: davidbritch
ms.author: dabritch
ms.date: 02/28/2017
ms.openlocfilehash: bbeab6a6ab0d4a9d0e3a962240317fc0d54f9e25
ms.sourcegitcommit: 9bfedf07940dad7270db86767eb2cc4007f2a59f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/21/2019
ms.locfileid: "68656639"
---
# <a name="xamarinforms-web-services-introduction"></a>Введение в веб-службы Xamarin. Forms

[![Загрузить образец](~/media/shared/download.png) загрузить пример](https://docs.microsoft.com/samples/xamarin/xamarin-forms-samples/webservices-todorest)

_В этом разделе приводится пошаговое руководство по использованию примера приложения Xamarin. Forms, которое демонстрирует взаимодействие с различными веб-службами. Хотя каждая веб-служба использует отдельный пример приложения, они функционально похожи и совместно используют общие классы._

Пример приложения списка задач, описанный ниже, используется для демонстрации доступа к различным типам серверных веб-служб с помощью Xamarin. Forms. Она предоставляет следующие возможности:

- Просмотр списка задач.
- Добавление, изменение и удаление задач.
- Задайте для задачи состояние "Готово".
- Говорите о полях имя и примечания задачи.

Во всех случаях задачи хранятся в серверной части, доступ к которой осуществляется через веб-службу.

При запуске приложения отображается страница со списком задач, полученных от веб-службы, и позволяет пользователю создать новую задачу. Если щелкнуть задачу, приложение перейдет к другой странице, где задача может быть изменена, сохранена, удалена и произнесена. Ниже показано итоговое приложение:

![](introduction-images/app-example-1.png "Todo application - first page")
![](introduction-images/app-example-2.png "Todo application - second page")

В каждом разделе этого руководстве содержится ссылка для скачивания на *другую* версию приложения, которая демонстрирует конкретный тип серверной части веб-службы. Скачайте соответствующий пример кода на странице, относящейся к каждому стилю веб-службы.

## <a name="understand-the-application-anatomy"></a>Общие сведения о структуре приложения

Проект общего кода для каждого примера приложения состоит из трех основных папок:

|Папка|Цель|
|--- |--- |
|Data|Содержит классы и интерфейсы, используемые для управления элементами данных и взаимодействия с веб-службой. Как минимум, сюда входит класс `TodoItemManager`, который предоставляется через свойство класса `App` для вызова операций веб-службы.|
|Модели|Содержит классы модели данных для приложения. Как минимум, сюда входит класс `TodoItem`, который моделирует один элемент данных, используемых приложением. В папку также могут входить все дополнительные классы, используемые для моделирования пользовательских данных.|
|Представления|Содержит страницы для приложения. Обычно это состоит из классов `TodoListPage` и `TodoItemPage`, а также любых дополнительных классов, используемых для проверки подлинности.|

Проект общего кода для каждого приложения также состоит из нескольких важных файлов:

|Файл|Цель|
|--- |--- |
|Constants.cs|Класс `Constants`, указывающий любые константы, используемые приложением для взаимодействия с веб-службой. Эти константы нуждаются в обновлении для доступа к личной серверной службе, созданной на поставщике.|
|ITextToSpeech.cs|Интерфейс `ITextToSpeech`, который указывает, что метод `Speak` должен предоставляться любыми реализующими классами.|
|Todo.cs|Класс `App`, отвечающий за создание экземпляров первой страницы, которая будет отображаться приложением на каждой платформе, и класс `TodoItemManager`, который используется для вызова операций веб-службы.|

### <a name="view-pages"></a>Просмотр страниц

Большинство примеров приложений содержат по крайней мере две страницы:

- **Тодолистпаже** — на этой странице отображается список экземпляров `TodoItem` и значок деления, если свойство `TodoItem.Done` имеет значение `true`. При щелчке элемента выполняется переход к `TodoItemPage`. Кроме того, можно создать новые элементы, щелкнув символ *+* .
- **Тодоитемпаже** — Эта страница отображает подробные сведения о выбранном `TodoItem` и позволяет редактировать, сохранять, удалять и проговаривать.

Кроме того, некоторые примеры приложений содержат дополнительные страницы, которые используются для управления процессом проверки подлинности пользователя.

### <a name="model-the-data"></a>Моделирование данных

Каждый пример приложения использует класс `TodoItem` для моделирования данных, которые отображаются и отправляются в веб-службу для хранения. Следующий пример кода демонстрирует класс `TodoItem`:

```csharp
public class TodoItem
{
    public string ID { get; set; }
    public string Name { get; set; }
    public string Notes { get; set; }
    public bool Done { get; set; }
}
```

Свойство `ID` используется для уникальной идентификации каждого экземпляра `TodoItem` и используется каждой веб-службой для идентификации обновляемых или удаляемых данных.

### <a name="invoke-web-service-operations"></a>Вызов операций веб-службы

Доступ к операциям веб-службы осуществляется через класс `TodoItemManager`, и доступ к экземпляру класса можно получить с помощью свойства `App.TodoManager`. Класс `TodoItemManager` предоставляет следующие методы для вызова операций веб-службы:

- **Жеттасксасинк** — этот метод используется для заполнения элемента управления `ListView` на `TodoListPage` экземплярами `TodoItem`, полученными из веб-службы.
- **Саветаскасинк** — этот метод используется для создания или обновления экземпляра `TodoItem` в веб-службе.
- **Делететаскасинк** — этот метод используется для удаления экземпляра `TodoItem` в веб-службе.

Кроме того, некоторые примеры приложений содержат дополнительные методы в классе `TodoItemManager`, которые используются для управления процессом проверки подлинности пользователя.

Вместо того, чтобы вызывать операции веб-службы напрямую, `TodoItemManager` методы вызывают методы в зависимом классе, который вставляется в конструктор `TodoItemManager`. Например, один пример приложения внедряет `RestService` класс в конструктор `TodoItemManager`, чтобы предоставить реализацию, использующую интерфейсы API-интерфейса для доступа к данным.

## <a name="related-links"></a>Связанные ссылки

- [ASMX (пример)](https://docs.microsoft.com/samples/xamarin/xamarin-forms-samples/webservices-todoasmx)
- [WCF (пример)](https://docs.microsoft.com/samples/xamarin/xamarin-forms-samples/webservices-todowcf)
- [ОСТАВШАЯся (пример)](https://docs.microsoft.com/samples/xamarin/xamarin-forms-samples/webservices-todorest)
