---
title: Общие сведения о Xamarin. Forms и Azure Cognitive Services
description: В этой статье приводятся общие сведения о примере приложения, в котором показано, как вызывать некоторые API-интерфейсы Microsoft для работы со службой.
ms.prod: xamarin
ms.assetid: 74121ADB-1322-4C1E-A103-F37257BC7CB0
ms.technology: xamarin-forms
author: davidbritch
ms.author: dabritch
ms.date: 02/08/2017
ms.openlocfilehash: 52774b387644b14e3d4612dffa6d3c3b28a37f25
ms.sourcegitcommit: 9bfedf07940dad7270db86767eb2cc4007f2a59f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/21/2019
ms.locfileid: "68652311"
---
# <a name="xamarinforms-and-azure-cognitive-services-introduction"></a>Общие сведения о Xamarin. Forms и Azure Cognitive Services

[![Загрузить образец](~/media/shared/download.png) загрузить пример](https://docs.microsoft.com/samples/xamarin/xamarin-forms-samples/webservices-todocognitiveservices)

_Microsoft Cognitive Services — это набор API-интерфейсов, пакетов SDK и служб, доступных разработчикам, чтобы сделать свои приложения более интеллектуальными, добавив такие функции, как распознавание лиц, распознавание речи и понимание языка. В этой статье приводятся общие сведения о примере приложения, в котором показано, как вызывать некоторые API-интерфейсы Microsoft для работы со службой._

## <a name="overview"></a>Обзор

Прилагаемый пример — это приложение списка дел, которое предоставляет следующие функциональные возможности:

- Просмотр списка задач.
- Добавление и изменение задач с помощью экранной клавиатуры или распознавание речи с помощью Microsoft Speech API. Дополнительные сведения о распознавании речи см. [в разделе Распознавание речи с помощью Microsoft Speech API](speech-recognition.md).
- Задачи проверки орфографии с использованием API Bing для проверки орфографии. Дополнительные сведения см. [в разделе Проверка орфографии с помощью API Bing для проверки орфографии](spell-check.md).
- Перевод задач с английского на немецкий с помощью API-интерфейса переводчика. Дополнительные сведения см. [в разделе Преобразование текста с помощью API-интерфейса переводчика](text-translation.md).
- Удаление задач.
- Задайте для задачи состояние "Готово".
- Оцените приложение с помощью распознавания эмоцийного распознавания, используя API распознавания лиц. Дополнительные сведения см. [в разделе Распознавание распознавания эмоций с помощью API распознавания лиц](emotion-recognition.md).

Задачи хранятся в локальной базе данных SQLite. Дополнительные сведения об использовании локальной базы данных SQLite см. в разделе [Работа с локальной базой данных](~/xamarin-forms/data-cloud/data/databases.md).

@No__t_0 отображается при запуске приложения. На этой странице отображается список всех задач, хранящихся в локальной базе данных, и пользователь имеет возможность создать новую задачу или оценить приложение:

![](introduction-images/sample-application-1.png "TodoListPage")

Новые элементы можно создать, нажав кнопку *+* , которая переходит к `TodoItemPage`. Для перехода на эту страницу можно также выбрать задачу:

![](introduction-images/sample-application-2.png "TodoItemPage")

@No__t_0 позволяет создавать, изменять, проверять орфографию, переводить, сохранять и удалять задачи. Для создания или изменения задачи можно использовать распознавание речи. Это достигается нажатием кнопки микрофона для начала записи и нажатием этой же кнопки во второй раз для отмены записи, которая отправляет запись в API-интерфейс распознавания Распознавание речи Bing.

Нажатие кнопки SMIL на `TodoListPage` переходит к `RateAppPage`, который используется для выполнения распознавания распознавания эмоций на изображении выражения лица:

![](introduction-images/sample-application-3.png "RateAppPage")

@No__t_0 позволяет пользователю получить фотографию своего лица, которая отправляется в API распознавания лиц с отображаемым распознавания эмоций.

## <a name="understand-the-application-anatomy"></a>Общие сведения о структуре приложения

Проект общего кода для примера приложения состоит из пяти основных папок:

|Папка|Цель|
|--- |--- |
|Модели|Содержит классы модели данных для приложения. Это включает класс `TodoItem`, который моделирует один элемент данных, используемых приложением. Эта папка также содержит классы, используемые для моделирования ответов JSON, возвращаемых разными API-интерфейсами Microsoft для программирования сообщений.|
|Репозитории|Содержит интерфейс `ITodoItemRepository` и `TodoItemRepository` класс, которые используются для выполнения операций с базой данных.|
|Службы|Содержит интерфейсы и классы, используемые для доступа к различным API-интерфейсам Microsoft для работы со службой, а также интерфейсы, используемые классом `DependencyService` для нахождение классов, реализующих интерфейсы в проектах платформы.|
|utils|Содержит класс `Timer`, который используется классом `AuthenticationService` для обновления маркера доступа JWT каждые 9 минут.|
|Представления|Содержит страницы для приложения.|

Проект общего кода также содержит несколько важных файлов:

|Файл|Цель|
|--- |--- |
|Constants.cs|Класс `Constants`, указывающий ключи API и конечные точки для вызовов API-интерфейсов службы Microsoft для вызываемых служб. Для констант ключа API требуется обновление для доступа к различным API-интерфейсам функции для программирования.|
|App.xaml.cs|Класс `App` отвечает за создание экземпляра первой страницы, которая будет отображаться приложением на каждой платформе, и класса `TodoManager`, который используется для вызова операций базы данных.|

### <a name="nuget-packages"></a>Пакеты NuGet

Пример приложения использует следующие пакеты NuGet:

- `Newtonsoft.Json` — предоставляет платформу JSON для .NET.
- `PCLStorage` — предоставляет набор межплатформенных API-интерфейсов ввода-вывода локальных файлов.
- `sqlite-net-pcl` — предоставляет хранилище базы данных SQLite.
- `Xam.Plugin.Media` — предоставляет API-интерфейсы для межплатформенного принятия и выбора фотографий.

Кроме того, эти пакеты NuGet также устанавливают собственные зависимости.

### <a name="model-the-data"></a>Моделирование данных

Пример приложения использует класс `TodoItem` для моделирования данных, которые отображаются и хранятся в локальной базе данных SQLite. Следующий пример кода демонстрирует класс `TodoItem`:

```csharp
public class TodoItem
{
  [PrimaryKey, AutoIncrement]
  public int ID { get; set; }
  public string Name { get; set; }
  public bool Done { get; set; }
}
```

Свойство `ID` используется для уникальной идентификации каждого экземпляра `TodoItem` и дополнено атрибутами SQLite, которые делают свойство первичным ключом автоматического приращения в базе данных.

### <a name="invoke-database-operations"></a>Вызов операций базы данных

Класс `TodoItemRepository` реализует операции с базой данных, а экземпляр класса доступен через свойство `App.TodoManager`. Класс `TodoItemRepository` предоставляет следующие методы для вызова операций базы данных:

- **Жеталлитемсасинк** — извлекает все элементы из локальной базы данных SQLite.
- **Жетитемасинк** — извлекает указанный элемент из локальной базы данных SQLite.
- **Савеитемасинк** — создает или обновляет элемент в локальной базе данных SQLite.
- **Делетеитемасинк** — удаляет указанный элемент из локальной базы данных SQLite.

### <a name="platform-project-implementations"></a>Реализации проекта платформы

Папка `Services` в проекте общего кода содержит интерфейсы `IFileHelper` и `IAudioRecorderService`, которые используются классом `DependencyService` для нахождение классов, реализующих интерфейсы в проектах платформы.

Интерфейс `IFileHelper` реализуется классом `FileHelper` в каждом проекте платформы. Этот класс состоит из одного метода, `GetLocalFilePath`, который возвращает путь к локальному файлу для хранения базы данных SQLite.

Интерфейс `IAudioRecorderService` реализуется классом `AudioRecorderService` в каждом проекте платформы. Этот класс состоит из `StartRecording`, `StopRecording` и вспомогательных методов, которые используют интерфейсы API платформы для записи звука с микрофона устройства и сохранения их в виде WAV-файла. В iOS `AudioRecorderService` использует API `AVFoundation` для записи звука. В Android `AudioRecordService` использует API `AudioRecord` для записи звука. В универсальная платформа Windows (UWP) `AudioRecorderService` использует API-интерфейс `AudioGraph` для записи звука.

### <a name="invoke-cognitive-services"></a>Вызов вызываемых служб

Пример приложения вызывает следующие Microsoft Cognitive Services:

- Microsoft Speech API. Дополнительные сведения см. [в разделе Распознавание речи с помощью Microsoft Speech API](speech-recognition.md).
- API Bing для проверки орфографии. Дополнительные сведения см. [в разделе Проверка орфографии с помощью API Bing для проверки орфографии](spell-check.md).
- API преобразования. Дополнительные сведения см. [в разделе Преобразование текста с помощью API-интерфейса переводчика](text-translation.md).
- API распознавания лиц. Дополнительные сведения см. [в разделе Распознавание распознавания эмоций с помощью API распознавания лиц](emotion-recognition.md).

## <a name="related-links"></a>Связанные ссылки

- [Документация по Microsoft Cognitive Services](https://www.microsoft.com/cognitive-services/documentation)
- [Cognitive Services ToDo (пример)](https://docs.microsoft.com/samples/xamarin/xamarin-forms-samples/webservices-todocognitiveservices)
