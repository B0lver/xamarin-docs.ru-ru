---
title: Общие сведения о пользовательских модулей подготовки отчетов
description: В этой статье содержатся вводные пользовательские модули подготовки отчетов, а также описание процесса создания пользовательского средства визуализации.
ms.prod: xamarin
ms.assetid: 264314BE-1C5C-4727-A14E-F6F98151CDBD
ms.technology: xamarin-forms
author: davidbritch
ms.author: dabritch
ms.date: 01/19/2016
ms.openlocfilehash: 2b2b5726f4ca28ae37f027a700abdd688aa0b1d7
ms.sourcegitcommit: e268fd44422d0bbc7c944a678e2cc633a0493122
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/25/2018
ms.locfileid: "50108435"
---
# <a name="introduction-to-custom-renderers"></a>Общие сведения о пользовательских модулей подготовки отчетов

_Пользовательские модули подготовки отчетов обеспечивают мощный подход для настройки внешнего вида и поведения элементов управления Xamarin.Forms. Они могут использоваться для изменения небольшой стилей или сложный макет платформы и настройка поведения. В этой статье содержатся вводные пользовательские модули подготовки отчетов, а также описание процесса создания пользовательского средства визуализации._

Xamarin.Forms [страниц, макеты и элементы управления](~/xamarin-forms/user-interface/controls/index.md) представить общий API для описания кроссплатформенных мобильных пользовательских интерфейсов. Каждой страницы, макет и элемент управления по-разному отображается на каждой платформе, с помощью `Renderer` класс, который в свою очередь создает собственный элемент управления (соответствующие представления Xamarin.Forms), размещает его на экране и реализует поведение, определенное в общий код.

Разработчики могут реализовывать пользовательские классы `Renderer` для настройки внешнего вида или работы элемента управления. Пользовательские модули подготовки отчетов для данного типа могут добавляться в проект одного приложения, чтобы настроить элемент управления в одном месте, обеспечивая поведение по умолчанию на других платформах; или различных пользовательских модулей подготовки отчетов можно добавить в каждый проект приложения для создания другой внешний вид на iOS, Android и универсальной платформы Windows (UWP). Тем не менее реализовать класс пользовательского средства визуализации для выполнения настройки простого элемента управления чаще всего спектра ответа. Влияние упростить этот процесс и обычно используются для изменения небольшой стилей. Дополнительные сведения см. в статье [Эффекты](~/xamarin-forms/app-fundamentals/effects/index.md).

## <a name="examining-why-custom-renderers-are-necessary"></a>Анализ почему пользовательские Отрисовщики при необходимости

Изменение внешнего вида элемента управления Xamarin.Forms, без использования пользовательского средства визуализации, — это двухэтапный процесс, который включает в себя создание пользовательского элемента управления через создание подкласса, а затем его использования пользовательского элемента управления, вместо исходного элемента управления. В следующем примере кода показан пример создания подклассов `Entry` управления:

```csharp
public class MyEntry : Entry
{
  public MyEntry ()
  {
    BackgroundColor = Color.Gray;
  }
}
```

`MyEntry` Элемент управления является `Entry` управления where `BackgroundColor` присваивается серый цвет и может использоваться в Xaml, объявление пространства имен для его расположения и используя префикс пространства имен в элементе управления. В следующем примере кода показано как `MyEntry` пользовательский элемент управления может быть поглощен `ContentPage`:

```xaml
<ContentPage
    ...
    xmlns:local="clr-namespace:CustomRenderer;assembly=CustomRenderer"
    ...>
    ...
    <local:MyEntry Text="In Shared Code" />
    ...
</ContentPage>
```

`local` Префикс пространства имен может быть любым. Тем не менее `namespace` и `assembly` значения должны соответствовать данные пользовательского элемента управления. После объявления пространства имен, префикс используется для ссылки на пользовательский элемент управления.

> [!NOTE]
> Определение `xmlns` гораздо проще в проектах .NET Standard библиотек общих проектов. Библиотеку .NET Standard компилируется в сборку, поэтому легко определить, какие типы `assembly=CustomRenderer` значение должно быть. При использовании общих проектов, все общие ресурсы (включая XAML) компилируются в каждую из ссылающейся проектов, означает, что если iOS, Android и UWP проекты имеют свой собственный *имена сборок* невозможно написать `xmlns` объявление так, как значение должно быть разными для каждого приложения. Пользовательские элементы управления в XAML для общих проектов потребует каждый проект приложения быть перенастроены с тем же именем сборки.

`MyEntry` Пользовательский элемент управления затем отображается на каждой платформе, на сером фоне, как показано на следующем снимке экрана:

![](introduction-images/screenshots.png "MyEntry пользовательский элемент управления на каждой платформе")

Изменение цвета фона элемента управления на каждой платформе достигнута исключительно через создание подкласса элемента управления. Тем не менее этот метод имеет ограничения по что его можно добиться, так как он уже не сможете воспользоваться преимуществами платформы усовершенствования и настройка. Если они требуются, пользовательские модули подготовки отчетов должен быть реализован.

## <a name="creating-a-custom-renderer-class"></a>Создание класса пользовательского средства отрисовки

Процесс создания класса пользовательского средства визуализации выглядит следующим образом:

1. Создайте подкласс класса модуля подготовки отчетов, который выполняет визуализацию собственного элемента управления.
1. Переопределите метод, который отображает собственный элемент управления и напишите логику для управления. Часто `OnElementChanged` метод используется для отрисовки собственного элемента управления, который вызывается, когда создается соответствующий элемент управления Xamarin.Forms.
1. Добавление `ExportRenderer` атрибут в класс пользовательского средства визуализации, чтобы указать, что он будет использоваться для отрисовки элемента управления Xamarin.Forms. Этот атрибут используется для регистрации пользовательского средства визуализации с помощью Xamarin.Forms.

> [!NOTE]
> Для большинства элементов Xamarin.Forms является необязательным для предоставления пользовательского средства визуализации в каждом проекте платформы. Если не зарегистрировано пользовательское средство отрисовки, то будет использоваться модуль подготовки отчетов по умолчанию для базового класса элемента управления. Однако пользовательские модули подготовки отчетов необходимы в каждом проекте платформы при отрисовке [представление](xref:Xamarin.Forms.View) или [ViewCell](xref:Xamarin.Forms.ViewCell) элемент.

В этой серии будут представлены демо-ролики и пояснения этот процесс для различных элементов Xamarin.Forms.

## <a name="troubleshooting"></a>Устранение неполадок

Если пользовательский элемент управления, содержащийся в проекте библиотеки .NET Standard, которая была добавлена в решение (т. е. не библиотеки .NET Standard создается средой Visual Studio для шаблона проекта приложения Xamarin.Forms Mac или Visual Studio), исключение может произойти в iOS при Попытка доступа к пользовательскому элементу управления. При возникновении этой проблемы может быть разрешена, создав ссылку на пользовательский элемент управления из `AppDelegate` класса:

```csharp
var temp = new ClassInPCL(); // in AppDelegate, but temp not used anywhere
```

Это заставит компилятор мог распознавать `ClassInPCL` тип по ее устранению. Кроме того `Preserve` можно добавить атрибут `AppDelegate` класс для достижения такого же результата:

```csharp
[assembly: Preserve (typeof (ClassInPCL))]
```

Это создает ссылку на `ClassInPCL` типа, что указывает, что он должен во время выполнения. Дополнительные сведения см. в разделе [сохранением кода](~/ios/deploy-test/linker.md).

## <a name="summary"></a>Сводка

В этой статье предоставлены общие сведения о пользовательских модулей подготовки отчетов, а также описаны процесс создания пользовательского средства визуализации. Пользовательские модули подготовки отчетов обеспечивают мощный подход для настройки внешнего вида и поведения элементов управления Xamarin.Forms. Они могут использоваться для изменения небольшой стилей или сложный макет платформы и настройка поведения.


## <a name="related-links"></a>Связанные ссылки

- [Эффекты](~/xamarin-forms/app-fundamentals/effects/index.md)
