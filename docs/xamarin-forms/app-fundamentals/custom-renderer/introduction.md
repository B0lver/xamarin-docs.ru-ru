---
title: "Общие сведения о пользовательских модулях подготовки отчетов"
description: "Пользовательские модули подготовки отчетов предоставляют мощный подход для настройки внешнего вида и поведения элементов управления Xamarin.Forms. Они могут использоваться для изменения небольшой стилей или сложных макета конкретную платформу и настройка поведения. В этой статье содержатся вводные сведения о пользовательских модулях подготовки отчетов и описан процесс создания пользовательского средства отрисовки."
ms.topic: article
ms.prod: xamarin
ms.assetid: 264314BE-1C5C-4727-A14E-F6F98151CDBD
ms.technology: xamarin-forms
author: davidbritch
ms.author: dabritch
ms.date: 01/19/2016
ms.openlocfilehash: a9908429994f4575a9e41936d500bfd8906a843b
ms.sourcegitcommit: 6cd40d190abe38edd50fc74331be15324a845a28
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/27/2018
---
# <a name="introduction-to-custom-renderers"></a>Общие сведения о пользовательских модулях подготовки отчетов

_Пользовательские модули подготовки отчетов предоставляют мощный подход для настройки внешнего вида и поведения элементов управления Xamarin.Forms. Они могут использоваться для изменения небольшой стилей или сложных макета конкретную платформу и настройка поведения. В этой статье содержатся вводные сведения о пользовательских модулях подготовки отчетов и описан процесс создания пользовательского средства отрисовки._

Xamarin.Forms [страниц, макеты и элементы управления](~/xamarin-forms/user-interface/controls/index.md) предоставлять общий API для описания кросс платформенных мобильных пользовательских интерфейсов. Каждой страницы, макет и элемента управления по-разному отображается на каждой платформе, с помощью `Renderer` класс, который в свою очередь, создает собственный элемент управления (соответствующий представление Xamarin.Forms), упорядочивает таким образом, на экране и добавляет поведение, заданное в общий код.

Разработчики могут реализовывать пользовательские классы `Renderer` для настройки внешнего вида или работы элемента управления. Можно добавить пользовательские модули подготовки отчетов для данного типа проекта одно приложение для настройки элемента управления в одном месте, позволяет поведение по умолчанию на других платформах; или можно добавить различные пользовательские модули подготовки отчетов в каждый проект приложения для создания различных внешний вид и поведение на iOS, Android и Windows Phone. Однако реализация класса пользовательского средства визуализации для выполнения настройки простого элемента управления чаще всего доступная ответа. Влияние упростить этот процесс и обычно используется для изменения небольшой стилей. Дополнительные сведения см. в статье [Эффекты](~/xamarin-forms/app-fundamentals/effects/index.md).

## <a name="examining-why-custom-renderers-are-necessary"></a>Анализ причины настраиваемых модулей подготовки, необходимо

Изменение внешнего вида элемента управления Xamarin.Forms, без использования пользовательского модуля подготовки отчетов, состоит из двух этапов, который включает в себя создание пользовательского элемента управления через создание подкласса и затем использование пользовательского элемента управления вместо исходного элемента управления. В следующем примере кода показан пример создания подкласса `Entry` управления:

```csharp
public class MyEntry : Entry
{
  public MyEntry ()
  {
    BackgroundColor = Color.Gray;
  }
}
```

`MyEntry` Управления `Entry` управления where `BackgroundColor` равно серый цвет и могут ссылаться на языке Xaml объявление пространства имен для его расположения и с помощью префикса пространства имен для элемента управления. В следующем примере кода показан способ `MyEntry` пользовательский элемент управления может использоваться `ContentPage`:

```xaml
<ContentPage
    ...
    xmlns:local="clr-namespace:CustomRenderer;assembly=CustomRenderer"
    ...>
    ...
    <local:MyEntry Text="In Shared Code" />
    ...
</ContentPage>
```

`local` Префикс пространства имен может быть любым. Тем не менее `namespace` и `assembly` значения должны соответствовать сведений пользовательского элемента управления. После объявления пространства имен, префикс используется для ссылки на пользовательский элемент управления.

> [!NOTE]
> **Примечание**: определение `xmlns` гораздо проще в PCLs общих проектов. PCL компилируется в сборку, поэтому можно легко определить, какие типы `assembly=CustomRenderer` значение должно быть. При использовании общих проектов, все общие ресурсы (включая XAML) компилируются в каждой из ссылающейся проектов, который означает, что если iOS, Android и Windows Phone проекты имеют свои собственные *имена сборок* невозможно Чтобы записать `xmlns` объявление, потому что значение должно быть разным для каждого приложения. Пользовательские элементы управления в XAML для общих проектов потребуется каждый проект приложения должен настраиваться с тем же именем сборки.

`MyEntry` Пользовательский элемент управления выводятся на каждой платформе с серым фоном, как показано на следующем снимке экрана:

![](introduction-images/screenshots.png "MyEntry пользовательского элемента управления на каждой платформе")

Изменение цвета фона элемента управления на каждой платформе достигнута исключительно через создание подкласса элемента управления. Тем не менее этот способ ограничена в том, что оно позволяет получить как он не позволяет воспользоваться преимуществами усовершенствования конкретную платформу и настройка. По мере необходимости, пользовательские модули подготовки отчетов должен быть реализован.

## <a name="creating-a-custom-renderer-class"></a>Создание класса пользовательского средства отрисовки

Создание класса пользовательского средства отрисовки выполняется следующим образом:

1. Создайте подкласс класса модуля подготовки отчетов, который отображает собственный элемент управления.
1. Переопределите метод, который отображает собственный элемент управления и напишите логику для настройки элемента управления. Часто `OnElementChanged` метод используется для отрисовки элемента управления native, который вызывается при создании соответствующий элемент управления Xamarin.Forms.
1. Добавить `ExportRenderer` класс пользовательское средство отрисовки, чтобы указать, что он будет использоваться для отрисовки элемента управления Xamarin.Forms атрибут. Этот атрибут используется для регистрации пользовательского средства визуализации с помощью Xamarin.Forms.

> [!NOTE]
> **Примечание**: для большинства элементов Xamarin.Forms является необязательным для предоставления пользовательского средства отрисовки в каждом проекте платформы. Если пользовательское средство отрисовки не зарегистрирован, будет использоваться модуль подготовки отчетов по умолчанию для базового класса элемента управления. Однако пользовательские модули подготовки отчетов, необходимы в каждом проекте платформы при подготовке к просмотру [представление](https://developer.xamarin.com/api/type/Xamarin.Forms.View/) или [ViewCell](https://developer.xamarin.com/api/type/Xamarin.Forms.ViewCell/) элемента.

В этой серии будет представлены демонстрации и объяснения этот процесс для различных элементов Xamarin.Forms.

## <a name="troubleshooting"></a>Устранение неполадок

Если пользовательский элемент управления содержится в проект переносимой библиотеки Классов, который добавляется в решение (т. е. не PCL созданные Visual Studio для шаблона проекта приложения Xamarin.Forms Mac или Visual Studio), может возникнуть исключение в операций ввода-вывода при попытке доступа к пользовательского элемента управления. При возникновении этой проблемы может быть разрешена путем создания ссылку на пользовательский элемент управления из `AppDelegate` класса:

```csharp
var temp = new ClassInPCL(); // in AppDelegate, but temp not used anywhere
```

Это заставит компилятор мог распознавать `ClassInPCL` тип по ее устранению. Кроме того `Preserve` можно добавить атрибут `AppDelegate` класса для достижения такого же результата:

```csharp
[assembly: Preserve (typeof (ClassInPCL))]
```

Это создает ссылку на `ClassInPCL` типа, указывающее, что он является обязательным, во время выполнения. Дополнительные сведения см. в разделе [сохранения кода](~/ios/deploy-test/linker.md).

## <a name="summary"></a>Сводка

В этой статье предоставляет общие сведения о пользовательских модулях подготовки отчетов, а также описаны процесс создания пользовательского средства отрисовки. Пользовательские модули подготовки отчетов предоставляют мощный подход для настройки внешнего вида и поведения элементов управления Xamarin.Forms. Они могут использоваться для изменения небольшой стилей или сложных макета конкретную платформу и настройка поведения.


## <a name="related-links"></a>Связанные ссылки

- [Эффекты](~/xamarin-forms/app-fundamentals/effects/index.md)
