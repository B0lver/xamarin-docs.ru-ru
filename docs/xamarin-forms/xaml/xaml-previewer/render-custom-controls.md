---
title: Отображать пользовательские элементы управления в средстве предварительного просмотра XAML
description: В этой статье описывается, как для отображения пользовательских элементов управления в средстве предварительного просмотра XAML.
ms.prod: xamarin
ms.assetid: 4D795372-CB8F-48F4-B63D-845E44B261F7
ms.technology: xamarin-forms
author: maddyleger1
ms.author: maleger
ms.date: 03/27/2019
ms.openlocfilehash: 977c29312e0be8b92f216c224414f9bd03f8562d
ms.sourcegitcommit: 4b402d1c508fa84e4fc3171a6e43b811323948fc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60875981"
---
# <a name="render-custom-controls-in-the-xaml-previewer"></a>Отображать пользовательские элементы управления в средстве предварительного просмотра XAML

_Пользовательские элементы управления иногда не работают должным образом в средстве предварительного просмотра XAML. Следуйте инструкциям в этой статье, чтобы понять ограничения на предварительный просмотр пользовательских элементов управления._

## <a name="basic-preview-mode"></a>Базовый режим предварительного просмотра

Даже если проект еще не создан, средство предварительного просмотра XAML будет отображаться на страницах. Пока выполняется сборка, любой элемент управления, которая зависит от кода покажет его базовый тип Xamarin.Forms. Когда проект будет собран, средство предварительного просмотра XAML попытается отображение пользовательских элементов управления с включенной отрисовкой на время разработки. Если происходит сбой подготовки к просмотру, также будет показано базовый тип Xamarin.Forms.

## <a name="enable-design-time-rendering-for-custom-controls"></a>Включить отрисовку времени разработки для пользовательских элементов управления

Если сделать собственные пользовательские элементы управления, или использовать элементы управления из библиотеки сторонних, средство предварительного просмотра может отображаться их неправильно. Пользовательские элементы управления должны согласиться на проектирование время отрисовки для отображения в средстве предварительного просмотра ли вы написали код элемента управления или он импортирован из библиотеки. С помощью элементов управления, вы создали, добавьте [ `[DesignTimeVisible(true)]` ](xref:System.ComponentModel.DesignTimeVisibleAttribute) класс элемента управления, он будет отображаться в средстве предварительного просмотра:

```csharp
namespace MyProject
{
  [DesignTimeVisible(true)]
  public class MyControl : BaseControl
  {
    // Your control's code here
  }

}
```

Используйте [Монтеманьо ImageCirclePlugin базового класса](https://github.com/jamesmontemagno/ImageCirclePlugin/blob/master/src/ImageCircle/CircleImage.shared.cs) в качестве примера.


## <a name="skiasharp-controls"></a>Элементы управления в SkiaSharp

В настоящее время элементы управления в SkiaSharp, поддерживаются только в том случае, когда для предварительного просмотра в iOS. Они не будут отображаться в Android предварительной версии.

## <a name="troubleshooting"></a>Устранение неполадок

### <a name="check-your-xamarinforms-version"></a>Проверьте версию Xamarin.Forms
Убедитесь, что у вас есть по крайней мере Xamarin.Forms 3.6 установлен. Вы можете обновить вашей версии Xamarin.Forms NuGet.

### <a name="even-with-designtimevisibletrue-my-custom-control-isnt-rendering-properly"></a>Даже с `[DesignTimeVisible(true)]`, Мой пользовательский элемент управления не Подготовка к просмотру правильно.
Пользовательские элементы управления, которые сильно зависят от кода или серверной части данных не всегда работают в средстве предварительного просмотра XAML. Можно попробовать:
* Перемещение элемента управления, поэтому он не инициализировать, если [включен режим конструктора](index.md#detect-design-mode)
* Настройка [данных времени разработки](design-time-data.md) Показать фиктивные данные из серверной части

### <a name="the-xaml-previewer-shows-the-error-custom-controls-arent-rendering-properly"></a>Средство предварительного просмотра XAML отображается ошибка «Пользовательских элементов управления не Подготовка к просмотру правильно»
Попробуйте очистки и перестроения проекта, или закрыть и повторно открыть файл XAML.
