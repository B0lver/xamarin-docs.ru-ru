---
title: Прорисовка пользовательских элементов управления в средстве предварительного просмотра XAML
description: В этой статье описывается, как показать пользовательские элементы управления в средстве предварительного просмотра XAML.
ms.prod: xamarin
ms.assetid: 4D795372-CB8F-48F4-B63D-845E44B261F7
ms.technology: xamarin-forms
author: maddyleger1
ms.author: maleger
ms.date: 03/27/2019
ms.openlocfilehash: 5b87c631574f159230e1dc23285b9087bcc94255
ms.sourcegitcommit: 57f815bf0024b1afe9754c0e28054fc0a53ce302
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/06/2019
ms.locfileid: "70767321"
---
# <a name="render-custom-controls-in-the-xaml-previewer"></a>Прорисовка пользовательских элементов управления в средстве предварительного просмотра XAML

_Иногда пользовательские элементы управления не работают должным образом в средстве предварительного просмотра XAML. Воспользуйтесь инструкциями в этой статье, чтобы ознакомиться с ограничениями по предварительному просмотру пользовательских элементов управления._

## <a name="basic-preview-mode"></a>Базовый режим предварительного просмотра

Даже если проект не был создан, средство предварительного просмотра XAML будет отображать страницы. До тех пор пока не будет выполнена сборка, любой элемент управления, основанный на коде программной части, покажет свой базовый тип Xamarin. Forms. При построении проекта предварительный просмотр XAML попытается показать пользовательские элементы управления с включенной отрисовкой во время разработки. В случае сбоя рендеринга будет показан базовый тип Xamarin. Forms.

## <a name="enable-design-time-rendering-for-custom-controls"></a>Включение отрисовки во время разработки для пользовательских элементов управления

Если вы сделаете собственные пользовательские элементы управления или используете элементы управления из сторонней библиотеки, предварительный просмотр может отобразить их неправильно. Пользовательские элементы управления должны присоединиться к отрисовке во время разработки, чтобы они отображались в средстве просмотра, независимо от того, был ли вы написали элемент управления или импортировали его из библиотеки. С помощью созданных элементов управления добавьте [`[DesignTimeVisible(true)]`](xref:System.ComponentModel.DesignTimeVisibleAttribute) в класс элемента управления, чтобы показать его в средстве предварительного просмотра:

```csharp
namespace MyProject
{
  [DesignTimeVisible(true)]
  public class MyControl : BaseControl
  {
    // Your control's code here
  }

}
```

В качестве примера используйте [базовый класс ИмажеЦирклеплугин'с Джеймс монтеманьо](https://github.com/jamesmontemagno/ImageCirclePlugin/blob/master/src/ImageCircle/CircleImage.shared.cs) .

## <a name="skiasharp-controls"></a>Элементы управления SkiaSharp

В настоящее время элементы управления SkiaSharp поддерживаются только при предварительном просмотре в iOS. Они не будут отображаться в предварительной версии Android.

## <a name="troubleshooting"></a>Устранение неполадок

### <a name="check-your-xamarinforms-version"></a>Проверка версии Xamarin. Forms
Убедитесь, что установлена как минимум Xamarin. Forms 3,6. Версию Xamarin. Forms можно обновить в NuGet.

### <a name="even-with-designtimevisibletrue-my-custom-control-isnt-rendering-properly"></a>Даже с `[DesignTimeVisible(true)]`, мой пользовательский элемент управления не подготовится к просмотру должным образом.
Пользовательские элементы управления, которые сильно полагаются на код программной части или внутренние данные, не всегда работают в средстве предварительного просмотра XAML. Вы можете попробовать:
* Перемещение элемента управления, чтобы он не был инициализирован, если [включен режим конструктора](index.md#detect-design-mode)
* Настройка [данных времени разработки](design-time-data.md) для отображения фиктивных данных из серверной части

### <a name="the-xaml-previewer-shows-the-error-custom-controls-arent-rendering-properly"></a>В средстве предварительного просмотра XAML отображается ошибка "пользовательские элементы управления не отображаются должным образом".
Попробуйте очистить и перестроить проект, а также закрыть и снова открыть XAML файл.
