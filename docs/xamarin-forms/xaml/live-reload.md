---
title: Перезагрузить Live
description: Увидеть изменения в коде XAML в режиме реального времени, не требуя другой компиляции и развертывания.
ms.prod: xamarin
ms.assetid: 4917273d-32f9-401a-a52c-5cfb53a2170d
ms.technology: xamarin-forms
author: pierceboggan
ms.author: piboggan
ms.date: 05/11/2018
ms.openlocfilehash: 15de334500ea25d22657c257a4a4fc6887cc122c
ms.sourcegitcommit: 26033c087f49873243751deded8037d2da701655
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/25/2018
ms.locfileid: "36935432"
---
# <a name="xamarin-live-reload"></a>Перезагрузить динамической Xamarin

![Предварительный просмотр](~/media/shared/preview.png)

Перезагрузить Live Xamarin позволяет **внести изменения в коде XAML и они отразятся реальные данные, не требуя другой компиляции и развертывания**. Любые изменения, внесенные в коде XAML будет выполнить повторное развертывание на сохранение и отражаются на цели развертывания.

Так как приложение компилируется при использовании Live перезагрузить, она работает с всех библиотек и элементы управления сторонних разработчиков. Динамическая works перезагрузки на всех платформах Xamarin.Forms поддерживает, включая Android, iOS и UWP и работает на всех целевых объектов допустимого развертывания, включая симуляторах, эмуляторах и физических устройств.

> [!Video https://www.youtube.com/embed/-5WJZpeXlC8]

Динамическая перезагрузить в данный момент доступна только в Visual Studio 2017 г.

## <a name="requirements"></a>Требования

* [Версии 15,7 2017 г. Visual Studio или более поздней версии](https://www.visualstudio.com/vs/) или более поздней версии с **Разработка мобильных приложений в .NET Framework** рабочей нагрузки.
* [Xamarin.Forms 3.0.0 или более поздней версии](https://www.nuget.org/packages/Xamarin.Forms/) или более поздней версии.

## <a name="getting-started"></a>Начало работы
### <a name="1-install-xamarin-live-reload-from-the-visual-studio-marketplace"></a>1. Установка динамической перезагрузить Xamarin в Visual Studio Marketplace

Перезагрузить Live Xamarin распространяются с помощью Visual Studio Marketplace. Чтобы установить расширение, посетите [Xamarin Live перезагрузить страницу в Visual Studio Marketplace](https://marketplace.visualstudio.com/items?itemName=Xamarin.XamarinLiveReload) веб-сайта и нажмите кнопку **загрузить**.

Откройте .vsix, который загружается и нажмите кнопку **установить**.

![Установщик Visual Studio подтверждения перезагрузить Live Xamarin](images/LiveReloadVSIXInstall.png)

Кроме того, вы можете найти его в **Online** вкладке **расширения и обновления** диалогового окна в Visual Studio.

### <a name="2-configure-your-app-to-use-live-reload"></a>2. Настройка приложения для использования динамической перезагрузки

Добавление Live перезагрузить существующие мобильные приложения может выполняться в три этапа:

1. Убедитесь, все проекты обновляются для использования [Xamarin.Forms 3.0.0 или более поздней версии](https://www.nuget.org/packages/Xamarin.Forms/) или более поздней версии.

2. Добавить **Xamarin.LiveReload** пакет NuGet:

    1. **.NET standard** — установить **Xamarin.LiveReload** NuGet в библиотеку .NET Standard 2.0. Это необходимо установить в проектах платформы. Убедитесь, что **источник пакета** равно **все**.
    
    2. **Общие проекты** — установить **Xamarin.LiveReload** NuGet на всех проектов платформы (например, Android, iOS, UWP, и т. д.). Убедитесь, что **источник пакета** равно **все**.

    [![Добавить Xamarin динамической перезагрузить NuGet с помощью диспетчера пакетов NuGet](images/addlivereloadnuget.w157-sml.png)](images/addlivereloadnuget.w157.png#lightbox)

3. Добавить `LiveReload.Init();` конструктору в `Application` класса, как показано в следующем фрагменте кода:

```csharp
public partial class App : Application
{
    public App ()
    {
        // Initialize Live Reload.
        #if DEBUG
        LiveReload.Init();
        #endif
        
        InitializeComponent();
        MainPage = new MainPage();
    }
}
```

### <a name="3-start-live-reloading"></a>3. Запуск повторной загрузки в режиме реального времени

Скомпилируйте и выполните развертывание приложения. Как только приложение будет развернуто, откройте XAML-файл, внести некоторые изменения и сохраните файл. Изменения повторно развернут на целевом объекте развертывания.

> [!Video https://www.youtube.com/embed/-5WJZpeXlC8]

Динамическая works перезагрузить с изменениями в XAML-файл. Изменения в C# или добавление или удаление пакетов NuGet требуется новое построение и развертывание вступили в силу.

## <a name="frequently-asked-questions"></a>Вопросы и ответы 
### <a name="is-xamarin-live-reload-available-on-visual-studio-for-mac"></a>Используется перезагрузить Live Xamarin в Visual Studio для Mac? 

Начальное предварительный выпуск перезагрузить Live Xamarin доступен только для Visual Studio 2017 г. Поддержка Visual Studio для Mac планируется в будущих выпусках.

### <a name="does-this-work-with-all-libraries-such-as-prism"></a>Это работает со всеми библиотеками, например призмы? 

Так как приложение компилируется, Live перезагрузить работает со всеми библиотеками, например призмы и библиотеки элементов управления сторонних разработчиков, например Telerik, Infragistics, компания Syncfusion, ArcGIS, GrapeCity и других поставщиков управления.

### <a name="what-changes-does-live-reload-redeploy"></a>Какие изменения Live перезагрузить повторно развернуть? 

Динамическая перезагрузить применяется только изменения, внесенные в XAML или CSS. При внесении изменений в файле C# потребуется повторную компиляцию. Поддержка перезагрузки C# планируется в будущих выпусках.

### <a name="what-platforms-are-supported"></a>Какие платформы поддерживаются? 

Динамическая works перезагрузки на любой платформе, поддерживаемых Xamarin.Forms, включая Android, iOS и UWP.

### <a name="does-this-work-on-emulators-simulators-and-physical-devices"></a>Это осуществляется на эмуляторов, симуляторов и физические устройства? 

Да, перезагрузить Live работает со всех целевых объектов допустимого развертывания, включая эмуляторы Android, iOS симуляторов и физические устройства. Развертывание на устройство требуется устройств и компьютеров в той же сети Wi-Fi.

### <a name="does-this-work-with-corporate-networks"></a>Это работает с корпоративной сети?

При отладке в эмуляторе Android или iOS simulator Live перезагрузить используется имя localhost для обмена данными. Если вы хотите развернуть на устройство, устройство и компьютер должен находиться на той же сети Wi-Fi. В сценариях, где это невозможно, вы можете [, настройте сервер Live перезагрузить](#live-reload-server), который позволит вам для перезагрузки Live, независимо от того, параметры подключения к сети.

### <a name="does-it-require-debugging-the-app"></a>Требуется ли его для отладки приложения? 

Нет. На самом деле даже запустить все поддерживаемые приложение предназначено (Android, iOS и UWP) для любого количества устройствах или эмуляторах или эмуляторах и просматривать их одновременного обновления. 

## <a name="limitations"></a>Ограничения

* Поддерживается только перезагрузке XAML.
* Состояние пользовательского интерфейса может не поддерживаться между повторном развертывании, если используется MVVM.

## <a name="known-issues"></a>Известные проблемы

* Поддерживается только в Visual Studio.
* Связывание должно быть присвоено **ссылка не** или **только ссылку Framework SDK** 
* Повторная загрузка ресурсы на уровне приложения (т. е. **App.xaml** или Общие словари ресурсов), сброс навигации приложения. Эта проблема будет устранена в следующей версии предварительного просмотра.
* Редактирование XAML во время отладки UWP могут вызвать сбой среды выполнения. Решение: Используйте **Запуск без отладки (Ctrl + F5)** вместо **начать отладку (F5)**.

## <a name="troubleshooting"></a>Устранение неполадок

### <a name="error-codes"></a>Коды ошибок

* **XLR001**: *текущий проект ссылается на версию пакета NuGet «Xamarin.LiveReload» [версия], но расширения Xamarin Live перезагрузить требуется версия [версия].*

  Чтобы разрешить быструю итерации и развитие возможность быстрой перезагрузки, пакета nuget и расширение Visual Studio должны точно совпадать. Обновите пакет nuget до той же версии установленного расширения.

* **XLR002**: *Live перезагрузить требуется по крайней мере свойство «MqttHostname» при построении из командной строки. Можно также задать «EnableLiveReload» значение «false», чтобы отключить эту функцию.*

  Свойства, необходимые перезагрузить Live будут недоступны при построении из командной строки (или в непрерывной интеграции) и поэтому должен быть предоставлен явно. 

* **XLR003**: *пакет nuget Live перезагрузить требует установки расширения Xamarin Live перезагрузить Visual Studio.*

  Попытка построить проект, который ссылается пакет nuget Live перезагрузки, но не устанавливается расширение Visual.  

* *Возникло исключение при загрузке сборки: System.IO.FileNotFoundException: не удалось загрузить сборку "Xamarin.Live.Reload, версия = 0.3.27.0, язык и региональные параметры = neutral, PublicKeyToken =".*

  Следует использовать проект ведущего `PackageReference` вместо `packages.config`

### <a name="app-doesnt-connect"></a>Приложение не подключаться

При построении приложения сведения из **Сервис > Параметры > Xamarin > Live перезагрузить** (имя, порт и шифрование ключей узла) встраиваются в приложение, так что при `LiveReload.Init()` выполняется связывание или конфигурации — необходимые для успешного соединения.

Кроме обычных проблем сети (брандмауэра, устройстве в другой сети) основной, что приложение не может успешно подключиться интегрированной среды разработки, так как его конфигурации отличается от той, в Visual Studio. Это может произойти, если:

* Приложения был скомпилирован на другом компьютере.
* Приложение было компиляции и развертывания в другом сеансе Visual Studio, и **автоматическое создание ключей шифрования** — проверки (по умолчанию) **Сервис > Параметры > Xamarin > Live перезагрузить**.
* Параметры Visual Studio были изменены (т. е. имя узла, порта или шифрования ключей), но приложение не было построение и развертывание еще раз.

Эти варианты решаются путем создания и повторно развертывать приложения.

### <a name="uninstalling-preview-1"></a>Удаление предварительной версии 1

Если имеется более старые предварительного просмотра и возникают проблемы, удаляя его, выполните следующие действия.

1. Удалите папку **\Microsoft Visual Studio\Preview\Enterprise\Common7\IDE\Extensions\Xamarin\LiveReload C:\Program Files (x86)** (Примечание: замените установленного выпуска в «Фейерверк» и «Предварительный просмотр» с «2017» Если вы установлен для stable VS)
2. Откройте **Командная строка разработчика** для этого Visual Studio и выполните `devenv /updateconfiguration`. 

## <a name="tips--tricks"></a>Советы и рекомендации

* До тех пор, пока не изменяйте параметры перезагрузки Live (включая ключи шифрования, например, если вы отключите **автоматическое создание ключей шифрования**) и сборки с помощью одного компьютера, не требуется для построения и развертывания приложения после первоначального развертывание, пока вы не измените код или зависимости. Можно просто запустить снова ранее развернутое приложение, и он будет подключаться к последнему узел, используемый.

* Нет ограничений на количество устройств, можно подключиться к тому же сеансу Visual Studio. Можно развернуть и запустить приложение в столько устройства или симуляторы при необходимости для просмотра динамической перезагрузка рабочего на их все одновременно.

* Динамическая перезагрузить перезагрузит только части интерфейса пользователя приложения, но *не* повторного создания веб-страниц, ни его замены модели представления (или контекст привязки). Это означает *всей* состояния приложения всегда сохраняются перезагрузках, включая подставляемого зависимостей.

## <a name="live-reload-server"></a>Перезагрузить сервер Live

В сценариях которых требуется подключение из запущенного приложения на компьютер (указанный с помощью `localhost` или `127.0.0.1` в **Сервис > Параметры > Xamarin > Live перезагрузить**) невозможно (т. е. брандмауэры, различные сети), можно настроить удаленный сервер вместо этого интегрированной среды разработки и приложение будет подключить к.

Динамическая перезагрузить использует стандартную [протокола MQTT](http://mqtt.org/) для обмена сообщениями и поэтому может взаимодействовать с [серверы сторонних производителей](https://github.com/mqtt/mqtt.github.io/wiki/servers). Имеются даже [открытых серверов](https://github.com/mqtt/mqtt.github.io/wiki/public_brokers) (также известный как *брокеров*), можно использовать. Динамическая перезагрузить протестирован с `broker.hivemq.com` и `iot.eclipse.org` имена узлов, а также службы, предоставляемые [www.cloudmqtt.com](https://www.cloudmqtt.com) и [www.cloudamqp.com](https://www.cloudamqp.com). Можно также развернуть собственный MQTT сервер в облаке, таких как [HiveMQ в Azure](https://www.hivemq.com/blog/hivemq-on-windows-azure-mqtt-microsoft-cloud).

Можно настроить любой порт, но это обычно используется порт по умолчанию 1883 удаленных серверов. Динамическая перезагрузить сообщения используют надежный конца в конец симметричного шифрования AES, поэтому можно безопасно для подключения к удаленным серверам. По умолчанию на каждый сеанс Visual Studio создаются повторно ключ шифрования и вектор инициализации (IV).

Возможно, самым простым способом является установка [mosquitto](https://mosquitto.org) сервера в пустой Ubuntu ВМ в Azure:

1. Создание новой виртуальной Машины сервера Ubuntu на портале Azure
2. Добавить новое правило для входящего порта для 1883 (порт по умолчанию MQTT) на вкладке «сети»
3. Откройте [оболочки облака](https://docs.microsoft.com/azure/cloud-shell/overview) (bash режим)
4. Введите `ssh [USERNAME]@[PUBLIC_IP]` с помощью имени пользователя, выбранного в 1) и общедоступный IP-адрес, показанный на странице Общие сведения о виртуальных Машин
5. Запустите `sudo apt-get install mosquitto`, ввода пароля, выбранное на 1)

Теперь можно использовать для подключения к серверу MQTT этому IP-адрес.
