---
ms.assetid: 814857C5-D54E-469F-97ED-EE1CAA0156BB
title: Руководство по переносу классического приложения
description: Простое объяснение того, как для отделения существующих форм Windows или приложения WPF, создание кросс платформенных приложений для запуска на macOS, iOS, Android, а также UWP и Windows 10.
ms.technology: xamarin-crossplatform
author: asb3993
ms.author: amburns
ms.date: 04/26/2017
ms.openlocfilehash: 35ffb9c92b5d3faf48f3e76a6702c2518ca80538
ms.sourcegitcommit: 4b0582a0f06598f3ff8ad5b817946459fed3c42a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/03/2018
---
# <a name="desktop-app-porting-guidance"></a>Руководство по переносу классического приложения

Большая часть кода приложения могут быть сгруппированы в одну из следующих областей:

* Код пользовательского интерфейса (например) окна и кнопки)
* сторонние элементы управления для разработчиков (например) диаграммы)
* Бизнес-логики (например) правила проверки)
* Локального хранилища данных и доступа
* Веб-службы и удаленный доступ к данным

Для Windows Forms и WPF приложений, написанных на C# (или Visual Basic.NET) возрасти бизнес-логики, доступ к локальным данным и веб-службы, код может совместно использоваться платформы.

## <a name="net-portability-analyzer"></a>Анализатор переносимости .NET

Поддержка Visual Studio 2015 и 2017 г. [анализатор переносимости .NET](https://docs.microsoft.com/en-us/dotnet/articles/standard/portability-analyzer) ([загрузки для Windows](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer)) которого можно проверить существующие приложения и сообщит о том, какой объем кода могут быть перенесены «как есть» на других платформах . Дополнительные сведения об этом можно узнать из этого [видео Channel 9](https://channel9.msdn.com/Blogs/Seth-Juarez/A-Brief-Look-at-the-NET-Portability-Analyzer).

Имеется также можно загрузить средство командной строки с [анализатор переносимости на GitHub](https://github.com/Microsoft/dotnet-apiport) и используются для обеспечения такие же отчеты.

## <a name="x-of-my-code-is-portable-what-next"></a>«x является переносимым % кода. Что дальше?»

Надеемся, у показывает большой анализатор является переносимым часть кода, но определенно будет иметь некоторые части каждого приложения, _нельзя_ переместить на другие платформы.

Различные фрагменты кода, вероятно, попадает в одну из этих контейнеров, более подробно ниже:

* Повторно готовый к применению переносимого кода
* Код, который требует изменения
* Код, который не переносимой и требует повторного записи

### <a name="re-useable-portable-code"></a>Повторно готовый к применению переносимого кода

Код .NET, написанные для API-интерфейса для всех платформ могут быть взяты кросс платформенных без изменений. В идеальном случае вы сможете переместить этот код в переносимой библиотеки классов, общей библиотеки или стандартной библиотеки .NET, а затем в существующие приложения.

Затем этой общей библиотеки можно добавить в проекты приложений для других платформ (например, Android, iOS, macOS).

### <a name="code-that-requires-changes"></a>Код, который требует изменения

Некоторые интерфейсы API .NET, не могут быть доступны на всех платформах. Если в коде эти API-интерфейсы, необходимо повторно записать эти разделы, чтобы использовать API-интерфейсы кросс платформенных.

Примеры включают использование API отражения, которые доступны в .NET 4.6, но не доступны на для всех платформ.

После повторного написания кода, с помощью переносимых API, можно для этого кода в общей библиотеке пакета и проверить его в существующие приложения.

### <a name="code-that-isnt-portable-and-requires-a-re-write"></a>Код, который не переносимой и требует повторного записи

Примеры кода, который будет кросс платформенных:

- **Пользовательский интерфейс** — экраны Windows Forms и WPF не может использоваться в проектах на Android или iOS, например. Пользовательского интерфейса потребуется переписать, с помощью этого [сравнения элементов управления](~/cross-platform/desktop/controls/index.md) как ссылка.

- **Специфический для платформы хранения** -код, основанный на технологии специфический для платформы (например, локальный SQL Server, экспресс-выпуск базы данных). Необходимо будет повторно записи этого с помощью кросс платформенных альтернатива (например, SQLite для компонента database engine).
Некоторые операции файловой системы также может потребоваться изменить, так как UWP имеет различную API-интерфейса для Android и iOS (например) Некоторые файловые системы чувствительны к регистру и другие не).

- **компоненты сторонних производителей** — проверяет наличие сторонних производителей компонентов в приложениях на других платформах. Другие, например невизуальных пакеты NuGet, становятся доступны, но другим пользователям (особенно visual элементы управления, например проигрыватели диаграммы или носителя)

## <a name="tips-for-making-code-portable"></a>Советы для создания переносимого кода

- **Внедрение зависимостей** — определить разные реализации для каждой платформы и

- **Многоуровневого подхода** — ли MVVM, MVC, MVP или другими сообщениями, которая помогает отделить переносимого кода от кода под конкретную платформу.

- **Обмен сообщениями** — передачи сообщений можно использовать в коде отменяется связываете взаимодействий между разными частями приложения.
