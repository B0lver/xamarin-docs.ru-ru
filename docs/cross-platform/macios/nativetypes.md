---
title: Собственные типы для операций ввода-вывода и macOS
description: В этом документе описывается сопоставление типов .NET API единой Xamarin для 32-разрядных и 64-разрядных собственных типов, при необходимости, в зависимости от целевой архитектуры компиляции.
ms.prod: xamarin
ms.assetid: B5237770-0FC3-4B01-9E22-766B35C9A952
author: asb3993
ms.author: amburns
ms.date: 01/25/2016
ms.openlocfilehash: fc2b91a9265fcf09e4f58d5de27a1fdef9350b2d
ms.sourcegitcommit: ea1dc12a3c2d7322f234997daacbfdb6ad542507
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/05/2018
ms.locfileid: "34781108"
---
# <a name="native-types-for-ios-and-macos"></a>Собственные типы для операций ввода-вывода и macOS

MAC и iOS интерфейсы API используют типы данных конкретной архитектуры, которые всегда имеют размер 32 разряда на 32-разрядных платформах и в 64 разряда на 64-разрядных платформах.

Например, цель-C сопоставляет `NSInteger` тип данных, который `int32_t` в 32-разрядных системах и с `int64_t` на 64-разрядных системах.

Для сопоставления это поведение на нашем единый API вместо прежнего использования `int` (в .NET определяется как всегда, `System.Int32`) в новый тип данных: `System.nint`. Вы можно считать «n» значение «native», таким образом, целочисленное значение собственного типа платформы.

С этими новыми типами данных один и тот же исходный код компилируется для 32-разрядных и 64-разрядных архитектур, в зависимости от вашей флаги компиляции.

## <a name="new-data-types"></a>Новые типы данных

В следующей таблице показаны изменения в наших типов данных, чтобы он соответствовал этой новой 32 или 64-разрядные системы:

|Собственный тип|32-разрядное резервного типа|64-разрядных резервного типа|
|--- |--- |--- |
|`System.nint`|`System.Int32` (`int`)|`System.Int64` (`long`)|
|`System.nuint`|`System.UInt32` (`uint`)|`System.UInt64` (`ulong`)|
|`System.nfloat`|`System.Single` (`float`)|`System.Double` (`double`)|

Мы выбрали эти имена, чтобы код C# для поиска более или менее точно так же, он будет выглядеть сегодня.

### <a name="implicit-and-explicit-conversions"></a>Явные и неявные преобразования

Новые типы данных в структуре предназначено для предоставления одного исходного файла C# естественным образом использовать 32- или 64 бит хранилища, в зависимости от платформы узла и параметры компиляции.

Это потребовало нам спроектировать набор явные и неявные преобразования в типы данных от платформы и из типов данных .NET целочисленные и с плавающей точкой.

Операторы неявного преобразования предоставляются, когда отсутствует возможность потери данных (32-разрядная версия значения, хранимого в пространстве с 64-разрядная версия).

Операторы явного преобразования предоставляются при возможных потерь данных (64-разрядное значение хранится на место хранения 32 или потенциально 32).

 `int`, `uint` и `float` все неявно преобразовываться в `nint`, `nuint` и `nfloat` как 32 бита будет всегда помещаются в 32- или 64 бита.

 `nint`, `nuint` и `nfloat` , могут быть неявно преобразованы `long`, `ulong` и `double` как 32- или 64-разрядных значений всегда помещается в хранилище 64-разрядная версия.

Необходимо использовать явное преобразование из `nint`, `nuint` и `nfloat` в `int`, `uint` и `float` с момента собственных типов может содержать 64 бита хранилища.

Необходимо использовать явное преобразование из `long`, `ulong` и `double` в `nint`, `nuint` и `nfloat` с момента собственных типов может быть только может содержать 32 бита хранилища.

## <a name="coregraphics-types"></a>Типы CoreGraphics

Точка, размер и прямоугольник типы данных, которые используются с CoreGraphics использовать 32- или 64 бита в зависимости от устройства, на котором работают на.  Первоначально привязан iOS и Mac API-интерфейсов можно использовать существующие структуры данных, произошедшие в соответствии с размерами платформы узла (типы данных в `System.Drawing`).

При перемещении **единой**, вам потребуется заменить вхождения `System.Drawing` с их `CoreGraphics` аналоги, как показано в следующей таблице:

|Старый тип в System.Drawing|Новый CoreGraphics тип данных|Описание:|
|--- |--- |--- |
|`RectangleF`|`CGRect`|Содержит число с плавающей точки сведения прямоугольника.|
|`SizeF`|`CGSize`|Содержит число с плавающей точки сведения о размере (ширину, высоту)|
|`PointF`|`CGPoint`|Содержит тип с плавающей запятой, точки сведения (X, Y)|

Старые данные типов, используемых значений с плавающей запятой для сохранения элементов структуры данных, а новый одна использует `System.nfloat`.

## <a name="related-links"></a>Связанные ссылки

- [Работа с собственными типами в кроссплатформенных приложениях](~/cross-platform/macios/native-types-cross-platform.md)
- [Классический vs отличия единой API](https://developer.xamarin.com/releases/ios/api_changes/classic-vs-unified-8.6.0/)
