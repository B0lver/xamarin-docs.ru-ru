---
title: Собственные типы для iOS и macOS
description: В этом документе описывается сопоставление типов .NET в 32-разрядных и 64-разрядные собственные типы, при необходимости Xamarin единый API в зависимости от целевой архитектуры компиляции.
ms.prod: xamarin
ms.assetid: B5237770-0FC3-4B01-9E22-766B35C9A952
author: asb3993
ms.author: amburns
ms.date: 01/25/2016
ms.openlocfilehash: fc2b91a9265fcf09e4f58d5de27a1fdef9350b2d
ms.sourcegitcommit: 4b402d1c508fa84e4fc3171a6e43b811323948fc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61199641"
---
# <a name="native-types-for-ios-and-macos"></a>Собственные типы для iOS и macOS

MAC и iOS API-интерфейсов используйте типы данных для конкретной архитектуры, всегда 32 разряда на 32-разрядных платформах и в 64 разряда на 64-разрядных платформах.

Например, сопоставляет Objective-C `NSInteger` тип данных для `int32_t` в 32-разрядных системах, позволяющая `int64_t` на 64-разрядных системах.

В соответствии с это поведение, для наших unified API вместо прежнего использования `int` (в .NET определяется как всегда должны быть `System.Int32`) в новый тип данных: `System.nint`. Можно считать из «n» значение «native», поэтому собственного целочисленный тип платформы.

С помощью этих новых типов данных один и тот же исходный код компилируется для 32-разрядных и 64-разрядных архитектур, в зависимости от вашей флаги компиляции.

## <a name="new-data-types"></a>Новые типы данных

В следующей таблице показаны изменения в нашей типов данных, чтобы он соответствовал новом мире 32/64-разрядные:

|Собственный тип|32-разрядных резервный тип|64-разрядных резервный тип|
|--- |--- |--- |
|`System.nint`|`System.Int32` (`int`)|`System.Int64` (`long`)|
|`System.nuint`|`System.UInt32` (`uint`)|`System.UInt64` (`ulong`)|
|`System.nfloat`|`System.Single` (`float`)|`System.Double` (`double`)|

Мы выбрали эти имена, разрешенные вашей C# код, чтобы найти более или менее точно так же, оно выглядело бы уже сегодня.

### <a name="implicit-and-explicit-conversions"></a>Явные и неявные преобразования

Структура новых типов данных предназначен для одного C# естественным образом использовать 32- или 64 разрядных хранилища в зависимости от платформы узла и параметры компиляции исходного файла.

Всю необходимую нам разработать набор явные и неявные преобразования в и из типов данных платформы для типов данных .NET целочисленные и с плавающей точкой.

Операторы неявного преобразования предоставляются в том случае, если отсутствует возможность потери данных (32-разрядная версия значения, сохраняемого в пространстве с 64-разрядная версия).

Операторы явного преобразования предоставляются в том случае, если есть вероятность потери данных (64-разрядное значение хранится в расположении хранилища 32 или потенциально 32).

 `int`, `uint` и `float` все могут быть неявно преобразованы `nint`, `nuint` и `nfloat` 32 бита всегда будет заполнен 32 или 64-разрядный.

 `nint`, `nuint` и `nfloat` все могут быть неявно преобразованы `long`, `ulong` и `double` как 32- или 64-разрядных значений всегда помещается в хранилище 64-разрядная версия.

Необходимо использовать явные преобразования `nint`, `nuint` и `nfloat` в `int`, `uint` и `float` так, как собственные типы могут содержать 64 бита хранилища.

Необходимо использовать явные преобразования `long`, `ulong` и `double` в `nint`, `nuint` и `nfloat` так, как собственных типов может быть только может содержать 32 бита структуры хранилища.

## <a name="coregraphics-types"></a>Типы CoreGraphics

Точки и размер прямоугольника типы данных, которые используются с CoreGraphics используют 32- или 64 бит в зависимости от устройства, на котором они выполняются.  Когда мы изначально привязанный iOS и Mac API-интерфейсы мы использовали существующих структур данных, которые произошли в соответствии с размерами платформы узла (типы данных в `System.Drawing`).

При переходе на **единой**, вам потребуется заменить экземпляры `System.Drawing` с их `CoreGraphics` аналоги, как показано в следующей таблице:

|Старый тип в System.Drawing|Новый CoreGraphics тип данных|Описание|
|--- |--- |--- |
|`RectangleF`|`CGRect`|Сведения о прямоугольник точке содержит с плавающей запятой.|
|`SizeF`|`CGSize`|Содержит число с плавающей точки сведений о размере (ширина и высота)|
|`PointF`|`CGPoint`|Содержит с плавающей запятой, (X, Y) сведения о точке|

Старые значения с плавающей запятой данных типы, используемые для хранения элементов структур данных, хотя новый одна использует `System.nfloat`.

## <a name="related-links"></a>Связанные ссылки

- [Работа с собственными типами в кроссплатформенных приложениях](~/cross-platform/macios/native-types-cross-platform.md)
- [Классический и отличия Unified API](https://developer.xamarin.com/releases/ios/api_changes/classic-vs-unified-8.6.0/)
