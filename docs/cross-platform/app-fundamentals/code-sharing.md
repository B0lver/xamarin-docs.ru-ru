---
title: Параметры совместного использования кода
description: 'В этом документе сравнивается совместное использование кода между кросс платформенные проекты различных методов: общие проекты, переносимые библиотеки классов и .NET Standard, включая преимущества и недостатки каждого из них.'
ms.prod: xamarin
ms.assetid: B73675D2-09A3-14C1-E41E-20352B819B53
ms.technology: xamarin-cross-platform
author: asb3993
ms.author: amburns
ms.date: 03/23/2017
ms.openlocfilehash: 7531a8a21b6895de6113f5edd85d09a5e150877e
ms.sourcegitcommit: 945df041e2180cb20af08b83cc703ecd1aedc6b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/04/2018
---
# <a name="sharing-code-options"></a>Параметры совместного использования кода

_В этом документе сравнивается совместное использование кода между кросс платформенные проекты различных методов: общие проекты, переносимые библиотеки классов и .NET Standard, включая преимущества и недостатки каждого из них._

Существует три альтернативные методы совместное использование кода между приложениями на разных платформах.

-   [**Общие проекты** ](#Shared_Projects) — используйте тип проекта общих ресурсов для организации исходного кода и используйте директивы компилятора #if как обязательные для управления требованиями к конкретной платформы.
-   [**Переносимые библиотеки классов** ](#Portable_Class_Libraries) — Создание переносимой библиотеки классов (PCL) для различных версий платформы, вы хотите поддерживать и использовать интерфейсы для предоставления функциональных возможностей конкретную платформу.
-   [**Стандартные библиотеки .NET** ](#Net_Standard) — проекты .NET Standard действуют подобно PCLs, использующее интерфейсы для добавления функциональных возможностей, зависящих от платформы.

Стратегии совместного использования кода предназначена для поддержки архитектуры, показано на этой диаграмме, где можно использовать одну базу кода для нескольких платформ.

 ![](code-sharing-images/conceptualarchitecture.png "Архитектура приложения общего кода")

В данной статье сравниваются три метода, чтобы выбрать тип необходимого проекта для ваших приложений.

<a name="Shared_Projects" />

## <a name="shared-projects"></a>Общие проекты

Самый простой способ совместного использования файлов кода является использование [общий проект](~/cross-platform/app-fundamentals/shared-projects.md).

На этом снимке экрана показан файл решения, содержащий три проекта приложения (для Android, iOS и Windows Phone), с **Shared** проект, содержащий общие исходные файлы C# кода:

 ![](code-sharing-images/sharedsolution.png "Общий проект решения")

Концептуальная архитектура показана на следующей схеме, где каждый проект содержит файлы общего источника:

 ![](code-sharing-images/sharedassetproject.png "Общие схемы проекта")


### <a name="example"></a>Пример

Межплатформенные приложения, которое поддерживает iOS, Android и Windows Phone потребуется проект приложения для каждой платформы. Общий код живет в общий проект.

Пример решения будут содержаться следующие папки и проекты (имена проектов были выбраны для выразительности, проекты, не должны удовлетворять этим правилам именования).

-   **Общий** — общий проект, содержащий код, общие для всех проектов.
-   **AppAndroid** — Xamarin.Android проекта приложения.
-   **AppiOS** — Xamarin.iOS проекта приложения.
-   **AppWinPhone** — проект приложения Windows Phone.


В этом случае проекты три приложения совместно используют того же исходного кода (C# файлы в общем). Любые изменения общего кода будут общими для всех трех проектов.


### <a name="benefits"></a>Преимущества

-  Позволяет совместно использовать код в нескольких проектах.
-  Общий код можно разветвить зависимости от платформы, с помощью директивы компилятора (например) с помощью `#if __ANDROID__` , как описано в [построение межплатформенных приложений платформы](~/cross-platform/app-fundamentals/building-cross-platform-applications/index.md) документа).
-  Проекты приложений могут содержать ссылки от платформы, которые могут использовать общий код (например, с помощью `Community.CsharpSqlite.WP7` в образце Tasky для Windows Phone).



### <a name="disadvantages"></a>Недостатки

-  В отличие от большинства других типов проектов в общий проект имеет сборка не «вывод». Во время компиляции файлы считаются частью проекта, содержащего ссылку и скомпилированные в этой сборке. Если вы хотите совместно использовать код как сборку затем переносимой библиотеки классов или .NET Standard являются лучшим решением.
-  Рефакторинг, которые влияют на код внутри директивы компилятора «неактивные» не будет обновлять код.


 <a name="Shared_Remarks" />

### <a name="remarks"></a>Примечания

Хорошим решением для разработчиков приложений, написания кода, который предназначен только для обмена данными в приложении (и не распространения среди других разработчиков).

 <a name="Portable_Class_Libraries" />


## <a name="portable-class-libraries"></a>Переносимые библиотеки классов


Переносимые библиотеки классов, [здесь подробно обсуждаются в](~/cross-platform/app-fundamentals/pcl.md).

 ![](code-sharing-images/portableclasslibrary.png "Схема библиотеки переносимых классов")


### <a name="benefits"></a>Преимущества

-  Позволяет совместно использовать код в нескольких проектах.
-  Операции рефакторинга всегда обновить все затрагиваемые ссылки.


### <a name="disadvantages"></a>Недостатки

-  Невозможно использовать директивы компилятора.
-  Используется только подмножество .NET framework можно использовать, определяется выбранный профиль (в разделе [введение в PCL](~/cross-platform/app-fundamentals/pcl.md) Дополнительные сведения).


### <a name="remarks"></a>Примечания

Хорошее решение, если вы планируете совместно использовать результирующую сборку с другими разработчиками.



<a name="Net_Standard" />

## <a name="net-standard-libraries"></a>Стандартные библиотеки .NET

.NET standard — [здесь подробно обсуждаются в](~/cross-platform/app-fundamentals/net-standard.md).

![](code-sharing-images/netstandard.png "Схема .NET standard")

### <a name="benefits"></a>Преимущества

-  Позволяет совместно использовать код в нескольких проектах.
-  Операции рефакторинга всегда обновить все затрагиваемые ссылки.
-  Чем PCL профили доступно больше контактной зоны служб .NET библиотеке базовых классов (BCL).

### <a name="disadvantages"></a>Недостатки

 -  Невозможно использовать директивы компилятора.

### <a name="remarks"></a>Примечания

.NET standard аналогичен переносимую библиотеку классов, но с упрощенной моделью для поддержки платформы и большего количества классов из библиотеки BCL.



## <a name="summary"></a>Сводка

Выбор стратегии совместного использования кода влияют на платформах, который вы используете. Выберите метод, который лучше всего подходит для вашего проекта.

PCL или .NET Standard можно выбрать для построения общий код библиотеки (особенно публикации в NuGet). Общие проекты хорошо подходят для разработчики приложений, которые планируется использовать в своих приложениях между platforma множество plaform конкретных функциональных возможностей.


## <a name="related-links"></a>Связанные ссылки

- [Построение межплатформенных приложений для платформы (основного документа)](~/cross-platform/app-fundamentals/building-cross-platform-applications/index.md)
- [Переносимые библиотеки классов](~/cross-platform/app-fundamentals/pcl.md)
- [Общие проекты](~/cross-platform/app-fundamentals/shared-projects.md)
- [.NET Standard](~/cross-platform/app-fundamentals/net-standard.md)
- [Практический пример: Tasky](~/cross-platform/app-fundamentals/building-cross-platform-applications/case-study-tasky.md)
- [Образец tasky (github)](https://github.com/xamarin/mobile-samples/tree/master/Tasky)
- [Tasky образца при помощи PCL (github)](https://github.com/xamarin/mobile-samples/tree/master/TaskyPortable)
