---
title: Совместное использование Общие сведения о коде
description: 'В этом документе сравнивается различных методов совместное использование кода между проектами кросс платформенных: общие проекты переносимых библиотек классов и .NET Standard, включая преимущества и недостатки каждого из них.'
ms.prod: xamarin
ms.assetid: B73675D2-09A3-14C1-E41E-20352B819B53
author: conceptdev
ms.author: crdun
ms.date: 07/18/2018
ms.openlocfilehash: 82a73619e4c0507e8857cc91d88ababa870013de
ms.sourcegitcommit: 46bb04016d3c35d91ff434b38474e0cb8197961b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/26/2018
ms.locfileid: "39270476"
---
# <a name="sharing-code-overview"></a>Совместное использование Общие сведения о коде

_В этом документе сравнивается различных методов совместное использование кода между проектами кросс платформенных: .NET Standard, проектах общих и переносимых библиотек классов, включая преимущества и недостатки каждого из них._

Для совместного использования кода между кросс платформенных приложений тремя способами:

- [**Стандартные библиотеки .NET** ](#Net_Standard) — проектов .NET Standard, можно реализовать код можно было использовать на различных платформах и также может быть большое количество API-интерфейсы .NET (в зависимости от версии). .NET standard 1.0 – 1.6 реализовать более наборов API-интерфейсы, .NET Standard 2.0 предоставляет лучшие покрытие.
- [**Общие проекты** ](#Shared_Projects) — использовать общий проект средства для организации исходного кода и использовать `#if` директивы компилятора, когда возникает необходимость управлять требованиями к конкретной платформы.
- [**Переносимые библиотеки классов** ](#Portable_Class_Libraries) (устаревшая версия) — переносимых библиотек классов (PCL) можно нескольких платформ с общую область API и использовать интерфейсы для предоставления функциональных возможностей платформы. PCL являются устаревшими в последних версиях Visual Studio &ndash; вместо этого используйте .NET Standard.

Стратегии совместного использования кода должен поддерживать архитектуру, описанную в этой схеме, где можно использовать единую базу кода на нескольких платформах.

 ![Общие архитектуры приложения кода](code-sharing-images/conceptualarchitecture.png "общей архитектуры приложения кода")

В этой статье сравниваются методы, доступные для помощи в выборе типа правой проекта для ваших приложений.

<a name="Net_Standard" />

## <a name="net-standard-libraries"></a>Стандартные библиотеки .NET

[.NET standard](~/cross-platform/app-fundamentals/net-standard.md) библиотеки предоставляют хорошо определенного набора библиотек базовых классов, которые можно указывать в разных типах проектов, включая кросс платформенные проекты Xamarin.Android и Xamarin.iOS. .NET standard 2.0 рекомендуется обеспечить максимальную совместимость с существующим кодом .NET Framework.

![.NET standard схеме](code-sharing-images/netstandard.png "схеме .NET Standard")

### <a name="benefits"></a>Преимущества

- Позволяет совместно использовать код в нескольких проектах.
- Операции рефакторинга всегда обновления всех затронутых ссылок.
- Большую контактную зону библиотеки классов .NET Base (BCL) доступен, чем профили PCL. В частности .NET Standard 2.0 имеет почти же поверхность API как .NET Framework и рекомендуется для новых приложений и переноса существующих PCL.

### <a name="disadvantages"></a>Недостатки

- Невозможно использовать директивы компилятора, например `#if __IOS__`.

### <a name="remarks"></a>Примечания

.NET standard — [аналогичную PCL](https://docs.microsoft.com/dotnet/standard/net-standard#comparison-to-portable-class-libraries), но более простую модель для поддержки платформы и большее количество классов из библиотеки базовых Классов.

<a name="Shared_Projects" />

## <a name="shared-projects"></a>Общие проекты

[Общие проекты](~/cross-platform/app-fundamentals/shared-projects.md) содержат файлы кода и средств, включенных в любом проекте, который ссылается на них. Выходные данные компиляции сами по себе не создают проекты общего ресурса.

На этом снимке экрана показан файл решения, содержит три проекта приложения (для Android, iOS и Windows) с **Shared** проект, содержащий общих исходных файлов C# кода:

![Общий проект решение](code-sharing-images/sharedsolution.png "общего проекта решения")

Концептуальная архитектура показана на следующей схеме, где каждый проект содержит файлы общего источника:

![Схема проекта Shared](code-sharing-images/sharedassetproject.png "схема общего проекта")

### <a name="example"></a>Пример

Кроссплатформенного приложения, который поддерживает iOS, Android и Windows требуется проект приложения для каждой платформы. Общий код находится в общий проект.

Пример решения будет содержать следующие папки и проектов (имена проектов были выбраны для выразительности, могут не следовать этим правилам именования проектов):

- **Общий** — общий проект, содержащий код, общими для всех проектов.
- **AppAndroid** — проект приложения Xamarin.Android.
- **AppiOS** — проект приложения Xamarin.iOS.
- **AppWindows** — проект приложения Windows.

Таким образом проектов три приложения совместное использование того же исходного кода (C# файлы в общем). Любые изменения в общий код будет общей для всех трех проектов.

### <a name="benefits"></a>Преимущества

- Позволяет совместно использовать код в нескольких проектах.
- Общий код могут быть разветвлены зависимости от платформы, с помощью директивы компилятора (например) с помощью `#if __ANDROID__` , как описано в [Создание межплатформенных приложений платформы](~/cross-platform/app-fundamentals/building-cross-platform-applications/index.md) документа).
- Проекты приложений может включать ссылки на платформы, которые могут использовать общий код (например, используя `Community.CsharpSqlite.WP7` в образце Tasky для Windows Phone).

### <a name="disadvantages"></a>Недостатки

- Операции рефакторинга, которые влияют на код внутри директив «inactive» компилятор не будет обновлять код внутри этих директив.
- В отличие от большинства других типов проектов в общий проект имеет сборка не «вывод». Во время компиляции файлы считаются частью ссылающийся проект и скомпилированные в этой сборке. Если вы хотите поделиться своим кодом, как сборка затем .NET Standard или переносимых библиотек классов являются более удачное решение.

<a name="Shared_Remarks" />

### <a name="remarks"></a>Примечания

Хорошим решением для разработчиков приложений, написания кода, который предназначен только для совместного использования в приложении (и без распространения другим разработчикам).

<a name="Portable_Class_Libraries" />

## <a name="portable-class-libraries"></a>Переносимые библиотеки классов

> [!TIP]
> Библиотеки .NET standard 2.0 предпочтительнее использовать переносимые библиотеки классов.

Переносимые библиотеки классов, [здесь подробно рассматривается](~/cross-platform/app-fundamentals/pcl.md).

![Схема библиотека переносимых классов](code-sharing-images/portableclasslibrary.png "схема библиотеке переносных классов")

### <a name="benefits"></a>Преимущества

- Позволяет совместно использовать код в нескольких проектах.
- Операции рефакторинга всегда обновления всех затронутых ссылок.

### <a name="disadvantages"></a>Недостатки

- Рекомендуется использовать в последних версиях Visual Studio, библиотеки .NET Standard рекомендуется использовать вместо этого. Ознакомьтесь с этой [объяснение различий](https://docs.microsoft.com/dotnet/standard/net-standard#comparison-to-portable-class-libraries) между переносимой библиотеки Классов и .NET Standard.
- Невозможно использовать директивы компилятора.
- Только подмножество платформы .NET framework, доступные для использования, определяются выбранный профиль (см. в разделе [введение PCL](~/cross-platform/app-fundamentals/pcl.md) Дополнительные сведения).

### <a name="remarks"></a>Примечания

Шаблон PCL считается устаревшим в последних версиях Visual Studio.

## <a name="summary"></a>Сводка

Совместное использование Выбор стратегии кода будет управляться платформы, которые вы используете. Выберите метод, который лучше всего подходит для вашего проекта.

.NET standard отлично подходит для создания библиотек общего кода (особенно публикации в NuGet). Общие проекты хорошо подходят для разработчиков приложений, которые планируется использовать множество функциональных возможностей платформы в своих приложениях на разных платформах.

Проекты переносимой библиотеки Классов по-прежнему будет поддерживаться в Visual Studio, .NET Standard рекомендуется для новых проектов.

## <a name="related-links"></a>Связанные ссылки

- [Cross Создание платформы приложений (основной документ)](~/cross-platform/app-fundamentals/building-cross-platform-applications/index.md)
- [Переносимые библиотеки классов](~/cross-platform/app-fundamentals/pcl.md)
- [Общие проекты](~/cross-platform/app-fundamentals/shared-projects.md)
- [.NET Standard](~/cross-platform/app-fundamentals/net-standard.md)
- [Практический пример: Tasky](~/cross-platform/app-fundamentals/building-cross-platform-applications/case-study-tasky.md)
- [Пример tasky (github)](https://github.com/xamarin/mobile-samples/tree/master/Tasky)
- [Tasky пример, с помощью переносимой библиотеки Классов (github)](https://github.com/xamarin/mobile-samples/tree/master/TaskyPortable)
