---
title: Создание новых проектов библиотеки для платформы для NuGet
description: В этом документе описывается создание одного пакета NuGet, содержащего код, зависящий от платформы, для нескольких платформ.
ms.prod: xamarin
ms.assetid: D8BC4906-805F-4AFB-8D1A-88B7BF87E17F
author: davidortinau
ms.author: daortin
ms.date: 03/23/2017
ms.openlocfilehash: b1c32d76f4f25298a8f0643e2e29707df7775736
ms.sourcegitcommit: 008bcbd37b6c96a7be2baf0633d066931d41f61a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/22/2020
ms.locfileid: "86939254"
---
# <a name="creating-new-platform-specific-library-projects-for-nuget"></a>Создание новых проектов библиотеки для платформы для NuGet

Проекты многоплатформенных библиотек, предназначенные для конкретных платформ, таких как iOS и Android, лучше работают с общими проектами.

NuGet может содержать код, относящийся к iOS и Android, а также код .NET для обоих типов.

Несколько сборок создаются и встроены в один пакет NuGet. Стандарты NuGet гарантируют, что пакет можно добавить ко всем поддерживаемым типам проектов, таким как проекты Xamarin. iOS и Android.

## <a name="steps-to-create-a-cross-platform-library-nuget"></a>Шаги для создания кросс-платформенной библиотеки NuGet

1. Выберите **файл > создать решение** (или щелкните правой кнопкой мыши существующее решение и выберите **Добавить > новый проект**).

2. Выберите **многоплатформенную библиотеку** из раздела **многоплатформенная > библиотека** :

    [![Настройка многоплатформенной библиотеки для одной базы кода](platform-specific-images/mulitplatform-library-sml.png)](platform-specific-images/multiplatform-library.png#lightbox)

3. Введите **имя** и **Описание**и выберите значение для **конкретной платформы**:

    [![Настройка библиотеки для конкретной платформы для iOS и Android](platform-specific-images/specific-configure-sml.png)](platform-specific-images/specific-configure.png#lightbox)

4. Завершите работу мастера. В решение добавляются следующие проекты:

    - **Проект Android** — код, зависящий от Android, при необходимости можно добавить в этот проект.
    - **проект iOS** — код, относящийся к iOS, при необходимости можно добавить в этот проект.
    - **Проект NuGet** — код не добавляется в этот проект. Он ссылается на другие проекты и содержит конфигурацию метаданных для выходных данных пакета NuGet.
    - **Общий проект** — общий код должен быть добавлен в этот проект, включая код, зависящий от платформы, внутри `#if` директив компилятора.

5. Щелкните правой кнопкой мыши проект NuGet и выберите **Параметры**, затем откройте раздел **метаданных пакета NuGet > метаданные** и введите [необходимые метаданные](~/cross-platform/app-fundamentals/nuget-multiplatform-libraries/metadata.md) (а также любые необязательные метаданные):

    [![Введите необходимые метаданные](platform-specific-images/specific-metadata-sml.png)](platform-specific-images/specific-metadata.png#lightbox)

6. Кроме того, в окне **Параметры проекта** откройте раздел **эталонные сборки** и выберите профили PCL, которые будут поддерживаться общей библиотекой через "Bait and Switch":

    ![Кроме того, в окне Параметры проекта откройте раздел эталонные сборки и выберите профили PCL, которые будут поддерживаться общей библиотекой через Bait и Switch.](platform-specific-images/specific-reference-assemblies.png)

    > [!NOTE]
    > "Bait and Switch" означает, что сборки PCL будут содержать только API, предоставляемый библиотекой (он не может содержать код, зависящий от платформы). При добавлении NuGet в проект Xamarin общие библиотеки будут скомпилированы для PCL, но сборки для конкретной платформы содержат код, который фактически используется проектом iOS или Android.

7. Щелкните проект правой кнопкой мыши и выберите **создать пакет NuGet** (или выполните сборку или развертывание решения), а файл пакета NuGet **. nupkg** будет сохранен в папке **/bin/** (Отладка или выпуск, в зависимости от конфигурации).

    ![Файл пакета NuGet будет сохранен в папке bin как отладка, так и выпуск, в зависимости от конфигурации.](platform-specific-images/create-nuget-package.png)

## <a name="verifying-the-output"></a>Проверка выходных данных

Пакеты NuGet также являются ZIP-файлами, поэтому можно проверить внутреннюю структуру созданного пакета.

На этом снимке экрана показано содержимое зависимой от платформы NuGet, которая поддерживает iOS и Android и в ней были выбраны две эталонные сборки:

![Файлы, содержащиеся в пакете NuGet](platform-specific-images/nuget-output.png)

## <a name="related-links"></a>Связанные ссылки

- [Руководство по метаданным](~/cross-platform/app-fundamentals/nuget-multiplatform-libraries/metadata.md)
