---
title: Создание новой библиотеки многоплатформенного для NuGet
description: В этом документе описывается создание многоплатформенная библиотека для использования с помощью NuGet. Этот способ подходит для бизнес-логику и алгоритмы, которые могут быть выражены полностью в библиотеке базовых классов .NET и таким образом будет выполняться на всех целевых платформах без кода для конкретных платформ.
ms.prod: xamarin
ms.assetid: E7B55354-9BBE-4122-BCE3-3506B79090DD
author: asb3993
ms.author: amburns
ms.date: 03/23/2017
ms.openlocfilehash: 6d695df9c59a5f95441092d6d7b44d5feda941bd
ms.sourcegitcommit: 4b402d1c508fa84e4fc3171a6e43b811323948fc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61267757"
---
# <a name="creating-a-new-multiplatform-library-for-nuget"></a>Создание новой библиотеки многоплатформенного для NuGet

Создание проекта библиотеки многоплатформенных, который использует PCL или .NET Standard означает, что полученный NuGet можно добавить к любому проекту .NET, который поддерживает целевой профиль, включая проекты ASP.NET и классических приложений с помощью WinForms, WPF или UWP.

Библиотека может содержать только код, поддерживаемый выбранный профиль PCL или .NET Standard, а также пакеты NuGet, которые добавляются.
Это подходит для бизнес-логику и алгоритмы, которые могут быть выражены полностью в библиотеке базовых классов .NET.

Одна сборка создается и построение в пакет NuGet.

Если в дальнейшем функциям конкретной платформы, [можно добавить проекты под конкретные платформы](#add-platforms).

## <a name="steps-to-create-a-multiplatform-library-nuget"></a>Шаги по созданию NuGet многоплатформенная библиотека

1. Выберите **файл > новое решение** (или щелкните правой кнопкой мыши существующее решение и выберите **Добавить > Новый проект**).

2. Выберите **многоплатформенные библиотеки** из **Многоплатформенность > Библиотека** раздел:

  [![](single-codebase-images/mulitplatform-library-sml.png "Настройка библиотеки единой базой кода несколькими платформами")](single-codebase-images/mulitplatform-library.png#lightbox)

3. Введите **имя** и **описание**и выберите **единый для всех платформ**:

  [![](single-codebase-images/single-configure-sml.png "Настройка библиотеки единой базой кода несколькими платформами")](single-codebase-images/single-configure.png#lightbox)

4. Завершите работу мастера. Отдельная библиотека проект создается в решении.

5. Щелкните правой кнопкой мыши новый проект библиотеки, а затем выберите **параметры**. **Сборки > Общие** позволяет **требуемой версии .NET Framework** задаваемый — выберите в профиле переносимой библиотеки PCL .NET или .NET Standard версии:

  [![](single-codebase-images/single-choose-type-sml.png "Выберите для типа библиотеки PCL или .NET Standard")](single-codebase-images/single-choose-type.png#lightbox)

6. Кроме того, в **параметры проекта** открытое окно **пакет NuGet > метаданных** раздела и введите [необходимые метаданные](~/cross-platform/app-fundamentals/nuget-multiplatform-libraries/metadata.md) (а также любые необязательные метаданные):

  [![](single-codebase-images/single-metadata-sml.png "Введите необходимые метаданные")](single-codebase-images/single-metadata.png#lightbox)

7. Проект библиотеки правой кнопкой мыши и выберите **создать пакет NuGet** (или сборки или развертывания решения) и **.nupkg** будет сохранен файл пакета NuGet в **/bin/** папка (отладки или выпуска, в зависимости от конфигурации):

  ![](single-codebase-images/create-nuget-package.png "Файл пакета NuGet сохраняется в папке bin отладки или выпуска, в зависимости от конфигурации")


## <a name="verifying-the-output"></a>Проверка выходных данных

Пакеты NuGet также являются ZIP-файлы, поэтому имеется возможность проверить внутреннюю структуру создаваемый пакет.

На этом снимке экрана показано содержимое NuGet на основе переносимой библиотеки Классов — включается только в одну сборку переносимой библиотеки Классов:

![](single-codebase-images/nuget-output.png "Файлы, содержащиеся в пакете NuGet")

<a name="add-platforms" />

## <a name="adding-platform-specific-code"></a>Добавление кода для конкретных платформ

Проекты на основе переносимой библиотеки Классов и проекты на основе .NET Standard не может содержать ссылки на платформы (например, iOS или Android функциональность).

Если существующий проект переносимой библиотеки Классов или проект .NET Standard должен быть развернут для включения кода для конкретных платформ, это можно сделать, щелкнув правой кнопкой мыши на проект и выбрав **Добавить > добавить реализацию платформы...** :

[![](single-codebase-images/add-later-sml.png "Добавление меню реализации платформы")](single-codebase-images/add-later.png#lightbox)

Один или несколько проектов платформы можно добавить в решение, и при необходимости существующей библиотеки PCL или .NET Standard можно преобразовать в общий проект:

[![](single-codebase-images/add-later-platforms-sml.png "Добавить варианты для платформ как iOS, Android и общий проект")](single-codebase-images/add-later-platforms-sml.png#lightbox)

После преобразования в общий проект, посетите **параметры проекта > пакет NuGet > ссылочные сборки**
[разделе](~/cross-platform/app-fundamentals/nuget-multiplatform-libraries/platform-specific.md) и убедитесь, что необходимые профили выбраны (таким образом, NuGet продолжает быть совместимы с проектами, в которых он ранее был использован в).


## <a name="related-links"></a>Связанные ссылки

- [Руководство по метаданным](~/cross-platform/app-fundamentals/nuget-multiplatform-libraries/metadata.md)
