---
title: Часть 3 - Настройка решения Xamarin кросс платформенные
description: В этом документе описывается настройка кроссплатформенного решения в Xamarin. Здесь рассматриваются различные стратегии, такие как общие проекты и .NET Standard совместного использования кода.
ms.prod: xamarin
ms.assetid: 4139A6C2-D477-C563-C1AB-98CCD0D10A93
author: asb3993
ms.author: amburns
ms.date: 03/27/2017
ms.openlocfilehash: d20275bab4e4ce90f902a5e72321701d94b1d416
ms.sourcegitcommit: 4a1520dee7759f8355ea65c8bb3d1bac8ba58122
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/29/2019
ms.locfileid: "66354070"
---
# <a name="part-3---setting-up-a-xamarin-cross-platform-solution"></a>Часть 3 - Настройка решения Xamarin кросс платформенные

Независимо от того, какие платформы используются, все проекты Xamarin использовать один и тот же формат файла решения (в Visual Studio **.sln** формата файла). Решения могут совместно использоваться средами разработки, даже в том случае, если не удается загрузить отдельные проекты (например, проект Windows в Visual Studio для Mac).



При создании нового кросс платформенные приложения, первым шагом является создание пустого решения. В этом разделе объясняется, что будет дальше: Настройка проектов для создания кросс платформенные мобильные приложения.

 <a name="Sharing_Code" />


## <a name="sharing-code"></a>Общий доступ к коду

Ссылаться на [параметры совместного использования кода](~/cross-platform/app-fundamentals/code-sharing.md) документа подробное описание того, как реализовать совместное использование кода между платформами.

 <a name="Shared_Asset_Projects" />


### <a name="shared-projects"></a>Общие проекты

Простейший способ совместного использования файлов кода используется [общий проект](~/cross-platform/app-fundamentals/shared-projects.md).

Этот метод позволяет совместно использовать тот же код в проекты для разных платформ и используйте директивы компилятора к другой, специфические для платформы код путей включения.

 <a name="Portable_Class_Libraries" />


### <a name="portable-class-libraries-pcl"></a>Переносимые библиотеки классов (PCL)

Исторически файл проекта .NET (и итоговой сборки) предназначено для конкретной версии платформы. Благодаря этому проект или сборку, совместно с различных платформ.

Переносимой библиотеки классов (PCL) — это специальный тип проекта, который может использоваться на различных платформах CLI Xamarin.iOS и Xamarin.Android, а также WPF, универсальной платформы Windows и Xbox. Библиотеку можно использовать только подмножество полной .NET framework, ограничена из-за целевой платформы.

Дополнительные сведения о Xamarin [поддержка переносимых библиотек классов](~/cross-platform/app-fundamentals/pcl.md) и следуйте инструкциям, см. в разделе как [TaskyPortable пример](https://github.com/xamarin/mobile-samples/tree/master/TaskyPortable) работает.


### <a name="net-standard"></a>.NET Standard

В 2016 г., [.NET Standard](~/cross-platform/app-fundamentals/net-standard.md) проекты предоставляют простой способ совместное использование кода на платформах, создание сборок, которые можно использовать в Windows, платформ Xamarin (iOS, Android, Mac) и Linux.

Библиотеки .NET standard можно создать и использовать как переносимых библиотек классов, за исключением того, что интерфейсы API, доступные в каждой версии (от 1.0 до версии 1.6) более легко обнаруживаются, и каждая версия является обратную совместимость с более низкими номерами версий.



 <a name="Populating_the_Solution" />


## <a name="populating-the-solution"></a>Заполнение решения

Независимо от того, какой метод используется для совместного использования кода Общая структура решения следует реализовать многоуровневой архитектуры, рекомендует совместного использования кода.
Подход Xamarin — код группы в два типа проектов:

-   **Проект Core** — писать повторно используемый код в одном месте, для совместного использования на разных платформах. Принципы Инкапсуляция позволяет скрыть детали реализации, когда это возможно.
-   **Проекты приложений платформы** — доступны для повторного использования кода с помощью как небольшой взаимозависимости, как можно использовать. На этом уровне, построенные на компоненты, предоставляемые в проекте Core добавлены функции платформы.


 <a name="Core_Project" />


### <a name="core-project"></a>Проект Core

Общий код проекты должны ссылаться только на сборки, которые доступны на всех платформах — т. е. распространенные пространства имен платформы, такие как `System`, `System.Core` и `System.Xml`.

Общие проекты должны реализовывать число функциональных возможностей без пользовательского интерфейса, возможно, которая может включать следующие уровни:

-   **Уровень данных** — код, который берет на себя физических данных хранилища, например.  [SQLite-NET](https://github.com/praeclarum/sqlite-net), альтернативной базы данных, такие как [Realm.io](https://realm.io/products/realm-mobile-database/) или даже XML-файлов. Классы, уровень данных, обычно используется только с уровня доступа к данным.
-   **Уровень доступа к данным** — определяет API, поддерживающий операции необходимые данные для обеспечения функциональности приложения, такие как методы для доступа к списки данных, отдельные элементы данных и создать, изменить и удалить их.
-   **Уровень доступа к службе** — дополнительный уровень для предоставления облачных служб в приложение. Содержит код, который обращается к удаленной сети ресурсов (веб-служб, скачивания образа, и т.д.) и возможно кэширование результатов.
-   **Бизнес-слой** — определение классов модели и интерфейс или Manager классов, которые предоставляют функциональные возможности для конкретных платформ приложений.


 <a name="Platform-Specific_Application_Projects" />


### <a name="platform-specific-application-projects"></a>Проекты приложений для конкретных платформ

Специфические для платформы проекты должны ссылаться на сборки, необходимые для привязки к каждой платформы SDK (Xamarin.iOS, Xamarin.Android, Xamarin.Mac или Windows), а также основного проекта общего кода.

Специфические для платформы проекты должны реализовывать:

-   **Уровень приложений** — определенных функций платформы и привязки и преобразования между объектами бизнес-уровне и пользовательском интерфейсе.
-   **Слой пользовательского интерфейса** — экраны, элементы управления пользовательского интерфейса, презентации логику проверки.


<a name="Example" />


### <a name="example"></a>Пример

Архитектура приложения показана на следующей схеме:

 [ ![](setting-up-a-xamarin-cross-platform-solution-images/conceptualarchitecture.png "На этой схеме показана архитектура приложения")](setting-up-a-xamarin-cross-platform-solution-images/conceptualarchitecture.png#lightbox)

На этом снимке экрана показан файл установки решения с помощью общего проекта Core, iOS и проектах приложений Android. Общий проект содержит код, относящиеся к каждому из архитектурных уровней (код бизнеса, службы, данных и доступа к данным):

 ![](setting-up-a-xamarin-cross-platform-solution-images/core-solution-example.png "Общий проект содержит код, связанный с каждой из архитектурных уровней (код бизнеса, службы, данных и доступа к данным)")


 <a name="Project_References" />


## <a name="project-references"></a>Ссылки проекта

Ссылки проекта отражения зависимости проекта. Таким образом, доступные для совместного использования кода, проектов Core ограничить их ссылки на общие сборки.
Проекты платформы приложений ссылаются на общий код, а также другие сборки платформы, они должны воспользоваться преимуществами целевой платформы.

Проекты приложений ссылаются на общий проект и содержат код пользовательского интерфейса, необходимый для присутствует функциональные возможности для пользователя, как показано на эти снимки экрана:

![](setting-up-a-xamarin-cross-platform-solution-images/solution-android.png "Приложение проекты каждой ссылки на общий проект") ![](setting-up-a-xamarin-cross-platform-solution-images/solution-ios.png "приложение проекты каждой ссылки на общий проект")


Конкретные примеры как проекты должны быть структурированы, приведены в истории успеха.

 <a name="Adding_Files" />


## <a name="adding-files"></a>Добавление файлов

 <a name="Build_Action" />


### <a name="build-action"></a>Действие при сборке

Важно присвоить правильное действие построения для определенных типов файлов. Этот список содержит действие построения для некоторых распространенных типов файлов:

-  **Все C# файлы** — действие при построении: Компилятор
-   **Образы в Xamarin.iOS & Windows** — действие при сборке: Content
-   **Файлы XIB и раскадровки в Xamarin.iOS** — действие при построении: InterfaceDefinition
-   **Images и layouts AXML в Android** — действие при построении: AndroidResource
-  **Файлы XAML в проектах Windows** — действие при построении: Страница
-  **Файлы XAML Xamarin.Forms** — действие при построении: ВнедренныйРесурс


Обычно определяет тип файла и предлагает способы правильную сборку интегрированной среды разработки.

 <a name="Case_Sensitivity" />


### <a name="case-sensitivity"></a>Учет регистра

Наконец помните, что некоторые платформы с учетом регистра файловые системы (например)
iOS и Android) поэтому обязательно используйте стандарт именования согласованного файла и убедитесь, что имена файлов, используйте в коде точно совпадают файловой системы. Это особенно важно для изображений и другие ресурсы, которые можно ссылаться в коде.
