---
title: Часть 2. Архитектура
description: В этом документе описываются шаблоны архитектуры полезно для создания кроссплатформенных приложений. В нем описывается слои типового приложения (уровень данных, уровень доступа к данным и др.) и Общие шаблоны мобильного программного обеспечения (MVVM, MVC, и т.д.)
ms.prod: xamarin
ms.assetid: 2176DB2D-E84A-3757-CFAB-04A586068D50
author: asb3993
ms.author: amburns
ms.date: 03/27/2017
ms.openlocfilehash: cfb2bddceea7717ac87bd7a78fd9cd45e8b93144
ms.sourcegitcommit: 57e8a0a10246ff9a4bd37f01d67ddc635f81e723
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/08/2019
ms.locfileid: "57670445"
---
# <a name="part-2---architecture"></a>Часть 2. Архитектура

Ключевой принцип создания кросс платформенные приложения — создать архитектуру, которая предоставляет возможности для максимизации кода, совместное использование несколькими платформами. Соблюдение следующих принципах объектно-ориентированное программирование помогает устанавливать приложение с хорошо продуманной архитектурой:

-   **Инкапсуляция** — гарантия, классов и даже архитектурных слоев предоставляют только минимальный API, который выполняет свои требуемые функции и скрывает подробности реализации. На уровне класса это означает, что объекты ведут себя как «черные ящики» и что коду-потребителю не требуется знать, как они выполнять свои задачи. На уровне архитектуры это означает, что реализация шаблонов как фасадом, поддерживающих отдел упрощенного API, который координирует более сложных схем взаимодействия от имени кода в более абстрактными слои. Это означает, что код пользовательского интерфейса (например) должен быть только отвечает за отображение экраны и принятия входных данных пользователя; и никогда не взаимодействует с базой данных напрямую. Аналогичным образом код доступа к данным следует только для чтения записи в базу данных, но никогда не взаимодействуют напрямую с помощью кнопки и метки.
-   **Разделение обязанностей** — убедитесь, что каждый компонент (одновременно архитектуры и класса уровень) имеет четкой и четко определенную цель. Каждый компонент следует выполнять только его определенные задачи и предоставлять функциональные возможности через интерфейс API, доступным для других классов, которые нужно использовать функцию.
-   **Полиморфизм** — программирования на интерфейс (или абстрактного класса), которая поддерживает несколько реализаций означает, что основной код могут быть записаны и совместного использования на платформах, обеспечивая по-прежнему взаимодействует с функциями платформы.


Естественным результатом будет смоделированы на основе реальных или абстрактные сущности с помощью отдельных логических слоев приложения. Разделение кода на слои делать приложения проще воспринимать, тестировать и поддерживать. Рекомендуется, чтобы код в каждом слое был отдельный физический (как в каталоги, так и даже отдельные проекты для очень больших приложений), а также логически отдельно (с использованием пространства имен).

 <a name="Typical_Application_Layers" />


## <a name="typical-application-layers"></a>Слои типового приложения

В этом документе и примеры внедрения мы см. следующие уровни шесть приложений:

-   **Уровень данных** — долгосрочное постоянного хранения, вероятно, будет база данных SQLite, но могут быть реализованы с помощью XML-файлы или любой другой подходящий механизм.
-   **Уровень доступа к данным** — оболочка на уровне данных, который обеспечивает создание, чтение, обновление, удаление (CRUD) доступ к данным не раскрывая особенностей реализации в вызывающий объект. Например DAL может содержать инструкции SQL для запроса или обновления данных, но код не нужно знать это.
-   **Бизнес-слой** — (иногда называется уровня бизнес-логики или BLL) содержит бизнес-определения сущности (модель) и бизнес-логики. Кандидат для шаблона Фасадной бизнеса.
-   **Уровень доступа к службе** — используется для доступа к службам в облаке: от сложных веб-служб (REST, JSON, WCF) простое извлечение данных и изображений с удаленных серверов. Инкапсулирует поведение по сети и предоставляет простой API для использования процессом приложения и пользовательского интерфейса.
-   **Уровень приложений** — код, который обычно является конкретной платформе (обычно не общей для платформ) или код, зависящие от приложения (не обычно повторного использования). — Это позволяет проверить необходимость поместить код на уровне приложения и уровень пользовательского интерфейса (a) для определения, имеет ли класс любые элементы управления фактическому отображению, или (b) есть ли он может совместно использоваться несколько экранов и устройств (например) iPhone и iPad).
-   **Слой пользовательского интерфейса (UI)** — уровень пользовательского интерфейса, перечислены экраны, мини-приложений и контроллеры, управлять ими.


Приложения не обязательно содержит все слои — например на уровне доступа к службе не будет существовать в приложении, которое не осуществляет доступ к сетевым ресурсам. Очень простое приложение может объединить уровень данных и уровень доступа к данным, так как операции являются очень базовый.

 <a name="Common_Mobile_Software_Patterns" />


## <a name="common-mobile-software-patterns"></a>Общие шаблоны мобильного программного обеспечения

Шаблоны — установленный способ захвата повторяющихся способы решения распространенных проблем. Существует несколько основных шаблонов, которые удобны для понимания в создании простым в обслуживании/понятно мобильных приложений.

-   **Модель-представление-ViewModel (MVVM)** — шаблон Model-View-ViewModel популярных платформ, поддерживающих привязку данных, например Xamarin.Forms. Он был популяризированный Майклом XAML с поддержкой пакеты SDK, например Windows Presentation Foundation (WPF) и Silverlight. где ViewModel выступает в роли посредника между данными (модели) и пользовательского интерфейса (представления) через привязку данных и команд.
-   **Модель-представление-контроллер (MVC)** — шаблон общих и которую часто недооценивают, MVC, чаще всего используется при создании пользовательских интерфейсов и обеспечивает разделение между фактическое определение экран пользовательского интерфейса (представления), за ней механизма, управляющего взаимодействие (контроллер) и данные, заполняет его (модель). Модель — фактически это совершенно необязательно, и таким образом, понимание этого шаблона ядром заключается в представления и контроллера. MVC — это популярный подход для приложений iOS.
-   **Business Фасадной** — так НАЗЫВАЕМЫЙ шаблон Manager предоставляет упрощенный точку входа для выполнения сложных действий. Например, в приложении отслеживания задач, возможно, `TaskManager` класс с методами, например `GetAllTasks()` , `GetTask(taskID)` , `SaveTask (task)` и т. д. `TaskManager` Класс предоставляет интерфейс для внутренней работы фактически сохранение и извлечение объектов задачи.
-   **Одноэлементный** — предоставляет шаблон с одним элементом для способом, в которой когда-нибудь может существовать только один экземпляр определенного объекта. Например при использовании SQLite в мобильных приложениях, только когда-нибудь требуется один экземпляр базы данных. С помощью одноэлементного шаблона — это простой способ сделать это.
-   **Поставщик** — шаблон изобрел корпорацией Майкрософт (возможно аналогично стратегии или основные внедрения зависимостей), чтобы стимулировать повторного использования кода в приложениях Silverlight, WPF и WinForms. Общий код могут записываться в отношении интерфейс или абстрактный класс и конкретные реализации платформы записываются и переданный при использовании кода.
-   **Async** — не следует путать с ключевым словом Async, асинхронного программирования, шаблон используется в том случае, когда должен быть выполнен без увидел, что пользовательский Интерфейс или текущей обработки долгосрочных работ. В простейшей форме асинхронный шаблон описывает просто в тех случаях, что следует выполнялись длительные задачи в другом потоке (или аналогичные абстракции потока, например задачу) во время текущего потока продолжают выполняться и ожидает ответа от фонового процесса и затем обновляет пользовательский Интерфейс при возврате данных и состояния.


Каждый из шаблонов будет проверяться более подробно, как их практического использования проиллюстрирован на примеры внедрения. Википедии с более подробными описаниями [MVVM](https://en.wikipedia.org/wiki/Model–view–viewmodel), [MVC](https://en.wikipedia.org/wiki/Model–view–controller), [Facade](https://en.wikipedia.org/wiki/Facade_pattern), [одноэлементный](https://en.wikipedia.org/wiki/Singleton_pattern), [стратегии](https://en.wikipedia.org/wiki/Strategy_pattern)и [поставщика](https://en.wikipedia.org/wiki/Provider_model) шаблоны (и [шаблоны проектирования](https://en.wikipedia.org/wiki/Design_Patterns) обычно).
