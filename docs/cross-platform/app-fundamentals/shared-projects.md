---
title: Использование общих проектов для совместного использования кода
description: Общие проекты позволяют писать общий код, который ссылается на несколько проектов различных приложений. Код компилируется как часть каждого ссылающийся проект и могут включать директивы компилятора для внедрение функциональных возможностей конкретной платформы в общий код базы.
ms.prod: xamarin
ms.assetid: 191c71fb-44a4-4e6c-af4b-7b1107dce6af
author: asb3993
ms.author: amburns
ms.date: 03/23/2017
ms.openlocfilehash: 749daac36cce26c9d24d04b89e933aab994791b4
ms.sourcegitcommit: ea1dc12a3c2d7322f234997daacbfdb6ad542507
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/05/2018
ms.locfileid: "34781807"
---
# <a name="using-shared-projects-to-share-code"></a>Использование общих проектов для совместного использования кода

_Общие проекты позволяют писать общий код, который ссылается на несколько проектов различных приложений. Код компилируется как часть каждого ссылающийся проект и могут включать директивы компилятора для внедрение функциональных возможностей конкретной платформы в общий код базы._

Проекты Shared (иногда также называемые общих проектов активов) позволяют писать код, который совместно используется несколькими проектами целевой, включая приложения Xamarin.

Они включают поддержку директивы компилятора, можно условно включают код платформы будет скомпилирована в подмножество проектов, которые ссылаются на общий проект. Кроме того, поддерживается IDE для управления директивы компилятора и визуализации, как будет выглядеть код в каждом приложении.

При использовании файла связывания в прошлом для совместного использования кода между проектами, общие проекты работает аналогичным образом, но с гораздо Улучшенная поддержка интегрированной среды разработки.



## <a name="what-is-a-shared-project"></a>Что такое общий проект

В отличие от большинства других типов проектов общего проекта не имеет никаких выходных данных (в виде библиотеки DLL), вместо этого код компилируется в каждый проект, который ссылается на нее. Это показано на следующем рисунке — по существу является все содержимое общий проект «скопирован в» каждого ссылающийся проект и компилируется так, будто он был частью их.

 ![](shared-projects-images/sharedassetproject.png "Архитектура общего проекта")

Код в общий проект может содержать директивы компилятора, которые будет включить или отключить фрагменты кода, в зависимости от того, какое приложение в проекте используется в коде, который предлагается рамками цветной платформы на диаграмме.

Сам по себе не компилируется общий проект, если он существует исключительно в качестве группирования файлов исходного кода, которые могут быть включены в других проектах. При ссылке на другой проект код компилируется как эффективно *часть* этого проекта. Общие проекты не могут ссылаться любого другого типа проекта (включая другие общие проекты).

Обратите внимание, что проекты приложения Android не могут ссылаться на проекты приложения Android — например, проект Android модульного теста не может ссылаться на проект приложения Android. Дополнительные сведения об ограничениях см. в этой [форум обсуждений](http://forums.xamarin.com/discussion/comment/98092/).

# <a name="visual-studio-for-mactabvsmac"></a>[Visual Studio для Mac](#tab/vsmac)



## <a name="visual-studio-for-mac-walkthrough"></a>Пошаговое руководство по Visual Studio для Mac


В этом разделе рассматриваются способы создания и использования общих проектов, с помощью Visual Studio для Mac. Обратитесь к [общий пример проекта](#Shared_Project_Example) раздел полный пример.


## <a name="creating-a-shared-project"></a>Создание общего проекта


Чтобы создать новый общий проект перейдите к **файл > новый решения...**  и выберите имя.


![](shared-projects-images/xs-newsolution.png "Создание решения")


Можно также добавить общий проект в решение, щелкнув файл решения и выбрав **Добавить > Добавить новый проект...** . Новый проект общий вид показанной ниже — Обратите внимание, нет ссылок или узлы-компоненты; они не поддерживаются для общих проектов.


![](shared-projects-images/xs-empty.png "Пустого общего проекта")


Для общий проект для использования он должен ссылаться по крайней мере один возможности для построения проекта (например, iOS или Android приложение или библиотека или проект PCL). Общий проект не компилируется при никак ссылки на его, поэтому синтаксис (или любой другой) ошибки не будут выделены, пока ссылка каким-то процессом.



Добавить ссылку на общий проект выполняется так же, как ссылки на проект библиотеки обычных. На этом снимке экрана показан Xamarin.iOS проект ссылается на общий проект.


![](shared-projects-images/xs-reference.png "Ссылку на общий проект")


После общий проект ссылается другой библиотека или приложение можно построить решение и просмотреть ошибки в коде. Если ссылка на общий проект с _двух или более_ других проектах, появится контекстное меню в левой верхней части редактора исходного кода, показано выбрать, какие проекты ссылки на этот файл.



## <a name="shared-project-options"></a>Общие параметры проекта


Щелкните правой кнопкой мыши на общий проект при выберите **параметры** существует меньшее число параметров, чем другие типы проектов. Так как общие проекты не компилируются (самостоятельно), невозможно задать параметры вывода или компилятора, конфигурации проекта, подпись сборки или пользовательские команды. Код в общий проект фактически наследует эти значения независимо от их ссылается.



**Параметры** экрана показан ниже - проект **имя** и **пространство имен по умолчанию** только два параметра, которые обычно будут изменены.


![](shared-projects-images/xs-sharedprojectoptions.png "Общие параметры проекта")



# <a name="visual-studiotabvswin"></a>[Visual Studio](#tab/vswin)



## <a name="visual-studio-walkthrough"></a>Пошаговое руководство по Visual Studio


В этом разделе рассматриваются способы создания и использования общих проектов, с помощью Visual Studio. Обратитесь к [общий пример проекта](#Shared_Project_Example) раздел полную реализацию.


### <a name="creating-a-shared-project"></a>Создание общего проекта


Чтобы создать новый общий проект перейдите к **файл > новый решения...**  и выберите имя для проекта и решения.


![](shared-projects-images/vs-newsolution.png "Создание решения")


Можно также добавить общий проект в решение, щелкнув файл решения и выбрав **Добавить > Новый проект...** . Общий проект выглядит следующим образом (после добавления файла класса) — Обратите внимание на то, нет ссылок или узлы-компоненты; они не поддерживаются для общих проектов.


![](shared-projects-images/vs-empty.png "Пустого общего проекта")


Для общий проект для использования он должен ссылаться по крайней мере один возможности для построения проекта (например, iOS или Android приложение или библиотека или проект PCL). Общий проект не компилируется при никак ссылки на его, поэтому синтаксис (или любой другой) ошибки не будут выделены, пока ссылка каким-то процессом.



Добавить ссылку на общий проект выполняется так же, как ссылки на проект библиотеки обычных. На этом снимке экрана показан Xamarin.iOS проект ссылается на общий проект.


![](shared-projects-images/vs-reference.png "Ссылку на общий проект")


После общий проект ссылается другой библиотека или приложение можно построить решение и просмотреть ошибки в коде. Если ссылка на общий проект с _двух или более_ других проектах, появится контекстное меню в левой верхней части редактора исходного кода, чтобы увидеть, какие проекты ссылки на текущий файл кода.


### <a name="shared-project-properties"></a>Общедоступные свойства проекта


При выборе общий проект существует меньшее число параметров в панели «свойства», чем другие типы проектов. Так как общие проекты не компилируются (самостоятельно), невозможно задать параметры вывода или компилятора, конфигурации проекта, подпись сборки или пользовательские команды. Код в общий проект фактически наследует эти значения независимо от их ссылается.



**Свойства** панель выглядит следующим образом — **корневое пространство имен** — это единственный параметр, который можно изменить.


![](shared-projects-images/vs-sharedprojectproperties.png "Общедоступные свойства проекта")



-----

<a name="Shared_Project_Example"/>

## <a name="shared-project-example"></a>Пример общего проекта

[Tasky](https://github.com/xamarin/mobile-samples/tree/master/Tasky) пример использует общий проект содержит общий код, используемом средой обоих iOS, Android и Windows Phone приложениями. Как `SQLite.cs` и `TaskRepository.cs` файлы исходного кода использование директивы компилятора (например) `#if __ANDROID__`) для вывода разных для каждого из приложений, которые на них ссылаются.

Ниже показан структуре законченное решение (в Visual Studio для Mac и Visual Studio соответственно):

# <a name="visual-studio-for-mactabvsmac"></a>[Visual Studio для Mac](#tab/vsmac)

 ![](shared-projects-images/xs-examplesolution.png "Visual Studio для Mac решения")

# <a name="visual-studiotabvswin"></a>[Visual Studio](#tab/vswin)

 ![](shared-projects-images/vs-examplesolution.png "Решение Visual Studio")

-----

Проект Windows Phone может быть проведена от в среде Visual Studio для Mac, несмотря на то, что данный тип проекта не поддерживается для компиляции в Visual Studio для Mac.

Ниже приведены выполняющихся приложений.

 ![](shared-projects-images/example.png "iOS, Android, Windows Phone, примеры")



## <a name="summary"></a>Сводка

В этом документе описано, как общие проекты работают, как их можно создать и использовать в Visual Studio для Mac и Visual Studio и реализован простой пример приложения, демонстрирующий общий проект в действии.

## <a name="related-links"></a>Связанные ссылки

- [Tasky примера приложения](https://github.com/xamarin/mobile-samples/tree/master/Tasky)
- [Переносимые библиотеки классов (пример)](~/cross-platform/app-fundamentals/pcl.md)
- [Параметры совместного использования кода (пример)](~/cross-platform/app-fundamentals/code-sharing.md)
