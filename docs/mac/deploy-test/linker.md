---
title: "Параметры компоновщика Xamarin.Mac"
description: "Компоновка является мощным средством оптимизации, которое уменьшает размер приложения за счет удаления неиспользуемого кода."
ms.topic: article
ms.prod: xamarin
ms.assetid: F03176C3-F8D4-4DE8-870C-7F27D8CE525A
ms.technology: xamarin-mac
author: bradumbaugh
ms.author: brumbaug
ms.date: 11/10/2017
ms.openlocfilehash: bee5f86682048fcd72d2212706c188c894eb148a
ms.sourcegitcommit: 6cd40d190abe38edd50fc74331be15324a845a28
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/27/2018
---
# <a name="xamarinmac-linker-options"></a>Параметры компоновщика Xamarin.Mac

_Компоновка является мощным средством оптимизации, которое уменьшает размер приложения за счет удаления неиспользуемого кода._

## <a name="overview"></a>Обзор

В зависимости от того, для какую [целевую версию .NET Framework](~/mac/platform/target-framework.md) использует ваш проект, могут быть доступны не все режимы работы компоновщика. Это связано с тем, что для компоновки нужно создать графа объектов каждого типа, используемого приложением, а для Full (Полная) или Unsupported (Не поддерживаемая) это невозможно из-за ограничений System.Configuration.

Есть четыре варианта для выбора режима.

- **Нет** — полное отключение компоновки. Этот вариант используется по умолчанию для конфигурации отладки в Modern (Современная) и для всех конфигураций в Full (Полная).
- **SDK** — компоновка применяется для всех сборок пакетов SDK, за исключением пользовательских сборок. Этот вариант используется по умолчанию в конфигурации выпуска в Modern (Современная). Недоступно в Full (Полная).
- **Все** — компоновка применяется для всех сборок. Чтобы использовать этот вариант, пользовательский код должен быть защищен от компоновщика, как описано в [этих заметках](~/ios/deploy-test/linker.md). Недоступно в Full (Полная).
- **Платформа** — компоновка применяется только для Xamarin.Mac.dll. Дополнительные сведения см. далее.

## <a name="platform-linking"></a>Компоновка платформы

Компоновка приложений для [целевой версии .NET Framework](~/mac/platform/target-framework.md) Full (Полная) обычно небезопасна, но может применяться в некоторых сценариях ограниченной компоновки.

Например, переданное в macOS App Store приложение не должно ссылаться на некоторые устаревшие интерфейсы API (такие как QTKit), для некоторых из которых есть привязки в Xamarin.Mac. Даже если приложение не вызывает эти привязки, они будут присутствовать в пакете SDK, что приведет к его отклонению.

Компоновка платформы предполагает, что приложения и BCL не защищены от компоновки, и удаляет неиспользуемый код только из файла Xamarin.Mac.dll. 

Все приложения, не использующие типы из Xamarin.Mac.dll, будут запускаться немного быстрее после удаления ненужных типов.

Компоновка платформы обычно нужна только для тех приложений, которые используют целевую платформу Full (Полная), поскольку приложения для платформы Modern (Современная) могут применять более мощный вариант SDK.

## <a name="setting-the-linker-configuration"></a>Настройка конфигурации компоновщика

Чтобы изменить конфигурацию компоновщика для проекта Xamarin.Mac, выполните следующее.

1. Откройте проект Xamarin.iOS в Visual Studio для Mac.
2. В **обозревателе решений** дважды щелкните файл проекта, чтобы открыть диалоговое окно **Параметры проекта**.
3. На вкладке **Сборка Mac** для параметра **Поведение компоновщика** выберите вариант, который соответствует потребностям приложения.

  ![Выбор используемого поведения компоновщика](linker-images/link-behavior.png "Выбор используемого поведения компоновщика")

4. Компоновка платформы для целевой платформы Full (Полная) не появится в интегрированной среде разработки до следующего обновления. Пока вы можете добавить `--linkplatform` в раздел **Дополнительные аргументы mmp**.
5. Чтобы сохранить внесенные изменения, нажмите кнопку **OK**.


## <a name="related-links"></a>Связанные ссылки

- [Компоновка в iOS](~/ios/deploy-test/linker.md)
