---
title: Регистратор Xamarin. Mac
description: В этом документе описывается назначение регистратора Xamarin. Mac и его динамических, статических и частичных статических (гибридных) конфигураций использования.
ms.prod: xamarin
ms.assetid: 7CAAA6B7-D654-4AD3-BAEC-9DD01210978A
ms.technology: xamarin-mac
author: davidortinau
ms.author: daortin
ms.date: 11/10/2017
ms.openlocfilehash: 991d9b2d911b5aa4ac07225fd1df34877451df49
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73017311"
---
# <a name="xamarinmac-registrar"></a>Регистратор Xamarin. Mac

_В этом документе описывается назначение регистратора Xamarin. Mac и его различные конфигурации использования._

## <a name="overview"></a>Обзор

Xamarin. Mac связывает зазор между средой выполнения управляемого кода (.NET) и Cocoa, позволяя управляемым классам вызывать неуправляемые классы цели-C и вызывать их обратно при возникновении событий. Работа, необходимая для дается этой "волшебки", обрабатывается регистратором и, как правило, скрыта от представления.

Эта регистрация может повлиять на производительность, особенно на время запуска приложения, и понимание того, что происходит во внутреннем процессе, иногда бывает полезным.

## <a name="configurations"></a>Конфигурации

Фундаментальное задание регистратора при запуске может быть разделено на два категории производительности:

- Проверяйте каждый управляемый класс на наличие классов, производных от Нсобжект, и собирайте список элементов, которые должны быть предоставлены исполняющей среде цели-C.
- Зарегистрируйте эти сведения в среде выполнения цели-C.

Со временем были созданы три различные конфигурации регистратора, охватывающие различные варианты использования. Каждый из них имеет различные последствия для сборки и времени выполнения:

- **Динамический регистратор** — во время запуска используйте отражение .NET для сканирования каждого загруженного типа, определите список соответствующих элементов и сообщите о собственной среде выполнения. Этот параметр добавляет в сборку нулевое время, но вычисляются очень дорого во время запуска (до нескольких секунд).
- **Статический регистратор** — во время сборки Вычислите набор регистрируемых элементов и создайте код цели-C для выполнения регистрации. Этот код вызывается во время запуска для быстрой регистрации всех элементов. Добавляет значительную паузу в сборку, но может сократить время запуска приложения.
- **"Частичный" статический** — более новый гибридный подход, который предоставляет большинство преимуществ обоих вариантов. Поскольку экспорты из **Xamarin. Mac. dll** являются константами, сохраните предварительно вычисленную библиотеку для работы с регистрацией и ссылкой в. Используйте отражение для работы с библиотеками пользователей, но при экспорте библиотек пользователей гораздо меньше типов, которые часто применяют привязки к платформе, это довольно быстро. Возможное влияние на время сборки и сокращает большую часть стоимости динамических данных.

В настоящее время частичное статическое значение является значением по умолчанию для конфигурации отладки, а статическое — по умолчанию для конфигураций выпуска.

Существуют некоторые сценарии.

- Подключаемые модули, загруженные после запуска с классами, производными от Нсобжект
- Динамически создаваемые экземпляры классов, производные от Нсобжект

Если регистратор не может понять, что ему нужно зарегистрировать некоторый тип при запуске. Метод `ObjCRuntime.Runtime.RegisterAssembly` позволяет сообщить регистратору о наличии дополнительных типов, которые следует учитывать.
