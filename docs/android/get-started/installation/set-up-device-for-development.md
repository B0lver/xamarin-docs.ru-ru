---
title: Настройка устройства для разработки
description: В этой статье описывается установка устройства Android и его подключение к компьютеру для использования в целях запуска и отладки приложений Xamarin.Android.
ms.prod: xamarin
ms.assetid: 9116A3AA-EA00-56AF-AE70-BAEEC045EF11
ms.technology: xamarin-android
author: conceptdev
ms.author: crdun
ms.date: 06/22/2018
ms.openlocfilehash: d1e43d211f639c422bbed3a6afad9f2136551071
ms.sourcegitcommit: 3489c281c9eb5ada2cddf32d73370943342a1082
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59690294"
---
# <a name="set-up-device-for-development"></a>Настройка устройства для разработки

_В этой статье рассказывается о том, как настроить устройство Android и подключить его к компьютеру для запуска и отладки приложений Xamarin.Android._

После тестирования на эмуляторе Android необходимо просмотреть и протестировать приложения, работающие на устройстве Android. Ниже приведены действия, выполняемые для подключения устройства к компьютеру в целях отладки:

1. **Включение отладки на устройстве** — по умолчанию выполнять отладку приложений на устройстве Android невозможно.

2. **Установка USB-драйверов** — это необязательное действие для компьютеров macOS. Установка USB-драйверов может потребоваться для компьютеров Windows.

3. **Подключение устройства к компьютеру** — устройство подключается к компьютеру через USB или по сети Wi-Fi.

Каждое из этих действий будет рассматриваться более подробно в следующих разделах.

## <a name="enable-debugging-on-the-device"></a>Включение отладки на устройстве

Для тестирования приложения Android можно использовать любое устройство Android. Однако сначала необходимо надлежащим образом настроить устройство. В зависимости от версии Android, запущенной на устройстве, выполняемые действия будут слегка различаться.

### <a name="android-40-to-android-41"></a>Android 4.0–Android 4.1

На устройствах Android 4.0.x–Android 4.1.x отладка включается после выполнения приведенных далее действий:

1. Откройте экран **Параметры**.
2. Выберите **Параметры разработчика**.
3. Снимите флажок **Отладка по USB**.

На этом снимке показан экран **Параметры разработчика** на устройстве под управлением Android 4.0.3:

[![Параметры разработчика](set-up-device-for-development-images/developer-options-sml.png)](set-up-device-for-development-images/developer-options.png#lightbox)

### <a name="android-42-and-higher"></a>Android 4.2 и более поздние версии

Начиная с Android 4.2 и в более поздних версиях экран **Параметры разработчика** по умолчанию скрыт. Чтобы сделать его доступным, выберите **Параметры > О телефоне** и семь раз коснитесь элемента **Номер сборки**, чтобы появилась вкладка **Параметры разработчика**:

[![Элемент "Номер сборки"](set-up-device-for-development-images/about-phone-sml.png)](set-up-device-for-development-images/about-phone.png#lightbox)

После того как вкладка **Параметры разработчика** появится в разделе **Параметры > Система**, откройте ее, чтобы увидеть параметры разработчика:

[![Экран "Параметры разработчика"](set-up-device-for-development-images/developer3.png)](set-up-device-for-development-images/developer3.png#lightbox)

Здесь можно включить такие параметры разработчика, как отладка по USB и режим бодрствования.

## <a name="install-usb-drivers"></a>Установка USB-драйверов

Это необязательное действие для macOS. Просто подключите устройство к компьютеру Mac с помощью USB-кабеля.

Прежде чем компьютер Windows распознает устройства Android, подключенные по USB, может потребоваться установить некоторые дополнительные драйверы.

> [!NOTE]
> Это действия по настройке устройства Google Nexus, которые приводятся в справочных целях. Действия для вашего конкретного устройства могут быть иными, однако они следуют одной схеме. Если у вас возникли проблемы, найдите их описание для вашего устройства в Интернете.

Запустите приложение **android.bat** из каталога **[путь установки пакета SDK для Android]\tools**. По умолчанию установщик Xamarin.Android поместит пакет SDK для Android в следующую папку на компьютере Windows:

`C:\Users\[username]\AppData\Local\Android\android-sdk`

### <a name="download-the-usb-drivers"></a>Скачивание USB-драйверов

Для работы устройств Google Nexus (за исключением Galaxy Nexus) требуется USB-драйвер Google. Драйвер для Galaxy Nexus [распространяет компания Samsung](http://www.samsung.com/us/support/downloads/).
Все остальные устройства Android должны использовать [USB-драйвер от соответствующего изготовителя](https://developer.android.com/tools/extras/oem-usb.html#Drivers).

Установите пакет **USB-драйвера Google**, запустив диспетчер пакетов SDK для Android и открыв папку **Дополнения**, как показано на следующем снимке экрана:

[![Выбранный пакет USB-драйвера Google](set-up-device-for-development-images/usbdriverpackage.png)](set-up-device-for-development-images/usbdriverpackage.png#lightbox)

Установите флажок **USB-драйвер Google** и нажмите кнопку **Установить**.
Файлы драйверов будут скачаны в следующую папку:

`[Android SDK install path]\extras\google\usb\_driver`

Путь по умолчанию для установки Xamarin.Android:

`C:\Users\[username]\AppData\Local\Android\android-sdk\extras\google\usb_driver`

### <a name="installing-the-usb-driver"></a>Установка USB-драйвера

Скачанные USB-драйверы необходимо установить.
Чтобы установить драйверы в Windows 7, выполните следующие действия:

1. Подключите устройство к компьютеру с помощью USB-кабеля.

2. Щелкните правой кнопкой мыши элемент "Компьютер" на рабочем столе или в проводнике Windows и выберите пункт **Управление**.

3. На левой панели выберите пункт **Общие**.

4. На правой панели найдите и разверните узел **Другие устройства**.

5. Щелкните правой кнопкой мыши имя устройства, а затем выберите пункт **Обновить драйверы**.
    Запустится мастер обновления оборудования.

6. Выберите **Выполнить поиск драйверов на этом компьютере** и нажмите кнопку **Далее**.

7. Нажмите кнопку **Обзор** и перейдите в папку USB-драйвера (USB-драйвер Google размещается в папке **[путь установки пакета SDK для Android]\extras\google\usb_driver**).

8. Нажмите кнопку **Далее**, чтобы установить драйвер.

### <a name="installing-unverified-drivers-in-windows-8"></a>Установка непроверенных драйверов в Windows 8

Для установки непроверенного драйвера в Windows 8 могут потребоваться дополнительные действия. Далее описывается, как установить драйверы для Galaxy Nexus:

1. **Получите доступ к дополнительным вариантам загрузки Windows 8**. На этом этапе следует перезагрузить компьютер, чтобы получить доступ к дополнительным вариантам загрузки. Запустите командную строку и перезагрузите компьютер, используя следующую команду:

    ```command
    shutdown.exe /r /o
    ```

2. **Подключите устройство**. Подключите устройство к компьютеру.

3. **Запустите диспетчер устройств**. Выполните команду **devmgmt.msc**: должно появиться ваше устройство с желтым треугольником над ним.

4. **Установите драйверы устройства**. Установите драйверы устройства, как описано выше.

## <a name="connect-the-device-to-the-computer"></a>Подключение устройства к компьютеру

Последним действием является подключение устройства к компьютеру. Это можно сделать двумя способами:

- **USB-кабель.** Это простейший и наиболее распространенный способ. Просто подключите USB-кабель к устройству, а затем к компьютеру.

- **Wi-Fi.** Можно подключить устройство Android к компьютеру без USB-кабеля — через Wi-Fi. Этот способ требует немного больше усилий, но может быть удобен, когда устройство находится слишком далеко от компьютера, чтобы его можно было подключить по кабелю. Подключение через Wi-Fi будет рассматриваться в следующем разделе.

### <a name="connecting-over-wifi"></a>Подключение через Wi-Fi

По умолчанию [Android Debug Bridge](https://developer.android.com/tools/help/adb.html) (*ADB*) настроен для взаимодействия с устройством Android через USB. Его можно перенастроить для использования TCP/IP вместо USB. Для этого устройство и компьютер должны находиться в одной сети Wi-Fi. Чтобы настроить среду для отладки по Wi-Fi, выполните указанные далее действия из командной строки:

1. Определите IP-адрес устройства Android. Можно открыть раздел **Параметры > Wi-Fi**, а затем выбрать сеть Wi-Fi, к которой подключено устройство. Появится экран параметров с информацией о сетевом подключении, аналогичный показанному на снимке экрана ниже:

    ![IP-адрес](set-up-device-for-development-images/ip-settings.png)

    В некоторых версиях Android IP-адрес не будет отображаться. Его можно найти, выбрав **Параметры > О телефоне > Состояние**.

2. Подключите устройство Android к компьютеру через USB.

3. После этого перезапустите ADB, чтобы начать использовать TCP на порту 5555. В командной строке введите следующую команду:

    ```command
    adb tcpip 5555
    ```

    После ее выполнения компьютер не сможет прослушивать устройства, подключенные по USB.

4. Отсоедините USB-кабель, ведущий от устройства к компьютеру.

5. Настройте ADB для подключения к устройству Android на порту, который был указан на шаге 1 выше:

    ```command
    adb connect 192.168.1.28:5555
    ```

    После выполнения этой команды устройство Android будет подключено к компьютеру через Wi-Fi.

После отладки через Wi-Fi ADB можно вернуть в режим USB с помощью следующей команды:

```command
adb usb
```

Можно указать ADB вывести список устройств, которые подключены к компьютеру. Независимо от способа подключения устройств выполните следующую команду в командной строке, чтобы увидеть подключенные устройства:

```command
adb devices
```

## <a name="summary"></a>Сводка

В этой статье описывалась процедура настройки устройства Android для разработки путем включения на нем отладки. Здесь также рассматривалось подключение устройства к компьютеру через USB или по Wi-Fi.

## <a name="related-links"></a>Связанные ссылки

- [Android Debug Bridge](https://developer.android.com/tools/help/adb.html)
- [Использование физических устройств](https://developer.android.com/tools/device.html)
- [Скачивания драйверов Samsung](http://www.samsung.com/us/support/downloads/)
- [USB-драйверы изготовителей оборудования](https://developer.android.com/tools/extras/oem-usb.html#Drivers)
- [USB-драйвер Google](https://developer.android.com/sdk/win-usb.html)
- [XDA Developers: Windows 8 - ADB/fastboot driver problem solved](http://forum.xda-developers.com/showthread.php?t=1583801) (Windows 8 — решена проблема драйвера ADB/fastboot)
