---
title: Знакомство с Android. Глубокое погружение
description: Из этого состоящего из двух частей руководства вы узнаете, как создать первое приложение Xamarin.Android. Вы также получите представление об основах разработки приложений Android с помощью Xamarin. Кроме того, в этом руководстве будут описаны инструменты, понятия и действия, необходимые для сборки и развертывания приложения Xamarin.Android.
zone_pivot_groups: platform
ms.topic: quickstart
ms.prod: xamarin
ms.assetid: EF0E110B-20EA-43F6-9476-1A0F41AFD298
ms.technology: xamarin-android
author: davidortinau
ms.author: daortin
ms.date: 10/05/2018
ms.openlocfilehash: 10a46c916654f8421dc5a9af93de3abbbae5e934
ms.sourcegitcommit: b0ea451e18504e6267b896732dd26df64ddfa843
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/13/2020
ms.locfileid: "79303549"
---
# <a name="hello-android-deep-dive"></a>Знакомство с Android. Глубокое погружение

_В этом руководстве из двух частей объясняется, как создать первое приложение Xamarin.Android. Вы также получите представление об основах разработки приложений Android с помощью Xamarin. Кроме того, в руководстве описаны инструменты, понятия и действия, необходимые для сборки и развертывания приложения Xamarin.Android._

В [кратком руководстве "Привет, Android"](~/android/get-started/hello-android-multiscreen/hello-android-multiscreen-quickstart.md) вы создали и запустили первое приложение Xamarin.Android. Пришло время подробнее изучить принципы работы приложений Android, чтобы создавать более сложные программы. В этом руководстве рассматриваются действия, которые вы выполнили в пошаговом руководстве "Привет, Android". Благодаря этому вы сможете лучше понять, что именно было сделано, и получить базовое представление о разработке приложений Android.

В руководстве рассматриваются следующие темы:

::: zone pivot="windows"

- **Введение в Visual Studio** &ndash; общие сведения о Visual Studio и создание приложения Xamarin.Android.

- **Устройство приложения Xamarin.Android** — обзор основных составляющих приложения Xamarin.Android.

- **Основные принципы работы приложения и основы архитектуры** &ndash; общие сведения о действиях, манифесте Android и основных особенностях разработки для Android.

- **Пользовательский интерфейс** &ndash; создание пользовательских интерфейсов с помощью Android Designer.

- **Действия и их жизненный цикл** &ndash; общие сведения о жизненном цикле действий и реализации пользовательского интерфейса в коде.

- **Тестирование, развертывание и последние штрихи** &ndash; советы по тестированию, развертыванию, оформлению и другим действиям по окончательной подготовке приложения.

::: zone-end
::: zone pivot="macos"

- **Введение в Visual Studio для Mac** &ndash; общие сведения о Visual Studio для Mac и создании приложения Xamarin.Android.

- **Устройство приложения Xamarin.Android** &ndash; обзор основных составляющих приложения Xamarin.Android.

- **Основные принципы работы приложения и основы архитектуры** &ndash; общие сведения о действиях, манифесте Android и основных особенностях разработки для Android.

- **Пользовательский интерфейс** &ndash; создание пользовательских интерфейсов с помощью Android Designer.

- **Действия и их жизненный цикл** &ndash; общие сведения о жизненном цикле действий и реализации пользовательского интерфейса в коде.

- **Тестирование, развертывание и последние штрихи** &ndash; советы по тестированию, развертыванию, оформлению и другим действиям по окончательной подготовке приложения.

::: zone-end

Это руководство поможет вам выработать навыки и получить знания, необходимые для создания приложения Android с одним экраном. После его прохождения вы будете понимать, из каких компонентов состоит приложение Xamarin.Android и как они связаны друг с другом.

::: zone pivot="windows"

## <a name="introduction-to-visual-studio"></a>Введение в Visual Studio

Visual Studio — это полнофункциональная интегрированная среда разработки (IDE) от корпорации Майкрософт. Она включает в себя полностью интегрированный визуальный конструктор, текстовый редактор с инструментами рефакторинга, обозреватель сборок, средства интеграции исходного кода и другие возможности. В этом руководстве вы узнаете, как использовать некоторые основные возможности Visual Studio с подключаемым модулем Xamarin.

Код в Visual Studio упорядочен по _решениям_ и _проектам_. Решение — это контейнер для одного или нескольких проектов. Проект может представлять собой приложение (например, для iOS или Android), вспомогательную библиотеку, тестовое приложение и т. д. В приложении **Phoneword** вы с помощью шаблона **Приложение Android** добавили новый проект Android в решение **Phoneword**, созданное в руководстве [Привет, Android](~/android/get-started/hello-android/hello-android-quickstart.md).

::: zone-end
::: zone pivot="macos"

## <a name="introduction-to-visual-studio-for-mac"></a>Введение в Visual Studio для Mac

Visual Studio для Mac — это бесплатная интегрированная среда разработки (IDE) с открытым кодом, похожая на Visual Studio. Она включает в себя полностью интегрированный визуальный конструктор, текстовый редактор с инструментами рефакторинга, обозреватель сборок, средства интеграции исходного кода и другие возможности. В этом руководстве вы узнаете, как использовать некоторые основные возможности Visual Studio для Mac. Если вы впервые используете Visual Studio для Mac, то можете ознакомиться с более подробной статьей [Введение в Visual Studio для Mac](https://docs.microsoft.com/visualstudio/mac/).

В Visual Studio для Mac, так же как в Visual Studio, код упорядочивается по _решениям_ и _проектам_. Решение — это контейнер для одного или нескольких проектов. Проект может представлять собой приложение (например, для iOS или Android), вспомогательную библиотеку, тестовое приложение и т. д. В приложении **Phoneword** вы с помощью шаблона **Приложение Android** добавили новый проект Android в решение **Phoneword**, созданное в руководстве [Привет, Android](~/android/get-started/hello-android/hello-android-quickstart.md).

::: zone-end

<a name="anatomy" />

## <a name="anatomy-of-a-xamarinandroid-application"></a>Устройство приложения Xamarin.Android

::: zone pivot="windows"

На приведенном ниже снимке экрана представлено содержимое решения. Это обозреватель решений, который содержит структуру каталогов и все файлы, связанные с решением:

[![Обозреватель решений](hello-android-deepdive-images/vs/02-solution-structure-sml.png)](hello-android-deepdive-images/vs/02-solution-structure.png#lightbox)

::: zone-end
::: zone pivot="macos"

На приведенном ниже снимке экрана представлено содержимое решения. Это Панель решения, которая содержит структуру каталогов и все файлы, связанные с решением:

[![Панель решения](hello-android-deepdive-images/xs/02-solution-structure-sml.png)](hello-android-deepdive-images/xs/02-solution-structure.png#lightbox)

::: zone-end

Было создано решение с именем **Phoneword**, и в него был добавлен проект Android с именем **Phoneword**.

Ниже перечислены все папки, входящие в проект, и их назначение:

- **Properties** &ndash; содержит файл [AndroidManifest.xml](~/android/platform/android-manifest.md), в котором описываются все требования для приложения Xamarin.Android, включая его имя, номер версии и разрешения. В папке **Properties** также находится файл [AssemblyInfo.cs](xref:Microsoft.VisualBasic.ApplicationServices.AssemblyInfo) с метаданными сборки .NET. В этот файл рекомендуется внести некоторые основные сведения о приложении.

- **References** &ndash; содержит сборки, необходимые для создания и запуска приложения. Если развернуть каталог References, вы увидите ссылки на сборки .NET, такие как [System](xref:System), System.Core и [System.Xml](xref:System.Xml), а также ссылку на сборку Xamarin Mono.Android.

- **Assets** &ndash; содержит файлы, необходимые для работы приложения, в том числе шрифты, локальные файлы данных и текстовые файлы. Файлы в этом каталоге доступны посредством создаваемого класса `Assets`. Дополнительные сведения о ресурсах Android см. в руководстве по Xamarin [Использование ресурсов Android](~/android/app-fundamentals/resources-in-android/android-assets.md).

- **Resources** &ndash; содержит ресурсы приложения, в том числе строки, изображения и макеты. К этим ресурсам можно обращаться в коде посредством создаваемого класса `Resource`. В руководстве [Ресурсы Android](~/android/app-fundamentals/resources-in-android/index.md) приводятся более подробные сведения о каталоге **Resources**. Шаблон приложения также включает в себя краткое руководство по ресурсам в файле **AboutResources.txt**.

### <a name="resources"></a>Ресурсы

Каталог **Resources** содержит четыре папки с именами **drawable**, **layout**, **mipmap** и **values**, а также файл с именем **Resource.designer.cs**.

Эти элементы описываются ниже:

- **drawable** &ndash; в каталогах drawable размещаются [прорисовываемые ресурсы](https://developer.android.com/guide/topics/resources/drawable-resource.html), например изображения, в том числе растровые.

- **mipmap** &ndash; каталог mipmap содержит прорисовываемые файлы для значков средства запуска с различной плотностью. В шаблоне по умолчанию каталог drawable содержит файл значка приложения **Icon.png**.

::: zone pivot="windows"

- **layout** &ndash; каталог layout содержит _файлы конструктора Android_ (AXML), которые определяют пользовательский интерфейс для каждого экрана или действия. При использовании шаблона создается макет по умолчанию с именем **activity_main.axml**.

::: zone-end
::: zone pivot="macos"

- **layout** &ndash; каталог layout содержит _файлы конструктора Android_ (AXML), которые определяют пользовательский интерфейс для каждого экрана или действия. При использовании шаблона создается макет по умолчанию с именем **Main.axml**.

::: zone-end

- **values** &ndash; этот каталог содержит XML-файлы, в которых хранятся простые значения, например строки, целые числа и цвета. При использовании шаблона создается файл для хранения строковых значений с именем **Strings.xml**.

- **Resource.designer.cs** &ndash; этот файл, также известный как класс `Resource`, представляет собой разделяемый класс, в котором хранятся уникальные идентификаторы, назначенные каждому ресурсу. Он создается автоматически средствами Xamarin.Android и создается повторно при необходимости. Этот файл не следует изменять вручную, так как Xamarin.Android будет перезаписывать все внесенные в него изменения.

## <a name="app-fundamentals-and-architecture-basics"></a>Основные принципы работы приложения и основы архитектуры

Приложения Android не имеют единой точки входа, то есть в приложении нет единственной строки кода, к которой операционная система обращается для его запуска. Вместо этого приложение запускается, когда Android создает экземпляр одного из его классов. При этом Android загружает весь процесс приложения в память.

Эта уникальная возможность Android может быть очень полезной при проектировании сложных приложений или взаимодействии с операционной системой Android. Однако это также усложняет работу с простейшими сценариями в Android, такими как приложение **Phoneword**. По этой причине рассмотрение архитектуры Android разделено на два этапа. В этом руководстве разбирается приложение, в котором применяется наиболее стандартная точка входа для приложения Android: первый экран. В руководстве [Привет, Android (несколько экранов)](~/android/get-started/hello-android-multiscreen/index.md) рассматриваются другие способы запуска приложения, тем самым архитектура Android раскрывается во всей своей сложности.

### <a name="phoneword-scenario---starting-with-an-activity"></a>Сценарий Phoneword — первое действие

Когда приложение **Phoneword** впервые открывается в эмуляторе или на устройстве, операционная система создает первое *действие*. Действие — это особый класс Android, который соответствует одному экрану приложения и отвечает за отрисовку и работу пользовательского интерфейса. Когда система Android создает первое действие приложения, она загружает все приложение:

[![Загрузка действия](hello-android-deepdive-images/01-activity-load-sml.png)](hello-android-deepdive-images/01-activity-load.png#lightbox)

Так как в приложении Android нет линейной очередности выполнения (приложение можно запускать из нескольких мест), в Android имеется уникальная возможность отслеживания классов и файлов, из которых состоит приложение. В примере **Phoneword** все части приложения регистрируются в специальном XML-файле, который называется **манифестом Android**. Назначение **манифеста Android** — отслеживать содержимое, свойства и разрешения приложения и сообщать о них операционной системе Android. Приложение **Phoneword** можно представить как одно действие (экран) и коллекцию файлов ресурсов и вспомогательных пакетов, связанных воедино файлом манифеста Android, как показано на схеме ниже:

[![Ресурсы и вспомогательные пакеты](hello-android-deepdive-images/02-resources-helpers-sml.png)](hello-android-deepdive-images/02-resources-helpers.png#lightbox)

В следующих нескольких разделах рассматриваются связи между различными частями приложения **Phoneword**. Благодаря этому вы сможете лучше понять представленную выше схему. Рассмотрение начинается с пользовательского интерфейса, а именно с файлов конструктора и макета Android.

## <a name="user-interface"></a>Пользовательский интерфейс

> [!TIP]
> Новые выпуски Visual Studio поддерживают открытие XML-файлов в Android Designer.
>
> Android Designer поддерживает как файлы AXML, так и XML.

::: zone pivot="windows"

**activity_main.axml** — это файл макета пользовательского интерфейса для первого экрана приложения. Расширение AXML указывает на то, что это файл конструктора Android (AXML означает *Android XML*). Имя *Main* является произвольным в Android &ndash; файл макета мог бы иметь любое другое имя. При открытии файла **activity_main.axml** в интегрированной среде разработки запускается визуальный редактор файлов макетов Android, который называется *Android Designer*:

[![Android Designer](hello-android-deepdive-images/vs/03-android-designer-sml.png "Конструктор Android")](hello-android-deepdive-images/vs/03-android-designer.png#lightbox)

В приложении **Phoneword** идентификатор кнопки **TranslateButton** имеет значение `@+id/TranslateButton`:

[![Значение идентификатора TranslateButton](hello-android-deepdive-images/vs/04-translatebutton-sml.png "Значение идентификатора TranslateButton")](hello-android-deepdive-images/vs/04-translatebutton.png#lightbox)

::: zone-end
::: zone pivot="macos"

**Main.axml** — это файл макета пользовательского интерфейса для первого экрана приложения. Расширение AXML указывает на то, что это файл конструктора Android (AXML означает *Android XML*). Имя *Main* является произвольным в Android &ndash; файл макета мог бы иметь любое другое имя. При открытии файла **Main.axml** в интегрированной среде разработки запускается визуальный редактор файлов макетов Android, который называется *Android Designer*:

[![Android Designer](hello-android-deepdive-images/xs/03-android-designer-sml.png)](hello-android-deepdive-images/xs/03-android-designer.png#lightbox)

В приложении **Phoneword** идентификатор кнопки **TranslateButton** имеет значение `@+id/TranslateButton`:

[![Значение идентификатора TranslateButton](hello-android-deepdive-images/xs/04-translatebutton-sml.png)](hello-android-deepdive-images/xs/04-translatebutton.png#lightbox)

::: zone-end

Когда вы задаете свойство `id` кнопки **TranslateButton**, Android Designer сопоставляет элемент управления **TranslateButton** с классом `Resource` и назначает ему *идентификатор ресурса*`TranslateButton`. Сопоставление визуального элемента управления с классом позволяет находить и использовать кнопку **TranslateButton** и другие элементы управления в коде приложения. Это будет более подробно рассмотрено при разборе кода, обеспечивающего работу элементов управления. Пока же будет достаточно знать, что код элемента управления связывается с его визуальным представлением в конструкторе посредством свойства `id`.

### <a name="source-view"></a>Просмотр исходного кода

Все, что определяется в области конструктора, преобразуется в код XML, используемый Xamarin.Android. В Android Designer имеется представление исходного кода, которое содержит код XML, созданный визуальным конструктором. Чтобы просмотреть этот код XML, выберите панель **Исходный код** в левом нижнем углу представления конструктора, как показано на снимке экрана ниже:

::: zone pivot="windows"

[![Представление исходного кода в конструкторе](hello-android-deepdive-images/vs/05-source-view-sml.png "Представление исходного кода в конструкторе")](hello-android-deepdive-images/vs/05-source-view.png#lightbox)

::: zone-end
::: zone pivot="macos"

[![Представление исходного кода в конструкторе](hello-android-deepdive-images/xs/05-source-view-sml.png)](hello-android-deepdive-images/xs/05-source-view.png#lightbox)

::: zone-end

Этот исходный код XML должен содержать четыре элемента управления: два элемента **TextView**, один **EditText** и один **Button**. Более подробные сведения о конструкторе Android Designer см. в руководстве [Обзор конструктора](~/android/user-interface/android-designer/index.md) Xamarin Android.

Мы рассмотрели средства и понятия, связанные с визуальной частью пользовательского интерфейса. Теперь пора перейти к коду, обеспечивающему работу пользовательского интерфейса, и рассмотреть действия и их жизненный цикл.

## <a name="activities-and-the-activity-lifecycle"></a>Действия и их жизненный цикл

Класс `Activity` (действие) содержит код, обеспечивающий работу пользовательского интерфейса.
Действие отвечает за взаимодействие с пользователем и создание динамического пользовательского интерфейса.
В этом разделе приводятся основные сведения о классе `Activity`, рассматривается жизненный цикл действия и разбирается код, обеспечивающий работу пользовательского интерфейса в приложении **Phoneword**.

### <a name="activity-class"></a>Класс Activity

В приложении **Phoneword** имеется только один экран (действие). Класс, обеспечивающий работу экрана, называется `MainActivity` и находится в файле **MainActivity.cs**. Имя `MainActivity` не имеет особого значения в Android &ndash; хотя первое действие в приложении принято называть `MainActivity`, оно может иметь и любое другое имя.

Если открыть файл **MainActivity.cs**, то можно увидеть, что класс `MainActivity` является *подклассом* класса `Activity` и что действие снабжено атрибутом [Activity](xref:Android.App.ActivityAttribute):

```csharp
[Activity (Label = "Phone Word", MainLauncher = true)]
public class MainActivity : Activity
{
  ...
}
```

Атрибут `Activity` регистрирует действие в манифесте Android, сообщая системе Android, что этот класс относится к приложению **Phoneword**, которым управляет манифест. Свойство `Label` определяет текст, отображаемый в верхней части экрана.

Свойство `MainLauncher` сообщает системе Android, что это действие должно отображаться при запуске приложения. Оно становится важным при добавлении в приложение дополнительных действий (экранов), как описано в руководстве [Привет, Android (несколько экранов)](~/android/get-started/hello-android-multiscreen/index.md).

Рассмотрев основы действия `MainActivity`, можно перейти к более подробному рассмотрению кода действия на основе такого понятия, как _жизненный цикл действия_.

### <a name="activity-lifecycle"></a>Жизненный цикл действия

В Android действия проходят различные этапы жизненного цикла в зависимости от взаимодействия с пользователем. Действия могут создаваться, запускаться, останавливаться, возобновляться, уничтожаться и т. д. Класс `Activity` содержит методы, которые система вызывает на различных этапах жизненного цикла экрана. На представленной ниже схеме показан типичный жизненный цикл действия, а также ряд соответствующих методов:

[![Жизненный цикл действия](hello-android-deepdive-images/04-lifecycle-sml.png)](hello-android-deepdive-images/04-lifecycle.png#lightbox)

Переопределяя методы жизненного цикла класса `Activity`, вы можете управлять тем, как загружается действие, как оно реагирует на действия пользователей, и даже тем, что происходит, когда оно перестает отображаться на экране устройства. Например,вы можете переопределить методы жизненного цикла, представленные на схеме выше, для выполнения некоторых важных задач:

- **OnCreate** &ndash; создает представления, инициализирует переменные и выполняет другую подготовительную работу, которая требуется перед отображением действия. Этот метод вызывается только один раз при загрузке действия в память.

- **OnResume** &ndash; выполняет задачи, которые должны повторяться каждый раз, когда действие отображается на экране устройства.

- **OnPause** &ndash; выполняет задачи, которые должны повторяться каждый раз, когда действие перестает отображаться на экране устройства.

Добавляя пользовательский код в метод жизненного цикла в классе `Activity`, вы *переопределяете* *базовую реализацию* этого метода. Вы используете существующий метод жизненного цикла (который уже имеет определенный код) и расширяете его с помощью собственного кода. Базовая реализация вызывается из метода для того, чтобы исходный код выполнялся перед добавленным вами новым кодом. Пример приведен в следующем разделе.

Жизненный цикл действия — важный и сложный аспект работы системы Android. Чтобы получить дополнительные сведения о действиях после ознакомления с серией руководств по _началу работы_, обратитесь к руководству по [жизненному циклу действий](~/android/app-fundamentals/activity-lifecycle/index.md). Далее в этом руководстве мы сосредоточим внимание на первом этапе жизненного цикла действия — `OnCreate`.

### <a name="oncreate"></a>OnCreate

Android вызывает метод `OnCreate` класса `Activity` при создании действия (перед отображением экрана для пользователя). Вы можете переопределить метод `OnCreate` жизненного цикла, чтобы создать представления и подготовить действие к взаимодействию с пользователем:

```csharp
protected override void OnCreate (Bundle bundle)
{
    base.OnCreate (bundle);

    // Set our view from the "main" layout resource
    SetContentView (Resource.Layout.Main);
    // Additional setup code will go here
}
```

::: zone pivot="windows"

В приложении **Phoneword** первая задача метода `OnCreate` заключается в загрузке пользовательского интерфейса, созданного в Android Designer. Чтобы загрузить пользовательский интерфейс, вызовите метод `SetContentView` и передайте ему *имя макета ресурсов*, связанное с файлом макета: **activity_main.axml**. Макет находится в `Resource.Layout.activity_main`:

```csharp
SetContentView (Resource.Layout.activity_main);
```

При запуске действия `MainActivity` оно создает представление на основе содержимого файла **activity_main.axml**.

::: zone-end
::: zone pivot="macos"

В приложении **Phoneword** первая задача метода `OnCreate` заключается в загрузке пользовательского интерфейса, созданного в Android Designer. Чтобы загрузить пользовательский интерфейс, вызовите метод `SetContentView` и передайте ему *имя макета ресурсов* для файла макета: **Main.axml**. Макет находится в `Resource.Layout.Main`:

```csharp
SetContentView (Resource.Layout.Main);
```

При запуске действия `MainActivity` оно создает представление на основе содержимого файла **Main.axml**. Обратите внимание на то, что имя файла макета соответствует имени действия &ndash; *Main*.axml является макетом для действия *Main*. В Android это не является обязательным требованием, но когда вы начнете добавлять в приложение дополнительные экраны, вы поймете, что такое соглашение об именовании упрощает сопоставление файлов кода с файлами макетов.

::: zone-end

Подготовив файл макета, можно приступать к поиску элементов управления.
Чтобы найти элемент управления, вызовите функцию `FindViewById` и передайте идентификатор ресурса элемента управления:

```csharp
EditText phoneNumberText = FindViewById<EditText>(Resource.Id.PhoneNumberText);
Button translateButton = FindViewById<Button>(Resource.Id.TranslateButton);
TextView translatedPhoneWord = FindViewById<TextView>(Resource.Id.TranslatedPhoneWord);
```

Получив ссылки на элементы управления в файле макета, можно начать программировать их реакцию на действия пользователей.

### <a name="responding-to-user-interaction"></a>Реакция на действия пользователя

В Android событие `Click` ожидает прикосновения к экрану. В этом приложении событие `Click` обрабатывается с помощью лямбда-выражения, но вместо этого можно было бы использовать делегат или именованный обработчик событий. В конечной форме код элемента **TranslateButton** выглядит так:

```csharp
translateButton.Click += (sender, e) =>
{
    // Translate user's alphanumeric phone number to numeric
    translatedNumber = PhonewordTranslator.ToNumber(phoneNumberText.Text);
    if (string.IsNullOrWhiteSpace(translatedNumber))
    {
        translatedPhoneWord.Text = string.Empty;
    }
    else
    {
        translatedPhoneWord.Text = translatedNumber;
    }
};
```

## <a name="testing-deployment-and-finishing-touches"></a>Тестирование, развертывание и последние штрихи

Как Visual Studio для Mac, так и Visual Studio предоставляют множество возможностей для тестирования и развертывания приложения. В этом разделе рассматриваются возможности отладки, демонстрируется тестирование приложения на устройстве и представлены средства для создания значок приложения для экранов разной плотности.

### <a name="debugging-tools"></a>Средства отладки

Диагностика проблем в коде приложения может представлять трудность. Для выявления проблем в сложном коде можно [устанавливать точки останова](https://github.com/xamarin/recipes/tree/master/Recipes/cross-platform/ide/debugging/set_a_breakpoint), [выполнять код пошагово](https://github.com/xamarin/recipes/tree/master/Recipes/cross-platform/ide/debugging/step_through_code) или [выводить сведения в окне журнала](https://github.com/xamarin/recipes/tree/master/Recipes/cross-platform/ide/debugging/output_information_to_log_window).

### <a name="deploy-to-a-device"></a>Развертывание на устройство

Для развертывания и тестирования приложения сначала желательно использовать эмулятор, однако пользователи не будут работать с готовым приложением в нем. Рекомендуется тестировать приложения на реальных устройствах уже на ранних этапах разработки.

Прежде чем применять устройство Android для тестирования приложений, его необходимо настроить для разработки. В руководстве [Настройка устройства для разработки](~/android/get-started/installation/set-up-device-for-development.md) приводятся подробные инструкции по подготовке устройства к разработке.

::: zone pivot="windows"

Настроив устройство, вы можете развернуть на нем приложение. Для этого подключите устройство, выберите его в диалоговом окне **Выбор устройства** и запустите приложение:

![Выбор устройства отладки](hello-android-deepdive-images/vs/06-select-device.png "Выбор устройства отладки")

::: zone-end
::: zone pivot="macos"

Настроив устройство, вы можете развернуть на нем приложение. Для этого подключите устройство, нажмите **Запуск (воспроизведение)** , выберите устройство в диалоговом окне **Выбор устройства** и нажмите кнопку **ОК**:

[![Выбор устройства отладки](hello-android-deepdive-images/xs/06-select-device-sml.png)](hello-android-deepdive-images/xs/06-select-device.png#lightbox)

::: zone-end

Приложение запустится на устройстве:

[![Ввод красивого телефонного номера](hello-android-deepdive-images/05-enter-phoneword-sml.png)](hello-android-deepdive-images/05-enter-phoneword.png#lightbox)

### <a name="set-icons-for-different-screen-densities"></a>Определение значков для экранов различной плотности

Устройства Android имеют экраны разного размера и разрешения, и не все изображения выглядят хорошо на всех экранах. Например, на приведенном ниже снимке экрана показан значок низкой плотности на экране высокой плотности устройства Nexus 5. Обратите внимание на то, что он выглядит нечетким по сравнению со значками вокруг:

[![Нечеткий значок](hello-android-deepdive-images/06-blurry-icon-sml.png)](hello-android-deepdive-images/06-blurry-icon.png#lightbox)

Чтобы такого не происходило, рекомендуется добавлять значки с разным разрешением в папку **Resources**. В Android имеются различные версии папки **mipmap** для значков средства запуска с различной плотностью: *mdpi* для средней плотности, *hdpi* для высокой и *xhdpi*, *xxhdpi*, *xxxhdpi* для экранов с очень высокой плотностью. Значки разного размера хранятся в соответствующих папках **mipmap-** :

::: zone pivot="windows"

![Папки mipmap](hello-android-deepdive-images/vs/07-mipmap-folders.png "Папки mipmap")

::: zone-end
::: zone pivot="windows"

[![Папки mipmap](hello-android-deepdive-images/xs/07-mipmap-folders-sml.png)](hello-android-deepdive-images/xs/07-mipmap-folders.png#lightbox)

::: zone-end

Система Android выбирает значок с подходящей плотностью:

[![Значки с подходящей плотностью](hello-android-deepdive-images/07-appropriate-density-sml.png)](hello-android-deepdive-images/07-appropriate-density.png#lightbox)

### <a name="generate-custom-icons"></a>Создание пользовательских значков

Не у всех есть конструктор для создания пользовательских значков и изображений для средства запуска приложения. Ниже представлен ряд альтернативных средств для создания собственных изображений:

::: zone pivot="windows"

- [Android Asset Studio](https://romannurik.github.io/AndroidAssetStudio/index.html) &ndash; веб-средство на основе браузера для создания любых значков Android со ссылками на другие полезные средства, предоставляемые сообществом. Лучше всего работает в Google Chrome.

- Visual Studio &ndash; создать простой набор значков для приложения можно непосредственно в интегрированной среде разработки.

- [Fiverr](https://www.fiverr.com/) &ndash; воспользуйтесь услугами одного из дизайнеров по созданию набора значков по цене от 5 долл. США. Результат может быть разным, однако это хороший ресурс, если вам нужно создать значки максимально быстро.

::: zone-end
::: zone pivot="macos"

- [Android Asset Studio](https://romannurik.github.io/AndroidAssetStudio/index.html) &ndash; веб-средство на основе браузера для создания любых значков Android со ссылками на другие полезные средства, предоставляемые сообществом. Лучше всего работает в Google Chrome.

- [Pixelmator](https://www.pixelmator.com/) &ndash; универсальный редактор изображений для Mac, который стоит приблизительно 30 долл. США.

- [Fiverr](https://www.fiverr.com/) &ndash; воспользуйтесь услугами одного из дизайнеров по созданию набора значков по цене от 5 долл. США. Результат может быть разным, однако это хороший ресурс, если вам нужно создать значки максимально быстро.

::: zone-end

Дополнительные сведения о размерах значков и требованиях к ним см. в руководстве по [ресурсам Android](~/android/app-fundamentals/resources-in-android/index.md).

::: zone pivot="macos"

### <a name="adding-google-play-services-packages"></a>Добавление пакетов Сервисов Google Play

_Сервисы Google Play_ — это набор дополнительных библиотек, которые позволяют разработчикам Android использовать новейшие возможности, предоставляемые Google, такие как Google Карты, Google Cloud Messaging и выставление счетов в приложении.
Ранее привязки ко всем библиотекам Сервисов Google Play предоставлялись Xamarin в виде одного пакета. Начиная с Visual Studio для Mac доступно новое диалоговое окно проекта для выбора пакетов Сервисов Google Play, которые необходимо включить в приложение.

Чтобы добавить одну или несколько библиотек Сервисов Google Play, в дереве проекта щелкните правой кнопкой мыши узел **Пакеты** и выберите команду **Добавить службу Google Play...** :

[![Добавить службу Google Play](hello-android-deepdive-images/xs/08-add-google-play-services-sml.png)](hello-android-deepdive-images/xs/08-add-google-play-services.png#lightbox)

Когда появится диалоговое окно **Добавить службы Google Play**, выберите пакеты (NuGet), которые нужно добавить в проект:

[![Выбор пакетов](hello-android-deepdive-images/xs/09-add-dialog-sml.png)](hello-android-deepdive-images/xs/09-add-dialog.png#lightbox)

Когда вы выбираете службу и нажимаете **Добавить пакет**, Visual Studio для Mac скачивает и устанавливает выбранный пакет, а также все необходимые зависимые пакеты Сервисов Google Play. В некоторых случаях может появиться диалоговое окно **Принятие условий лицензионного соглашения**, в котором нужно нажать кнопку **Принимаю**, прежде чем пакеты будут установлены:

[![Принятие условий лицензионного соглашения](hello-android-deepdive-images/xs/10-license-acceptance-sml.png)](hello-android-deepdive-images/xs/10-license-acceptance.png#lightbox)

::: zone-end

## <a name="summary"></a>Сводка

Поздравляем! Теперь у вас должно быть ясное понимание того, из каких компонентов состоит приложение Xamarin.Android и какие средства требуются для его создания.

В следующем учебнике из серии _Начало работы_ вы расширите возможности приложения, добавив несколько экранов, и изучите более сложные понятия и особенности архитектуры Android.
