---
title: Привет, Android (несколько экранов). Подробные сведения
description: В этом руководстве из двух частей в базовое предложение Phoneword (созданное в руководстве по началу работы с Android) добавляется функционал для работы со вторым экраном. Попутно вводятся сведения об основных стандартных блоках приложения Android. Здесь также приводится более подробная информация об архитектуре Android, позволяющая лучше понять структуру и функциональные возможности приложения Android.
ms.topic: quickstart
ms.prod: xamarin
ms.assetid: E4150036-7760-4023-BD33-B7BDE7B7AF5B
ms.technology: xamarin-android
author: conceptdev
ms.author: crdun
ms.date: 10/05/2018
ms.openlocfilehash: 3eee66032a33e66d3a6a22ca43cb931fbd59888f
ms.sourcegitcommit: e268fd44422d0bbc7c944a678e2cc633a0493122
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/25/2018
ms.locfileid: "50122989"
---
# <a name="hello-android-multiscreen-deep-dive"></a>Привет, Android (несколько экранов). Подробные сведения

_В этом руководстве из двух частей описано, как добавить функции для работы со вторым экраном в базовое предложение Phoneword (см. в руководство по началу работы с Android). Попутно вводятся сведения об основных стандартных блоках приложения Android. Здесь также приводится подробная информация об архитектуре Android с описанием структуры и возможностей приложений Android._

В [кратком руководстве "Привет, Android" (несколько экранов)](~/android/get-started/hello-android-multiscreen/hello-android-multiscreen-quickstart.md) вы создали и запустили первое приложение Xamarin.Android с несколькими экранами.

В этом руководстве рассматривается более сложная архитектура Android. Здесь объясняется навигация с помощью объектов *Intent* и рассматриваются возможности аппаратной навигации Android. По мере формирования более целостного представления о связи приложения с операционной системой и другими приложениями вводятся сведения о новых дополнениях к приложению Phoneword.

## <a name="android-architecture-basics"></a>Основы архитектуры Android

В статье [Привет, Android. Подробные сведения](~/android/get-started/hello-android/hello-android-deepdive.md) вы узнали, что приложения Android являются уникальными программами из-за отсутствия единой точки входа. Вместо них операционная система (или другое приложение) запускает одно из зарегистрированных действий приложения, которое, в свою очередь, запускает процесс для приложения. Изучив этот материал об архитектуре Android, вы будете лучше понимать структуру приложений Android, основанную на стандартных блоках приложений Android.

### <a name="android-application-building-blocks"></a>Блоки приложения Android

Приложение Android состоит из коллекции специальных классов Android, называемых *блоками приложения*, которые объединяются с любым числом ресурсов приложения, — изображениями, темами, вспомогательными классами и т. д. &ndash; контролируемых XML-файлом, называемым *манифестом Android*.

Блоки приложения формируют основу приложений Android, так как они позволяют выполнять задачи, обычно неразрешимые с помощью стандартного класса. Двумя самыми важными являются _действия_ и _службы_.

- **Действие.** Действие соответствует экрану с пользовательским интерфейсом и концептуально схоже с веб-страницей в веб-приложении. Например, в приложении канала новостей экран входа будет первым действием, прокручиваемый список элементов новостей будет вторым действием, а страница сведений для каждого элемента будет третьим действием. Дополнительные сведения о действиях см. в руководстве [Жизненный цикл действия](~/android/app-fundamentals/activity-lifecycle/index.md).

- **Служба.** Службы Android поддерживают действия тем, что принимают длительно выполняемые задачи и запускают их в фоновом режиме. Службы не имеют пользовательского интерфейса и используются для обработки задач, не зависящих от экрана. Например, это может быть воспроизведение песни в фоне или передача фотографий на сервер. Дополнительные сведения о службах см. в руководствах [Создание служб](~/android/app-fundamentals/services/index.md) и [Службы Android](~/android/app-fundamentals/services/index.md).

Приложение Android не может использовать все типы блоков и часто имеет несколько блоков одного типа. Например, приложение Phoneword из [краткого руководства "Привет, Android"](~/android/get-started/hello-android/hello-android-quickstart.md) состояло только из одного действия (экран) и нескольких файлов ресурсов. В простом приложении проигрывателя музыки может быть несколько действий и служба для воспроизведения музыки во время работы приложения в фоновом режиме.

### <a name="intents"></a>Объекты Intent (намерение)

Следующим базовым понятием в приложениях Android является объект *Intent*.
В основу Android положен *принцип предоставления минимальных прав* &ndash; приложения получают доступ только к блокам, которые требуются им для работы, и имеют ограниченный доступ к блокам, формирующим операционную систему или другие приложения. Аналогично, блоки являются *слабосвязанными* &ndash; они располагают незначительными сведениями об ограниченном доступе к другим блокам (даже к блокам, являющимся частью того же приложения).

Для обмена данными блоки приложения отправляют туда и обратно асинхронные сообщения, называемые объектами *Intent*. Объекты Intent содержат сведения о принимающем блоке и иногда некоторые данные. Объект Intent, отправленный из одного компонента приложения, запускает какое-то событие в другом компоненте приложения, что приводит к привязке двух компонентов и их последующему взаимодействию. Отправляя объекты Intent туда и обратно, можно получить блоки для координации сложных действий, например запуска приложения камеры для записи и сохранения, сбора сведений о расположении или переходе с одного экрана на следующий.

### <a name="androidmanifestxml"></a>AndroidManifest.XML

Блок, добавляемый в приложение, регистрируется с помощью специального XML-файла, называемого **манифестом Android**. Манифест отслеживает все блоки приложения в приложении, а также требования к версии, разрешения и связанные библиотеки &ndash; все, что необходимо знать операционной системе для запуска приложения. **Манифест Android** также работает с действиями и объектами Intent, чтобы контролировать, какие действия подходят для данного компонента действия. Эти дополнительные возможности манифеста Android рассматриваются в руководстве [Работа с манифестом Android](~/android/platform/android-manifest.md).

В версии приложения Phoneword с одним экраном наряду с дополнительными ресурсами, такими как значки, использовалось только одно действие, одна цель и файл `AndroidManifest.xml`. В версию приложения Phoneword с несколькими экранами было добавлено дополнительное действие. Оно было запущено из первого действия с помощью объекта Intent. В следующем разделе более подробно рассматривается использование объектов Intent для создания навигации в приложениях Android.

## <a name="android-navigation"></a>Навигация в Android

Для перехода между экранами использовались объекты Intent. Пришло время углубиться в этот код, чтобы увидеть, как работают объекты Intent, и понять их роль в навигации в Android.

### <a name="launching-a-second-activity-with-an-intent"></a>Запуск второго действия с помощью объекта Intent

В приложении Phoneword объект Intent использовался для запуска второго экрана (действия). Начните с создания объекта Intent, передачи текущего *контекста* (`this`, ссылающегося на текущий **контекст**) и типа блока приложения, который вы ищете (`TranslationHistoryActivity`):

```csharp
Intent intent = new Intent(this, typeof(TranslationHistoryActivity));
```

**Контекст** представляет собой интерфейс для общих сведений о среде приложений &ndash; он позволяет созданным объектам быть в курсе работы приложения. Если считать объект Intent сообщением, вы указываете имя получателя сообщения (`TranslationHistoryActivity`) и адрес получателя (`Context`).

В Android можно присоединять простые данные к объекту Intent (сложные данные обрабатываются по-другому). В примере приложения Phoneword `PutStringArrayExtra` используется для присоединения списка номеров телефонов к объекту Intent, и `StartActivity` вызывается в получателе объекта Intent. Завершенный код выглядит следующим образом:

```csharp
translationHistoryButton.Click += (sender, e) =>
{
    var intent = new Intent(this, typeof(TranslationHistoryActivity));
    intent.PutStringArrayListExtra("phone_numbers", _phoneNumbers);
    StartActivity(intent);
};
```

## <a name="additional-concepts-introduced-in-phoneword"></a>Дополнительные понятия, представленные в Phoneword

В приложении Phoneword представлено несколько понятий, не охваченных этим руководством. В их число входят следующие:

**Строковые ресурсы** &ndash; в приложении Phoneword для элемента `TranslationHistoryButton` был задан текст `"@string/translationHistory"`. Синтаксис `@string` означает, что строковое значение хранится в _файле строковых ресурсов_ **Strings.xml**. В файл **Strings.xml** было добавлено следующее значение для строки `translationHistory`:

```xml
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="translationHistory">Call History</string>
</resources>
```

Дополнительные сведения о строковых ресурсах и других ресурсах Android см. в [руководстве по ресурсам Android](~/android/app-fundamentals/resources-in-android/index.md).

**ListView и ArrayAdapter** &ndash; элемент управления _ListView_ является компонентом пользовательского интерфейса, который предоставляет простой способ для представления прокручиваемого списка строк. Экземпляру `ListView` требуется _адаптер_, позволяющий заполнять его данными из представлений строк. Для заполнения пользовательского интерфейса `TranslationHistoryActivity` использовалась следующая строка кода:

```csharp
this.ListAdapter = new ArrayAdapter<string>(this, Android.Resource.Layout.SimpleListItem1, phoneNumbers);
```

ListView и адаптеры выходят за рамки данного документа, но рассматриваются в исчерпывающем руководстве по [ListView и адаптерам](~/android/user-interface/layouts/list-view/index.md).
Вруководстве по [заполнению ListView данными](~/android/user-interface/layouts/list-view/populating.md) описано, как использовать встроенные классы `ListActivity` и `ArrayAdapter` для создания и заполнения `ListView` без определения пользовательского макета, как это сделано в примере приложения Phoneword.

## <a name="summary"></a>Сводка

Поздравляем! Вы создали свое первое приложение Android с несколькими экранами! В этом руководстве были представлены *стандартные блоки приложения Android* и *объекты Intent*, которые использовались для создания приложения Android с несколькими экранами. Теперь у вас есть прочные знания, необходимые для разработки приложений Xamarin.Android.

Далее вы узнаете, как создавать кроссплатформенные приложения с помощью Xamarin — см. [руководства по созданию кроссплатформенных приложений](~/cross-platform/app-fundamentals/building-cross-platform-applications/index.md).
