---
title: Упаковка приложений Wear
ms.prod: xamarin
ms.assetid: E32DD855-78DD-46F8-B234-4EAC0756BDA2
ms.technology: xamarin-android
author: conceptdev
ms.author: crdun
ms.date: 02/02/2018
ms.openlocfilehash: 585c276b327a9092bdd13fa633307477017558c5
ms.sourcegitcommit: e268fd44422d0bbc7c944a678e2cc633a0493122
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/25/2018
ms.locfileid: "50104405"
---
# <a name="packaging-wear-apps"></a>Упаковка приложений Wear

Приложения Android Wear упаковываются с помощью полной Android приложения для распространения в Google Play. 

## <a name="automatic-packaging"></a>Автоматическая упаковка

Начиная с Xamarin Android 5.0, приложение Wear автоматически упакован как ресурс в приложении Handheld при создании ссылки на проект из проекта Handheld износа проект. Чтобы создать данную взаимосвязь, можно использовать следующие действия: 

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

1. Если приложение Wear уже не является частью Handheld решение, щелкните правой кнопкой мыши узел решения и выберите **Добавить > Добавить существующий проект...** .

2. Перейдите к **.csproj** файл износа приложения, выберите его и нажмите кнопку **откройте**. Проект приложения износа теперь должны быть видимыми в решении Handheld.

3. Щелкните правой кнопкой мыши **ссылки** узел и выберите **добавить ссылку**.

4. В **диспетчер ссылок** диалоговом окне износа проекта (щелкните, чтобы добавить флажок), затем нажмите кнопку enable **ОК**.

5. Изменить имя пакета для проекта одежды, чтобы он соответствовал имени пакета Handheld проекта (имя пакета можно изменить в разделе **свойства > манифеста Android**).

# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio для Mac](#tab/macos)

1. Если приложение Wear уже не является частью Handheld решение, щелкните правой кнопкой мыши узел решения и выберите **Добавить > Добавить существующий проект...** .

2. Перейдите к **.csproj** файл износа приложения, выберите его и нажмите кнопку **откройте**. Проект приложения износа теперь должны быть видимыми в решении Handheld.

3. Щелкните правой кнопкой мыши узел Handheld проекта в решение и нажмите кнопку **изменить ссылки...** .

4. В **изменить ссылки** диалоговом окне износа проекта (щелкните, чтобы добавить флажок), затем нажмите кнопку enable **ОК**.

5. Изменить имя пакета для проекта одежды, чтобы он соответствовал имени пакета Handheld проекта (имя пакета можно изменить в разделе **параметры проекта > приложение Android**).

-----


Обратите внимание, что вы получите **XA5211** ошибки, если имя пакета приложения износа не соответствует имени пакета портативные приложения. Пример:

```shell
Error XA5211: Embedded wear app package name differs from handheld 
app package name (com.companyname.mywearapp != com.companyname.myapp). (XA5211)
```

Чтобы исправить эту ошибку, измените имя пакета приложения одежды, чтобы он соответствовал имени пакета портативные приложения.

При нажатии кнопки **сборки > собрать все**, эта связь активирует автоматическая упаковка проекта одежды с основным проектом карманных ПК (Phone). Приложение Wear создается автоматически и включена как ресурс в портативных приложений.

Сборки, создающей проект приложения износа не используется в качестве ссылку на сборку в проекте карманных ПК (Phone). Вместо этого процесс построения выполняет следующие функции:

-   Проверяет, что название совпадения. 

-   XML-документ и добавляет его Handheld проект, чтобы связать ее с приложением одежды. Пример: 

    ```xml
    <!-- Handheld (Phone) Project.csproj -->
    <ProjectReference Include="..\MyWearApp\MyWearApp.csproj">
        <Project>{D80E1FEF-653B-448C-B2AA-609C74E88340}</Project>
        <Name>MyWearApp</Name>
        <IsAppExtension>True</IsAppExtension>
    </ProjectReference>
    ```

-   Добавляет приложение Wear как **необработанные** ресурсов Handheld проект. 


## <a name="manual-packaging"></a>Упаковку вручную

Можно написать Android Wear приложений в Xamarin.Android, до версии 5.0, но необходимо выполнить эти инструкции упаковку вручную распространение приложения: 

1. Убедитесь, что Носимого проектов и проектов для карманных ПК (Phone) имеют ту же версию номер и пакета имя.

2. Создание вручную Носимого проект как **выпуска** сборки.

3. Вручную добавьте выпуска **. Пакет APK** из шага (2) в **ресурсы/raw** каталоге проекта карманных ПК (Phone).

4. Вручную добавьте новый ресурс XML **Resources/xml/wearable_app_desc.xml** Handheld проекта, который ссылается на переносной **APK** на шаге (3):

    ```xml
    <wearableApp package="wearable.app.package.name">
        <versionCode>1</versionCode>
        <versionName>1.0</versionName>
        <rawPathResId>NAME_OF_APK_FROM_STEP_3</rawPathResId>
    </wearableApp>
    ```

5. Вручную добавьте `<meta-data />` элемент Handheld проект **AndroidManifest.xml** `<application>` элемент, ссылающийся на новый ресурс XML:

    ```xml
    <meta-data android:name="com.google.android.wearable.beta.app"
        android:resource="@xml/wearable_app_desc"/>
    ```

См. также веб-узла разработчиков под Android [инструкции вручную packging](https://developer.android.com/training/wearables/apps/packaging.html#PackageManually).

