---
title: Упаковка неизносных приложений
ms.prod: xamarin
ms.assetid: E32DD855-78DD-46F8-B234-4EAC0756BDA2
ms.technology: xamarin-android
author: davidortinau
ms.author: daortin
ms.date: 02/02/2018
ms.openlocfilehash: aa4a4f1ab3ae3024de2d969f9325c2efa4db48af
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73028645"
---
# <a name="packaging-wear-apps"></a>Упаковка неизносных приложений

Приложения "износ Android" упаковываются в полноценное приложение Android для распространения на Google Play. 

## <a name="automatic-packaging"></a>Автоматическая упаковка

Начиная с Xamarin Android 5,0, приложение "износ" автоматически упаковывается как ресурс в мобильном приложении при создании ссылки на проект из ручного проекта в проект "износ". Чтобы создать эту связь, можно выполнить следующие действия. 

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

1. Если приложение "износ" еще не является частью вашего карманного решения, щелкните правой кнопкой мыши узел решения и выберите **добавить > добавить существующий проект...** .

2. Перейдите к **csprojму** файлу приложения "износ", выберите его и нажмите кнопку **Открыть**. Проект "износ приложения" теперь должен отображаться в вашем карманном решении.

3. Щелкните правой кнопкой мыши узел **ссылки** и выберите команду **Добавить ссылку**.

4. В диалоговом окне **Диспетчер ссылок** включите проект "износ" (щелкните, чтобы добавить галочку), а затем нажмите кнопку **ОК**.

5. Измените имя пакета для проекта "износ", чтобы оно совпадало с именем пакета ручного проекта (имя пакета можно изменить в **свойствах > манифесте Android**).

# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio для Mac](#tab/macos)

1. Если приложение "износ" еще не является частью вашего карманного решения, щелкните правой кнопкой мыши узел решения и выберите **добавить > добавить существующий проект...** .

2. Перейдите к **csprojму** файлу приложения "износ", выберите его и нажмите кнопку **Открыть**. Проект "износ приложения" теперь должен отображаться в вашем карманном решении.

3. Щелкните правой кнопкой мыши узел проекта Palm в решении и выберите пункт **изменить ссылки.** ...

4. В диалоговом окне **изменение ссылок** включите проект "износ" (щелкните, чтобы добавить галочку), а затем нажмите кнопку **ОК**.

5. Измените имя пакета для проекта "износ" так, чтобы оно совпадало с именем пакета ручного проекта (имя пакета можно изменить в разделе " **Параметры проекта > приложение Android**").

-----

Обратите внимание, что вы получите ошибку **XA5211** , если имя пакета приложения "износ" не соответствует имени пакета карманного приложения. Пример:

```shell
Error XA5211: Embedded wear app package name differs from handheld 
app package name (com.companyname.mywearapp != com.companyname.myapp). (XA5211)
```

Чтобы исправить эту ошибку, измените имя пакета приложения "износ" так, чтобы оно совпадало с именем пакета карманного приложения.

Если щелкнуть **сборка > собрать все**, это сопоставление активирует автоматический упаковку проекта по износу в главный карманный (телефонный) проект. Приложение "износ" автоматически создается и включается в качестве ресурса в приложение для карманного ПК.

Сборка, создаваемая проектом приложения "износ", не используется в качестве ссылки на сборку в наладонном (телефоне) проекте. Вместо этого процесс сборки выполняет следующие действия:

- Проверяет совпадение имен пакетов. 

- Создает XML и добавляет его в проект карманного приложения, чтобы связать его с приложением "износ". Пример: 

    ```xml
    <!-- Handheld (Phone) Project.csproj -->
    <ProjectReference Include="..\MyWearApp\MyWearApp.csproj">
        <Project>{D80E1FEF-653B-448C-B2AA-609C74E88340}</Project>
        <Name>MyWearApp</Name>
        <IsAppExtension>True</IsAppExtension>
    </ProjectReference>
    ```

- Добавляет приложение "износ" в качестве **необработанного** ресурса в ручной проект. 

## <a name="manual-packaging"></a>Ручная упаковка

Приложения "износ Android" можно создавать в Xamarin. Android до версии 5,0, но для распространения приложения необходимо выполнить следующие инструкции упаковки вручную: 

1. Убедитесь, что проект носимого пользователем и наладонные (телефоны) проекты имеют одинаковый номер версии и имя пакета.

2. Вручную создайте проект носимого пользователем в качестве сборки **выпуска** .

3. Добавьте выпуск вручную **. APK** из шага (2) в каталог **Resources/RAW** для наладонного (телефонного) проекта.

4. Вручную добавьте новые ресурсы XML-ресурсов **/XML/wearable_app_desc. XML** в ручном проекте, который ссылается на носимого пользователем **apk** из шага (3):

    ```xml
    <wearableApp package="wearable.app.package.name">
        <versionCode>1</versionCode>
        <versionName>1.0</versionName>
        <rawPathResId>NAME_OF_APK_FROM_STEP_3</rawPathResId>
    </wearableApp>
    ```

5. Вручную добавьте элемент `<meta-data />` в элемент `<application>` **AndroidManifest. XML** ручного проекта, который ссылается на новый ресурс XML:

    ```xml
    <meta-data android:name="com.google.android.wearable.beta.app"
        android:resource="@xml/wearable_app_desc"/>
    ```

См. также [руководство по паккгингию](https://developer.android.com/training/wearables/apps/packaging.html#PackageManually)сайта разработчика Android.
