---
title: Упаковка неизносных приложений
description: В этой статье объясняется, как упаковать приложения "износ Android".
ms.prod: xamarin
ms.assetid: E32DD855-78DD-46F8-B234-4EAC0756BDA2
ms.technology: xamarin-android
author: davidortinau
ms.author: daortin
ms.date: 02/02/2018
ms.openlocfilehash: 3263bfd9cea184a7bfbb29099abe2f1b3deb4126
ms.sourcegitcommit: 4e399f6fa72993b9580d41b93050be935544ffaa
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/29/2020
ms.locfileid: "91458060"
---
# <a name="packaging-wear-apps"></a>Упаковка неизносных приложений

> [!WARNING]
> Следующие документы и образцы проектов могут больше не поддерживаться.
> Начиная с [Xamarin. Android 11,1][xa-11.1], автоматическая упаковка приложения "износ Android" в приложении Android Palm больше не поддерживается. Вместо этого рекомендуется распространять приложения "износ Android" как [автономные приложения][standalone] .

Приложения Android износа 1,0 упаковываются в полноценное приложение Android для распространения на Google Play.

Приложения Android износа 2,0 можно отправлять в Google Play как [автономные приложения][standalone].

[xa-11.1]: /xamarin/android/release-notes/11/11.1
[standalone]: https://developer.android.com/training/wearables/apps/standalone-apps

## <a name="automatic-packaging"></a>Автоматическая упаковка

Начиная с Xamarin Android 5,0, приложение "износ" автоматически упаковывается как ресурс в мобильном приложении при создании ссылки на проект из ручного проекта в проект "износ". Чтобы создать эту связь, можно выполнить следующие действия. 

# <a name="visual-studio"></a>[Visual Studio](#tab/windows)

1. Если приложение "износ" еще не является частью вашего карманного решения, щелкните правой кнопкой мыши узел решения и выберите **добавить > добавить существующий проект...**.

2. Перейдите к **csprojму** файлу приложения "износ", выберите его и нажмите кнопку **Открыть**. Проект "износ приложения" теперь должен отображаться в вашем карманном решении.

3. Щелкните правой кнопкой мыши узел **ссылки** и выберите команду **Добавить ссылку**.

4. В диалоговом окне **Диспетчер ссылок** включите проект "износ" (щелкните, чтобы добавить галочку), а затем нажмите кнопку **ОК**.

5. Измените имя пакета для проекта "износ", чтобы оно совпадало с именем пакета ручного проекта (имя пакета можно изменить в **свойствах > манифесте Android**).

# <a name="visual-studio-for-mac"></a>[Visual Studio для Mac](#tab/macos)

1. Если приложение "износ" еще не является частью вашего карманного решения, щелкните правой кнопкой мыши узел решения и выберите **добавить > добавить существующий проект...**.

2. Перейдите к **csprojму** файлу приложения "износ", выберите его и нажмите кнопку **Открыть**. Проект "износ приложения" теперь должен отображаться в вашем карманном решении.

3. Щелкните правой кнопкой мыши узел проекта Palm в решении и выберите пункт **изменить ссылки.**...

4. В диалоговом окне **изменение ссылок** включите проект "износ" (щелкните, чтобы добавить галочку), а затем нажмите кнопку **ОК**.

5. Измените имя пакета для проекта "износ" так, чтобы оно совпадало с именем пакета ручного проекта (имя пакета можно изменить в разделе " **Параметры проекта > приложение Android**").

-----

Обратите внимание, что вы получите ошибку **XA5211** , если имя пакета приложения "износ" не соответствует имени пакета карманного приложения. Пример:

```shell
Error XA5211: Embedded wear app package name differs from handheld 
app package name (com.companyname.mywearapp != com.companyname.myapp). (XA5211)
```

Чтобы исправить эту ошибку, измените имя пакета приложения "износ" так, чтобы оно совпадало с именем пакета карманного приложения.

Если щелкнуть **сборка > собрать все**, это сопоставление активирует автоматический упаковку проекта по износу в главный карманный (телефонный) проект. Приложение "износ" автоматически создается и включается в качестве ресурса в приложение для карманного ПК.

Сборка, создаваемая проектом приложения "износ", не используется в качестве ссылки на сборку в наладонном (телефоне) проекте. Вместо этого процесс сборки выполняет следующие действия:

- Проверяет совпадение имен пакетов. 

- Создает XML и добавляет его в проект карманного приложения, чтобы связать его с приложением "износ". Пример: 

    ```xml
    <!-- Handheld (Phone) Project.csproj -->
    <ProjectReference Include="..\MyWearApp\MyWearApp.csproj">
        <Project>{D80E1FEF-653B-448C-B2AA-609C74E88340}</Project>
        <Name>MyWearApp</Name>
        <IsAppExtension>True</IsAppExtension>
    </ProjectReference>
    ```

- Добавляет приложение "износ" в качестве **необработанного** ресурса в ручной проект. 

## <a name="manual-packaging"></a>Ручная упаковка

Приложения "износ Android" можно создавать в Xamarin. Android до версии 5,0, но для распространения приложения необходимо выполнить следующие инструкции упаковки вручную: 

1. Убедитесь, что проект носимого пользователем и наладонные (телефоны) проекты имеют одинаковый номер версии и имя пакета.

2. Вручную создайте проект носимого пользователем в качестве сборки **выпуска** .

3. Добавьте выпуск вручную **. APK** из шага (2) в каталог **Resources/RAW** для наладонного (телефонного) проекта.

4. Вручную добавьте новые ресурсы XML-ресурсов **/XML/wearable_app_desc.xml** в ручном проекте, который ссылается на **apk** носимого пользователем из шага (3):

    ```xml
    <wearableApp package="wearable.app.package.name">
        <versionCode>1</versionCode>
        <versionName>1.0</versionName>
        <rawPathResId>NAME_OF_APK_FROM_STEP_3</rawPathResId>
    </wearableApp>
    ```

5. Вручную добавьте `<meta-data />` элемент в элементAndroidManifest.xmlручного проекта **AndroidManifest.xml** `<application>` , который ссылается на новый ресурс XML:

    ```xml
    <meta-data android:name="com.google.android.wearable.beta.app"
        android:resource="@xml/wearable_app_desc"/>
    ```

См. также [руководство по паккгингию](https://developer.android.com/training/wearables/apps/packaging.html#PackageManually)сайта разработчика Android.