---
title: ListView для Xamarin. Android и жизненный цикл действия
ms.prod: xamarin
ms.assetid: 40840D03-6074-30A2-74DA-3664703E3367
ms.technology: xamarin-android
author: davidortinau
ms.author: daortin
ms.date: 02/06/2018
ms.openlocfilehash: a4ebda89ad3bdcb663dc9d7cd513e45760163c34
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73028939"
---
# <a name="xamarinandroid-listview-and-the-activity-lifecycle"></a>ListView для Xamarin. Android и жизненный цикл действия

Действия проходят через определенные состояния при выполнении приложения, такие как запуск, запуск, приостановка и остановка. Дополнительные сведения и конкретные рекомендации по обработке переходов состояний см. в [руководстве по жизненному циклу действий](~/android/app-fundamentals/activity-lifecycle/index.md).
Важно понимать жизненный цикл действия и поместить `ListView` код в нужные расположения.

Все примеры в этом документе выполняют задачи установки в методе `OnCreate` действия и (при необходимости) выполняют "уничтожение" в `OnDestroy`. В примерах обычно используются небольшие наборы данных, которые не изменяются, поэтому повторная загрузка данных является ненужной.

Однако если данные часто изменяются или используют большой объем памяти, может быть целесообразно использовать разные методы жизненного цикла для заполнения и обновления `ListView`. Например, если базовые данные постоянно изменяются (или затрагиваются обновлениями других действий), то создание адаптера в `OnStart` или `OnResume` обеспечит отображение последних данных при каждом отображении действия.

Если адаптер использует такие ресурсы, как память, или управляемый курсор, не забудьте освободить эти ресурсы в методе, где они были созданы (например, объекты, созданные в `OnStart`, можно удалять из `OnStop`).

## <a name="configuration-changes"></a>Изменения конфигурации

Важно помнить, что изменения конфигурации &ndash; особенное вращение экрана и видимость клавиатуры &ndash; могут привести к уничтожению и повторному созданию текущего действия (если не указано иное с помощью атрибута `ConfigurationChanges`). Это означает, что при нормальных условиях вращение устройства приведет к повторному созданию `ListView` и `Adapter` и (если только вы не записали код в `OnPause` и `OnResume`) состояние прокрутки и выбор строк будут потеряны.

Следующий атрибут предотвращает уничтожение и создание действия в результате изменений конфигурации:

```csharp
[Activity(ConfigurationChanges="keyboardHidden|orientation")]
```

Затем действие должно переопределить `OnConfigurationChanged`, чтобы ответить на эти изменения соответствующим образом. Дополнительные сведения об обработке изменений конфигурации см. в документации.
