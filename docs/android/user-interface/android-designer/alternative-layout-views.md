---
title: Представления альтернативного макета
description: В этом разделе объясняется, как можно определять версии макетов с помощью квалификаторов ресурсов. Например, может существовать версия макета, которая используется только в альбомной ориентации и версии макета, предназначенной только для портретного режима.
ms.prod: xamarin
ms.assetid: 5EBF51FC-9048-F0CF-624A-D8782A91C1FD
ms.technology: xamarin-android
author: conceptdev
ms.author: crdun
ms.date: 07/25/2018
ms.openlocfilehash: c872baa99496352a1934d10356a1001b309aa63e
ms.sourcegitcommit: 9bfedf07940dad7270db86767eb2cc4007f2a59f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/21/2019
ms.locfileid: "70757405"
---
# <a name="alternative-layout-views"></a>Альтернативные представления макета

_В этом разделе объясняется, как можно использовать разметки версий с помощью квалификаторов ресурсов. Например, создание версии макета, используемой только в альбомной ориентации, и версии макета, предназначенной только для портретного режима._

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

## <a name="creating-alternative-layouts"></a>Создание альтернативных макетов

Если щелкнуть значок **альтернативного представления макета** (слева от **устройства**), откроется область предварительного просмотра, в которой будут перечислены альтернативные макеты, доступные в проекте. Если альтернативные макеты отсутствуют, будет представлено представление **по умолчанию** : 

[![Панель "Альтернативное представление макета"](alternative-layout-views-images/vs/01-alt-layout-view-pane-sml.png "Панель "Альтернативное представление макета"")](alternative-layout-views-images/vs/01-alt-layout-view-pane.png#lightbox)

Если щелкнуть зеленый знак «плюс» рядом с **новой версией**, откроется диалоговое окно « **Создание варианта макета** », в котором можно выбрать квалификаторы ресурсов для этого варианта макета: 

[![Создать вариант макета](alternative-layout-views-images/vs/02-create-layout-variation-sml.png "Создать вариант макета")](alternative-layout-views-images/vs/02-create-layout-variation.png#lightbox)

В следующем примере квалификатор ресурса для **ориентации экрана** установлен в **альбомную**ориентацию, а **Размер экрана** изменяется на **крупный**. При этом создается новая версия макета с именем **Large-Land**:

[![Большой вариант](alternative-layout-views-images/vs/03-large-land-sml.png "Большой вариант")](alternative-layout-views-images/vs/03-large-land.png#lightbox)

Обратите внимание, что в области Предварительный просмотр слева отображаются результаты выбора квалификаторов ресурсов. При нажатии кнопки **Добавить** создается альтернативный макет, и конструктор переключается в этот макет. На панели предварительного просмотра в **альтернативном представлении макета** указывается, какой макет загружается в конструктор через небольшой правый указатель, как показано на следующем снимке экрана: 

[![Индикатор загруженного макета](alternative-layout-views-images/vs/04-new-layout-sml.png "Индикатор загруженного макета")](alternative-layout-views-images/vs/04-new-layout.png#lightbox)

## <a name="editing-alternative-layouts"></a>Изменение альтернативных макетов

При создании альтернативных макетов часто желательно внести одно изменение, которое будет применяться ко всем разветвленным версиям макета. Например, может потребоваться изменить текст кнопки на желтый во всех макетах. Если у вас есть большое количество макетов и вам нужно распространить одно изменение на все версии, Обслуживание может быстро стать нетрудоемким и подверженным ошибкам.

Чтобы упростить обслуживание нескольких версий макета, конструктор предоставляет режим **множественного редактирования** , который распространяет изменения в одном или нескольких макетах. При наличии нескольких макетов отображается значок с **несколькими правками** : 

[![Значок множественного редактирования](alternative-layout-views-images/vs/05-multi-layout-icon-sml.png "Значок множественного редактирования")](alternative-layout-views-images/vs/05-multi-layout-icon.png#lightbox)

Если щелкнуть значок **множественного редактирования** , отобразятся линии, указывающие, что макеты связаны (как показано ниже); то есть при внесении изменений в один макет это изменение распространяется на все связанные макеты. Вы можете удалить связь для всех макетов, щелкнув значок в кружке, который указан на следующем снимке экрана: 

[![Удалить связь всех макетов](alternative-layout-views-images/vs/06-multi-linked-sml.png "Удалить связь всех макетов")](alternative-layout-views-images/vs/06-multi-linked.png#lightbox)

При наличии более двух макетов можно выборочно переключать кнопку Edit (изменить) слева от каждого предварительного просмотра макета, чтобы определить, какие макеты связаны друг с другом. Например, если вы хотите внести одно изменение, которое распространяется на первый и последний из трех макетов, сначала необходимо удалить связь с посредним макетом, как показано ниже: 

[![Отменить связь с промежуточным макетом](alternative-layout-views-images/vs/07-unlink-middle-layout-sml.png "Отменить связь с промежуточным макетом")](alternative-layout-views-images/vs/07-unlink-middle-layout.png#lightbox)

В этом примере изменения, внесенные в макет **по умолчанию** или в **длинном** формате, будут распространяться на другой макет, но не в макет **большой земли** .

### <a name="multi-edit-example"></a>Пример с несколькими правками 

Как правило, при внесении изменений в один макет эти же изменения распространяются на все остальные связанные макеты. Например, Добавление нового мини-приложения `TextView` в макет **по умолчанию** и изменение его текстовой строки на `Portrait` приведет к тому же изменению для всех связанных макетов. Вот как он выглядит в макете **по умолчанию** : 

[![Добавить TextView](alternative-layout-views-images/vs/08-add-textview-sml.png "Добавить TextView")](alternative-layout-views-images/vs/08-add-textview.png#lightbox)

@No__t_0 также добавляется в представление макета **Large-Land** , так как оно связано с макетом **по умолчанию** : 

[![Альбомная TextView](alternative-layout-views-images/vs/09-landscape-textview-sml.png "Альбомная TextView")](alternative-layout-views-images/vs/09-landscape-textview.png#lightbox)

Но что делать, если вы хотите внести локальное изменение в один макет (то есть вы не хотите, чтобы изменения распространялись на любой другой макет)? Для этого необходимо удалить связь макета, который необходимо изменить, прежде чем изменять его, как описано далее. 

### <a name="making-local-changes"></a>Внесение локальных изменений 

Предположим, что в обоих макетах есть добавленные `TextView`, но мы также хотим изменить текстовую строку в макете **больших участков** на `Landscape`, а не `Portrait`. Если внести это изменение в **большой** объем, пока оба макета связаны, изменение вернется к макету **по умолчанию** . Поэтому сначала необходимо удалить связь между двумя макетами, прежде чем вносить изменения. Когда мы изменим текст в **большом** объеме на `Landscape`, конструктор помечает это изменение красным кадром, чтобы указать, что изменение является локальным для **крупного** макета и *не* распространяется обратно в макет **по умолчанию** . 

[![Локальное изменение](alternative-layout-views-images/vs/10-local-change-sml.png "Локальное изменение")](alternative-layout-views-images/vs/10-local-change.png#lightbox)

Если щелкнуть макет **по умолчанию** для его просмотра, то `TextView` текстовая строка по-прежнему будет иметь значение `Portrait`. 

## <a name="handling-conflicts"></a>Обработка конфликтов 

Если вы решили изменить цвет текста в макете **по умолчанию** на зеленый, на связанном макете появится значок предупреждения. Щелкнув этот макет, можно открыть макет, чтобы обнаружить конфликт. Мини-приложение, вызвавшее конфликт, выделяется красной рамкой, и отображается следующее сообщение: *Последние изменения вызвали конфликты в этой альтернативной структуре*. 

[![Конфликтующее изменение](alternative-layout-views-images/vs/11-conflicting-change-sml.png "Конфликтующее изменение")](alternative-layout-views-images/vs/11-conflicting-change.png#lightbox)

Для объяснения конфликта справа от мини-приложения отображается *поле с конфликтами* : 

[предупреждение ![Conflict](alternative-layout-views-images/xs/11-warning-sml.png)](alternative-layout-views-images/xs/11-warning.png#lightbox)

В поле конфликт отображается список измененных свойств и перечислены их значения. Нажатие кнопки **пропустить конфликт** применяет изменение свойства только к этому мини-приложению. Нажатие кнопки **Применить** применяет изменение свойства к этому мини-приложению, а также к мини-приложению аналога в связанном макете **по умолчанию** . Если применяются все изменения свойств, конфликт автоматически удаляется. 

### <a name="view-group-conflicts"></a>Просмотр конфликтов групп 

Изменения свойств не являются единственным источником конфликтов. Конфликты могут быть обнаружены при вставке или удалении мини-приложений. Например, если макет с **большим** расположением не связан с макетом **по умолчанию** , а `TextView` в макете **большой земли** перетаскивается и перемещается над `Button`, конструктор помечает перемещенное мини-приложение, чтобы указать на конфликт:

[![Просмотреть конфликт групп](alternative-layout-views-images/vs/12-view-group-conflict-sml.png "Просмотреть конфликт групп")](alternative-layout-views-images/vs/12-view-group-conflict.png#lightbox)

Однако на `Button` не отображается маркер. Хотя расположение `Button` изменилось, в `Button` не отображаются примененные изменения, характерные для **большой** конфигурации. 

Если `CheckBox` добавляется к макету **по умолчанию** , создается другой конфликт, а на **большом** макете отображается значок предупреждения: 

[![Конфликт флажков](alternative-layout-views-images/vs/13-checkbox-conflict-sml.png "Конфликт флажков")](alternative-layout-views-images/vs/13-checkbox-conflict.png#lightbox)

Щелчок **крупного** макета раскрывает конфликт. Отображается следующее сообщение: *Последние изменения привели к конфликтам в этой альтернативной структуре*: 

[![Конфликт Alt Layout](alternative-layout-views-images/vs/14-alt-layout-conflict-sml.png "Конфликт Alt Layout")](alternative-layout-views-images/vs/14-alt-layout-conflict.png#lightbox)

Кроме того, в поле конфликт отображается следующее сообщение:

[сообщение ![Conflict](alternative-layout-views-images/xs/15-conflict-message-sml.png)](alternative-layout-views-images/xs/15-conflict-message.png#lightbox)

Добавление `CheckBox` вызывает конфликт, так как **большая** схема имеет изменения в `LinearLayout`, содержащей его. Однако в этом случае в поле конфликт отображается мини-приложение, которое было только что вставлено в макет **по умолчанию** (`CheckBox`).

Если нажать кнопку **пропустить конфликт**, конструктор разрешит конфликт, позволяя перетащить мини-приложение, отображаемое в поле конфликт, в макет, в котором отсутствует мини-приложение (в данном случае это **большой** формат): 

[![Конфликт разрешенных групп](alternative-layout-views-images/vs/15-resolved-group-conflict-sml.png "Конфликт разрешенных групп")](alternative-layout-views-images/vs/15-resolved-group-conflict.png#lightbox)

Как показано в предыдущем примере с `Button`, `CheckBox` не имеет Красного маркера изменения, поскольку только `LinearLayout` имеет изменения, которые были применены в макете **больших участков** .

# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio для Mac](#tab/macos)

## <a name="creating-alternative-layouts"></a>Создание альтернативных макетов

Если щелкнуть значок **альтернативного представления макета** (слева от **устройства**), откроется область предварительного просмотра, в которой будут перечислены альтернативные макеты, доступные в проекте. Если альтернативные макеты отсутствуют, будет представлено представление **по умолчанию** : 

[![Alternate панели представления макета](alternative-layout-views-images/xs/01-alt-layout-view-pane-sml.png)](alternative-layout-views-images/xs/01-alt-layout-view-pane.png#lightbox)

Если щелкнуть зеленый знак «плюс» рядом с **новой версией**, откроется диалоговое окно « **Создание варианта макета** », в котором можно выбрать квалификаторы ресурсов для этого варианта макета: 

[![Create варианта макета](alternative-layout-views-images/xs/02-create-layout-variation-sml.png)](alternative-layout-views-images/xs/02-create-layout-variation.png#lightbox)

В следующем примере квалификатор ресурса для **ориентации экрана** установлен в **альбомную**ориентацию, а **Размер экрана** изменяется на **крупный**. При этом создается новая версия макета с именем **Large-Land**:

[вариант ![Large Land](alternative-layout-views-images/xs/03-large-land-sml.png)](alternative-layout-views-images/xs/03-large-land.png#lightbox)

Обратите внимание, что в области Предварительный просмотр слева отображаются результаты выбора квалификаторов ресурсов. При нажатии кнопки **Добавить** создается альтернативный макет, и конструктор переключается в этот макет. На панели предварительного просмотра в **альтернативном представлении макета** указывается, какой макет загружается в конструктор через небольшой правый указатель, как показано на следующем снимке экрана: 

[Индикатор макета ![Loaded](alternative-layout-views-images/xs/04-new-layout-sml.png)](alternative-layout-views-images/xs/04-new-layout.png#lightbox)

## <a name="editing-alternative-layouts"></a>Изменение альтернативных макетов

При создании альтернативных макетов часто желательно внести одно изменение, которое будет применяться ко всем разветвленным версиям макета. Например, может потребоваться изменить текст кнопки на желтый во всех макетах. Если у вас есть большое количество макетов и вам нужно распространить одно изменение на все версии, Обслуживание может быстро стать нетрудоемким и подверженным ошибкам.

Чтобы упростить обслуживание нескольких версий макета, конструктор предоставляет режим **множественного редактирования** , который распространяет изменения в одном или нескольких макетах. При наличии нескольких макетов отображается значок с **несколькими правками** : 

[значок изменения ![Multi](alternative-layout-views-images/xs/05-multi-layout-icon-sml.png)](alternative-layout-views-images/xs/05-multi-layout-icon.png#lightbox)

Если щелкнуть значок **множественного редактирования** , отобразятся линии, указывающие, что макеты связаны (как показано ниже); то есть при внесении изменений в один макет это изменение распространяется на все связанные макеты. Вы можете удалить связь для всех макетов, щелкнув значок в кружке, который указан на следующем снимке экрана: 

[![Unlink всех макетов](alternative-layout-views-images/xs/06a-linked-sml.png)](alternative-layout-views-images/xs/06a-linked.png#lightbox)

При наличии более двух макетов можно выборочно переключать кнопку Edit (изменить) слева от каждого предварительного просмотра макета, чтобы определить, какие макеты связаны друг с другом. Например, если вы хотите внести одно изменение, которое распространяется на первый и последний из трех макетов, сначала необходимо удалить связь с посредним макетом, как показано ниже: 

[![Unlink середина макета](alternative-layout-views-images/xs/06b-multi-linked-sml.png)](alternative-layout-views-images/xs/06b-multi-linked.png#lightbox)

В этом примере изменения, внесенные в макет **по умолчанию** или в **длинном** формате, будут распространяться на другой макет, но не в макет **большой земли** . 

### <a name="multi-edit-example"></a>Пример с несколькими правками 

Как правило, при внесении изменений в один макет эти же изменения распространяются на все остальные связанные макеты. Например, Добавление нового мини-приложения `TextView` в макет **по умолчанию** и изменение его текстовой строки на `Portrait` приведет к тому же изменению для всех связанных макетов. Вот как он выглядит в макете **по умолчанию** : 

[![Add TextView](alternative-layout-views-images/xs/07-add-textview-sml.png)](alternative-layout-views-images/xs/07-add-textview.png#lightbox)

@No__t_0 также добавляется в представление макета **Large-Land** , так как оно связано с макетом **по умолчанию** : 

[![Landscape TextView](alternative-layout-views-images/xs/08-landscape-textview-sml.png)](alternative-layout-views-images/xs/08-landscape-textview.png#lightbox)

Но что делать, если вы хотите внести локальное изменение в один макет (то есть вы не хотите, чтобы изменения распространялись на любой другой макет)? Для этого необходимо удалить связь макета, который необходимо изменить, прежде чем изменять его, как описано далее. 

### <a name="making-local-changes"></a>Внесение локальных изменений 

Предположим, что в обоих макетах есть добавленные `TextView`, но мы также хотим изменить текстовую строку в макете **больших участков** на `Landscape`, а не `Portrait`. Если внести это изменение в **большой** объем, пока оба макета связаны, изменение вернется к макету **по умолчанию** . Поэтому сначала необходимо удалить связь между двумя макетами, прежде чем вносить изменения. Когда мы изменим текст в **большом** объеме на `Landscape`, конструктор помечает это изменение красным кадром, чтобы указать, что изменение является локальным для **крупного** макета и *не* распространяется обратно в макет **по умолчанию** . 

[изменение ![Local](alternative-layout-views-images/xs/09-local-change-sml.png)](alternative-layout-views-images/xs/09-local-change.png#lightbox)

Если щелкнуть макет **по умолчанию** для его просмотра, то `TextView` текстовая строка по-прежнему будет иметь значение `Portrait`. 

## <a name="handling-conflicts"></a>Обработка конфликтов 

Если вы решили изменить цвет текста в макете **по умолчанию** на зеленый, на связанном макете появится значок предупреждения. Щелкнув этот макет, можно открыть макет, чтобы обнаружить конфликт. Мини-приложение, вызвавшее конфликт, выделяется красной рамкой, и отображается следующее сообщение: *Последние изменения вызвали конфликты в этой альтернативной структуре*. 

[изменение ![Conflicting](alternative-layout-views-images/xs/10-conflict-sml.png)](alternative-layout-views-images/xs/10-conflict.png#lightbox)

Для объяснения конфликта справа от мини-приложения отображается *поле с конфликтами* : 

[предупреждение ![Conflict](alternative-layout-views-images/xs/11-warning-sml.png)](alternative-layout-views-images/xs/11-warning.png#lightbox)

В поле конфликт отображается список измененных свойств и перечислены их значения. Нажатие кнопки **пропустить конфликт** применяет изменение свойства только к этому мини-приложению. Нажатие кнопки **Применить** применяет изменение свойства к этому мини-приложению, а также к мини-приложению аналога в связанном макете **по умолчанию** . Если применяются все изменения свойств, конфликт автоматически удаляется. 

### <a name="view-group-conflicts"></a>Просмотр конфликтов групп 

Изменения свойств не являются единственным источником конфликтов. Конфликты могут быть обнаружены при вставке или удалении мини-приложений. Например, если макет с **большим** расположением не связан с макетом **по умолчанию** , а `TextView` в макете **большой земли** перетаскивается и перемещается над `Button`, конструктор помечает перемещенное мини-приложение, чтобы указать на конфликт:

[конфликт групп ![View](alternative-layout-views-images/xs/12-view-group-conflict-sml.png)](alternative-layout-views-images/xs/12-view-group-conflict.png#lightbox)

Однако на `Button` не отображается маркер. Хотя расположение `Button` изменилось, в `Button` не отображаются примененные изменения, характерные для **большой** конфигурации. 

Если `CheckBox` добавляется к макету **по умолчанию** , создается другой конфликт, а на **большом** макете отображается значок предупреждения: 

[конфликт ![Checkbox](alternative-layout-views-images/xs/13-checkbox-conflict-sml.png)](alternative-layout-views-images/xs/13-checkbox-conflict.png#lightbox)

Щелчок **крупного** макета раскрывает конфликт. Отображается следующее сообщение: *Последние изменения привели к конфликтам в этой альтернативной структуре*. 

[конфликт макета ![Alt](alternative-layout-views-images/xs/14-alt-layout-conflict-sml.png)](alternative-layout-views-images/xs/14-alt-layout-conflict.png#lightbox)

Кроме того, в поле конфликт отображается следующее сообщение:

[сообщение ![Conflict](alternative-layout-views-images/xs/15-conflict-message-sml.png)](alternative-layout-views-images/xs/15-conflict-message.png#lightbox)

Добавление `CheckBox` вызывает конфликт, так как **большая** схема имеет изменения в `LinearLayout`, содержащей его. Однако в этом случае в поле конфликт отображается мини-приложение, которое было только что вставлено в макет **по умолчанию** (`CheckBox`).

Если нажать кнопку **пропустить конфликт**, конструктор разрешит конфликт, позволяя перетащить мини-приложение, отображаемое в поле конфликт, в макет, в котором отсутствует мини-приложение (в данном случае это **большой** формат): 

[конфликт групп ![Resolved](alternative-layout-views-images/xs/16-resolved-group-conflict-sml.png)](alternative-layout-views-images/xs/16-resolved-group-conflict.png#lightbox)

Как показано в предыдущем примере с `Button`, `CheckBox` не имеет Красного маркера изменения, поскольку только `LinearLayout` имеет изменения, которые были применены в макете **больших участков** .

-----

### <a name="conflict-persistence"></a>Сохраняемость конфликтов

Конфликты сохраняются в файле макета в виде XML-комментариев, как показано ниже:

```xml
<!-- Widget Inserted Conflict | id:__root__ | @+id/checkBox1 -->
```

Поэтому при закрытии и повторном открытии проекта все конфликты по-прежнему будут &ndash; даже те, которые были пропущены.
