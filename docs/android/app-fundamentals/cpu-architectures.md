---
title: Архитектура процессора
description: Xamarin. Android поддерживает несколько архитектур ЦП, включая 32-разрядные и 64-разрядные устройства. В этой статье объясняется, как выбрать для приложения одну или несколько архитектур ЦП, поддерживаемых Android.
ms.prod: xamarin
ms.assetid: D4BC889D-9164-49BB-9B7B-F6C4E4E109F1
ms.technology: xamarin-android
author: conceptdev
ms.author: crdun
ms.date: 05/30/2019
ms.openlocfilehash: 59047b8564db6415ea3c47d7dcb72b5d0c66d1dd
ms.sourcegitcommit: 57f815bf0024b1afe9754c0e28054fc0a53ce302
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/06/2019
ms.locfileid: "70755590"
---
# <a name="cpu-architectures"></a>Архитектура процессора

_Xamarin. Android поддерживает несколько архитектур ЦП, включая 32-разрядные и 64-разрядные устройства. В этой статье объясняется, как выбрать для приложения одну или несколько архитектур ЦП, поддерживаемых Android._

## <a name="cpu-architectures-overview"></a>Обзор архитектуры ЦП

При подготовке приложения к выпуску необходимо указать архитектуру ЦП платформы, которую поддерживает ваше приложение. Один APK-файл может содержать код для нескольких различных архитектур. Каждая коллекция кода, зависящего от архитектуры, связана с *двоичным интерфейсом приложения* (ABI). Каждый интерфейс ABI определяет, как должен взаимодействовать этот машинный код с Android во время выполнения.
Дополнительные сведения о том, как это работает, см. в разделе [устройства &amp; с несколькими ядрами Xamarin. Android](~/android/deploy-test/multicore-devices.md).

## <a name="how-to-specify-supported-architectures"></a>Указание поддерживаемых архитектур

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

Как правило, при настройке приложения для **выпуска**вы явно выбрали архитектуру (или архитектуры). Если приложение настроено для **отладки**, для параметра **использовать общую среду выполнения** и **используются параметры быстрого развертывания** , что отключает явный выбор архитектуры.

В Visual Studio щелкните правой кнопкой мыши проект в **Обозреватель решений** и выберите пункт **свойства**. На странице **Параметры Android** проверьте раздел **Свойства упаковки** и убедитесь, что параметр **использовать общую среду выполнения** отключен (отключение позволяет явно выбрать, для какой ABI требуется поддержка). Нажмите кнопку **Дополнительно** и в разделе **Поддерживаемые архитектуры**проверьте архитектуры, которые требуется поддерживать.

[![Выбор ARMEABI и ARMEABI-V7A](cpu-architectures-images/vs/01-abi-selections-sml.png)](cpu-architectures-images/vs/01-abi-selections.png#lightbox)

# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio для Mac](#tab/macos)

Как правило, при настройке приложения для **выпуска**вы явно выбрали архитектуру (или архитектуры). Если приложение настроено для **отладки**, включаются параметры **использовать совместное использование среды выполнения Mono** и **быстрое развертывание сборок** , что предотвращает выбор явной архитектуры.

В Visual Studio для Mac выберите проект на панели **решения** , щелкните значок шестеренки рядом с проектом и выберите **Параметры**. В диалоговом окне **Параметры проекта** щелкните **Сборка Android**. Перейдите на вкладку **Общие** и убедитесь, что параметр **использовать общую среду выполнения Mono** отключен (отключить этот параметр позволяет явно выбрать, для какой ABI поддерживать). Перейдите на вкладку **Дополнительно** и в разделе **Поддерживаемые ABI**проверьте ABI для архитектур, которые требуется поддерживать.

[![Выбор ARMEABI и ARMEABI-V7A](cpu-architectures-images/xs/01-abi-selections-sml.png)](cpu-architectures-images/xs/01-abi-selections.png#lightbox)

-----

Xamarin.Android поддерживает следующие варианты архитектуры:

- **ARMEABI** &ndash; Процессоры на базе ARM, которые поддерживают по крайней мере набор инструкций ARMv5TE. Обратите `armeabi` внимание, что не является потокобезопасным и не должно использоваться на устройствах с несколькими ЦП.

> [!NOTE]
> Начиная с [Xamarin. Android 9,2](https://docs.microsoft.com/xamarin/android/release-notes/9/9.2#removal-of-support-for-armeabi-cpu-architecture), `armeabi` больше не поддерживается.

- **ARMEABI — V7A** &ndash; Процессоры на базе ARM с аппаратными операциями с плавающей запятой и устройствами с несколькими ЦП (SMP). Обратите `armeabi-v7a` внимание, что машинный код не будет выполняться на устройствах ARMv5.

- **arm64 — v8a** &ndash; Процессоры на основе архитектуры 64-bit ARMv8.

- **архитектура x86** &ndash; Процессоры, поддерживающие набор инструкций x86 (или IA-32). Этот набор инструкций эквивалентен инструкциям Pentium Pro, включая MMX, SSE, SSE2 и SSE3.

- **x86_64** Процессоры, поддерживающие 64-разрядный x86 (также называемый *x64* и *AMD64*).

Для Xamarin. Android по умолчанию устанавливается значение `armeabi-v7a` для сборок **выпуска** . Этот параметр обеспечивает значительно лучшую производительность, `armeabi`чем. Если вы нацелены на платформу 64-разрядной ARM (например, в табличное размещение 9) `arm64-v8a`, выберите. Если вы развертываете приложение на устройстве x86, выберите `x86`. Если целевое устройство x86 использует архитектуру с 64-разрядным ЦП `x86_64`, выберите.

## <a name="targeting-multiple-platforms"></a>Нацеливание на несколько платформ

Чтобы ориентироваться на несколько архитектур ЦП, можно выбрать несколько интерфейсов ABI (за счет увеличения размера файла APK). Можно использовать параметр **создать один пакет (. apk) для каждого выбранного параметра ABI** (см. описание в разделе [Установка свойств упаковки](~/android/deploy-test/release-prep/index.md#Set_Packaging_Properties)), чтобы создать отдельный APK для каждой поддерживаемой архитектуры.

Вам не нужно выбирать **arm64-v8a** или **x86_64** для целевых 64-разрядных устройств. 64-разрядная поддержка не требуется для запуска приложения на 64-разрядном оборудовании. Например, в 64-разрядных устройствах ARM (например, в виде [хранилища 9](http://www.google.com/nexus/9/)) можно запускать приложения `armeabi-v7a`, настроенные для. Основное преимущество поддержки 64-разрядной версии заключается в том, чтобы предоставить приложению возможность обращаться к большему объему памяти.

> [!NOTE]
> Начиная с августа 2018 г. новые приложения должны будут использовать API уровня 26, а с августа 2019 г. будет [необходимо выпускать 64-разрядные версии приложений](https://android-developers.googleblog.com/2017/12/improving-app-security-and-performance.html) в дополнение к 32-разрядным.

## <a name="additional-information"></a>Дополнительные сведения

В некоторых ситуациях может потребоваться создать отдельный APK для каждой архитектуры (чтобы уменьшить размер APK, или потому, что приложение имеет общие библиотеки, характерные для конкретной архитектуры ЦП).
Дополнительные сведения об этом подходе см. в разделе [Build ABI-пакетов apk](~/android/deploy-test/building-apps/abi-specific-apks.md).
