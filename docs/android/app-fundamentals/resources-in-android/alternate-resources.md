---
title: Альтернативные ресурсы
ms.prod: xamarin
ms.assetid: AE5A864E-192D-475E-C731-99249C2E7D9E
ms.technology: xamarin-android
author: conceptdev
ms.author: crdun
ms.date: 03/13/2018
ms.openlocfilehash: 05c3816d0cc01beb3ed99994788b58e5f187171a
ms.sourcegitcommit: c9651cad80c2865bc628349d30e82721c01ddb4a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/03/2019
ms.locfileid: "70225776"
---
# <a name="alternate-resources"></a>Альтернативные ресурсы

Альтернативные ресурсы — это ресурсы, предназначенные для определенного устройства или настройки времени выполнения, такие как текущий язык, определенный размер экрана или плотность пикселей. Если Android может сопоставить ресурс, который более специфичен для конкретного устройства или конфигурации, чем ресурс по умолчанию, то вместо него будет использоваться этот ресурс. Если другой ресурс, совпадающий с текущей конфигурацией, не найден, будут загружены ресурсы по умолчанию. Как Android решает, какие ресурсы будут использоваться приложением, будет более подробно рассмотрено ниже в разделе расположение ресурса.

Альтернативные ресурсы организованы в виде вложенного каталога в папке resources в соответствии с типом ресурса, как и ресурсы по умолчанию. Имя подкаталога альтернативных ресурсов имеет вид:-_Квалификатор_ ResourceType

*Квалификатор* — это имя, идентифицирующее определенную конфигурацию устройства.
В имени может быть несколько квалификаторов, каждое из которых отделяется дефисом. Например, на следующем снимке экрана показан простой проект с дополнительными ресурсами для различных конфигураций, таких как языковой стандарт, плотность экрана, размер экрана и ориентация:

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

![Альтернативные ресурсы](alternate-resources-images/alternate-resources-vs.png)
 
# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio для Mac](#tab/macos)

![Альтернативные ресурсы](alternate-resources-images/alternate-resources-xs.png)
 
-----
 

При добавлении квалификаторов к типу ресурса применяются следующие правила.

1. Может существовать несколько квалификаторов, каждый из которых отделяется дефисом.

2. Квалификаторы могут быть указаны только один раз.

3. Квалификаторы должны находиться в порядке, указанном в таблице ниже.

Ниже приведены возможные квалификаторы для справки.

- **MCC и МНК** Код страны для [мобильных устройств](https://en.wikipedia.org/wiki/List_of_mobile_country_codes) (MCC) и, при необходимости, [код мобильной сети](https://en.wikipedia.org/wiki/Mobile_Network_Code) (МНК). &ndash; SIM-карта предоставит MCC, а сеть, к которой подключено устройство, обеспечит МНК. Хотя вы можете использовать национальные настройки с помощью кода страны для мобильных устройств, рекомендуемый подход заключается в использовании квалификатора языка, указанного ниже. Например, чтобы выбрать ресурсы для Германии, квалификатор будет иметь `mcc262`значение. Для назначения ресурсов для T-Mobile в США квалификатор имеет `mcc310-mnc026`значение.
  Полный список кодов стран для мобильных устройств и коды мобильных сетей см <http://mcc-mnc.com/>. в статье.

- **Языковая** 2-буквенный [код языка ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) и, при необходимости, следующий [код региона ISO-3166-Alpha-2.](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) &ndash; 
  Если указаны оба квалификатора, они разделяются `-r`на. Например, чтобы выбрать национальные настройки для французского языка, используется квалификатор `fr` . Чтобы выбрать национальные настройки для французского языка, `fr-rCA` используется. Полный список кодов языков и регионов см. [в разделе Коды для представления имен языков](http://www.loc.gov/standards/iso639-2/php/English_list.php) и [названий стран и элементов кода](http://www.iso.org/iso/country_codes/iso_3166_code_lists/country_names_and_code_elements.htm).

- **Наименьшая ширина** &ndash; Задает наименьшую ширину экрана, на которой должно выполняться приложение. Более подробно рассматривается [Создание ресурсов для различных экранов](~/android/app-fundamentals/resources-in-android/resources-for-varying-screens.md). 
  Доступно на уровне API 13 (Android 3,2) и более поздних версий. Например, квалификатор `sw320dp` используется для целевых устройств, высота и ширина которых не меньше 320dp.

- **Доступная ширина** Минимальная ширина экрана в формате w N DP, где *N* — ширина в независимых пикселях. &ndash;
  Это значение может измениться при повороте устройства пользователем. Более подробно рассматривается [Создание ресурсов для различных экранов](~/android/app-fundamentals/resources-in-android/resources-for-varying-screens.md). 
  Доступно на уровне API 13 (Android 3,2) и более поздних версий. Пример. квалификатор w720dp используется для целевых устройств, ширина которых не меньше 720dp.

- **Доступная высота** Минимальная высота экрана в формате h N DP, где *N* — высота в DP. &ndash; Это значение может измениться при повороте устройства пользователем. Более подробно рассматривается [Создание ресурсов для различных экранов](~/android/app-fundamentals/resources-in-android/resources-for-varying-screens.md). 
  Доступно на уровне API 13 (Android 3,2) и более поздних версий. Например, квалификатор h720dp используется для целевых устройств, имеющих высоту не меньше 720dp

- **Размер экрана** &ndash; Этот квалификатор является обобщением размера экрана, для которого предназначены эти ресурсы. Он более подробно рассматривается в разделе [Создание ресурсов для различных экранов](~/android/app-fundamentals/resources-in-android/resources-for-varying-screens.md). 
  Допустимые значения: `small`, `normal`, `large` и `xlarge`. Добавлено на уровне API 9 (Android 2.3/Android 2.3.1/Android 2.3.2)

- **Экранный аспект** &ndash; Это зависит от пропорций, а не от ориентации экрана. Длинный экран шире. Добавлено в API уровня 4 (Android 1,6). Допустимые значения: long и нотлонг.

- **Ориентация экрана** &ndash; Ориентация экрана книжной или альбомной ориентации. Это может измениться в течение времени существования приложения.
  Возможными значениями являются `port` и `land`.

- **Режим закрепления** &ndash; Для устройств в закреплениях автомобиля или на стационарных устройствах. Добавлено в API уровня 8 (Android 2.2. x). Возможными значениями являются `car` и `desk`.

- **Ночной режим** &ndash; Выполняется ли приложение в ночное время или в день. Это может измениться в течение всего времени существования приложения, и оно должно дать разработчикам возможность использовать более темные версии интерфейса в ночное время. Добавлено в API уровня 8 (Android 2.2. x). Возможными значениями являются `night` и `notnight`.

- **Плотность точек экрана (DPI)** &ndash; Число пикселей в заданной области на физическом экране. Обычно выражается в точках на дюйм (DPI). Доступны следующие значения:

  - `ldpi`&ndash; Экраны с низкой плотностью.

  - `mdpi`&ndash; Экраны средней плотности

  - `hdpi`&ndash; Экраны с высокой плотностью

  - `xhdpi`&ndash; Дополнительные экраны с высокой плотностью

  - `nodpi`&ndash; Ресурсы, которые не должны масштабироваться

  - `tvdpi`&ndash; Появилось в API уровня 13 (Android 3,2) для экранов между мдпи и HDPI.

- **Тип сенсорного экрана** &ndash; Указывает тип сенсорного экрана, который может иметь устройство. Возможными значениями `notouch` являются (без сенсорного экрана `stylus` ), (Резисторный сенсорный экран, подходящий для пера) `finger` и (сенсорный экран).

- **Доступность клавиатуры** &ndash; Указывает, какой вид клавиатуры доступен. Это может измениться в течение времени существования &ndash; приложения, например, когда пользователь открывает аппаратную клавиатуру. Доступны следующие значения:

  - `keysexposed`&ndash; Устройство имеет доступную клавиатуру. Если программная клавиатура не включена, она используется только при открытии аппаратной клавиатуры.

  - `keyshidden`&ndash; На устройстве имеется аппаратная клавиатура, но она скрыта, и программная клавиатура не включена.

  - `keyssoft`&ndash; на устройстве включена программная клавиатура.

- **Основной метод ввода текста** &ndash; Используйте для указания типов аппаратных ключей, доступных для ввода. Доступны следующие значения:

  - `nokeys`&ndash; Для входных данных не существует аппаратных ключей.

  - `qwerty`&ndash; Доступна клавиатура QWERTY.

  - `12key`&ndash; Имеется 12-клавишная аппаратная клавиатура


- **Доступность ключа навигации** &ndash; При наличии 5-дневной или d-дневной навигации (направленной панели). Это может измениться в течение времени существования приложения. Доступны следующие значения:

  - `navexposed`&ndash; для пользователя доступны ключи навигации.

  - `navhidden`&ndash; ключи навигации недоступны.

- **Основной метод навигации без касания** &ndash; Тип навигации, доступный на устройстве. Доступны следующие значения:

  - `nonav`&ndash; единственным доступным средством навигации является сенсорный экран

  - `dpad`&ndash; для навигации доступен элемент d-Pad (направленная клавиатура)

  - `trackball`&ndash; устройство имеет трекбол для навигации

  - `wheel`&ndash; нетипичный сценарий, в котором доступны один или несколько направлений направления

- **Версия платформы (уровень API)** Уровень API, поддерживаемый устройством в формате v*N*, где N — это целевой уровень API. &ndash; Например, версии 11 будет ориентироваться на устройство API 11 (Android 3,0).


Более полные сведения об квалификаторах ресурсов см. в разделе [предоставление ресурсов](https://developer.android.com/guide/topics/resources/providing-resources.html) на веб-сайте разработчиков Android.


## <a name="how-android-determines-what-resources-to-use"></a>Как Android определяет, какие ресурсы использовать

Очень вероятно, что приложение Android будет содержать много ресурсов. Важно понимать, как Android будет выбирать ресурсы для приложения при запуске на устройстве.

Android определяет базу ресурсов путем итерации по следующему тесту правил.

- **Исключение** непротиворечивых квалификаторов &ndash; например, если ориентация устройства книжная, то все альбомные каталоги ресурсов будут отклонены.

- **Игнорировать квалификаторы не поддерживаются** &ndash; Не все квалификаторы доступны для всех уровней API. Если каталог ресурсов содержит квалификатор, который не поддерживается устройством, этот каталог ресурсов будет проигнорирован.

- **Обозначить следующий квалификатор с наивысшим приоритетом** &ndash; при ссылке на приведенную выше таблицу выберите следующий квалификатор с наивысшим приоритетом (сверху вниз).

- **Сохраняет каталоги ресурсов для квалификатора** &ndash; если в приведенной выше таблице есть каталоги ресурсов, соответствующие квалификатору, выберите следующий квалификатор с наивысшим приоритетом (сверху вниз).

Эти правила также иллюстрируются в следующей блок-схеме:

[![Блок-схема ресурсов](alternate-resources-images/flowchart-sml.png)](alternate-resources-images/flowchart.png#lightbox)

Если система ищет ресурсы, зависящие от плотности, и не может их найти, она попытается найти другие ресурсы, связанные с плотностью, и масштабировать их. Android может не обязательно использовать ресурсы по умолчанию.
Например, если найти ресурс с низкой плотностью и он недоступен, Android может выбрать высокоплотную версию ресурса для ресурсов по умолчанию или средней плотности. Это достигается благодаря тому, что ресурс высокой плотности может масштабироваться в меньшую степень до 0,5, что приведет к меньшему количеству проблем с видимостью, чем уменьшение ресурсов средней плотности, требующих от 0,75.

В качестве примера рассмотрим приложение со следующими нарисованными каталогами ресурсов:

```
drawable
drawable-en
drawable-fr-rCA
drawable-en-port
drawable-en-notouch-12key
drawable-en-port-ldpi
drawable-port-ldpi
drawable-port-notouch-12key
```

Теперь приложение выполняется на устройстве со следующей конфигурацией:

- **Языковой стандарт** &ndash; en-GB
- **Ориентация страницы** &ndash; порт
- **Плотность экрана** &ndash; HDPI
- **Тип сенсорного экрана** &ndash; без касания
- **Основной метод ввода** &ndash; 12key

Чтобы начать с, ресурсы на французском языке исключаются, так как они конфликтуют `en-GB`с языковым стандартом, в результате чего мы получаем:

```
drawable
drawable-en
drawable-en-port
drawable-en-notouch-12key
drawable-en-port-ldpi
drawable-port-ldpi
drawable-port-notouch-12key
```

Затем в приведенной выше таблице квалификаторов выбирается первый квалификатор: MCC и МНК. Нет каталогов ресурсов, содержащих этот квалификатор, поэтому код MCC/МНК игнорируется.

Выбран следующий квалификатор, который является языком. Существуют ресурсы, соответствующие коду языка. Все каталоги ресурсов, которые не соответствуют коду `en` языка, отклоняются, чтобы список ресурсов стал следующим:

```
drawable-en-port
drawable-en-notouch-12key
drawable-en-port-ldpi
```

Следующий квалификатор предназначен для ориентации экрана, поэтому все каталоги ресурсов, не соответствующие ориентации `port` экрана, устраняются:

```
drawable-en-port
drawable-en-port-ldpi
```

Далее следует квалификатор для плотности экрана, `ldpi`который приводит к исключению еще одного каталога ресурсов:

```
drawable-en-port-ldpi
```

В результате этого процесса Android будет использовать нарисованные ресурсы в каталоге `drawable-en-port-ldpi` ресурсов для устройства.

> [!NOTE]
> Квалификаторы размера экрана предоставляют одно исключение для этого процесса выбора. В Android можно выбрать ресурсы, предназначенные для меньшего экрана, чем доступно для текущего устройства. Например, большие экранные устройства могут использовать ресурсы для экрана обычного размера. Однако обратная часть этого не имеет значения. на одном и том же большом устройстве не будут использоваться ресурсы, предоставляемые для ксларже экрана. Если Android не удается найти набор ресурсов, соответствующий заданному размеру экрана, произойдет сбой приложения.
