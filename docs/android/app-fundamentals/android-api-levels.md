---
title: "Основные сведения об уровнях Android API"
description: "Xamarin.Android имеет несколько параметров уровня Android API, которые определяют совместимости приложения с несколькими версиями Android. В этом руководстве объясняется, что означают эти параметры, способ их настройки и том, как они имеют в приложении во время выполнения."
ms.topic: article
ms.prod: xamarin
ms.assetid: 58CB7B34-3140-4BEB-BE2E-209928C1878C
ms.technology: xamarin-android
author: mgmclemore
ms.author: mamcle
ms.date: 03/01/2018
ms.openlocfilehash: 907af0948e9d081f05cc201c49f94629a513c935
ms.sourcegitcommit: 30055c534d9caf5dffcfdeafd6f08e666fb870a8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/09/2018
---
# <a name="understanding-android-api-levels"></a>Основные сведения об уровнях Android API

_Xamarin.Android имеет несколько параметров уровня Android API, которые определяют совместимости приложения с несколькими версиями Android. В этом руководстве объясняется, что означают эти параметры, способ их настройки и том, как они имеют в приложении во время выполнения._


## <a name="quick-start"></a>Быстрый запуск

Xamarin.Android предоставляет три параметра Android API уровня проекта.

-   [Целевой Framework](#framework) &ndash; указывает платформы для построения приложения. Этот уровень API используется в *компиляции* время по Xamarin.Android.

-   [Минимальная версия Android](#minimum) &ndash; указывает самой старой версии Android, что требуется для поддержки приложения. Этот уровень API используется в *запуска* время системой Android.

-   [Целевая версия Android](#target) &ndash; указывает версии Android, приложение должно работать в. Этот уровень API используется в *запуска* время системой Android.

Перед тем как настроить уровень API для проекта, необходимо установить компоненты пакета SDK платформы для этого уровня API. Дополнительные сведения о загрузке и установке компонентов пакета SDK для Android см. в разделе [программа установки Android SDK](~/android/get-started/installation/android-sdk.md).

# <a name="visual-studiotabvswin"></a>[Visual Studio](#tab/vswin)

Как правило все три уровня Xamarin.Android API присваивается то же значение. На **приложения** задайте **компиляции с помощью версии Android (целевой платформы)** последняя стабильная версия API (или, как минимум, для версии Android, которая имеет все необходимые функции).
На следующем снимке экрана, требуемая версия .NET Framework имеет значение **Android 7.1 (API уровня 25 - Nougat)**:

[![Целевые значения по умолчанию версии Framework для компиляции с помощью версии Android](android-api-levels-images/vs-defaults-sml.png)](android-api-levels-images/vs-defaults.png#lightbox)

На **Android манифеста** задайте Android Минимальная версия **используйте компиляция с помощью пакета SDK версии** и выберите значение совпадает со значением требуемой версии .NET Framework (в следующем Android целевой версии Снимок экрана, имеет значение целевой платформы Android **Android 7.1 (Nougat)**):

[![Задать минимальное и Android целевой версии для требуемой версии .NET Framework](android-api-levels-images/vs-manifest-defaults-sml.png)](android-api-levels-images/vs-manifest-defaults.png#lightbox)

Если вы хотите обеспечить обратную совместимость с более ранней версии Android, установите **Android минимальный требуемую версию** самой старой версии, Android, что требуется для поддержки приложения. (Обратите внимание, что уровень API с 14 минимальный уровень API, необходимые для [служб Google Play и поддержки Firebase](https://android-developers.googleblog.com/2016/11/google-play-services-and-firebase-for-android-will-support-api-level-14-at-minimum.html).) Ниже приведен пример конфигурации поддерживает Android версии из 14 уровень API через API уровня 25:

[![Компиляция с помощью API уровня 25 Nougat минимум Android версии API уровнем 14](android-api-levels-images/vs-minimum-sml.png)](android-api-levels-images/vs-minimum.png#lightbox)

# <a name="visual-studio-for-mactabvsmac"></a>[Visual Studio для Mac](#tab/vsmac)

Как правило все три уровня Xamarin.Android API присваивается то же значение. Задать **требуемой версии .NET framework** последняя стабильная версия API (или, как минимум, для версии Android, которая имеет все необходимые функции). Чтобы задать **требуемой версии .NET framework**, перейдите к **сборки > Общие** в **параметры проекта**. На следующем снимке экрана, требуемая версия .NET Framework имеет значение **использовать последнюю установленную платформу (8.0)**:

[![Требуемая версия .NET framework по умолчанию используется последняя версия установлена платформой](android-api-levels-images/xs-default-target-sml.png)](android-api-levels-images/xs-default-target.png#lightbox)

Минимальное и целевой Android параметры версии можно найти в разделе **сборки > приложения Android** в **параметры проекта**. Задайте минимальный Android версию **Авто. Используйте версию целевой платформы** и задайте версию целевой Android то же значение в качестве требуемой версии .NET Framework. На следующем снимке экрана, имеет значение целевой платформы Android **Android 8.0 (API уровня 26)** для соответствия вышеуказанный параметр требуемая версия .NET Framework:

[![Настройка уровней целевого объекта и framework в параметрах проекта](android-api-levels-images/xs-default-app-sml.png)](android-api-levels-images/xs-default-app.png#lightbox)

При необходимости для обеспечения обратной совместимости с более ранней версии Android, измените **Android Минимальная версия** самой старой версии, Android, что требуется для поддержки приложения. Обратите внимание, что уровень API с 14 минимальный уровень API, необходимые для [служб Google Play и поддержки Firebase](https://android-developers.googleblog.com/2016/11/google-play-services-and-firebase-for-android-will-support-api-level-14-at-minimum.html).
Например следующая конфигурация поддерживает версии Android как уровень API с 14 раньше:

[![Минимальное и настроена на автоматический - версий используйте версию целевой платформы](android-api-levels-images/xs-minimum-sml.png)](android-api-levels-images/xs-minimum.png#lightbox)

-----


Если приложение поддерживает несколько версий, Android, код должен включать проверки времени выполнения, чтобы убедиться, что приложение работает с параметром Android Минимальная версия (в разделе [среда выполнения проверяет наличие версии Android](#runtimechecks) ниже подробные сведения). Если использования или создания библиотеки см. [уровни API и библиотеки](#libraries) ниже рекомендации по настройке API уровня настройки для библиотек.



## <a name="android-versions-and-api-levels"></a>Версии Android и уровни API

Развития платформы Android и Android появления новых версий, каждая версия Android назначается уникальный целочисленный идентификатор, вызывается *уровень API*. Таким образом каждая версия Android соответствует один уровень API Android. Поскольку пользователи устанавливают приложения в предыдущих версиях Android, так как последний, реальных приложений Android должен быть сконструирован для работы с несколькими уровнями Android API.


### <a name="android-versions"></a>Версии Android

Каждый выпуск Android проходит по нескольким именам:

-   Версии Android, такие как **Android 7.1**
-   Объект кодовое имя, например _Nougat_
-   Соответствующий API уровня, например **уровень API 25**

Android кодовое название может соответствовать несколько версий и уровни API (как показано в следующем списке), но каждая версия Android соответствует ровно один уровень API.

Кроме того, определяет Xamarin.Android *построения коды версий* , которые отображаются в настоящее время известных Android API уровней. Следующий список может помочь переводить уровень API, версии Android, кодовое название и Xamarin.Android код версии сборки.

-   **27 API (Android 8.1)** &ndash; _Oreo_, выпущенном в декабре 2017 г. Код версии сборки `Android.OS.BuildVersionCodes.OMr1`

-   **26 API (Android 8.0)** &ndash; _Oreo_, выпущенном августа 2017 г. Код версии сборки `Android.OS.BuildVersionCodes.O`

-   **API 25 (Android 7.1)** &ndash; _Nougat_, выпущенном в декабре 2016. Код версии сборки `Android.OS.BuildVersionCodes.NMr1`

-   **24 API (Android 7.0)** &ndash; _Nougat_, выпущенном августа 2016 г. Код версии сборки `Android.OS.BuildVersionCodes.N`

-   **API 23 (Android 6.0)** &ndash; _Marshmallow_, выпущенном августа 2015 г. Код версии сборки `Android.OS.BuildVersionCodes.M`

-   **API 22 (Android 5.1)** &ndash; _без описания операций_, выпущенном марта 2015 г. Код версии сборки `Android.OS.BuildVersionCodes.LollipopMr1`

-   **API 21 (Android 5.0)** &ndash; _без описания операций_, выпущенном в ноябре 2014 г. Код версии сборки `Android.OS.BuildVersionCodes.Lollipop`

-   **API 20 (Android 4.4W)** &ndash; _Kitkat Контрольные значения_, выпущенном июня 2014 г. Код версии сборки `Android.OS.BuildVersionCodes.KitKatWatch`

-   **API 19 (Android 4.4)** &ndash; _Kitkat_, выпущенной в октябре 2013 г. Код версии сборки `Android.OS.BuildVersionCodes.KitKat`

-   **API 18 (Android 4.3)** &ndash; _Jelly быть, с ягодами_, выпущенном июля 2013 г. Код версии сборки `Android.OS.BuildVersionCodes.JellyBeanMr2`

-   **17 API (Android 4.2-4.2.2)** &ndash; _Jelly быть, с ягодами_, выпущенном ноябрь 2012 г. Код версии сборки `Android.OS.BuildVersionCodes.JellyBeanMr1`

-   **API 16 (Android 4.1-4.1.1)** &ndash; _Jelly быть, с ягодами_, выпущенном июня 2012 г. Код версии сборки `Android.OS.BuildVersionCodes.JellyBean`

-   **API 15 (Android 4.0.3-4.0.4)** &ndash; _Сандвичевы мороженого_, выпущенном в декабре 2011 г. Код версии сборки `Android.OS.BuildVersionCodes.IceCreamSandwichMr1`

-   **API с 14 (Android 4.0-4.0.2)** &ndash; _Сандвичевы мороженого_, выпущенном октябрь 2011 г. Код версии сборки `Android.OS.BuildVersionCodes.IceCreamSandwich`

-   **13 API (Android 3.2)** &ndash; _Honeycomb_, выпущенном июня 2011 г. Код версии сборки `Android.OS.BuildVersionCodes.HoneyCombMr2`

-   **12 API (Android 3.1.x)** &ndash; _Honeycomb_, выпущенные в мае 2011 г. Код версии сборки `Android.OS.BuildVersionCodes.HoneyCombMr1`

-   **API 11 (Android 3.0.x)** &ndash; _Honeycomb_, выпущенном февраля 2011 г. Код версии сборки `Android.OS.BuildVersionCodes.HoneyComb`

-   **API 10 (Android 2.3.3-2.3.4)** &ndash; _Gingerbread_, выпущенном февраля 2011 г. Код версии сборки `Android.OS.BuildVersionCodes.GingerBreadMr1`

-   **API 9 (Android 2.3 2.3.2)** &ndash; _Gingerbread_, выпущенном ноября 2010 г. Код версии сборки `Android.OS.BuildVersionCodes.GingerBread`

-   **API 8 (Android 2.2.x)** &ndash; _Froyo_, выпущенном июня 2010 г. Код версии сборки `Android.OS.BuildVersionCodes.Froyo`

-   **API 7 (Android 2.1.x)** &ndash; _Eclair_, выпущенном января 2010 г. Код версии сборки `Android.OS.BuildVersionCodes.EclairMr1`

-   **6 API (Android 2.0.1)** &ndash; _Eclair_, выпущенном декабря 2009 г. Код версии сборки `Android.OS.BuildVersionCodes.Eclair01`

-   **API 5 (Android 2.0)** &ndash; _Eclair_, выпущенном ноября 2009 г. Код версии сборки `Android.OS.BuildVersionCodes.Eclair`

-   **API 4 (Android 1.6)** &ndash; _кольцо_, выпущенном сентября 2009 г. Код версии сборки `Android.OS.BuildVersionCodes.Donut`

-   **API 3 (Android 1.5)** &ndash; _Cupcake_, выпущенном мая 2009 г. Код версии сборки `Android.OS.BuildVersionCodes.Cupcake`

-   **API 2 (Android 1.1)** &ndash; _базы_, выпущенном февраля 2009 г. Код версии сборки `Android.OS.BuildVersionCodes.Base11`

-   **1 API (Android 1.0)** &ndash; _базы_, выпущенном октября 2008 г. Код версии сборки `Android.OS.BuildVersionCodes.Base`


Поскольку этот список указывает, часто выходят новых версий Android &ndash; иногда несколько выпусков в год. В результате вселенной устройств Android, которые могут запустить приложение включает широкий набор старые и новые версии Android. Как вы гарантирует, что приложение будет работать согласованно и надежно в так много разных версиях Android? Уровни API Android позволяет управлять этой проблемы.


### <a name="android-api-levels"></a>Android API уровней

Каждое устройство Android выполняется в точности *один* уровень API &ndash; этот уровень API гарантированно будет уникальным для версии платформы Android. Уровень API точно определяет версию набор API, который может вызывать приложения; он определяет сочетание элементы манифеста, разрешения, т. д. Этот код к разработчику. Система Android API уровней помогает определить, совместима ли приложения с изображением системы Android перед установкой приложения на устройстве Android.

При построении приложения, он содержит следующие сведения уровня API:

-   *Целевой* уровень API Android, приложение будет создано для запуска.

-   *Минимальные* уровень Android API, устройства Android, чтобы запустить приложение. 

Эти параметры используются для обеспечения функциональных возможностей, необходимых для правильной работы приложения на устройстве Android во время установки. В противном случае приложение будет заблокирован для выполнения на этом устройстве. Например если уровень API Android устройства меньше, чем минимальный уровень API, можно указать приложения, устройства Android не сможет пользователя от установки приложения.


## <a name="project-api-level-settings"></a>Параметры API уровня проекта

В следующих разделах объясняется, как подготовить среду разработки для уровни API, вы будете работать, следуют подробные пояснения к настройке с помощью диспетчера пакета SDK *требуемой версии .NET Framework*, *минимум Версия Android*, и *Android целевой версии* параметры в Xamarin.Android.


### <a name="android-sdk-platforms"></a>Android SDK платформы

Перед тем как выбрать целевой объект или API минимальный уровень в Xamarin.Android, необходимо установить версию Android SDK платформы, которая соответствует до этого уровня API. Диапазон доступных вариантов для требуемой версии .NET Framework, минимум Android версии и версии Android целевой версии диапазон Android SDK, которые вы установили ограничено. Диспетчер пакета SDK убедитесь, что установлены требуемые версии пакета SDK для Android, и его можно использовать для добавления уровни API, необходимые для приложения. Если вы не знакомы с тем, как установить уровни API, см. раздел [программа установки Android SDK](~/android/get-started/installation/android-sdk.md).

<a name="framework" />

### <a name="target-framework"></a>Требуемая версия .NET Framework

*Требуемой версии .NET Framework* (также известный как `compileSdkVersion`) версии конкретной платформы Android (API уровня), который во время сборки для компиляции приложения. Этот параметр указывает, какие интерфейсы API приложения *ожидает* для использования при запуске, но не оказывает никакого эффекта, в которых API-интерфейсы доступны фактически в приложение при его установке. В результате изменения параметра целевой платформы не приводит к изменению поведения во время выполнения.

Требуемая версия .NET Framework определяет, какие версии библиотек, приложение связана с &ndash; определяет, какие интерфейсы API, можно использовать в приложении. Например, если вы хотите использовать [NotificationBuilder.SetCategory](https://developer.xamarin.com/api/member/Android.App.Notification+Builder.SetCategory/p/System.String/) метод, который был введен в Android 5.0 без описания операций, необходимо задать целевую платформу **уровень API 21 (без описания операций)** или более поздней версии. Если значение целевой платформы проекта API уровня, такие как **API уровня 19 (KitKat)** и пытаться вызвать метод `SetCategory` метод в коде, будет выдана ошибка компиляции.

Мы рекомендуем всегда компилировать с *последние* доступных требуемой версии .NET Framework. Это предоставляет полезные предупреждающие сообщения для устаревшие интерфейсы API, могут быть вызваны из кода. Используется последняя версия целевой платформы особенно важна при использовании последних выпусках библиотеки поддержки &ndash; каждая библиотека ожидает, что ваше приложение было скомпилированных библиотека поддержки минимальный уровень API или выше. 

> [!NOTE]
> Начиная с августа 2018, консоли воспроизвести Google потребуется, новые приложения целевой уровень API 26 (Android 8.0) или более поздней версии.
Целевой уровень API 26 или более поздней версии, начиная с ноября 2018 потребуется использовать существующие приложения. Дополнительные сведения см. в разделе [повышения безопасности приложения и производительности в Google Play лет к](https://android-developers.googleblog.com/2017/12/improving-app-security-and-performance.html).


# <a name="visual-studiotabvswin"></a>[Visual Studio](#tab/vswin)

Для доступа к параметру требуемой версии .NET Framework в Visual Studio, откройте свойства проекта в **обозревателе решений** и выберите **приложения** страницы:

[![Приложение в окне свойств проекта](android-api-levels-images/vs-target-framework-sml.png)](android-api-levels-images/vs-target-framework.png#lightbox)

Задать целевую платформу, выбрав уровень API в раскрывающемся меню в разделе **компиляции с помощью версии Android** как показано выше.

# <a name="visual-studio-for-mactabvsmac"></a>[Visual Studio для Mac](#tab/vsmac)

Чтобы открыть параметры целевой платформы Visual Studio для Mac, щелкните правой кнопкой мыши имя проекта и выберите **параметры**; это открывает **параметры проекта** диалогового окна. В этом диалоговом окне перейдите на вкладку **сборки > Общие** как показано ниже:

[![Построение общие раздел страницы параметров проекта](android-api-levels-images/xs-target-framework-sml.png)](android-api-levels-images/xs-target-framework.png#lightbox)

Задать целевую платформу, выбрав уровень API в раскрывающемся меню справа от **требуемой версии .NET framework** как показано выше.

-----


<a name="minimum" />

### <a name="minimum-android-version"></a>Минимальная версия Android

*Android Минимальная версия* (также известный как `minSdkVersion`) имеет старую версию ОС Android (т. е. самый низкий уровень API), который можно установить и запустить приложение. По умолчанию приложение только можно установить на устройствах, которые совпадают с настройками требуемой версии .NET Framework или более поздней версии; Если параметр Android Минимальная версия *ниже* значения параметра целевой платформы приложения могут выполняться в более ранних версиях Android. Например, если задать целевую платформу **Android 7.1 (Nougat)** и задайте минимальное Android версию **Android 4.0.3 (мороженого Сандвичевы)**, приложение можно установить на любой платформе из API уровня 15 уровень API 25, включительно.

Несмотря на то, что приложение может успешно построить и установить на этот диапазон платформы, это не гарантирует, что он будет успешно *запуска* на всех этих платформ. Например, если приложение устанавливается на **Android 5.0 (без описания операций)** и код вызывает API, который доступен только в **Android 7.1 (Nougat)** и более поздних версиях ваше приложение будет вызывать ошибку времени выполнения и возможно приводит к сбою. Таким образом, необходимо убедиться, код &ndash; во время выполнения &ndash; , называемая только тех интерфейсов API, которые поддерживаются, на котором он выполняется на устройстве Android. Другими словами код должен включать проверки явной среды выполнения, чтобы убедиться, что ваше приложение использует только на устройствах, старая для поддержки их более новые интерфейсы API.
[Среда выполнения проверяет наличие версии Android](#runtimechecks)далее в этом руководстве объясняется, как добавить эти проверки времени выполнения в коде.


# <a name="visual-studiotabvswin"></a>[Visual Studio](#tab/vswin)

Для доступа к Android Минимальная версия параметра в Visual Studio, откройте свойства проекта в **обозревателе решений** и выберите **Android манифеста** страницы. В раскрывающемся меню в разделе **Android Минимальная версия** минимум Android версии можно выбрать для приложения:

[![Минимальное Android для целевого параметра равным компиляция с помощью пакета SDK версии](android-api-levels-images/vs-minimum-version-sml.png)](android-api-levels-images/vs-minimum-version.png#lightbox)

При выборе **используйте компиляция с помощью пакета SDK версии**, минимум Android версии будет таким же, как параметр целевой платформы.

# <a name="visual-studio-for-mactabvsmac"></a>[Visual Studio для Mac](#tab/vsmac)

Чтобы открыть параметры целевой платформы Visual Studio для Mac, щелкните правой кнопкой мыши имя проекта и выберите **параметры**; это открывает **параметры проекта** диалогового окна. Перейдите к **сборки > приложения Android**.
С помощью раскрывающегося меню справа от **Android Минимальная версия**, можно задать минимальный Android версии для приложения:

[![Минимальная версия Android настроена на автоматический - используйте версию целевой платформы](android-api-levels-images/xs-minimum-version-sml.png)](android-api-levels-images/xs-minimum-version.png#lightbox)

При выборе **автоматического &ndash; использовать версию целевой платформы**, минимум Android версии будет таким же, как параметр целевой платформы.

-----


<a name="target" />

### <a name="target-android-version"></a>Целевая версия Android

*Целевой версии Android* (также известный как `targetSdkVersion`) — API уровня устройства Android где приложение ожидает запуска. Android использует этот параметр, чтобы определить, следует ли включить поведение, совместимости &ndash; это гарантирует, что приложение будет работать надлежащим образом. Android использует параметр версия Android целевого приложения, чтобы выяснить, какие изменения поведения могут быть применены в приложение не нарушает ее (это как Android обеспечивает прямую совместимость).

Требуемая версия .NET Framework и версию целевой Android, имея очень похожими именами не то же самое. Требуемая версия .NET Framework параметр передает целевой API уровня сведения Xamarin.Android для использования в *время компиляции*, тогда как версия целевого Android передает целевой API уровня сведения Android для использования в  *время выполнения* (когда приложение — установлена и запущена на устройстве).

# <a name="visual-studiotabvswin"></a>[Visual Studio](#tab/vswin)

Для доступа к этой настройки в Visual Studio, откройте свойства проекта в **обозревателе решений** и выберите **Android манифеста** страницы. В раскрывающемся меню в разделе **Android целевой версии** можно выбрать целевой Android версию для вашего приложения:

[![Целевая версия Android, равным компиляция с помощью пакета SDK версии](android-api-levels-images/vs-target-version-sml.png)](android-api-levels-images/vs-target-version.png#lightbox)

Рекомендуется явно задать целевой Android версии до последней версии Android, который позволяет протестировать приложение. В идеальном случае должен задаваться до последней версии пакета SDK для Android &ndash; это позволяет использовать новые интерфейсы API, перед выполнением изменения в работе. Для большинства разработчиков мы *не* рекомендуется установить версию целевой Android в **используйте компиляция с помощью пакета SDK версии**.

# <a name="visual-studio-for-mactabvsmac"></a>[Visual Studio для Mac](#tab/vsmac)

Чтобы открыть параметры целевой платформы Visual Studio для Mac, щелкните правой кнопкой мыши имя проекта и выберите **параметры**; это открывает **параметры проекта** диалогового окна. Перейдите к **сборки > приложения Android**.
С помощью раскрывающегося меню справа от **Android целевой версии**, можно задать целевой Android версии для приложения:

[![Целевая версия Android настроена на автоматический - используйте версию целевой платформы](android-api-levels-images/xs-target-version-sml.png)](android-api-levels-images/xs-target-version.png#lightbox)

Рекомендуется явно задать целевой Android версии до последней версии Android, который позволяет протестировать приложение. В идеальном случае оно должно быть присвоено последнюю доступную версию пакета SDK для Android &ndash; это позволяет использовать новые интерфейсы API, перед выполнением изменения в работе. Для большинства разработчиков, не рекомендуется установить версию целевой Android **Авто. Используйте версию целевой платформы**.

-----

В общем случае целевой версии Android следует ограничены Минимальная версия Android и целевую платформу. Это означает следующее:

**Минимальная версия Android < = целевая версия Android < = требуемой версии .NET Framework**

Дополнительные сведения об уровнях SDK см. в разделе разработчика Android [sdk использует](https://developer.android.com/guide/topics/manifest/uses-sdk-element.html) документации.


<a name="runtimechecks" />

## <a name="runtime-checks-for-android-versions"></a>Проверки времени выполнения для версий Android

Обновляется при каждой новой версии Android framework API для предоставления новых или заменяющая ее функциональность. За некоторыми исключениями функции API из более ранних версий Android переносится в новые версии Android без изменений. В результате Если приложение выполняется на определенном уровне Android API, он обычно будет работать на более поздние версии уровень Android API без изменений. Но что делать, если требуется, чтобы запустить приложение в более ранних версиях Android?

Если выбрать минимум Android версии, *ниже* чем настроек требуемой версии .NET Framework, некоторые интерфейсы API могут быть недоступны в приложение во время выполнения. Тем не менее приложения могут работать на устройстве с более ранней, но с ограниченной функциональностью. Для каждого API, который доступен не на соответствующий параметру Android Минимальная версия платформы Android, коде необходимо явно проверить значение `Android.OS.Build.VERSION.SdkInt` свойства, чтобы определить платформы, приложение выполняется на уровне API. Если уровень API *ниже* чем Android Минимальная версия, которая поддерживает API необходимо вызвать, а затем код должен найти способ работать неправильно без выполнения этого вызова API.

К примеру, предположим, что мы хотим использовать [NotificationBuilder.SetCategory](https://developer.xamarin.com/api/member/Android.App.Notification+Builder.SetCategory/p/System.String/) метод для категоризации уведомление при работе на **Android 5.0 без описания операций** (и более поздние версии), но мы по-прежнему требуется для нашего приложения более ранних версий, Android, такие как **быть, Jelly с Android 4.1 ягодами** (где `SetCategory` недоступна). Ссылающаяся таблица версии Android в начале этого руководства, мы увидим, что код версии сборки для **Android 5.0 без описания операций** — `Android.OS.BuildVersionCodes.Lollipop`. Для поддержки более старых версий Android where `SetCategory` будет недоступна, наш код, могут определять уровень API во время выполнения и условного вызова `SetCategory` только при уровне API больше или равно значению код версии сборки без описания операций:

```csharp
if (Android.OS.Build.VERSION.SdkInt >= Android.OS.BuildVersionCodes.Lollipop)
{
    builder.SetCategory(Notification.CategoryEmail);
}
```

В этом примере нашего приложения требуемая версия .NET Framework имеет значение **Android 5.0 (уровень API 21)** и его версия Android минимум равно **Android 4.1 (уровень API 16)**. Так как `SetCategory` доступен на уровне API `Android.OS.BuildVersionCodes.Lollipop` и более поздней версии, этот пример кода вызывает `SetCategory` только когда он доступен фактически &ndash; он будет *не* будет пытаться вызвать `SetCategory` при API-Интерфейс уровень — 16, 17, 18, 19 или 20. Функциональные возможности в этих более ранней версии Android сокращается только при условии, что уведомления не сортируются должным образом (поскольку они не категории по типам), однако уведомления по-прежнему публикуются для оповещения пользователя. Нашего приложения по-прежнему работает, но его функциональность может слегка снизиться.

В общем случае проверка версии сборки помогает решить, во время выполнения между новым способом и для старого способа действия кода. Пример:

```csharp
if (Android.OS.Build.VERSION.SdkInt >= Android.OS.BuildVersionCodes.Lollipop)
{
    // Do things the Lollipop way
}
else
{
    // Do things the pre-Lollipop way
}
```

Нет правил быстрый и простой, объясняется, как уменьшить или изменить функциональность приложения при его запуске на более старые версии Android, которые отсутствует один или несколько API. В некоторых случаях (например, в `SetCategory` приведенном выше примере), достаточно просто пропустить вызов API, если он не доступен. Однако в других случаях может потребоваться реализовать альтернативную функциональность по `Android.OS.Build.VERSION.SdkInt` обнаружено, быть меньше, чем API уровня, что ваше приложение должно обеспечивать его оптимальной работы.

<a name="libraries" />

## <a name="api-levels-and-libraries"></a>Уровни API и библиотеки

# <a name="visual-studiotabvswin"></a>[Visual Studio](#tab/vswin)

При создании проекта Xamarin.Android библиотеки (например, библиотеки классов или библиотека привязок), можно настроить только параметр целевой платформы &ndash; минимум Android версии и параметры целевой Android версии недоступны. Выполняется, поскольку не **Android манифеста** страницы:

[![Доступен только компиляцию с помощью параметра версии Android](android-api-levels-images/vs-library-options-sml.png)](android-api-levels-images/vs-library-options.png#lightbox)

# <a name="visual-studio-for-mactabvsmac"></a>[Visual Studio для Mac](#tab/vsmac)

При создании проекта библиотеки Xamarin.Android, не **приложения Android** страницы, где можно настроить Android Минимальная версия и версия целевой Android &ndash; Android Минимальная версия и целевой Параметры Android версии недоступны.
Выполняется, поскольку не **сборки > приложения Android** страницы):

[![Страница «Общие» без минимального и целевого параметры версии сборки](android-api-levels-images/xs-library-options-sml.png)](android-api-levels-images/xs-library-options.png#lightbox)

-----

Минимум Android версии и параметры Android целевой версии недоступны, так как полученная библиотека не является автономным приложением &ndash; библиотеки может быть запущен в любой версии Android, в зависимости от приложения, которое поставляется с. Можно указать, как будет библиотеке *компиляции*, но невозможно предсказать, какие платформы уровень API библиотеки будут выполняться на. С учетом этого следует руководствоваться следующими рекомендациями при использования или создания библиотеки:

-   **При использовании библиотека Android** &ndash; при использовании библиотека Android в приложении нужно убедиться, что требуемая версия приложения уровень к API, то есть *по крайней мере максимально* целевой объект Параметр Framework библиотеки.

-   **При создании библиотеки Android** &ndash; при создании библиотеки Android для использования другими приложениями, нужно убедиться, что его параметр целевой платформы присвоено минимальный уровень API, которые необходимы для компиляции.

Эти советы и рекомендации помогут избежать ситуации, когда библиотеке пытается вызвать API, который доступен не во время выполнения (что может привести к сбою приложения). Если вы являетесь разработчиком библиотеки, следует стремиться к ограничить использование вызовов API для малых и хорошо определенные подмножества общую контактную зону API. Таким образом, это помогает гарантировать, можно безопасно использовать библиотеку версиях широкий диапазон Android.


## <a name="summary"></a>Сводка

В этом руководстве описано, как Android API уровней используются для управления совместимость приложений в разных версиях Android. Он предоставляется подробное описание действий по настройке Xamarin.Android *требуемой версии .NET Framework*, *Android Минимальная версия*, и *Android целевой версии* параметры проекта. Он предоставляется инструкции для установки пакетов SDK, с помощью диспетчер Android SDK включены примеры того, как написать код для обработки с разными уровнями API во время выполнения, а также описано управление уровни API при создании или использовании библиотеки Android. Оно также предоставляет полный список, связывающий уровни API Android версии (например, Android 4.4), имена Android версии (например, Kitkat) и Xamarin.Android коды версий сборки.


## <a name="related-links"></a>Связанные ссылки

- [Установка пакета SDK для Android](~/android/get-started/installation/android-sdk.md)
- [Изменения средств пакета SDK CLI](~/android/troubleshooting/sdk-cli-tooling-changes.md)
- [Комплектации вашей compileSdkVersion, minSdkVersion и targetSdkVersion](https://medium.com/google-developers/picking-your-compilesdkversion-minsdkversion-targetsdkversion-a098a0341ebd)
- [Что такое уровень API?](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels)
- [Кодовые названия, теги и номера сборки](https://source.android.com/source/build-numbers)
