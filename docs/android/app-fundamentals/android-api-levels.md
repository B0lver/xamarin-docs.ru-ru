---
title: Основные сведения об уровнях Android API
description: Xamarin.Android имеет несколько параметров уровня Android API, которые определяют совместимости приложения с несколькими версиями Android. В этом руководстве объясняется, что означают эти параметры, их настройке и как они имеют в приложении во время выполнения.
ms.prod: xamarin
ms.assetid: 58CB7B34-3140-4BEB-BE2E-209928C1878C
ms.technology: xamarin-android
author: mgmclemore
ms.author: mamcle
ms.date: 07/02/2018
ms.openlocfilehash: 3b060567b47395bc213627c9378de4fca9db41bb
ms.sourcegitcommit: 081a2d094774c6f75437d28b71d22607e33aae71
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/03/2018
ms.locfileid: "37403342"
---
# <a name="understanding-android-api-levels"></a>Основные сведения об уровнях Android API

_Xamarin.Android имеет несколько параметров уровня Android API, которые определяют совместимости приложения с несколькими версиями Android. В этом руководстве объясняется, что означают эти параметры, их настройке и как они имеют в приложении во время выполнения._


## <a name="quick-start"></a>Быстрый запуск

Xamarin.Android предоставляет три параметра Android API уровня проекта:

-   [Платформы](#framework) &ndash; указывает, какой платформы для использования при создании приложения. Этот уровень API используется на *компиляции* времени для Xamarin.Android.

-   [Минимальная версия Android](#minimum) &ndash; указывает самой старой версии Android, что требуется приложение для поддержки. Этот уровень API используется на *запуска* времени системой Android.

-   [Целевая версия Android](#target) &ndash; указывает, должно работать в версии Android, которые вашему приложению. Этот уровень API используется на *запуска* времени системой Android.

Перед настройкой уровне API для вашего проекта, необходимо установить компоненты пакета SDK платформы для этого уровня API. Дополнительные сведения о загрузке и установке компонентов пакета SDK для Android, см. в разделе [программа установки Android SDK](~/android/get-started/installation/android-sdk.md).

> [!NOTE]
> Начиная с августа 2018, Google Play Console потребуется что новые приложения целевой уровень API 26 (Android 8.0) или более поздней версии.
Существующие приложения будут проходить целевой уровень API 26 или более поздней версии, начиная с ноября 2018 г. Дополнительные сведения см. в разделе [повышение безопасности приложения и производительности в Google Play лет в будущем](https://android-developers.googleblog.com/2017/12/improving-app-security-and-performance.html).

# <a name="visual-studiotabvswin"></a>[Visual Studio](#tab/vswin)

Как правило все три уровня Xamarin.Android API присваивается то же значение. На **приложения** странице **компиляции с помощью версии Android (целевая платформа)** до последней стабильной версии API (или, как минимум, версии Android, которая имеет все необходимые средства).
На следующем снимке экрана, требуемой версии .NET Framework имеет значение **Android 7.1 (API уровня 25 - Nougat)**:

[![Target Framework версия по умолчанию — компиляции с помощью версии Android](android-api-levels-images/vs-defaults-sml.png)](android-api-levels-images/vs-defaults.png#lightbox)

На **манифест Android** странице, задайте для версии Android минимальное значение **используйте компиляция с помощью пакета SDK версии** и значение совпадает со значением версии целевой платформы (в следующем примере целевая версия Android Снимок экрана, имеет значение целевой платформы Android **Android 7.1 (Nougat)**):

[![Значение минимального и целевой объект Android версий требуемой версии .NET Framework](android-api-levels-images/vs-manifest-defaults-sml.png)](android-api-levels-images/vs-manifest-defaults.png#lightbox)

Если вы хотите обеспечить обратную совместимость с более ранней версии Android, задайте **Android Минимальная требуемая версия** самой старой версии Android, в том, что требуется приложение для поддержки. (Обратите внимание, что API уровня 14 минимальный уровень API, необходимые для [сервисы Google Play и поддержки Firebase](https://android-developers.googleblog.com/2016/11/google-play-services-and-firebase-for-android-will-support-api-level-14-at-minimum.html).) Ниже приведен пример конфигурации поддерживает Android версии с API уровня 14 через уровень API 25:

[![Компиляция с помощью уровень API 25 Nougat, версия Android минимум, равным уровню API 14](android-api-levels-images/vs-minimum-sml.png)](android-api-levels-images/vs-minimum.png#lightbox)

# <a name="visual-studio-for-mactabvsmac"></a>[Visual Studio для Mac](#tab/vsmac)

Как правило все три уровня Xamarin.Android API присваивается то же значение. Задайте **требуемой версии .NET framework** до последней стабильной версии API (или, как минимум, версии Android, которая имеет все необходимые средства). Чтобы задать **требуемой версии .NET framework**, перейдите к **сборки > Общие** в **параметры проекта**. На следующем снимке экрана, требуемой версии .NET Framework имеет значение **использовать последнюю установленную платформу (8.0)**:

[![Требуемая версия .NET framework по умолчанию принимается использовать самую новую установленную платформу](android-api-levels-images/xs-default-target-sml.png)](android-api-levels-images/xs-default-target.png#lightbox)

Параметры минимального и целевой объект Android версии можно найти в разделе **сборки > приложение Android** в **параметры проекта**. Значение версии Android минимум **автоматически — использовать версию целевой платформы** и значение совпадает со значением версии целевой платформы целевой версии Android. На следующем снимке экрана, имеет значение целевой платформы Android **Android 8.0 (уровень API 26)** в соответствии с требуемой версии .NET Framework параметра выше:

[![Настройка целевого объекта и framework уровней в параметрах проекта](android-api-levels-images/xs-default-app-sml.png)](android-api-levels-images/xs-default-app.png#lightbox)

Если вы хотите обеспечить обратную совместимость с более ранней версии Android, измените **минимум Android версии** самой старой версии Android, в том, что требуется приложение для поддержки. Обратите внимание, что API уровня 14 минимальный уровень API, необходимые для [сервисы Google Play и поддержки Firebase](https://android-developers.googleblog.com/2016/11/google-play-services-and-firebase-for-android-will-support-api-level-14-at-minimum.html).
Например следующая конфигурация поддерживает Android версии как API уровня 14 раньше:

[![Минимальное и предназначенные для версий автоматически — использовать версию целевой платформы](android-api-levels-images/xs-minimum-sml.png)](android-api-levels-images/xs-minimum.png#lightbox)

-----


Если приложение поддерживает несколько версий Android, ваш код должен включать проверки времени выполнения, чтобы убедиться, что приложение работает с параметром минимум Android версии (см. в разделе [среда выполнения проверяет наличие версии Android](#runtimechecks) ниже дополнительные сведения). При использовании или создания библиотеки, см. в разделе [уровни API и библиотеки](#libraries) ниже рекомендации при настройке API уровня настройки для библиотек.



## <a name="android-versions-and-api-levels"></a>Версии Android и уровнях API

Как развивается платформы Android и новых версий Android, каждая версия Android присваивается уникальный целочисленный идентификатор, вызывается *уровень API*. Таким образом каждая версия Android соответствует один уровень API Android. Так как пользователи устанавливают приложения более ранние также как самой последней версии Android, реальных приложений Android должны быть спроектированы для работы с несколькими уровнями Android API.


### <a name="android-versions"></a>Версии Android

Каждый выпуск Android проходит несколько имен:

-   Версия ОС Android, такие как **Android 7.1**
-   Объект кодовое имя, например _Nougat_
-   Соответствующий API уровня, например **уровень API 25**

Android с кодовым названием может соответствовать несколько версий и уровни API (как показано в следующем списке), но каждая версия Android соответствует ровно на один уровень API.

Кроме того, определяет Xamarin.Android *создавать коды версий* , которые соответствуют известные на данный момент уровнях Android API. Следующий список может помочь преобразования данных между уровень API, версия Android, код и код версии сборки Xamarin.Android.

-   **27 API (Android 8.1)** &ndash; _Oreo_, выпущенном декабря 2017 г. Создание кода версии `Android.OS.BuildVersionCodes.OMr1`

-   **API 26 (Android 8.0)** &ndash; _Oreo_, выпущенном августа 2017 г. Создание кода версии `Android.OS.BuildVersionCodes.O`

-   **API версии 25 (Android 7.1)** &ndash; _Nougat_, выпущенном в декабре 2016 г. Создание кода версии `Android.OS.BuildVersionCodes.NMr1`

-   **API 24 (Android 7.0)** &ndash; _Nougat_, выпущенном августа 2016 г. Создание кода версии `Android.OS.BuildVersionCodes.N`

-   **API 23 (Android 6.0)** &ndash; _Marshmallow_, выпущенном августа 2015 г. Создание кода версии `Android.OS.BuildVersionCodes.M`

-   **API 22 (Android 5.1)** &ndash; _Lollipop_, выпущенном март 2015 г. Создание кода версии `Android.OS.BuildVersionCodes.LollipopMr1`

-   **API 21 (Android 5.0)** &ndash; _Lollipop_, выпущенные за ноябрь 2014 г. Создание кода версии `Android.OS.BuildVersionCodes.Lollipop`

-   **API 20 (Android 4.4W)** &ndash; _Kitkat Watch_, выпущенном июня 2014 г. Создание кода версии `Android.OS.BuildVersionCodes.KitKatWatch`

-   **API 19 (Android 4.4)** &ndash; _Kitkat_, выпущенном в октябре 2013. Создание кода версии `Android.OS.BuildVersionCodes.KitKat`

-   **API 18 (Android 4.3)** &ndash; _Jelly Bean_, выпущенном июля 2013 г. Создание кода версии `Android.OS.BuildVersionCodes.JellyBeanMr2`

-   **API 17 (Android 4.2-4.2.2)** &ndash; _Jelly Bean_, выпущенные за ноябрь 2012 г. Создание кода версии `Android.OS.BuildVersionCodes.JellyBeanMr1`

-   **API 16 (Android 4.1-4.1.1)** &ndash; _Jelly Bean_, выпущенные за июнь 2012 г. Создание кода версии `Android.OS.BuildVersionCodes.JellyBean`

-   **API 15 (Android 4.0.3-4.0.4)** &ndash; _Ice Cream Sandwich_, выпущенном декабря 2011 г. Создание кода версии `Android.OS.BuildVersionCodes.IceCreamSandwichMr1`

-   **API с 14 (Android 4.0-4.0.2)** &ndash; _Ice Cream Sandwich_, выпущенном в октябре 2011 г. Создание кода версии `Android.OS.BuildVersionCodes.IceCreamSandwich`

-   **API 13 (Android 3.2)** &ndash; _Honeycomb_, выпущенном июня 2011 г. Создание кода версии `Android.OS.BuildVersionCodes.HoneyCombMr2`

-   **API 12 (Android 3.1.x)** &ndash; _Honeycomb_, выпущенных в мае 2011 г. Создание кода версии `Android.OS.BuildVersionCodes.HoneyCombMr1`

-   **API 11 (Android 3.0.x)** &ndash; _Honeycomb_, выпущенном в феврале 2011 года. Создание кода версии `Android.OS.BuildVersionCodes.HoneyComb`

-   **API 10 (Android 2.3.3-2.3.4)** &ndash; _Gingerbread_, выпущенном в феврале 2011 года. Создание кода версии `Android.OS.BuildVersionCodes.GingerBreadMr1`

-   **API 9 (Android 2.3-2.3.2)** &ndash; _Gingerbread_, выпущенном ноября 2010 г. Создание кода версии `Android.OS.BuildVersionCodes.GingerBread`

-   **API-8 (Android 2.2.x)** &ndash; _Froyo_, выпущенном июня 2010 г. Создание кода версии `Android.OS.BuildVersionCodes.Froyo`

-   **API-7 (Android 2.1.x)** &ndash; _Eclair_, выпущенном январь 2010 г. Создание кода версии `Android.OS.BuildVersionCodes.EclairMr1`

-   **API-6 (Android версии 2.0.1)** &ndash; _Eclair_, выпущенном декабрь 2009 г. Создание кода версии `Android.OS.BuildVersionCodes.Eclair01`

-   **API-5 (Android 2.0)** &ndash; _Eclair_, выпущенном в ноябре 2009 г. Создание кода версии `Android.OS.BuildVersionCodes.Eclair`

-   **4 API (Android 1.6)** &ndash; _кольцо_, выпущенном сентября 2009 г. Создание кода версии `Android.OS.BuildVersionCodes.Donut`

-   **3 API (Android 1.5)** &ndash; _Cupcake_, выпущенном мая 2009 г. Создание кода версии `Android.OS.BuildVersionCodes.Cupcake`

-   **API 2 (Android 1.1)** &ndash; _базы_, выпущенном февраля 2009 г. Создание кода версии `Android.OS.BuildVersionCodes.Base11`

-   **API 1 (Android 1.0)** &ndash; _базы_, выпущенном в октябре 2008. Создание кода версии `Android.OS.BuildVersionCodes.Base`


Как показано в этом списке, часто выпуска новых версий Android &ndash; иногда несколько выпусков в год. В результате вселенной устройств Android, которые могут выполняться приложения включает разнообразные старых и новых версиях Android. Как можно гарантировать, что приложение работает согласованно и надежно в так много разных версиях Android? Уровни API Android, которые помогают управлять этой проблемы.


### <a name="android-api-levels"></a>Уровни Android API

Каждое устройство Android выполняется в точности *один* уровень API &ndash; этот уровень API гарантированно будет уникальным для каждого версии платформы Android. Уровень API точно определяет версию набор API, который может вызывать приложение; он идентифицирует сочетание элементы манифеста, разрешения, т. д. Этот код к разработчику. Система Android API уровней помогает определить, совместимо ли приложение с изображением системы Android перед установкой приложения на устройстве Android.

При построении приложения, он содержит следующие сведения уровня API:

-   *Целевой* уровень API Android, приложение предназначено для выполнения.

-   *Минимальное* уровня Android API, устройства Android для запуска приложения. 

Эти параметры используются, чтобы убедиться, что функции, необходимые для правильной работы приложения доступен на устройстве Android во время установки. В противном случае приложение будет заблокирован для выполнения на этом устройстве. Например если уровень API устройства Android меньше, чем минимальный уровень API, выбранном для приложения, устройства Android запрещает пользователю устанавливать приложения.


## <a name="project-api-level-settings"></a>Параметры API уровня проекта

Ниже объясняется, как использовать диспетчер пакетов SDK для подготовки среды разработки для уровней API, вы будете работать, следуют подробные объяснения того, как настроить *требуемой версии .NET Framework*, *минимум Версия Android*, и *целевая версия Android* параметры в Xamarin.Android.


### <a name="android-sdk-platforms"></a>Пакет SDK для Android платформ

Перед тем как выбрать целевой объект или API минимальный уровень в Xamarin.Android, необходимо установить версию платформы SDK для Android, которая соответствует до этого уровня API. Диапазон доступных вариантов для требуемой версии .NET Framework, версия Android минимум и целевая версия Android ограничено диапазон из пакета SDK для Android версии, установленные ранее. Можно использовать диспетчер пакетов SDK для убедитесь, что установлены необходимые версии пакета SDK для Android, и его можно использовать для добавления все новых уровней API, которые необходимы для вашего приложения. Если вы не знаете, как установить уровни API, см. в разделе [программа установки Android SDK](~/android/get-started/installation/android-sdk.md).

<a name="framework" />

### <a name="target-framework"></a>Требуемая версия .NET Framework

*Требуемой версии .NET Framework* (также известный как `compileSdkVersion`) — это указанная версия платформы Android (уровень API), во время сборки для компиляции приложения. Этот параметр указывает, какие API приложение *ожидает* для использования при запуске, но не влияет на котором доступно интерфейсов API фактически приложения при установке. Таким образом изменение целевой платформы не изменяет поведение во время выполнения.

Требуемая версия .NET Framework определяет, какие версии библиотеки, приложения связана с &ndash; определяет, какие интерфейсы API, можно использовать в приложении. Например, если вы хотите использовать [NotificationBuilder.SetCategory](https://developer.xamarin.com/api/member/Android.App.Notification+Builder.SetCategory/p/System.String/) метод, который был введен в Android 5.0 Lollipop, необходимо установить требуемую версию .NET Framework **уровень API 21 (Lollipop)** или более поздней версии. При выборе целевой платформы проекта API уровня, такие как **API уровня 19 (KitKat)** и пытаться вызвать метод `SetCategory` метод в коде, вы получите ошибку компиляции.

Мы рекомендуем всегда компилировать с *последнюю* доступной версии целевой платформы. Таким образом вы найдете полезные предупреждающие сообщения для любой устаревшие интерфейсы API, который может вызываться в коде. С помощью последней версии целевой платформы особенно важна при использовании последних версий библиотеки поддержки &ndash; каждая библиотека ожидает, что приложения, которые будут скомпилированного библиотека поддержки минимальный уровень API или более поздней версии. 


# <a name="visual-studiotabvswin"></a>[Visual Studio](#tab/vswin)

Чтобы открыть параметр целевой платформы в Visual Studio, откройте свойства проекта в **обозревателе решений** и выберите **приложения** страницы:

[![Приложение в окне свойств проекта](android-api-levels-images/vs-target-framework-sml.png)](android-api-levels-images/vs-target-framework.png#lightbox)

Задать целевую платформу, выбрав уровень API в раскрывающемся меню в разделе **компиляции с помощью версии Android** как показано выше.

# <a name="visual-studio-for-mactabvsmac"></a>[Visual Studio для Mac](#tab/vsmac)

Чтобы получить доступ к параметр целевой платформы в Visual Studio для Mac, щелкните правой кнопкой мыши имя проекта и выберите **параметры**; это открывает **параметры проекта** диалоговое окно. В этом диалоговом окне перейдите к **сборки > Общие** следующим образом:

[![Создание общего раздела страницы параметров проекта](android-api-levels-images/xs-target-framework-sml.png)](android-api-levels-images/xs-target-framework.png#lightbox)

Задать целевую платформу, выбрав уровень API в раскрывающемся меню справа от **требуемой версии .NET framework** как показано выше.

-----


<a name="minimum" />

### <a name="minimum-android-version"></a>Минимальная версия Android

*Минимум Android версии* (также известный как `minSdkVersion`) — это самая старая версия ОС Android (т. е. самый низкий уровень API), который можно установить и запустить приложение. По умолчанию приложение только можно установить на устройствах с указанной целевой платформы или более поздней версии; Если установлен минимальный Android версии *нижней* чем задано параметром требуемой версии .NET Framework, приложение может также выполняться на более ранних версиях Android. Например, если задать целевую платформу **Android 7.1 (Nougat)** и задайте для версии Android минимальное значение **Android 4.0.3 (Ice Cream Sandwich)**, приложение можно установить на любой платформе с API уровня 15 уровень API 25, включительно.

Несмотря на то, что ваше приложение может успешно создать и установить на этот диапазон платформ, это не гарантирует, что он будет успешно *запуска* на всех этих платформ. Например, если приложение устанавливается на **Android 5.0 (Lollipop)** и код вызывает API, который доступен только в **Android 7.1 (Nougat)** и более поздних версий, приложение будет получать ошибку во время выполнения и возможно аварийных завершений. Таким образом, необходимо убедиться, код &ndash; во время выполнения &ndash; , он вызывает только тех интерфейсов API, поддерживаемых устройством Android, которое он работает под управлением. Другими словами код должен включать проверки явной времени выполнения, чтобы убедиться, что ваше приложение использует более новые интерфейсы API только на устройствах, которые являются новыми, которые их поддерживают.
[Среда выполнения проверяет наличие версии Android](#runtimechecks)далее в этом руководстве объясняется, как добавить эти проверки времени выполнения в коде.


# <a name="visual-studiotabvswin"></a>[Visual Studio](#tab/vswin)

Чтобы открыть параметр Android Минимальная версия, в Visual Studio, откройте свойства проекта в **обозревателе решений** и выберите **манифест Android** страницы. В раскрывающемся меню в разделе **минимум Android версии** минимум Android версии можно выбрать для приложения:

[![Минимальное Android для целевого параметра, должен компилироваться с помощью версии пакета SDK](android-api-levels-images/vs-minimum-version-sml.png)](android-api-levels-images/vs-minimum-version.png#lightbox)

При выборе **используйте компиляция с помощью пакета SDK версии**, минимум Android версии будет совпадать с целевой платформы.

# <a name="visual-studio-for-mactabvsmac"></a>[Visual Studio для Mac](#tab/vsmac)

Чтобы получить доступ к версии минимум Android в Visual Studio для Mac, щелкните правой кнопкой мыши имя проекта и выберите **параметры**; это открывает **параметры проекта** диалоговое окно. Перейдите к **сборки > приложение Android**.
С помощью раскрывающегося меню справа от **минимум Android версии**, можно задать версию Android минимум для вашего приложения:

[![Минимальная версия Android настроена на автоматический - использовать версию целевой платформы](android-api-levels-images/xs-minimum-version-sml.png)](android-api-levels-images/xs-minimum-version.png#lightbox)

При выборе **автоматического &ndash; использовать версию целевой платформы**, минимум Android версии будет совпадать с целевой платформы.

-----


<a name="target" />

### <a name="target-android-version"></a>Целевая версия Android

*Целевая версия Android* (также известный как `targetSdkVersion`) является интерфейс API уровня устройства с Android где приложение ожидает запуска. Android использует этот параметр, чтобы определить, следует ли включить все поведения совместимости &ndash; это гарантирует, что ваше приложение продолжает работать надлежащим образом. Android использует Target Android настройку версии приложения, чтобы выяснить, какие изменения поведения могут быть применены к приложению не нарушает ее (это как Android обеспечивает прямую совместимость).

Требуемая версия .NET Framework и целевой версии Android, имея очень похожие имена, не то же самое. Параметр требуемой версии .NET Framework передает целевой API уровня сведения Xamarin.Android для использования во *время компиляции*, а целевая версия Android взаимодействует целевой API уровень сведений для Android для использования во  *время выполнения* (когда приложение становится установлены и запущены на устройстве).

# <a name="visual-studiotabvswin"></a>[Visual Studio](#tab/vswin)

Чтобы открыть этот параметр в Visual Studio, откройте свойства проекта в **обозревателе решений** и выберите **манифест Android** страницы. В раскрывающемся меню в разделе **целевая версия Android** для вашего приложения можно выбрать целевой версии Android:

[![Целевая версия Android должен компилироваться с помощью версии пакета SDK](android-api-levels-images/vs-target-version-sml.png)](android-api-levels-images/vs-target-version.png#lightbox)

Мы рекомендуем явно задавать целевой версии Android до последней версии Android, используемого для тестирования приложения. В идеале он должен быть задан до последней версии пакета SDK для Android &ndash; это позволяет использовать новые интерфейсы API, перед выполнением изменения в работе. Для большинства разработчиков мы *не* рекомендуем присвоить значение целевой версии Android **используйте компиляция с помощью пакета SDK версии**.

# <a name="visual-studio-for-mactabvsmac"></a>[Visual Studio для Mac](#tab/vsmac)

Чтобы открыть этот параметр в Visual Studio для Mac, щелкните правой кнопкой мыши имя проекта и выберите **параметры**; это открывает **параметры проекта** диалоговое окно. Перейдите к **сборки > приложение Android**. С помощью раскрывающегося меню справа от **целевая версия Android**, можно задать целевой версии Android для приложения:

[![Целевая версия Android настроена на автоматический - использовать версию целевой платформы](android-api-levels-images/xs-target-version-sml.png)](android-api-levels-images/xs-target-version.png#lightbox)

Мы рекомендуем явно задавать целевой версии Android до последней версии Android, используемого для тестирования приложения. В идеале он должен быть задан до последней доступной версии пакета SDK для Android &ndash; это позволяет использовать новые интерфейсы API, перед выполнением изменения в работе. Для большинства разработчиков, мы не рекомендуем присвоить значение целевой версии Android **автоматически — использовать версию целевой платформы**.

-----

Как правило целевая версия Android следует ограничено минимальной версии Android и целевой платформы. Это означает следующее:

**Минимальная версия Android < = целевая версия Android < = требуемой версии .NET Framework**

Дополнительные сведения об уровнях SDK см. в разделе разработчика Android [пакет sdk использует](https://developer.android.com/guide/topics/manifest/uses-sdk-element.html) документации.


<a name="runtimechecks" />

## <a name="runtime-checks-for-android-versions"></a>Проверки времени выполнения для версий Android

Обновляется при каждой новой версии Android framework API для предоставления новых или заменяющая ее функциональность. За некоторыми исключениями функциональные возможности API в новых версиях Android переносится в более новых версиях Android без изменения. Таким образом Если ваше приложение работает на определенного уровня Android API, она обычно будет работать на более поздние версии уровень Android API без изменений. Но что делать, если требуется, чтобы запустить приложение в более ранних версиях Android?

Если выбрать минимум Android версии, *нижней* чем настроек требуемой версии .NET Framework, некоторые интерфейсы API могут быть недоступны в приложение во время выполнения. Тем не менее приложение по-прежнему может выполняться на устройстве с более ранней, но в режиме ограниченной функциональности. Для каждого API, который не поддерживается на платформах Android, соответствующий параметру минимум Android версии, ваш код должен явно проверять значение `Android.OS.Build.VERSION.SdkInt` свойства для определения уровня API платформы, на которой выполняется приложение. Если уровень API *нижней* чем Android Минимальная версия, которая поддерживает API необходимо вызвать, а затем код должен найти способ работать правильно без этого вызова API.

К примеру, предположим, что мы хотим использовать [NotificationBuilder.SetCategory](https://developer.xamarin.com/api/member/Android.App.Notification+Builder.SetCategory/p/System.String/) метод для категоризации уведомления при запуске на **Android 5.0 Lollipop** (и более поздних версий), но мы все равно хотите наше приложение для запустить в более ранних версиях Android, такие как **Android 4.1 Jelly Bean** (где `SetCategory` недоступен). Относящаяся к таблице версия Android в начале этого руководства, мы видим, что код версии сборки для **Android 5.0 Lollipop** является `Android.OS.BuildVersionCodes.Lollipop`. Для поддержки более старых версиях Android where `SetCategory` будет недоступен, наш код может обнаружить уровень API во время выполнения и по условию вызывать `SetCategory` только при уровне API не меньше кода версии сборки без описания операций:

```csharp
if (Android.OS.Build.VERSION.SdkInt >= Android.OS.BuildVersionCodes.Lollipop)
{
    builder.SetCategory(Notification.CategoryEmail);
}
```

В этом примере имеет значение целевой платформы для нашего приложения **Android 5.0 (уровень API 21)** и его версия Android минимум присваивается **Android 4.1 (уровень API 16)**. Так как `SetCategory` доступен на уровне API `Android.OS.BuildVersionCodes.Lollipop` и более поздней версии, этот пример кода вызывает `SetCategory` только когда это реально доступной &ndash; будет происходить *не* попытка вызова метода `SetCategory` при API уровень — 16, 17, 18, 19 или 20. Функциональные возможности уменьшается в этих более ранних версиях Android только при условии, что уведомления не сортируются правильно (так как они не упорядочены по типу), но уведомления по-прежнему публикуются для предупреждения пользователя. Наше приложение по-прежнему работает, но его функциональность слегка неодинаково.

Как правило проверка версии сборки помогает решить во время выполнения между действия новому и старому кода. Пример:

```csharp
if (Android.OS.Build.VERSION.SdkInt >= Android.OS.BuildVersionCodes.Lollipop)
{
    // Do things the Lollipop way
}
else
{
    // Do things the pre-Lollipop way
}
```

Нет правил быстрый и простой, объясняется, как уменьшить или изменить функциональность приложения, когда оно работает на более старых версий Android, отсутствующим один или несколько интерфейсов API. В некоторых случаях (например, в `SetCategory` приведенном выше примере), достаточно просто пропустить вызов API, если оно не доступно. Однако в других случаях может потребоваться реализовать альтернативной функциональности по `Android.OS.Build.VERSION.SdkInt` обнаружено, должны быть меньше, чем API уровне, что вашему приложению потребуется условия его оптимальной работы.

<a name="libraries" />

## <a name="api-levels-and-libraries"></a>Уровни API и библиотеки

# <a name="visual-studiotabvswin"></a>[Visual Studio](#tab/vswin)

При создании проекта Xamarin.Android библиотеки (например, библиотеку классов или библиотека привязок), можно настроить только на настройки требуемой версии .NET Framework &ndash; минимум Android версии и параметры целевой Android версии недоступны. Это потому, что существует не **манифест Android** страницы:

[![Доступен только для компиляции, с помощью Android version-параметр](android-api-levels-images/vs-library-options-sml.png)](android-api-levels-images/vs-library-options.png#lightbox)

# <a name="visual-studio-for-mactabvsmac"></a>[Visual Studio для Mac](#tab/vsmac)

При создании проекта библиотеки Xamarin.Android, не **приложения Android** страницы, где можно настроить минимальное Android версии и целевая версия Android &ndash; минимум Android версии и целевой объект Параметры Android версии недоступны.
Это потому, что существует не **сборки > приложение Android** страницы):

[![Страница «Общие» без минимального и целевого параметры версии сборки](android-api-levels-images/xs-library-options-sml.png)](android-api-levels-images/xs-library-options.png#lightbox)

-----

Минимум Android версии и параметры Android целевой версии недоступны, поскольку полученный библиотеки не является автономным приложением &ndash; библиотеки можно запустить в любой версии Android, в зависимости от приложения, которое поставляется с. Можно указать, как библиотеки должен быть *компиляции*, но не может предсказать, библиотеке той или иной платформе уровень API будет выполняться на. С учетом этого следующие рекомендации необходимо соблюдать при использовании или библиотек:

-   **При использовании библиотека Android** &ndash; библиотека Android при использовании в приложении, не забудьте задать целевую платформу приложения, параметр для API уровня *по крайней мере достигать* целевой объект Параметр Framework библиотеки.

-   **При создании библиотека Android** &ndash; при создании библиотеки Android для использования другими приложениями, не забудьте задать его значение целевой платформы на минимальный уровень API, которые необходимы для компиляции.

Эти советы и рекомендации для предотвращения ситуации, где это библиотека пытается вызывать API, которая недоступна во время выполнения (что может привести к сбою в работе приложения). Если вы являетесь разработчиком библиотеки, вам необходимо ограничить использование вызовов API для небольших и широко известных подмножества общую контактную зону API. Это способствует убедитесь, что библиотеки можно безопасно использовать версиях широкий диапазон Android.


## <a name="summary"></a>Сводка

В этом руководстве описано, как используются уровни Android API управление совместимостью приложений в разных версиях Android. Она предоставляла подробные инструкции по настройке Xamarin.Android *требуемой версии .NET Framework*, *минимум Android версии*, и *целевая версия Android* параметры проекта. Она предоставляла инструкции по использованию диспетчера пакетов SDK Android для установки пакетов SDK, включенные примеры того, как написать код для обработки с разными уровнями API во время выполнения, а также было рассмотрено, как управлять уровнями API при создании или использовании библиотеки Android. В нем также приведен полный список, к которому относится уровни API Android версии (например, Android 4.4), имена версия Android (Kitkat) и коды версий сборки Xamarin.Android.


## <a name="related-links"></a>Связанные ссылки

- [Установка пакета SDK для Android](~/android/get-started/installation/android-sdk.md)
- [Изменяет средства интерфейса командной строки пакета SDK](~/android/troubleshooting/sdk-cli-tooling-changes.md)
- [Комплектации вашей compileSdkVersion, minSdkVersion и targetSdkVersion](https://medium.com/google-developers/picking-your-compilesdkversion-minsdkversion-targetsdkversion-a098a0341ebd)
- [Что такое уровень API?](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels)
- [Процессора, теги и номера сборки](https://source.android.com/source/build-numbers)
