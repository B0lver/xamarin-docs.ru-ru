---
title: Функции marshmallow
description: Эта статья поможет вам приступить к использованию в с помощью Xamarin.Android для разработки приложений для Android 6.0 Marshmallow.
ms.prod: xamarin
ms.assetid: E4D6F183-98D2-460A-9D65-937639A899E0
ms.technology: xamarin-android
author: conceptdev
ms.author: crdun
ms.date: 03/01/2018
ms.openlocfilehash: a396f4fe59db36b134843d2538bcb470a452a85b
ms.sourcegitcommit: 4b402d1c508fa84e4fc3171a6e43b811323948fc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61158034"
---
# <a name="marshmallow-features"></a>Функции marshmallow

_Эта статья поможет вам приступить к использованию в с помощью Xamarin.Android для разработки приложений для Android 6.0 Marshmallow._

В этой статье приводится обзор новых функций в Android 6.0 Marshmallow, объясняется способ подготовки для разработки приложений Android Marshmallow Xamarin.Android и ссылки на примеры приложений, которые показывают, как использовать новый Android Marshmallow функции в приложениях Xamarin.Android. 


## <a name="overview"></a>Обзор

[Android 6.0 Marshmallow](https://developer.android.com/about/versions/marshmallow/index.html), — это следующий основной Android релиза Android Lollipop.
Xamarin.Android поддерживает Android Marshmallow, а также включает:

-   **API 23/Android 6.0 привязки** &ndash; Android 6.0 добавляет множество новых интерфейсов API для новых функций, описанных ниже; эти API доступны для приложений Xamarin.Android, когда целевой уровень API 23. Дополнительные сведения об API-интерфейсах Android 6.0 см. в разделе [Android 6.0 интерфейсы API](https://developer.android.com/preview/api-overview.html). 

[![Планшеты и телефоны под управлением Marshmallow изображения Hero](marshmallow-images/android-m-hero-sml.png)](marshmallow-images/android-m-hero.png#lightbox)

Несмотря на то, что в выпуске Marshmallow главным образом ориентирован на «польский и качества», он также предоставляет много новых функций интерес для разработчиков Xamarin.Android. Эти функции включают перечисленные ниже. 

-   **Разрешения среды выполнения** &ndash; это улучшение позволяет пользователям утверждение разрешения безопасности на основе конкретного случая во время выполнения. 

-   **Улучшения проверки подлинности** &ndash; начиная с Android Marshmallow, приложения могут теперь использовать датчики отпечатков пальцев для проверки подлинности пользователей и новый *подтверждения учетных данных* компонентов уменьшает количество необходимых для ввода пароли. 

-   **Связывание приложения** &ndash; эта функция помогает избежать потребность **выбора приложения** всплывающее окно, автоматически сопоставив приложения с веб-домены. 

-   **Прямой общий ресурс** &ndash; можно определить *прямой целевые объекты папки* , упростить общий доступ к краткий и понятный для пользователей; эта функция позволяет пользователями использовать содержимое совместно с другими приложениями. 

-   **Голосовые взаимодействия** &ndash; этот новый интерфейс API позволяет создавать функции грамматики голосового управления голосовой связи в ваше приложение. 

-   **Режим отображения 4 K** &ndash; в Android Marshmallow приложение может запрашивать разрешение экрана 4 K на оборудовании, которое ее поддерживает. 

-   **Новые возможности аудио** &ndash; начиная с Marshmallow, Android теперь поддерживает протокол MIDI. Пакет также содержит новые классы для создания цифровой записи звука и объекты воспроизведения и предлагает новые обработчики API для связывания аудио-и ввода. 

-   **Новые возможности видео** &ndash; Marshmallow предоставляет новый класс, который позволяет приложениям обрабатывать аудио и видео потоки синхронизацию; этот класс также предоставляет поддержку для скорости динамической воспроизведения. 

-   **Android for Work** &ndash; Marshmallow включает улучшенные элементы управления для устройств, принадлежащих организации, в однопользовательском режиме. Он поддерживает автоматическую установку и удаление приложения по владельцу устройства, принятие автоматического обновления системы, улучшенная сертификат управления, отслеживание использования данных, управления разрешениями и уведомлениями о состоянии рабочих. 

-   **Материала библиотека поддержки разработки** &ndash; новый *библиотека поддержки разработки* предоставляет компоненты и шаблоны, которые упрощают встраивание материальному дизайну вид в приложение. 

Кроме того многие основные обновления библиотеки Android были выпущены с Android M, и эти обновления обеспечивают новые функции для Android M и более ранних версиях Android.

Кроме того многие основные обновления библиотеки Android были выпущены с Android Marshmallow, и эти обновления обеспечивают новые функции для Android Marshmallow и более ранних версиях Android. В этой статье объясняется, как приступить к созданию приложений с Android Marshmallow, и в нем представлены общие сведения о новой функции выделяет в Android 6.0. 

## <a name="requirements"></a>Требования

Для использования новых функций Android Marshmallow в приложениях на базе Xamarin требуется следующее: 

-   **Xamarin.Android** &ndash; Xamarin.Android 5.1.7.12 или более поздней версии должен быть установлен и настроен с помощью Visual Studio или Xamarin Studio.

-   **Visual Studio для Mac** или **Visual Studio** &ndash; Если вы используете Visual Studio для Mac версии 5.9.7.22 или более поздней. Если вы используете Visual Studio версии 3.11.1537 или более поздняя версия средства Xamarin для Visual Studio является обязательным. 

-   **Пакет SDK для Android** &ndash; Android 6.0 SDK (API 23) или более поздней версии необходимо установить через диспетчер пакетов SDK для Android.

-   **Java Developer Kit** &ndash; для Xamarin.Android требуется [JDK 1.8](https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html) или более поздней версии, при разработке для API уровня 24 или более поздней версии (JDK 1.8 также поддерживает уровни API ниже 24, включая Marshmallow). 64-разрядной версии JDK 1.8 является обязательным, если вы используете пользовательские элементы управления или средство предварительного просмотра формы.

Вы можете продолжать использовать [JDK 1.7](https://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html) при разработке специально для уровень API 23 или более ранней версии. 


## <a name="getting-started"></a>Начало работы

Чтобы начать работу с Android Marshmallow с помощью Xamarin.Android, необходимо скачать и установить новейшие средства и пакеты SDK, перед созданием проекта Android Marshmallow. 

1.  Установите последние обновления Xamarin из **стабильной** канала. 

2.  Установка средств и пакеты Android 6.0 Marshmallow SDK.

3.  Создание нового проекта Xamarin.Android излюбленного Android Marshmallow 6.0 (уровень API 23). 

4.  Настройте эмулятор или устройство для Android Marshmallow.

Каждый из этих шагов описан в следующих разделах:


### <a name="install-xamarin-updates"></a>Установка обновлений для Xamarin

Чтобы обновить Xamarin, таким образом, чтобы она включает поддержку Android 6.0 Marshmallow, изменить канал обновления для **стабильной** и установите все обновления. Дополнительные сведения об установке обновлений из канала обновления см. в разделе [Смена канала обновления](https://github.com/xamarin/recipes/tree/master/Recipes/cross-platform/ide/change_updates_channel). 


### <a name="install-the-android-60-sdk"></a>Установка пакета SDK для Android версии 6.0

Чтобы создать проект Xamarin.Android для Android Marshmallow, сначала необходимо использовать диспетчер пакетов SDK Android для установки пакета SDK для Android 6.0:

-   Запустите диспетчер пакетов SDK для Android (в Visual Studio для Mac, используйте **средства > Диспетчер пакетов SDK**; в Visual Studio, используют **средства > Android > Диспетчер пакетов SDK Android**) и установите последнюю Android SDK Tools:

    [![Выбор средства пакета SDK для Android, диспетчер пакетов SDK для Android](marshmallow-images/mnc-preview-tools.png)](marshmallow-images/mnc-preview-tools.png#lightbox)

-   Кроме того, установите последнюю версию **Android 6.0** пакетов SDK:

    [![Выбор пакетов SDK для Android 6.0 Диспетчер пакетов SDK для Android](marshmallow-images/mnc-preview-packages.png)](marshmallow-images/mnc-preview-packages.png#lightbox)

Необходимо установить Android SDK Tools версии 24.3.4 или более поздней версии.
Дополнительные сведения об использовании диспетчера пакетов SDK Android для установки пакета SDK для Android 6.0 см. в разделе [диспетчер пакетов SDK](https://developer.android.com/tools/help/sdk-manager.html).



### <a name="start-a-xamarinandroid-project"></a>Запуск проекта Xamarin.Android

Создание нового проекта Xamarin.Android. Если вы не знакомы с разработки приложений Android с помощью Xamarin, см. в разделе [Привет, Android](~/android/get-started/hello-android/index.md) Дополнительные сведения о создании проектов Android. 

При создании проекта Android, необходимо настроить параметры версии целевой объект Android 6.0 MarshMallow. Для целевого объекта проекта для Marshmallow, необходимо настроить проект для **уровень API 23 (Xamarin.Android версии 6.0. поддержка)**. Дополнительные сведения о настройке уровней уровня Android API, см. в разделе [уровнях API Android понимание](~/android/app-fundamentals/android-api-levels.md).



### <a name="configure-an-emulator-or-device"></a>Настройка эмулятора или устройства

Если вы используете эмулятор, запустите диспетчер Android AVD и создайте новое устройство, используя следующие параметры:

-   Устройство: Nexus 5, 6 или 9.
-   Целевой объект: Android 6.0 - уровень API 23
-   ABI: x86

Например это виртуальное устройство настраивается для эмуляции Nexus 5:

[![Настройка с помощью устройства Nexus 5, целевой объект Android 6.0 и Intel Atom (x86) виртуальное устройство AVD](marshmallow-images/android-m-avd.png)](marshmallow-images/android-m-avd.png#lightbox)

При использовании физического устройства, например Nexus 5, 6 или 9, можно установить образ предварительной версии Android Marshmallow. Дополнительные сведения об обновлении устройства в Android Marshmallow, см. в разделе [образы оборудования системы](https://developer.android.com/preview/download.html#images).



## <a name="new-features"></a>Новые функции

Многие изменения, внесенные в Android Marshmallow ориентированы на повышение удобства работы пользователя для Android, повышая производительность и исправление ошибок. Однако Marshmallow также представлены некоторые значительные изменения в основы платформы Android. В следующих разделах, выделите эти усовершенствования и предоставляют ссылки, которые помогут вам приступить к работе с помощью новых функций Android Marshmallow в вашем приложении. 



### <a name="runtime-permissions"></a>Разрешения среды выполнения

Система Android разрешений были значительно оптимизирован и упрощен с момента Android Lollipop. В Android Marshmallow пользователям предоставлять разрешения на основе конкретного случая во время выполнения, а не во время установки. Для поддержки этой возможности в Android Marshmallow и более поздних версий, разработке приложения вы можете запрашивать у пользователя разрешения во время выполнения (в рамках которых необходимы разрешения). Это изменение упрощает для пользователей приступить к использованию приложения сразу, так как он упрощает процесс установки и обновления приложения. 

См. в разделе [запрос разрешений среды выполнения в Android Marshmallow](https://blog.xamarin.com/requesting-runtime-permissions-in-android-marshmallow/) Дополнительные сведения (в том числе примеры кода), о реализации разрешения среды выполнения в приложениях Xamarin.Android.
Xamarin предоставляет пример приложения, показано, как работают разрешения среды выполнения, в Android Marshmallow (и более поздних версий). [RuntimePermissions](https://developer.xamarin.com/samples/monodroid/android-m/RuntimePermissions).

Этот пример приложения демонстрирует следующее:

-   Как проверить и запрашивать разрешения во время выполнения.
-   Как объявить разрешения для устройств Android M.

Чтобы использовать этот пример приложения:

1.  Коснитесь **камеры** или **контакты** кнопки для отображения разрешений запроса диалоговое окно.
2.  Предоставьте разрешение на просмотр фрагментов камеры или контакты.

Дополнительные сведения о новых возможностях разрешения среды выполнения в Android Marshmallow, см. в разделе [работа с разрешениями системного](https://developer.android.com/preview/features/runtime-permissions.html).



### <a name="authentication-enhancements"></a>Усовершенствования проверки подлинности

Android Marshmallow включает в себя два улучшения проверки подлинности, которые помогают устранить необходимость использования паролей:

-   **Отпечаток пальца проверки подлинности** &ndash; используется сканирование отпечатков пальцев для проверки подлинности пользователей.

-   **Подтверждение учетных данных** &ndash; проверяет подлинность пользователей, в зависимости от того, как долго устройство будет разблокирована.

Ссылки и примеры приложений, описанным далее может помочь вам стать знакомый с этими новыми функциями.


#### <a name="fingerprint-authentication"></a>Проверка подлинности по отпечаткам

На устройствах, поддерживающих отпечатков пальцев, сканирование оборудования, можно использовать новый `FingerPrintManager` класс для проверки подлинности пользователя.
Дополнительные сведения о функции проверки подлинности по отпечатку пальца в Android Marshmallow, см. в разделе [проверка подлинности по отпечаткам](https://developer.android.com/preview/api-overview.html#fingerprint-authentication).

Xamarin предоставляет пример приложения, демонстрирующий способ использования зарегистрированных отпечатков для проверки подлинности пользователя в приложении: [FingerprintDialog](https://developer.xamarin.com/samples/monodroid/android-m/FingerprintDialog).

Чтобы использовать этот пример приложения:

1.  Touch **покупки** кнопку, чтобы открыть диалоговое окно проверки подлинности по отпечатку пальца.
2.  Сканировать в зарегистрированных отпечаток пальца для проверки подлинности.

Обратите внимание, что этот пример приложения устройства с помощью отпечатков пальцев.
Это приложение не сохраняет отпечаток пальца (или пароль).



#### <a name="voice-interactions"></a>Речевое взаимодействие

Новая функция речевое взаимодействие, представленные в Android Marshmallow позволяет пользователям приложения для использования голоса для подтверждения действия и выберите из списка параметров. Дополнительные сведения о речевое взаимодействие, см. в разделе [Обзор API взаимодействия голосовой](https://developers.google.com/voice-actions/interaction/). 

См. в разделе [Добавление диалога в приложение Android с помощью речевое взаимодействие](https://blog.xamarin.com/add-a-conversation-to-your-android-app-with-voice-interactions/) Дополнительные сведения (в том числе примеры кода), о реализации речевое взаимодействие в приложениях Xamarin.Android.
Пример приложения доступен, показано, как использовать API взаимодействия голоса в приложении Xamarin.Android: [Голосовые взаимодействия](https://github.com/jamesmontemagno/MarshmallowSamples/tree/master/VoiceInteractions).



#### <a name="confirm-credential"></a>Подтверждение учетных данных

С помощью нового *подтверждения учетных данных* функцию из Android Marshmallow, можно освободить пользователей от необходимости запоминать и введите пароли для конкретных приложений путем проверки подлинности, их зависимости от того, как долго устройство разблокирована.
Чтобы сделать это, используйте новый `SetUserAuthenticationValidityDurationSeconds` метод `KeyGenerator`. Используйте `KeyGuardManager`в `CreateConfirmDeviceCredentialIntent` метод повторно пройти проверку подлинности пользователя в приложении. Дополнительные сведения об этой новой функции в Android Marshmallow, см. в разделе [подтверждения учетных данных](https://developer.android.com/preview/api-overview.html#confirm-credential).

Xamarin предоставляет пример приложения, демонстрирующий способ использования учетных данных устройства (например, ПИН-код, шаблон или пароль) в приложении: [ConfirmCredential](https://developer.xamarin.com/samples/monodroid/android-m/ConfirmCredential/)

Чтобы использовать этот пример приложения:

1.  Настройка экрана блокировки безопасности на устройстве (**Secure > Безопасность > Screenlock**).
2.  Коснитесь **покупки** кнопку и подтвердить учетные данные экрана блокировки безопасности.



### <a name="chrome-custom-tabs"></a>Chrome пользовательских вкладок

Выбор, которыми сталкиваются разработчики приложения, когда пользователь касается URL-адрес: приложение можно запустить обозреватель или использовать обозреватель в приложении на основе `WebView`. Оба варианта сопровождаться рядом проблем &ndash; запуском обозревателя — это коммутатор большой контекста, который не настраивается, при `WebView`s никому не сообщайте состояние браузера. Кроме того, использование `WebView`s можно добавить дополнительные затраты. 

*Chrome настраиваемые вкладки* позволяет легко и элегантно отображения веб-сайтов с помощью Chrome без необходимости оставить приложения пользователям. Эта функция позволяет приложениям больший контроль над веб-интерфейс пользователя; с его помощью установить переходы между машинный код и веб-содержимое более удобный без необходимости прибегать к `WebView`. Приложения могут также влиять на способ Chrome выглядит и работает, настроив следующие: 

-   Цвет панели

-   Включение и выключение анимации

-   Пользовательские действия в меню панели инструментов и переполнения Chrome

-   Перед запуском Chrome и содержимого предварительной выборки (для ускорения загрузки)

Чтобы воспользоваться преимуществами этой функции в приложение Xamarin.Android, загрузите и установите [Android библиотека вкладки Custom поддержки](https://www.nuget.org/packages/Xamarin.Android.Support.CustomTabs/).
Дополнительные сведения об этой функции см. в разделе [Chrome настраиваемые вкладки](https://developer.chrome.com/multidevice/android/customtabs).



### <a name="material-design-support-library"></a>Библиотека поддержки материального исполнения

Android Lollipop появился [материальному дизайну](http://www.google.com/design/spec/material-design/introduction.html) как новый язык проектирования, чтобы обновить взаимодействие с Android (см. в разделе [тема материала](~/android/user-interface/material-theme.md) сведения об использовании материального исполнения в приложениях Xamarin.Android). В Android Marshmallow, Google ввела *библиотека поддержки Android разработки* для упрощения приложений разработчики материал проектирование внешнего вида и поведения. Эта библиотека включает следующие компоненты:

-   **CoordinatorLayout** &ndash; новый `CoordinatorLayout` мини-приложение, аналогично, но эффективнее, чем `FrameLayout`. Можно использовать `CoordinatorLayout` как контейнер для дочерних представлений или макета верхнего уровня и он предоставляет `layout_anchor` атрибут, который может использоваться для представления привязки по отношению к другим представлениям.

-   **Сворачивание панели инструментов** &ndash; новый `CollapsingToolbarLayout` является свертывающейся панели приложения, который является оболочкой для `Toolbar`. (Обратите внимание, что *панели приложения* является то, что ранее назывался *панели действий*.)

-   **С плавающей кнопкой действия** &ndash; круглая кнопка, который обозначает основного действия в интерфейсе приложения.

-   **С плавающей запятой метки для редактирования текста** &ndash; использует новый `TextInputLayout` мини-приложения (который является оболочкой `EditText`) Показать метку с плавающей запятой, если указание скрывается в том случае, когда пользователь вводит текст.

-   **Представление навигации** &ndash; новый `NavigationView` мини-приложение поможет вам использовать панель навигации способом, который проще для перехода.

-   **Snackbar** &ndash; новый `SnackBar` мини-приложение работает облегченный механизм обратной связи (аналогично всплывающее уведомление), отображающий краткое сообщение в нижней части экрана отображается поверх всех других элементов на экране.

-   **Материала вкладки** &ndash; новый `TabLayout` мини-приложение предоставляет горизонтальная разметка для отображения вкладок как способ реализовать Навигация верхнего уровня в своем приложении.

Чтобы воспользоваться преимуществами [библиотека поддержки разработки](https://developer.android.com/tools/support-library/features.html#design) в приложение Xamarin.Android, скачайте и установите Xamarin [разработке библиотеки поддержки Xamarin](https://www.nuget.org/packages/Xamarin.Android.Support.Design/) пакет NuGet.

См. в разделе [красивые материальному дизайну с разработки библиотеки поддержки Android](https://blog.xamarin.com/add-beautiful-material-design-with-the-android-support-design-library/) Дополнительные сведения (в том числе примеры кода) об использовании библиотеки поддержки разработки материал в приложениях Xamarin.Android.
Xamarin предоставляет пример приложения, который демонстрирует новую библиотеку Android разработки на Xamarin.Android &ndash; [Cheesesquare](https://developer.xamarin.com/samples/monodroid/android5.0/Cheesesquare).
Этот образец демонстрирует следующие функции библиотеки конструктора:


-   Сворачивание панели инструментов
-   Плавающей кнопкой действия
-   Привязка представления
-   NavigationView
-   Snackbar

Дополнительные сведения о библиотеке разработки, см. в разделе [библиотека поддержки Android разработки](http://android-developers.blogspot.co.at/2015/05/android-design-support-library.html) в блоге разработчиков под Android.


### <a name="additional-library-updates"></a>Дополнительная библиотека обновлений

В дополнение к Android Marshmallow Google объявила о связанных обновлений на несколько основных библиотек Android. Xamarin предоставляет поддержку Xamarin.Android для этих обновлений через несколько пакетов NuGet предварительной версии: 

-   [Сервисы Google Play](https://www.nuget.org/packages?q=Xamarin+Google+Play+Services) &ndash; последняя версия служб Google Play включает новый *приложение приглашает* функция, которая позволяет пользователям совместно использовать свои приложения с друзьями. Дополнительные сведения об этой функции см. в разделе [Reach разверните приложения с Google приложение приглашает](https://blog.xamarin.com/expand-your-apps-reach-with-googles-app-invites/). 

-   [Android библиотеки поддержки](https://www.nuget.org/packages?q=xamarin+support+library) &ndash; эти пакеты NuGet предоставляют функции, доступные только для библиотеки API-интерфейсы то же время предоставляя обратную совместимость версий API платформы Android. 

-   [Библиотеки Android Носимого](https://www.nuget.org/packages/Xamarin.Android.Wear) &ndash; этот пакет NuGet включает привязки службы Google Play. Последнюю версию библиотеки носимого добавляет новые функции, (включая упрощения навигации для пользовательских приложений) на платформу Android Wear. 


## <a name="summary"></a>Сводка

В этой статье представлены Android Marshmallow и было рассмотрено, как установить и настроить новейшие средства и пакеты для разработки приложений Xamarin.Android на Marshmallow. Он также ознакомились с обзором наиболее значимых новых функций Android Marshmallow для разработки приложений Xamarin.Android.


## <a name="related-links"></a>Связанные ссылки

- [Android 6.0 Marshmallow](https://developer.android.com/about/versions/marshmallow/index.html)
- [Получить пакет SDK для Android](https://developer.android.com/sdk/index.html#Other)
- [Обзор возможностей](https://developer.android.com/preview/api-overview.html)
- [Заметки о выпуске](https://developer.xamarin.com/releases/android/xamarin.android_5/xamarin.android_5.1.99/)
- [RuntimePermissions (пример)](https://developer.xamarin.com/samples/monodroid/android-m/RuntimePermissions)
- [ConfirmCredential (пример)](https://developer.xamarin.com/samples/monodroid/android-m/ConfirmCredential)
- [FingerprintDialog (пример)](https://developer.xamarin.com/samples/monodroid/android-m/FingerprintDialog)
