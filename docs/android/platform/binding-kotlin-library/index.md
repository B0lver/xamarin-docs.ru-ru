---
title: Привязка библиотек Котлин для Android
description: В этом документе описывается создание C# привязок к коду Котлин, что позволяет использовать собственные библиотеки в приложении Xamarin. Android.
ms.prod: xamarin
ms.assetid: AB03A6C4-5A5A-4EAD-AD51-D887B20A3551
ms.technology: xamarin-android
author: alexeystrakh
ms.author: alstrakh
ms.date: 02/11/2020
ms.openlocfilehash: ec7d154b0d7fcb055bd398089e142fe8b1d9f60e
ms.sourcegitcommit: b751605179bef8eee2df92cb484011a7dceb6fda
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/20/2020
ms.locfileid: "77497968"
---
# <a name="bind-android-kotlin-libraries"></a>Привязка библиотек Котлин для Android

Платформа Android, а также ее собственные языки и средства постоянно развиваются, и существует множество сторонних библиотек, разработанных с использованием новейших предложений. Максимизация повторного использования кода и компонентов является одной из основных целей кросс-платформенной разработки. Возможность повторного использования компонентов, созданных с помощью Котлин, становится все более важной для разработчиков Xamarin, так как их популярность растет в развитии разработчиков. Возможно, вы уже знакомы с процессом привязки регулярных библиотек [Java](https://docs.microsoft.com/xamarin/android/platform/binding-java-library/) . Теперь доступна дополнительная документация, описывающая процесс [привязки библиотеки Котлин](walkthrough.md), так что они могут использоваться приложением Xamarin таким же образом. Цель этого документа — описать высокоуровневый подход к созданию привязки Котлин для Xamarin.

## <a name="high-level-approach"></a>Высокоуровневый подход

С помощью Xamarin можно привязать любую собственную библиотеку стороннего производителя для использования приложением Xamarin. Котлин — это новый язык, и создание привязки для библиотек, созданных на этом языке, требует некоторых дополнительных действий и инструментов. Этот подход включает в себя следующие четыре шага:

1. Создание собственной библиотеки
1. Подготовка метаданных Xamarin, которая позволяет средствам Xamarin создавать C# классы
1. Создание библиотеки привязок Xamarin с помощью собственной библиотеки и метаданных
1. Использование библиотеки привязок Xamarin в приложении Xamarin

В следующих разделах описаны эти действия с дополнительными сведениями.

### <a name="build-the-native-library"></a>Создание собственной библиотеки

Первый шаг — получить собственную библиотеку Котлин (пакет AAR, который является архивом Android). Вы можете либо запросить его непосредственно у поставщика, либо создать его самостоятельно.

### <a name="prepare-the-xamarin-metadata"></a>Подготовка метаданных Xamarin

Вторым шагом является подготовка файла преобразования метаданных, который будет использоваться инструментами Xamarin для создания соответствующих C# классов. В наилучшем сценарии этот файл может быть пустым, где все классы обнаруживаются и создаются средствами Xamarin. В некоторых случаях для создания правильного и (или) требуемого C# кода необходимо применить преобразование метаданных. Во многих случаях для обнаружения скрытых зависимостей и нежелательных классов, которые необходимо исключить из последнего списка создаваемых C# классов, необходимо использовать AAR дизассемблер, такой как [декомпилятор Java (JD)](http://java-decompiler.github.io/). Окончательные метаданные должны представлять открытый интерфейс, с которым будет взаимодействовать приложение Xamarin. Android.

### <a name="build-a-xamarinandroid-binding-library"></a>Создание библиотеки привязки Xamarin. Android

Третий шаг — создать специальный проект — библиотеку привязки Xamarin. Android. Он включает библиотеки Котлин как собственные ссылки и преобразование метаданных, определенное на предыдущем шаге. Во время записи для каждого пакета AAR, на который указывает ссылка, требуется отдельный проект библиотеки привязки Android. Для поддержки стандартной библиотеки Котлин Библиотека привязки должна добавить пакет [Xamarin. Котлин. StdLib](https://www.nuget.org/packages/Xamarin.Kotlin.StdLib/) .

### <a name="consume-the-xamarin-binding-library"></a>Использование библиотеки привязки Xamarin

Четвертый и последний шаг — ссылка на библиотеку привязки в приложении Xamarin. Android. Добавление ссылки на библиотеку с привязкой Xamarin. Android позволяет приложению Xamarin использовать предоставленные классы Котлин из этого пакета.

## <a name="walkthrough"></a>Пошаговое руководство

Приведенный выше подход описывает действия высокого уровня, необходимые для создания привязки Котлин для Xamarin. Существует множество действий более низкого уровня, которые необходимо учитывать при подготовке этих привязок на практике, включая адаптацию к изменениям в собственных средствах и языках. Цель — помочь вам получить более глубокое представление об этой концепции и общих действиях, связанных с этим процессом. Подробное пошаговое руководство см. в [руководстве по привязке Xamarin Котлин](walkthrough.md) .

## <a name="related-links"></a>Связанные ссылки

- [Android Studio](https://developer.android.com/studio)
- [Установка Gradle](https://gradle.org/install/)
- [Visual Studio для Mac](https://visualstudio.microsoft.com/downloads)
- [Декомпилятор Java](http://java-decompiler.github.io/)
- [Библиотека Котлин Бубблепиккер](https://github.com/igalata/Bubble-Picker)
- [Привязка библиотеки Java](https://docs.microsoft.com/xamarin/android/platform/binding-java-library/)
- [Формате](https://www.w3.org/TR/xpath/)
- [Метаданные привязки Java](https://docs.microsoft.com/xamarin/android/platform/binding-java-library/customizing-bindings/java-bindings-metadata)
- [Xamarin. Котлин. StdLib NuGet](https://www.nuget.org/packages/Xamarin.Kotlin.StdLib/)
- [Пример репозитория проекта](https://github.com/xamcat/xamarin-binding-kotlin-framework)
