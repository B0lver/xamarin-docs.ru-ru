---
title: Привязка библиотек Kotlin для Android
description: В этом документе объясняется, как создавать привязки C# к коду Kotlin, чтобы использовать нативные библиотеки в приложении Xamarin.Android.
ms.prod: xamarin
ms.assetid: AB03A6C4-5A5A-4EAD-AD51-D887B20A3551
ms.technology: xamarin-android
author: alexeystrakh
ms.author: alstrakh
ms.date: 02/11/2020
ms.openlocfilehash: d2251a0219ca25ecd37e42361e49ac966bac131d
ms.sourcegitcommit: a3f13a216fab4fc20a9adf343895b9d6a54634a5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "85852993"
---
# <a name="bind-android-kotlin-libraries"></a>Привязка библиотек Kotlin для Android

> [!IMPORTANT]
> В настоящее время рассматривается возможность использования настраиваемых привязок на платформе Xamarin. Примите участие в [**этом опросе**](https://www.surveymonkey.com/r/KKBHNLT), чтобы помочь определить дальнейшие направления разработки.

Платформа Android, а также ее собственные языки и средства постоянно развиваются, и для нее доступно множество сторонних библиотек, разработанных с использованием новейших предложений. Максимизация повторного использования кода и компонентов является одной из основных целей кросс-платформенной разработки. Возможность повторного использования компонентов, созданных с помощью Kotlin, становится все более важной для разработчиков Xamarin, так как их популярность среди разработчиков постоянно растет. Возможно, вы уже знакомы с процессом привязки обычных [библиотек](https://docs.microsoft.com/xamarin/android/platform/binding-java-library/) Java. Теперь доступна дополнительная документация, описывающая процесс [привязки библиотеки Kotlin](walkthrough.md), поэтому они могут использоваться приложением Xamarin таким же образом. Цель этого документа — описать в общих чертах подход к созданию привязки Kotlin для Xamarin.

## <a name="high-level-approach"></a>Обобщенный подход

С помощью Xamarin можно привязать любую собственную библиотеку стороннего производителя для использования приложением Xamarin. Kotlin — это новый язык, и создание привязки для библиотек, созданных на этом языке, требует некоторых дополнительных действий и инструментов. Этот подход предусматривает следующие четыре шага:

1. Создание собственной библиотеки
1. Подготовка метаданных Xamarin, которая позволяет средствам Xamarin создавать классы C#
1. Создание библиотеки привязки Xamarin с помощью собственной библиотеки и метаданных
1. Использование библиотеки привязки Xamarin в приложении Xamarin

В следующих разделах эти действия описаны более подробно.

### <a name="build-the-native-library"></a>Создание собственной библиотеки

Первый шаг — получить собственную библиотеку Kotlin (пакет AAR, который является архивом Android). Вы можете либо запросить его непосредственно у поставщика, либо создать его самостоятельно.

### <a name="prepare-the-xamarin-metadata"></a>Подготовка метаданных Xamarin

Вторым шагом является подготовка файла преобразования метаданных, который будет использоваться инструментами Xamarin для создания соответствующих классов C#. В наилучшем сценарии этот файл может быть пустым, где все классы обнаруживаются и создаются средствами Xamarin. В некоторых случаях для создания правильного и (или) требуемого кода C# необходимо применить преобразование метаданных. Во многих случаях для обнаружения скрытых зависимостей и нежелательных классов, которые необходимо исключить из окончательного списка создаваемых классов C#, необходимо использовать дизассемблер AAR, например [декомпилятор Java (JD)](http://java-decompiler.github.io/). Окончательные метаданные должны представлять открытый интерфейс, с которым будет взаимодействовать приложение Xamarin.Android.

### <a name="build-a-xamarinandroid-binding-library"></a>Создание библиотеки привязки Xamarin.Android

Третий шаг — создание специального проекта — библиотеки привязки Xamarin.Android. Он содержит библиотеки Kotlin как собственные ссылки и преобразование метаданных, определенное на предыдущем шаге. На момент записи для каждого пакета AAR, на который указывает ссылка, требуется отдельный проект библиотеки привязки Android. Для поддержки стандартной библиотеки Kotlin библиотека привязки должна добавить пакет [Xamarin.Kotlin.StdLib](https://www.nuget.org/packages/Xamarin.Kotlin.StdLib/).

### <a name="consume-the-xamarin-binding-library"></a>Использование библиотеки привязки Xamarin

Четвертый и последний шаг — ссылка на библиотеку привязки в приложении Xamarin.Android. Добавление ссылки на библиотеку привязки Xamarin.Android позволяет приложению Xamarin использовать предоставленные классы Kotlin из этого пакета.

## <a name="walkthrough"></a>Пошаговое руководство

Здесь дано общее описание действий, необходимых для создания привязки Kotlin для Xamarin. При подготовке этих привязок на практике, необходимо предпринять множество ситуативных действий, включая адаптацию к изменениям в собственных инструментах и языках. Этот документ призван помочь вам получить более глубокое представление об этой концепции и общем характере действий, связанных с этим процессом. Подробные инструкции см. в [пошаговом руководстве по привязке Kotlin в Xamarin](walkthrough.md).

## <a name="related-links"></a>Связанные ссылки

- [Android Studio](https://developer.android.com/studio)
- [Установка Gradle](https://gradle.org/install/)
- [Visual Studio для Mac](https://visualstudio.microsoft.com/downloads)
- [Декомпилятор Java](http://java-decompiler.github.io/)
- [Библиотека Kotlin BubblePicker](https://github.com/igalata/Bubble-Picker)
- [Привязка библиотеки Java](https://docs.microsoft.com/xamarin/android/platform/binding-java-library/)
- [XPath](https://www.w3.org/TR/xpath/)
- [Метаданные привязки Java](https://docs.microsoft.com/xamarin/android/platform/binding-java-library/customizing-bindings/java-bindings-metadata)
- [Xamarin.Kotlin.StdLib NuGet](https://www.nuget.org/packages/Xamarin.Kotlin.StdLib/)
- [Репозиторий примеров проектов](https://github.com/xamcat/xamarin-binding-kotlin-framework)
