---
title: Принципы работы поставщиков содержимого
ms.prod: xamarin
ms.assetid: B9E2EF89-7EBE-45F5-1ED9-7D2C70BE792C
ms.technology: xamarin-android
author: davidortinau
ms.author: daortin
ms.date: 02/16/2018
ms.openlocfilehash: e61be6f0189eb825c15fd75764a16706e588ebc9
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73020519"
---
# <a name="how-content-providers-work"></a>Принципы работы поставщиков содержимого

Существует два класса, участвующих в `ContentProvider` взаимодействии:

- **ContentProvider** &ndash; реализует API, который предоставляет набор данных стандартным способом. Основные методы — это запросы, вставки, обновления и удаления.

- **ContentResolver** &ndash; статический прокси-сервер, который взаимодействует с `ContentProvider` для доступа к его данным из того же приложения или из другого приложения.

Поставщик содержимого обычно поддерживается базой данных SQLite, но API означает, что для использования кода не нужно ничего знать о базовом SQL. Запросы выполняются через универсальный код ресурса (URI), используя константы для ссылки на имена столбцов (чтобы уменьшить зависимости от базовой структуры данных), и возвращается `ICursor` для проходного кода, по которому выполняется итерация.

## <a name="consuming-a-contentprovider"></a>Использование ContentProvider

`ContentProviders` предоставить свои функциональные возможности с помощью URI, зарегистрированного в **AndroidManifest. XML** приложения, которое публикует данные. Существует соглашение о том, что URI и столбцы данных, предоставляемые, должны быть доступны в виде констант, чтобы упростить привязку к данным. Встроенные `ContentProviders` Android предоставляют удобные классы с константами, которые ссылаются на структуру данных в пространстве имен [`Android.Providers`](xref:Android.Provider) .

### <a name="built-in-providers"></a>Встроенные поставщики

Android предоставляет доступ к широкому спектру системных и пользовательских данных с помощью `ContentProviders`:

- *Браузер* &ndash; закладки и журнал браузера (требуется разрешение `READ_HISTORY_BOOKMARKS` и (или) `WRITE_HISTORY_BOOKMARKS`).

- *Калллог* &ndash; недавно выполненных или полученных на устройстве вызовов.

- *Контакты* &ndash; подробные сведения из списка контактов пользователя, включая людей, телефоны, фотографии & группы.

- *Медиасторе* &ndash; содержимое устройства пользователя: аудио (альбомы, исполнители, жанры, списки воспроизведения), изображения (включая эскизы) & видео.

- *Параметры* &ndash; параметры и настройки устройства на уровне системы.

- *Усердиктионари* &ndash; содержимое определяемого пользователем словаря, используемого для прогнозирования ввода текста.

- *Голосовая почта* &ndash; журнал сообщений голосовой почты.

## <a name="classes-overview"></a>Общие сведения о классах

Ниже показаны основные классы, используемые при работе с `ContentProvider`.

[![схеме классов приложения поставщика содержимого и использования взаимодействия приложений](how-it-works-images/classdiagram1.png)](how-it-works-images/classdiagram1.png#lightbox)

На этой схеме `ContentProvider` реализует запросы и регистрирует URI, которые используются другими приложениями для нахождение данных. `ContentResolver` выступает в качестве "прокси" для `ContentProvider` (методы запроса, вставки, обновления и удаления). `SQLiteOpenHelper` содержит данные, используемые `ContentProvider`, но он не предоставляется напрямую для использования приложений.
`CursorAdapter` передает курсор, возвращаемый `ContentResolver`, для вывода в `ListView`. `UriMatcher` — это вспомогательный класс, который анализирует коды URI при обработке запросов.

Назначение каждого класса описывается ниже.

- **ContentProvider** &ndash; реализовать эти методы абстрактного класса для предоставления данных. API становится доступным для других классов и приложений с помощью атрибута URI, который добавляется в определение класса.

- **Склитеопенхелпер** &ndash; помогает реализовать хранилище данных SQLite, предоставляемое `ContentProvider`.

- **Уриматчер** &ndash; использовать `UriMatcher` в реализации `ContentProvider` для управления URI, которые используются для запроса содержимого.

- **ContentResolver** &ndash; использование кода использует `ContentResolver` для доступа к экземпляру `ContentProvider`. Эти два класса совместно используют проблемы межпроцессного взаимодействия, что позволяет легко обмениваться данными между приложениями. Использование кода никогда не создает класс `ContentProvider` явным образом; Вместо этого доступ к данным осуществляется путем создания курсора на основе URI, предоставляемого приложением `ContentProvider`.

- **Курсорадаптер** &ndash; использовать `CursorAdapter` или `SimpleCursorAdapter` для вывода доступа к данным через `ContentProvider`.

`ContentProvider` API позволяет потребителям выполнять различные операции с данными, например:

- Запрос данных для возврата списков или отдельных записей.
- Изменение отдельных записей.
- Добавление новых записей.
- Удаление записей.

Этот документ содержит пример, в котором используется предоставляемая системой `ContentProvider`, а также простой пример только для чтения, реализующий пользовательский `ContentProvider`.
