---
title: Принципы работы поставщиков содержимого
ms.prod: xamarin
ms.assetid: B9E2EF89-7EBE-45F5-1ED9-7D2C70BE792C
ms.technology: xamarin-android
author: conceptdev
ms.author: crdun
ms.date: 02/16/2018
ms.openlocfilehash: 9d8710b3b88b59871b88a1d42ec4f4bb3e515ff5
ms.sourcegitcommit: 57f815bf0024b1afe9754c0e28054fc0a53ce302
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/06/2019
ms.locfileid: "70756508"
---
# <a name="how-content-providers-work"></a>Принципы работы поставщиков содержимого

Существует два класса, участвующих в `ContentProvider` взаимодействии:

- **ContentProvider** &ndash; Реализует API, который предоставляет набор данных стандартным способом. Основные методы — это запросы, вставки, обновления и удаления.

- **ContentResolver** Статический прокси-сервер, который взаимодействует `ContentProvider` с, чтобы получить доступ к его данным из того же приложения или из другого приложения. &ndash;

Поставщик содержимого обычно поддерживается базой данных SQLite, но API означает, что для использования кода не нужно ничего знать о базовом SQL. Запросы выполняются через универсальный код ресурса (URI), используя константы для ссылки на имена столбцов (чтобы уменьшить зависимости от базовой структуры `ICursor` данных), и возвращается для использования кода для итерации.

## <a name="consuming-a-contentprovider"></a>Использование ContentProvider

`ContentProviders`Предоставьте свои функциональные возможности с помощью URI, зарегистрированного в **AndroidManifest. XML** приложения, которое публикует данные. Существует соглашение о том, что URI и столбцы данных, предоставляемые, должны быть доступны в виде констант, чтобы упростить привязку к данным. Встроенные `ContentProviders` приложения Android предоставляют удобные классы с константами, которые ссылаются на структуру данных [`Android.Providers`](xref:Android.Provider) в пространстве имен.

### <a name="built-in-providers"></a>Встроенные поставщики

Android предоставляет доступ к широкому спектру системных и пользовательских данных с `ContentProviders`помощью:

- *Браузер* закладки и журнал браузера (требуется разрешение `READ_HISTORY_BOOKMARKS` и/или `WRITE_HISTORY_BOOKMARKS`). &ndash;

- *Калллог* &ndash; последние вызовы, сделанные или полученные на устройстве.

- *Контакты* &ndash; подробные сведения из списка контактов пользователя, включая людей, телефоны, фотографии & группы.

- *Медиасторе* &ndash; содержимое устройства пользователя: звук (альбомы, исполнители, жанры, списки воспроизведения), изображения (включая эскизы) & видео.

- *Параметры* &ndash; параметры и настройки устройства на уровне системы.

- *Усердиктионари* &ndash; содержимое словаря, определяемого пользователем, используемого для прогнозирования ввода текста.

- *Голосовая почта* &ndash; журнал сообщений голосовой почты.

## <a name="classes-overview"></a>Общие сведения о классах

Ниже показаны основные классы, используемые при работе `ContentProvider` с.

[![Схема классов приложения поставщика содержимого и использование взаимодействия приложений](how-it-works-images/classdiagram1.png)](how-it-works-images/classdiagram1.png#lightbox)

На этой схеме `ContentProvider` реализуются запросы и регистры URI, которые используются другими приложениями для нахождение данных. Объект `ContentResolver` выступает в качестве "прокси" `ContentProvider` для методов (методы запроса, вставки, обновления и удаления). Объект `SQLiteOpenHelper` содержит данные `ContentProvider`, используемые объектом, но он не предоставляется напрямую для использования приложений.
Объект `CursorAdapter` передает курсор, возвращаемый объектом `ContentResolver` , для вывода в `ListView`. `UriMatcher` — Это вспомогательный класс, который анализирует коды URI при обработке запросов.

Назначение каждого класса описывается ниже.

- **ContentProvider** &ndash; Реализуйте методы абстрактного класса для предоставления данных. API становится доступным для других классов и приложений с помощью атрибута URI, который добавляется в определение класса.

- **Склитеопенхелпер** Помогает реализовать хранилище данных SQLite, предоставляемое `ContentProvider`. &ndash;

- **Уриматчер** &ndash; Используйте вреализации`ContentProvider` для управления URI, которые используются для запроса содержимого. `UriMatcher`

- **ContentResolver** Использование кода `ContentResolver` для доступа`ContentProvider` к экземпляру использует. &ndash; Эти два класса совместно используют проблемы межпроцессного взаимодействия, что позволяет легко обмениваться данными между приложениями. Использование кода никогда не создает `ContentProvider` класс явным образом; вместо этого доступ к данным осуществляется путем создания курсора на основе URI, предоставляемого `ContentProvider` приложением.

- **Курсорадаптер** &ndash; `ContentProvider`Используйте `CursorAdapter` или длявывода`SimpleCursorAdapter` доступа к данным через.

`ContentProvider` API позволяет потребителям выполнять различные операции с данными, например:

- Запрос данных для возврата списков или отдельных записей.
- Изменение отдельных записей.
- Добавление новых записей.
- Удаление записей.

Этот документ содержит пример, в котором используется предоставляемый `ContentProvider`системой, а также простой пример только для чтения, реализующий пользовательский `ContentProvider`интерфейс.
