---
title: Поставщики работают, как содержимого
ms.prod: xamarin
ms.assetid: B9E2EF89-7EBE-45F5-1ED9-7D2C70BE792C
ms.technology: xamarin-android
author: conceptdev
ms.author: crdun
ms.date: 02/16/2018
ms.openlocfilehash: df4c2e10e34c308e4fadb44fba9c6a14714ae1b9
ms.sourcegitcommit: e268fd44422d0bbc7c944a678e2cc633a0493122
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/25/2018
ms.locfileid: "50108942"
---
# <a name="how-content-providers-work"></a>Поставщики работают, как содержимого

Существует два класса, участвующих в `ContentProvider` взаимодействия:

- **Поставщик содержимого** &ndash; реализует API, который обеспечивает доступ к набору данных стандартным способом. Основные методы являются запроса, Insert, Update и Delete.

- **ContentResolver** &ndash; статического прокси-сервера, который обменивается данными с `ContentProvider` на доступ к данным, либо из внутри одного приложения или из другого приложения.

Поставщик содержимого обычно содержится в базе данных SQLite, но API-интерфейса означает, что коду-потребителю не требуется ничего знать о базовой SQL. Запросы выполняются посредством Uri с помощью констант для ссылок на имена столбцов (для снижения зависимости от структуры данных) и `ICursor` возвращается соответствующий код для выполнения итерации.


## <a name="consuming-a-contentprovider"></a>Использование ContentProvider

`ContentProviders` предоставлять свою функциональность через Uri, который регистрируется в **AndroidManifest.xml** приложения, которое публикует данные. Отсутствует соглашение, где Uri и столбцы данных, которые предоставляются должны быть доступны как константы для упрощения привязки к данным. Android встроенные `ContentProviders` обеспечивают удобства классов с помощью констант, которые ссылаются на структуры данных в [ `Android.Providers` ](https://developer.xamarin.com/api/namespace/Android.Provider/) пространства имен.



### <a name="built-in-providers"></a>Встроенные поставщики

Android обеспечивает доступ к широкому системы и данных пользователя с помощью `ContentProviders`:

- *Браузер* &ndash; закладки и содержимое журнала обозревателя (требуется разрешение `READ_HISTORY_BOOKMARKS` и/или `WRITE_HISTORY_BOOKMARKS`).

- *CallLog* &ndash; последних вызовов внесенные или полученных с устройством.

- *Контакты* &ndash; подробные сведения из списка контактов пользователя, включая людей, телефонов, фотографии и группы.

- *MediaStore* &ndash; содержимое на устройстве пользователя: аудио (альбомов, исполнителей, жанров, списки воспроизведения), изображений (включая эскизов) и видео.

- *Параметры* &ndash; устройства системных параметров и предпочтений.

- *UserDictionary* &ndash; содержимое словаря определяемых пользователем, используется для ввода текста.

- *Голосовой почты* &ndash; журнала сообщений голосовой почты.



## <a name="classes-overview"></a>Общие сведения о классах

Основные классы, используемые при работе с `ContentProvider` показаны ниже:

[![Схема классов поставщика содержимого приложения и Consuming приложения взаимодействия](how-it-works-images/classdiagram1.png)](how-it-works-images/classdiagram1.png#lightbox)

На этой схеме `ContentProvider` реализует запросы и регистрирует URI, другим приложениям использовать для поиска данных. `ContentResolver` Выступает в роли «прокси-сервер» для `ContentProvider` (запросов, вставки, обновления и удаления методов). `SQLiteOpenHelper` Содержит данные, используемые `ContentProvider`, но она недоступна напрямую, как использовать приложения.
`CursorAdapter` Передает курсоре, возвращаемом процедурой `ContentResolver` для отображения в `ListView`. `UriMatcher` — Это вспомогательный класс, который анализирует коды URI, при обработке запросов.

Назначение каждого класса описан ниже.

- **Поставщик содержимого** &ndash; реализовывать методы этого абстрактного класса для предоставления данных. API становятся доступными для других классов и приложений с помощью атрибута Uri, который добавляется к определению класса.

- **SQLiteOpenHelper** &ndash; помогает реализовать в хранилище данных SQLite, которая предоставляется `ContentProvider`.

- **UriMatcher** &ndash; используйте `UriMatcher` в вашей `ContentProvider` реализацию для управления URI, которые используются для запроса содержимого.

- **ContentResolver** &ndash; коду-потребителю использует `ContentResolver` для доступа к `ContentProvider` экземпляра. Эти два класса друг с другом следить за проблем связи между процессами, что дает легко совместно использоваться приложениями. Использование кода никогда не создает `ContentProvider` класса явным образом; вместо этого данные осуществляется путем создания курсора, в зависимости от Uri, доступ к которым предоставляет `ContentProvider` приложения.

- **CursorAdapter** &ndash; используйте `CursorAdapter` или `SimpleCursorAdapter` для отображения данных, получить доступ с помощью `ContentProvider`.

`ContentProvider` API позволяет пользователям выполнять различные операции с данными, такие как:

-  Запрос данных для возврата списков или отдельных записей.
-  Изменение отдельных записей.
-  Добавление новых записей.
-  Удаление записей.

Этот документ содержит пример, использующий предоставляемая системой `ContentProvider`, а также простой пример только для чтения, который реализует пользовательскую `ContentProvider`.

