---
title: Запуск приложения Maps
description: Запуск встроенного приложения Maps из приложения Xamarin.Android.
ms.prod: xamarin
ms.assetid: 929EACB8-8950-50E1-093C-43FB5F1F1CD5
ms.technology: xamarin-android
author: davidortinau
ms.author: daortin
ms.date: 06/25/2018
ms.openlocfilehash: 7b74f564f2b6e9613874a774258a7e999002e61a
ms.sourcegitcommit: 9ee02a2c091ccb4a728944c1854312ebd51ca05b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/10/2020
ms.locfileid: "73027083"
---
# <a name="launching-the-maps-application"></a>Запуск приложения Maps

Самый простой способ работы с картами в Xamarin.Android — использовать встроенное приложение Maps, показанное ниже:

[![Пример встроенного приложения Google Карты](maps-application-images/01-mapsapplication.png)](maps-application-images/01-mapsapplication.png#lightbox)

При использовании приложения Maps карта не будет частью приложения. Вместо этого приложение запустит приложение Maps и загрузит карту извне. В следующем разделе рассматривается использование Xamarin.Android для запуска карт, аналогично этому примеру.

## <a name="creating-the-intent"></a>Создание намерения

Работа с приложением Maps так же проста, как создание намерения с соответствующим URI, установка действия в ActionView и вызов метода StartActivity. Например, следующий код запускает приложение Maps на точке с заданными широтой и долготой:

```csharp
var geoUri = Android.Net.Uri.Parse ("geo:42.374260,-71.120824");
var mapIntent = new Intent (Intent.ActionView, geoUri);
StartActivity (mapIntent);
```

Этот код — все, что необходимо для запуска карты, показанной на снимке экрана выше. В дополнение к указанию широты и долготы, схема URI для Maps поддерживает несколько других параметров.

## <a name="geo-uri-scheme"></a>Схема URI геообъекта.

В коде выше использована географическая схема для создания универсального кода ресурса (URI). Эта схема URI поддерживает несколько форматов, перечисленных ниже.

- `geo:latitude,longitude` &ndash; открывает приложение Maps на точке с указанными долготой и широтой. 

- `geo:latitude,longitude?z=zoom` &ndash; открывает приложение Maps на точке с указанными долготой и широтой и масштабируется до указанного уровня. Масштабирование может меняться в диапазоне от 1 до 23: 1 — отображать всю Землю, а 23 — максимальный уровень масштабирования.

- `geo:0,0?q=my+street+address` &ndash; открывает приложение Maps на точке почтового адреса. 

- `geo:0,0?q=business+near+city` &ndash; открывает приложение Maps и отображает результаты поиска с заметками. 

Версии URI, которые принимают запрос (почтовый адрес или условия поиска), используют службу геокодирования Google для получения расположения, которое затем отображается на карте. Например, универсальный код ресурса (URI) `geo:0,0?q=coop+Cambridge` приводит к отображению показанной ниже карты:

[![Пример карты Google с поисковым выражением](maps-application-images/02-mapsearch.png)](maps-application-images/02-mapsearch.png#lightbox)

Дополнительные сведения о схемах URI геообъектов см. в статье [Отображение расположения на карте](https://developer.android.com/guide/components/intents-common.html#Maps).

## <a name="street-view"></a>Просмотр улиц

Помимо геосхемы, Android также поддерживает загрузку представлений просмотра улиц из намерения. Ниже приведен пример приложения для просмотра улиц, запускаемого из Xamarin.Android.

[![Снимок экрана с просмотром улицы](maps-application-images/03-streetview.png)](maps-application-images/03-streetview.png#lightbox)

Чтобы запустить просмотр улиц, просто используйте схему универсального кода ресурса (URI) `google.streetview`, как показано в коде ниже:

```csharp
var streetViewUri = Android.Net.Uri.Parse (
       "google.streetview:cbll=42.374260,-71.120824&cbp=1,90,,0,1.0&mz=20");  
var streetViewIntent = new Intent (Intent.ActionView, streetViewUri);  
StartActivity (streetViewIntent);
```

Использованная выше схема URI google.streetview имеет следующий вид:

```csharp
google.streetview:cbll=lat,lng&cbp=1,yaw,,pitch,zoom&mz=mapZoom
```

Как видите, поддерживаются несколько параметров, как показано ниже.

- `lat` &ndash; широта расположения, которое должно отображаться при просмотре улиц.

- `lng` &ndash; долгота расположения, которое должно отображаться при просмотре улиц.

- `pitch` &ndash; угол панорамы для просмотра улиц, измеряемый от центра в градусах, где 90 градусов соответствует положению вертикально вверх, а -90 градусов — положению вертикально вниз.

- `yaw` &ndash; центральное положение панорамы просмотра улицы, измеряемое по часовой стрелке в градусах от направления на север.

- `zoom` &ndash; коэффициент масштабирования для панорамы просмотра улицы, где 1,0 = нормальный масштаб, 2,0 = масштаб 2x, 3,0 = масштабом 4x и т. д.

- `mz` &ndash; уровень масштаба карты, который будет использоваться при переходе к приложению Maps из просмотра улиц.

Работа со встроенным приложением Maps или просмотром улиц — это простой способ быстрого добавления поддержки карт. Однако Maps API в Android обеспечивает более тонкие возможности при работе с картами.
