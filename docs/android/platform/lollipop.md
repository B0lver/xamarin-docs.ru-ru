---
title: Функции интерфейса без описания операций
description: В этой статье представлен общий обзор новых функций, появившихся в Android 5,0 (без описания операций). Эти функции включают в себя новый стиль пользовательского интерфейса под названием «Материалная тема», а также новые вспомогательные функции, такие как анимации, тени представлений и возможность рисования. В Android 5,0 также включены расширенные уведомления, два новых мини-приложения пользовательского интерфейса, новый планировщик заданий и несколько новых интерфейсов API для улучшения хранилища, работы в сети, подключения и мультимедийных возможностей.
ms.prod: xamarin
ms.assetid: 1CE99CFE-FAAC-49FC-AEDC-1A21FC6E946E
ms.technology: xamarin-android
author: conceptdev
ms.author: crdun
ms.date: 02/16/2018
ms.openlocfilehash: c89b78e58918d2b561c6236ac273ffdb872211f0
ms.sourcegitcommit: b07e0259d7b30413673a793ebf4aec2b75bb9285
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/26/2019
ms.locfileid: "68511400"
---
# <a name="lollipop-features"></a>Функции интерфейса без описания операций

_В этой статье представлен общий обзор новых функций, появившихся в Android 5,0 (без описания операций). Эти функции включают в себя новый стиль пользовательского интерфейса под названием «Материалная тема», а также новые вспомогательные функции, такие как анимации, тени представлений и возможность рисования. В Android 5,0 также включены расширенные уведомления, два новых мини-приложения пользовательского интерфейса, новый планировщик заданий и несколько новых интерфейсов API для улучшения хранилища, работы в сети, подключения и мультимедийных возможностей._

## <a name="lollipop-overview"></a>Обзор интерфейса без описания операций

В Android 5,0 (без описания операций) появился новый язык разработки, *проект материалов*и с ним реализована поддержка приведения новых функций для упрощения и интуитивного использования приложений. Благодаря проектированию материалов Android 5,0 не только предоставляет телефоны Android фацелифт; Он также предоставляет новый набор правил проектирования для планшетов на основе Android, настольных компьютеров, контрольных значений и интеллектуальных телевизоров. Эти правила разработки подчеркивают простоту и минимальный уровень, одновременно используя знакомые атрибуты тактиле (например, реалистичные и граничные подсказки), чтобы помочь пользователям быстро и интуитивно понять интерфейс.

*Тема «материал* » — это ембодимент этих принципов разработки пользовательского интерфейса в Android. Эта статья начинается с покрытия вспомогательных функций темы материалов:

-   **Анимация** Анимация отзывов, Анимация переходов, Анимация переходов состояния просмотра и эффект отображения. &ndash;

-   **Показать тени и повышение прав** Представления теперь имеют свойство; представления с более высоким `elevation` значением приводят к более крупным теням на фоне. `elevation` &ndash;

-   **Функции цвета** Нарисованные оттенки позволяют повторно использовать ресурсы изображений, изменяя их цвет, и выразительное *Извлечение цветов* помогает динамически создать тему приложения на основе цветов в изображении. &ndash;

Многие функции темы материалов уже встроены в интерфейс пользователя Android 5,0, а другие должны явно добавляться в приложения. Например, некоторые стандартные представления (например, кнопки) уже включают анимацию отзывов касаний, тогда как приложения должны включить большинство теней представлений.

В дополнение к улучшениям пользовательского интерфейса, которые были добавлены с помощью темы материалов, Android 5,0 также включает ряд других новых функций, описанных в этой статье:

-   **Улучшенные уведомления** Уведомления в Android 5,0 были значительно обновлены с новым оформлением, поддержкой уведомлений по отрезкой экрана и новым форматом представления уведомлений в виде заголовков. &ndash;

-   **Новые мини-приложения пользовательского интерфейса** Новое мини-приложение упрощает для приложений передачу больших наборов данных и сложной информации, а новый `CardView` мини-сервер предоставляет упрощенный формат представления для отображения текста и изображений. `RecyclerView` &ndash;

-   **Новые API** &ndash; Android 5,0 добавляет новые API для поддержки нескольких сетей, улучшенное подключение Bluetooth, упрощенное управление хранением и более гибкое управление мультимедийными проигрывателями и устройствами камеры. Новая функция планирования заданий доступна для асинхронного выполнения задач в запланированное время. Эта функция помогает повысить время работы батареи, например, при планировании задач, выполняемых при подключении устройства к сети и зарядки.


## <a name="requirements"></a>Требования

Для использования новых функций Android 5,0 в приложениях на основе Xamarin необходимо следующее:

-   **Xamarin. Android** &ndash; Xamarin. Android 4,20 или более поздней версии должен быть установлен и настроен с помощью Visual Studio или Visual Studio для Mac. 

-   **Пакет SDK для Android** &ndash; Android 5,0 (API 21) или более поздней версии должен быть установлен с помощью диспетчера пакет SDK для Android.

-   **Пакет Java Developer Kit** Для Xamarin. Android требуется [JDK 1,8](https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html) или более поздняя версия при разработке для API уровня 24 или выше (JDK 1,8 также поддерживает уровни API, предшествующие 24, включая интерфейс без описания операций). &ndash; 64-разрядная версия JDK 1,8 необходима, если используются пользовательские элементы управления или средства просмотра форм.

Вы можете продолжать использовать [JDK 1,7](https://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html) при разработке специально для API уровня 23 или более ранней версии.


## <a name="setting-up-an-android-50-project"></a>Настройка проекта Android 5,0

Чтобы создать проект Android 5,0, необходимо установить последние версии средств и пакетов SDK. Чтобы настроить проект Xamarin. Android, предназначенный для Android 5,0, выполните следующие действия.

1. Установите средства Xamarin. Android и активируйте лицензию Xamarin. Дополнительные сведения об установке Xamarin. Android см. в разделе Установка [и установка](~/android/get-started/installation/index.md) .

2. Если вы используете Visual Studio для Mac, установите последние обновления для Android 5,0.

3. Запустите диспетчер пакет SDK для Android (в Visual Studio для Mac используйте **инструменты &gt; открыть диспетчер&hellip;пакет SDK для Android**) и установите Android SDK Tools 23.0.5 или более поздней версии.

    [![Выбор средств пакет SDK для Android в диспетчере пакет SDK для Android](lollipop-images/android-l-tools-sml.png)](lollipop-images/android-l-tools.png#lightbox)

   Кроме того, установите последние пакеты SDK для Android 5,0 (API 21 или более поздней версии):

    [![Установка пакетов SDK для Android 5,0 в диспетчере пакет SDK для Android](lollipop-images/android-l-sdk-pkgs-sml.png)](lollipop-images/android-l-sdk-pkgs.png#lightbox)

   Дополнительные сведения об использовании диспетчера пакет SDK для Android см. в разделе [Диспетчер пакетов SDK](https://developer.android.com/tools/help/sdk-manager.html).

4. Создайте новый проект Xamarin. Android. Если вы не знакомы с разработкой Android с помощью Xamarin, ознакомьтесь со статьей [Hello, Android,](~/android/get-started/hello-android/index.md) чтобы узнать о создании проектов Android. При создании проекта Android обязательно настройте параметры версии для Android 5,0.
   В Visual Studio для Mac перейдите в раздел **Параметры &gt; проекта создать &gt; общие** и задайте в **качестве целевой платформы** **Android 5,0 (без описания операций)** или более поздней версии:

    ![Настройка целевого Фрамвеворк в Android 5,0 без описания операций](lollipop-images/target-framework.png)

   В разделе **Параметры &gt; проекта &gt; сборка приложения Android**установите для параметра Минимальная и Целевая версия Android значение **Автоматическое использование целевой версии .NET Framework**:

    ![Установка для минимальной и целевой версий Android значения "автоматически"](lollipop-images/minimum-android-version.png)

5. Настройте эмулятор или устройство Android для тестирования приложения. Если вы используете эмулятор, см. раздел [Android Emulator Setup](~/android/get-started/installation/android-emulator/index.md) , чтобы узнать, как настроить эмулятор Android для использования с Xamarin Studio или Visual Studio. Если вы используете устройство Android, см. статью [Настройка предварительной версии пакета SDK](https://developer.android.com/preview/setup-sdk.html) , чтобы узнать, как обновить устройство для Android 5,0. Сведения о настройке устройства Android для выполнения и отладки приложений Xamarin. Android см. в разделе [Настройка устройства для разработки](~/android/get-started/installation/set-up-device-for-development.md).

Примечание. Если вы обновляете существующий проект Android, предназначенный для предварительной версии Android L, необходимо обновить целевую **платформу** и **версию Android** на значения, описанные выше.

## <a name="important-changes"></a>Важные изменения

Изменения в Android 5,0 могли повлиять на ранее опубликованные приложения Android. В частности, Android 5,0 использует новую среду выполнения и значительно измененный формат уведомления.

### <a name="android-runtime"></a>Среда выполнения Android

Android 5,0 использует новую среду выполнения Android (ART) в качестве среды выполнения по умолчанию вместо Dalvik могут вызывать. В иллюстрации реализовано несколько основных новых функций:

-   **Компиляция на предшествующий момент времени (AOT)** &ndash; AOT может улучшить производительность приложения, выполнив компиляцию кода приложения перед первым запуском приложения. При установке приложения ART создает исполняемый файл скомпилированного приложения для целевого устройства.

-   **Улучшенная сборка мусора (GC)** &ndash; Улучшения сборки мусора в картинках также могут повысить производительность приложения. Сборка мусора теперь использует одну приостановку GC вместо двух, а параллельные операции GC выполняются более своевременно.

-   **Улучшенная Отладка приложений** &ndash; На иллюстрации представлены дополнительные диагностические сведения, помогающие анализировать исключения и отчеты о сбоях.

Существующие приложения должны работать без изменений в рисунках &ndash; , за исключением приложений, которые используют методы, уникальные для предыдущей среды выполнения Dalvik могут вызывать, которая может не работать на иллюстрации. Дополнительные сведения об этих изменениях см. в разделе [Проверка поведения приложения в среде выполнения Android (Иллюстрация)](https://developer.android.com/guide/practices/verifying-apps-art.html).


### <a name="notification-changes"></a>Изменения уведомлений

В Android 5,0 значительно изменились уведомления:

-   **Звуки и вибрация** обрабатываются по-разному. `Ringtone` `Notification.Builder` `Vibrator` `MediaPlayer`Звуковые сигналы и вибрации уведомлений теперь обрабатываются вместо, и. &ndash;

-   **Новая цветовая схема** &ndash; В соответствии с темой материала уведомления выводятся с помощью темного текста на белый или очень светлый фон. Кроме того, альфа-каналы в значках уведомлений могут быть изменены Android для координации с системными схемами цветов. 

-   **Уведомления экрана блокировки** &ndash; Теперь уведомления могут отображаться на странице отправки экрана устройства.

-   **Голова** &ndash; Уведомления с высоким приоритетом теперь отображаются в маленьком плавающем окне (головное уведомление), когда устройство разблокировано, а экран включен.

В большинстве случаев перенос существующих функций уведомлений приложений в Android 5,0 требует выполнения следующих действий.

1.  Преобразование кода для использования `Notification.Builder` (или `NotificationsCompat.Builder`) для создания уведомлений. 

2.  Убедитесь, что существующие активы уведомлений отображаются в новой цветовой схеме темы материала.

3.  Решите, какая видимость уведомлений должна иметь, когда они отображаются на экране блокировки. Если уведомление не является общедоступным, какое содержимое должно отображаться на экране блокировки?

4.  Настройте категорию уведомлений таким образом, чтобы они правильно обрабатывались в новом режиме Android 5,0 не *беспокоить* .

Если ваши уведомления представляют собой элементы управления транспорта, отображение состояния воспроизведения мультимедиа `RemoteControlClient`, использование или `ActivityManager.GetRecentTasks`вызов, см. раздел [важные изменения](https://developer.android.com/preview/api-overview.html#Behaviors) в поведении для получения дополнительных сведений об обновлении уведомлений для Android 5,0.

Сведения о создании уведомлений в Android см. в разделе [локальные уведомления](~/android/app-fundamentals/notifications/local-notifications.md).

## <a name="material-theme"></a>Тема материала

Новая тема «материал для Android 5,0» посвящена внесению изменений в внешний вид и поведение пользовательского интерфейса Android. Визуальные элементы теперь используют поверхности тактиле, которые принимают на себя полужирную графику, типографскую и ярко-цветную структуру на основе печати. Примеры темы материалов показаны на следующих снимках экрана:

[![Снимки экрана начального экрана темы материалов, экрана приложений и параметров экрана](lollipop-images/android-5-gallery-labeled-sml.png)](lollipop-images/android-5-gallery-labeled.png#lightbox)

Android 5,0 приветствует с домашним экраном, показанным слева. На первом экране списка приложений отображается снимок экрана, а на снимке экрана справа находится экран **параметров** . Спецификация по [проектированию материалов](https://material.io/guidelines/material-design/introduction.html) Google описывает базовые правила разработки для новой концепции темы материала.

Тема материалов включает три встроенных варианта, которые можно использовать в приложении: `Theme.Material` темная тема (по умолчанию) `Theme.Material.Light` , тема и `Theme.Material.Light.DarkActionBar` Тема: 

[![Снимки экрана с темными, светлыми и Даркактионбар темами](lollipop-images/three-material-themes-sml.png)](lollipop-images/three-material-themes.png#lightbox)

Дополнительные сведения об использовании функциональных возможностей темы материалов в приложениях Xamarin. Android см. в разделе [материал темы](~/android/user-interface/material-theme.md).


## <a name="animations"></a>Анимации

Android 5,0 предоставляет анимацию касаний, анимацию переходов действий и анимацию перехода состояния просмотра, чтобы сделать интерфейсы приложений более интуитивно понятными для использования. Кроме того, приложения Android 5,0 могут использовать анимацию *эффектов отображения* для скрытия или отображения представлений. Можно использовать кривые параметры *движения* для настройки отображения быстрых или медленных анимаций.


### <a name="touch-feedback-animations"></a>Анимация отзывов о касаниях

Анимация с помощью сенсорных отзывов позволяет пользователям визуально отдать отзыв о том, что представление было затронуто. Например, кнопки теперь могут отображать эффект Ripple, когда они затронуты &ndash; . это анимация по умолчанию для сенсорных отзывов в Android 5,0. Анимация Ripple реализуется новым `RippleDrawable` классом. Эффекты Ripple можно настроить на окончание в границах представления или выходят за границы представления. Например, следующая последовательность снимков экрана иллюстрирует эффект Ripple в кнопке во время анимации касания:

![Снимки экрана кадров по кадрам для анимации Ripple на кнопке](lollipop-images/touch-animation.png)

Начальное Контактное лицо с кнопкой появляется на первом изображении слева, а оставшаяся последовательность (слева направо) показывает, как воздействие колебания распространяется на границу кнопки. Когда анимация Ripple заканчивается, представление возвращается к исходному виду. Анимация Ripple по умолчанию выполняется в долях секунды, но длина анимации может быть настроена дольше или короче времени.

Дополнительные сведения об анимации Touch в Android 5,0 см. в разделе [Настройка отзывов о сенсорном вводе](https://developer.android.com/training/material/animations.html#Touch).


### <a name="activity-transition-animations"></a>Анимация смены действий

Анимация переходов действий дает пользователям представление о непрерывности визуального элемента при переходе одного действия на другое. В приложениях можно указать три типа анимации перехода:

-   Перейти к переходу &ndash; Для, когда действие входит в сцену.

-   **Выйти из перехода** &ndash; Для, когда действие завершает работу сцены.

-   **Переход общего элемента** &ndash; Для, когда представление, которое является общим для двух действий, изменяется при переходе первого действия в следующее.

Например, следующая последовательность снимков экрана иллюстрирует переход общего элемента:

[![Снимки экрана кадра по кадрам для анимации с переходом общего элемента](lollipop-images/activity-transition-sml.png)](lollipop-images/activity-transition.png#lightbox)

Общий элемент (фотография Катерпиллар) является одним из нескольких представлений в первом действии. оно становится единственным представлением во втором действии, так как первое действие переходит к второму.

#### <a name="enter-transition-animation-types"></a>Введите типы анимации перехода

Для входных переходов Android 5,0 предоставляет три типа анимации:

-   **Развернуть анимацию** &ndash; Увеличивает представление от центра сцены.

-   **Анимация слайда** &ndash; Перемещает представление из одного из краев сцены.

-   **Анимация затухания** &ndash; Постепенное представление сцены.

#### <a name="exit-transition-animation-types"></a>Выход из типов анимации преобразования

Для переходов выхода Android 5,0 предоставляет три типа анимации:

-   **Развернуть анимацию** &ndash; Сжимает представление до центра сцены.

-   **Анимация слайда** &ndash; Перемещает представление на один из краев сцены.

-   **Анимация затухания** &ndash; Плавное представление сцены.

#### <a name="shared-element-transition-animation-types"></a>Типы анимации перехода общего элемента

Переходы общих элементов поддерживают несколько типов анимации, например:

-   Изменение макета или границ представления.

-   Изменение масштаба и вращения представления.

-   Изменение размера и типа масштабирования для представления.

Дополнительные сведения об анимации переходов действий в Android 5,0 см. в разделе [Настройка переходов действий](https://developer.android.com/training/material/animations.html#Transitions).


### <a name="view-state-transition-animations"></a>Просмотр анимации смены состояния

Android 5,0 делает возможным запуск анимаций при изменении состояния представления. Анимацию переходов состояния представления можно анимировать с помощью одного из следующих методов.

-   Создайте драваблес, чтобы анимировать изменения состояния, связанные с конкретным представлением. Новый `AnimatedStateListDrawable` класс позволяет создавать драваблес, которые отображают анимацию между изменениями состояния представления.

-   Определите функции анимации, выполняемые при изменении состояния представления. Новый `StateListAnimator` класс позволяет определить аниматор, который выполняется при изменении состояния представления.

Дополнительные сведения о анимациях перехода состояния просмотра в Android 5,0 см. в разделе [Анимация изменений состояния представления](https://developer.android.com/training/material/animations.html#ViewState).


### <a name="reveal-effect"></a>Показать результат

*Результат «Показать* » — это круг обрезки, который изменяет радиус для отображения или скрытия представления. Вы можете управлять этим действием, установив начальный и окончательный радиусы обрезки. Следующая последовательность снимков экрана иллюстрирует анимацию эффекта отображения от центра экрана:

[![Снимки экрана кадров по кадрам для анимации "Показать"](lollipop-images/reveal-center-sml.png)](lollipop-images/reveal-center.png#lightbox)

Следующая последовательность иллюстрирует анимацию эффекта отображения, которая выполняется в левом нижнем углу экрана:

[![Снимки экрана кадров по кадрам для анимации обрезки](lollipop-images/reveal-left-sml.png)](lollipop-images/reveal-left.png#lightbox)

Анимация отображения может быть отменена. Это значит, что круг обрезки можно сжать, чтобы скрыть представление, а не увеличить, чтобы отобразить представление.

Дополнительные сведения об использовании эффектов отображения Android 5,0 в см. в разделе [Использование эффектов отображения](https://developer.android.com/training/material/animations.html#Reveal).


### <a name="curved-motion"></a>Изогнутое движение

Помимо этих функций анимации, Android 5,0 также предоставляет новые интерфейсы API, позволяющие задавать время и кривые движения анимации. Android 5,0 использует эти кривые для интерполяции временного и пространственного перемещения во время анимации. В Android 5,0 определены три кривые:

-   **Быстроистекает\_линейное\_ускорение и продолжите ускорение до окончания анимации.\_** &ndash;

-   **Быстроистекает\_\_скорость медленного ускорения и медленно замедляется в сторону конца анимации.\_** &ndash;

-   **\_Линейное\_выходное значение медленное\_в** &ndash; начинается с пиковой скорости и медленно замедляется до конца анимации.

Вы можете использовать новый `PathInterpolator` класс, чтобы указать, как происходит интерполяция движения. `PathInterpolator`— Это интерполяция, которая проходит по путям анимации в соответствии с заданными контрольными точками и кривыми движения. Дополнительные сведения об указании параметров криволинейного движения в Android 5,0 см. в разделе [Использование криволинейного движения](https://developer.android.com/training/material/animations.html#CurvedMotion).


## <a name="view-shadows--elevation"></a>Просмотр теней & повышения прав

В Android 5,0 можно указать *повышение уровня* представления, задав новое `Z` свойство. Большее `Z` значение приводит к тому, что представление применяет более крупную тень на фоне, делая представление плавающей выше, чем верх фона. Можно задать начальное повышение уровня представления, настроив его `elevation` атрибут в макете.

В следующем примере показаны тени, приведенные в пустом `TextView` элементе управления, если его атрибут повышения имеет значение 2DP, 4dp и 6DP соответственно:

[![Снимки экрана прожессивели более крупных представлений](lollipop-images/view-shadows-sml.png)](lollipop-images/view-shadows.png#lightbox)

Параметры теневого отображения могут быть статическими (как показано выше) или использованы в анимациях, чтобы сделать представление временно вынимать над фоном представления. Для анимации повышения уровня `ViewPropertyAnimator` представления можно использовать класс. Повышение уровня представляет собой сумму параметра макета `elevation` `translationZ` плюс свойство, которое можно задать с помощью `ViewPropertyAnimator` вызова метода.

Дополнительные сведения о тенях Shadows в Android 5,0 см. в разделе [Определение темных и обреза представлений](https://developer.android.com/training/material/shadows-clipping.html).


## <a name="color-features"></a>Функции цвета

Android 5,0 предоставляет две новые функции для управления цветом в приложениях:

-   Нарисованные оттенки позволяют изменять цвета ресурсов изображения путем изменения атрибута макета.

-   *Выразительное извлечение цветов* позволяет динамически настраивать цветовую тему приложения для координации с цветовой палитрой отображаемого изображения.


### <a name="drawable-tinting"></a>Нарисованные оттенки

Макеты Android 5,0 распознают новый `tint` атрибут, который можно использовать для установки цвета драваблес без необходимости создания нескольких версий этих ресурсов для вывода различных цветов. Чтобы использовать эту функцию, необходимо определить точечный рисунок как альфа-маску и `tint` использовать атрибут для определения цвета ресурса. Это позволяет создавать активы и разкрасить их в макете в соответствии со своей темой.

В следующем примере для создания вариантов оттенков используется &ndash; один ресурс изображения — белый логотип с &ndash; прозрачным фоном.

![Белая эмблема Xamarin с прозрачным фоном](lollipop-images/xamarin-logo-white.png)

Эта эмблема отображается над синей круглой фоном, как показано в следующих примерах. Изображение слева показывает, что логотип отображается без `tint` параметра. В центральном изображении `tint` атрибут логотипа задается темно-серым цветом. На изображении справа `tint` задается светло-серый цвет:

![Примеры описанного выше логотипа с различными параметрами оттенка](lollipop-images/drawable-tinting.png)

Дополнительные сведения о выводе полутонов в Android 5.0 см. в разделе [оттенки с рисованием](https://developer.android.com/training/material/drawables.html#DrawableTint).


### <a name="prominent-color-extraction"></a>Выразительное извлечение цветов

Новый класс Android 5,0 `Palette` позволяет извлекать цвета из изображения, чтобы их можно было динамически применять к пользовательской цветовой палитре. `Palette` Класс извлекает шесть цветов из изображения и помечает эти цвета в соответствии с их относительными уровнями насыщенности и яркости цвета:

-   Ярких

-   Темно-насыщенный

-   Яркий освещение

-   Звукового

-   Отключено темное

-   Выкл. освещение

Например, на следующих снимках экрана приложение для просмотра фотографий извлекает из изображения отображаемые цвета и использует эти цвета для адаптации цветовой схемы приложения в соответствии с изображением:

[![Снимки экрана, появляющиеся зеленым, розовым и синим распакуйте цвета темы](lollipop-images/prominent-color-extraction-sml.png)](lollipop-images/prominent-color-extraction.png#lightbox)

На приведенных выше снимках экрана панель действий задается как извлеченный «яркий» цвет, а для фона — извлеченный «насыщенный» цвет. В каждом из приведенных выше примеров для иллюстрации цветов палитры, извлеченных из изображения, включается ряд малых цветных квадратов.

Дополнительные сведения о извлечении цветов в Android 5,0 см. в разделе [Извлечение выразительного цвета из изображения](https://developer.android.com/training/material/drawables.html#ColorExtract).


## <a name="new-ui-widgets"></a>Новые мини-приложения пользовательского интерфейса

В Android 5,0 появились два новых мини-приложения пользовательского интерфейса:

-   `RecyclerView`&ndash; Группа представлений, в которой отображается список прокручиваемых элементов.

-   `CardView`&ndash; Базовый макет с закругленными углами.

Оба мини-приложения включают в себя помогут поддержку для функций темы материалов. Например, `RecyclerView` использует анимацию для добавления и удаления представлений и `CardView` использует тени представлений для того, чтобы каждая карточка отображалась над фоном. Примеры этих новых мини-приложений показаны на следующих снимках экрана:

[![Снимки экрана приложений, созданных с помощью RecyclerView](lollipop-images/recyclerview-cardview-sml.png)](lollipop-images/recyclerview-cardview.png#lightbox)

Снимок экрана слева является примером `RecyclerView` использования в приложении электронной почты, а снимок экрана справа — `CardView` пример использования в приложении для резервирования командировок.


### <a name="recyclerview"></a>RecyclerView

`RecyclerView`аналогичен `ListView,` , но лучше подходит для больших наборов представлений или списков с динамически изменяемыми элементами. Например `ListView,` , вы указываете адаптер для доступа к базовому набору данных. Однако в отличие от `ListView,` *диспетчера макетов* для размещения элементов в `RecyclerView`. Диспетчер макетов также отвечает за перезапуск представления. Он управляет повторной попыткой использования представлений элементов, которые больше не видны пользователю.

При использовании `RecyclerView` мини-приложения необходимо `LayoutManager` указать и адаптер. Как показано на этом рисунке, `LayoutManager` является посредником между адаптером `RecyclerView`и:

![Схема RecyclerView с поддержкой Лайаутманажер, адаптера и набора данных](lollipop-images/recyclerview-diagram.png)

На следующих снимках экрана показан `RecyclerView` элемент, содержащий 100 элементов (каждый элемент состоит `ImageView` из и `TextView`):

[![Снимки экрана RecyclerView приложения с прокруткой изображений](lollipop-images/recyclerview-scroll-sml.png)](lollipop-images/recyclerview-scroll.png#lightbox)

`RecyclerView`обрабатывает этот большой набор данных с помощью &ndash; простоты прокрутки от начала списка до конца списка в этом примере приложения занимает всего несколько секунд. `RecyclerView`также поддерживает анимацию; по сути, анимации для добавления и удаления элементов включены по умолчанию. Когда элемент добавляется `RecyclerView`в, он исчезает, как показано в этой последовательности снимков экрана:

[![Снимок экрана кадра по кадрам для затухания элемента фотографии в](lollipop-images/recyclerview-animation-sml.png)](lollipop-images/recyclerview-animation.png#lightbox)

Дополнительные сведения о `RecyclerView`см. в разделе [RecyclerView](~/android/user-interface/layouts/recycler-view/index.md).


### <a name="cardview"></a>CardView

`CardView`— Это простое представление, моделирующее плавающую карту со скругленными углами. Так `CardView` как имеет встроенные тени представления, оно предоставляет простой способ добавления визуальной глубины в приложение. На следующих снимках экрана показаны три примера, `CardView`ориентированных на текст:

[![Примеры снимков экрана приложений с использованием RecyclerView с элементами на основе Кардвиев](lollipop-images/recyclerview-cardview-sml.png)](lollipop-images/recyclerview-cardview.png#lightbox)

Каждая из карточек в приведенном выше примере содержит a `TextView`; цвет фона задается с `cardBackgroundColor` помощью атрибута.

Дополнительные сведения о `CardView`см. в разделе [кардвиев](~/android/user-interface/controls/card-view.md).


## <a name="enhanced-notifications"></a>Улучшенные уведомления

Система уведомлений в Android 5,0 была значительно обновлена с новым визуальным форматом и новыми функциями. У уведомлений есть новый взгляд на Android 5,0. Например, уведомления в Android 5,0 теперь используют темный текст на светлом фоне:

![Пример нерасширенного уведомления Android 5,0](lollipop-images/expanded-notification-contracted.png)

Когда в уведомлении отображается крупный значок (как показано в примере выше), Android 5,0 представляет маленький значок в виде значка над большим значком. 

В Android 5,0 уведомления также могут отображаться на странице отправки экрана устройства.
Например, ниже приведен пример снимка экрана экрана блокировки с одним уведомлением:

[![Снимок экрана с уведомлением на экране блокировки](lollipop-images/lockscreen-notification-sml.png)](lollipop-images/lockscreen-notification.png#lightbox)

Пользователи могут дважды коснуться уведомления на экране блокировки, чтобы разблокировать устройство и перейти к приложению, которое поступило на это уведомление, или прокрутить, чтобы закрыть уведомление. Уведомления имеют новое значение *видимости* , определяющее, какой объем содержимого может отображаться на экране блокировки. Пользователи могут выбрать, следует ли разрешить отображение конфиденциального содержимого в уведомлениях экрана.

В Android 5,0 появился новый высокоприоритетный формат представления уведомлений с названием « *голова»* . В верхней части экрана в течение нескольких секунд вы сможете получить уведомления, а затем снова ретреат на оттенок окна. Уведомления в заголовке позволяют пользовательскому интерфейсу системы размещать важную информацию перед пользователем, не нарушая выполняющуюся в данный момент активность. В следующем примере показано простое уведомление, отображаемое поверх приложения:

[![Пример уведомления о головах](lollipop-images/heads-up-notification-sml.png)](lollipop-images/heads-up-notification.png#lightbox)

Уведомления о головах обычно используются для следующих событий:

-   Новое следующее сообщение

-   Входящий телефонный звонок

-   Индикатор низкого заряда батареи

-   Сигнал

Android 5,0 отображает уведомление в формате "заголовков" только в том случае, если задан высокий или максимальный приоритет.

В Android 5,0 можно предоставить метаданные уведомлений, чтобы упростить сортировку и отображение уведомлений Android. Android 5,0 организует уведомления в соответствии с приоритетом, видимостью и категорией.
Категории уведомлений используются для фильтрации уведомлений, которые могут быть представлены, если устройство находится в режиме "не *беспокоить* ".

Подробные сведения о создании и запуске уведомлений о новых функциях Android 5,0 см. в статье [локальные уведомления](~/android/app-fundamentals/notifications/local-notifications.md).


## <a name="new-apis"></a>Новые интерфейсы API

Помимо новых функций, описанных выше, Android 5,0 добавляет новые интерфейсы API, расширяющие возможности существующих функций мультимедиа, хранения и беспроводной связи. Кроме того, Android 5,0 включает новые API, обеспечивающие поддержку новой функции планировщика заданий.

### <a name="camera"></a>Камера

Android 5,0 предоставляет несколько новых интерфейсов API для улучшенных возможностей камеры. Новое `Android.Hardware.Camera2` пространство имен включает функции для доступа к отдельным устройствам камеры, подключенным к устройству Android. Кроме того `Android.Hardware.Camera2` , моделирует каждое устройство камеры как конвейер: оно принимает запрос на захват, записывает образ, а затем выводит результат. Такой подход позволяет приложениям ставить в очередь несколько запросов на захват на устройство камеры.

Следующие API делают эти новые возможности возможными:

-   `CameraManager.GetCameraIdList`Помогает обращаться к устройствам камеры программным способом `CameraManager.OpenCamera` ; используется для подключения к конкретному устройству камеры. &ndash;

-   `CameraCaptureSession`&ndash; Запись или потоковая передача образов с устройства камеры. Реализуется `CameraCaptureSession.CaptureListener` интерфейс для управления новыми событиями записи изображения.

-   `CaptureRequest`&ndash; Определяет параметры записи.

-   `CaptureResult`&ndash; Предоставляет результаты операции записи образа.

Дополнительные сведения о новых API-интерфейсах камеры в Android 5,0 см. в разделе [носители](https://developer.android.com/about/versions/android-5.0.html#Media).

### <a name="audio-playback"></a>Воспроизведение звука

Android 5,0 обновляет `AudioTrack` класс для улучшения воспроизведения звука:

-   `ENCODING_PCM_FLOAT`&ndash; Настраиваетдляприемазвуковыхданныхвформатесплавающейзапятойдляулучшениядинамическогодиапазона,повышенияуровнязапасаиболеевысокогокачества(благодаряувеличению`AudioTrack` точности). Кроме того, формат с плавающей запятой помогает избежать обрезки звука.

-   `ByteBuffer`Теперь звуковые данные можно передавать в `AudioTrack` виде массива байтов. &ndash;

-   `WRITE_NON_BLOCKING`&ndash; Этот параметр упрощает буферизацию и многопоточность для некоторых приложений.

Дополнительные сведения об `AudioTrack` улучшениях в Android 5,0 см. на [носителе](https://developer.android.com/about/versions/android-5.0.html#Media).

### <a name="media-playback-control"></a>Управление воспроизведением мультимедиа

В Android 5,0 появился новый `Android.Media.MediaController` класс, который заменяет `RemoteControlClient`. `Android.Media.MediaController`предоставляет упрощенные API-интерфейсы управления транспортом и обеспечивает потокобезопасный контроль воспроизведения за пределами контекста пользовательского интерфейса. Следующие новые интерфейсы API обработают управление транспортом:

-   `Android.Media.Session.MediaSession`&ndash; Сеанс управления мультимедиа, который обрабатывает несколько контроллеров. Вы вызываете `MediaSession.GetSessionToken` для запроса маркера, который приложение использует для взаимодействия с сеансом.

-   `MediaController.TransportControls`Обрабатывает транспортные команды, такие как **Воспроизведение**, **Завершение**и **пропуск.** &ndash;

Кроме того, можно использовать новый `Android.App.Notification.MediaStyle` класс, чтобы связать сеанс мультимедиа с богатым содержимым уведомлений (например, извлечение и отображение обложки альбома).

Дополнительные сведения о новых функциях управления воспроизведением мультимедиа в Android 5,0 см. в разделе [носитель](https://developer.android.com/about/versions/android-5.0.html#Media).

### <a name="storage"></a>Хранилище

Android 5,0 обновляет структуру доступа к хранилищу, чтобы упростить работу приложений с каталогами и документами.

-   Чтобы выбрать поддерево каталога, можно создать и отправить `Android.Intent.Action.OPEN_DOCUMENT_TREE` цель. Это заставляет систему отображать все экземпляры поставщиков, поддерживающие выбор поддеревьев. Затем пользователь просматривает и выбирает каталог.

-   Для создания новых документов и каталогов и управления ими `CreateDocument`в любом месте поддерева используются новые методы `DocumentsContract`, `RenameDocument`и `DeleteDocument` .

-   Чтобы получить пути к каталогам мультимедиа на всех общих устройствах хранения, вызовите новый `Android.Content.Context.GetExternalMediaDirs` метод.

Дополнительные сведения о новых API-интерфейсах хранилища в Android 5,0 см. в разделе [хранилище](https://developer.android.com/preview/api-overview.html#Storage).

### <a name="wireless--connectivity"></a>Подключение беспроводных &

Android 5,0 добавляет следующие улучшения API для беспроводной связи и подключения:

-   Новые *многосетевые* API, позволяющие приложениям находить и выбирать сети с конкретными возможностями перед подключением.

-   Функция вещания Bluetooth, позволяющая устройству Android 5,0 работать как периферийное устройство Bluetooth с низким энергопотреблением.

-   Улучшения NFC, упрощающие использование функций обмена данными практически в полях для совместного использования данных с другими устройствами.

Дополнительные сведения о новых интерфейсах API беспроводной связи и подключения в Android 5,0 см. в разделе [беспроводная связь и подключение](https://developer.android.com/preview/api-overview.html#Wireless).

### <a name="job-scheduling"></a>Планирование заданий

В Android 5,0 появился новый `JobScheduler` интерфейс API, который помогает пользователям снизить нагрузку на батарею, планируя выполнение определенных задач только при подключении устройства к сети и при зарядки. Эта функция планировщика заданий также может использоваться для планирования выполнения задачи, когда условия более подходят для этой задачи, например для загрузки большого файла, когда устройство подключено через сеть Wi-Fi, а не для сети с лимитным тарифным планом.

Дополнительные сведения о новых API планирования заданий в Android 5,0 см. в разделе [планирование заданий](https://developer.android.com/preview/api-overview.html#JobScheduler).

## <a name="summary"></a>Сводка

В этой статье приводятся общие сведения о важных новых возможностях Android 5,0 для разработчиков приложений Xamarin. Android:

-   Тема материала

-   Анимации

-   Показать тени и повышение прав

-   Функции цвета, такие как рисуемые оттенки и выразительное извлечение цветов

-   Новые `RecyclerView` и`CardView` мини-приложения

-   Усовершенствования уведомлений

-   Новые интерфейсы API для камеры, воспроизведения звука, управления мультимедиа, хранилища, беспроводной связи, подключения и планирования заданий.

Если вы не знакомы с разработкой в Xamarin Android, ознакомьтесь со статьей [Установка и установка](~/android/get-started/installation/index.md) , которые помогут приступить к работе с Xamarin. Android.
[Привет, Android](~/android/get-started/hello-android/index.md) — это отличное введение в изучение процесса создания проектов Android.



## <a name="related-links"></a>Связанные ссылки

- [Предварительная версия Android L для разработчиков](https://developer.android.com/preview/index.html)
- [Получение пакет SDK для Android](https://developer.android.com/sdk/index.html#Other)
- [Проектирование материалов](https://developer.android.com/preview/material/index.html)
- [Принципы проектирования материалов](http://static.googleusercontent.com/media/www.google.com/en/us/design/material-design.pdf)
