---
title: "Журнал отладки Android"
ms.topic: article
ms.prod: xamarin
ms.assetid: 01A715FE-9E9D-9B85-8A59-6568D8A09CA5
ms.technology: xamarin-android
author: mgmclemore
ms.author: mamcle
ms.date: 02/16/2018
ms.openlocfilehash: 26ac42e4b7acbe19dee746130fc335fdf18ffc46
ms.sourcegitcommit: 30055c534d9caf5dffcfdeafd6f08e666fb870a8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/09/2018
---
# <a name="android-debug-log"></a>Журнал отладки Android

## <a name="android-debug-log-overview"></a>Общие сведения о журнале отладки Android

Очень часто разработчики для отладки своих приложений используют вызовы к `Console.WriteLine`. Однако на мобильной платформе, такой как Android, консоль отсутствует. На устройствах Android доступен журнал, который можно использовать при создании приложений. Иногда его называют logcat из-за команды, вводимой для его получения.

## <a name="accessing-from-visual-studio"></a>Доступ из Visual Studio

В Visual Studio 2015 и более поздних версиях используются единые панели журналов Android и iOS.

### <a name="visual-studio-2015--2017"></a>Visual Studio 2015 и 2017

Журналы для устройств Android и iOS отображаются в новом окне средства журнала устройств для Visual Studio. Чтобы открыть это окно, нужно выполнить одну из указанных ниже последовательностей команд: 

-   **Вид > Другие окна > Журнал устройств**
-   **Сервис -> Android -> Журнал устройств**
-   **Панель инструментов Android -> Журнал устройств**

В открывшемся окне в поле со списком можно выбрать физическое устройство. Выбранное устройство автоматически начинает добавлять в таблицу записи журнала из работающего приложения. Переключение между устройствами будет приводить к остановке и последующему запуску ведения журнала для устройства. Чтобы устройства появились в поле со списком, необходимо загрузить проект Android. Если устройство не отображается в поле со списком, сначала проверьте его доступность в раскрывающемся списке "Начать отладку". 

В этом окне находятся следующие элементы: таблица записей журнала, поле со списком для выбора устройств, функция очистки записей журнала, поле поиска и кнопки воспроизведения, остановки, паузы. 



## <a name="accessing-from-the-command-line"></a>Доступ из командной строки

Просмотреть журнал отладки также можно с помощью командной строки. Откройте окно консоли и перейдите в папку platform-tools пакета SDK для Android (например, **C:\android-sdk-windows\platform-tools**). 

Если подключено только одно устройство, журнал можно просмотреть с помощью следующей команды:

```shell
$ adb logcat
```

Если подключено несколько устройств, необходимо определить нужное. Например, при выполнении `adb -d logcat` отображается журнал только подключенного физического устройства, а при выполнении `adb -e logcat` — только журнал запущенного эмулятора. 

Чтобы найти другие команды, следует просто выполнить **adb**.



## <a name="writing-to-the-debug-log"></a>Запись в журнал отладки

Записывать сообщения в журнал отладки можно с помощью методов класса [Android.Util.Log](https://developer.xamarin.com/api/type/Android.Util.Log/): 

```csharp
string tag = "myapp";

Log.Info (tag, "this is an info message");
Log.Warn (tag, "this is a warning message");
Log.Error (tag, "this is an error message");
```

Выводится следующий результат:

```shell
I/myapp   (11103): this is an info message
W/myapp   (11103): this is a warning message
E/myapp   (11103): this is an error message
```


## <a name="interesting-messages"></a>Интересующие сообщения

При чтении журнала и особенно в случае предоставления фрагментов журнала другим пользователям (так как предоставление полного файла журнала является (1) избыточным и (2) файл может быть нечитаемым) *очень важно* начинать со строки, имеющей следующий вид:

```shell
I/ActivityManager(12944): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=GcTest.GcTest/gctest.Activity1 } from pid 24175
```

В частности, со строки, соответствующей регулярному выражению:

```shell
^I.*ActivityManager.*Starting: Intent
```

и содержащей имя пакета приложения. Это строка, которая соответствует началу действия, и *большинство* (но не все) следующих сообщений должны иметь отношение к приложению. 

В частности, каждое сообщение содержит идентификатор процесса (pid) для процесса, создающего сообщение. В указанном выше сообщении `ActivityManager` сообщение было создано процессом `12944`. Чтобы определить, какой процесс является процессом отлаживаемого приложения, найдите сообщение mono.MonoRuntimeProvider. 

```shell
I/ActivityThread(  602): Pub TouchTest.TouchTest.__mono_init__: mono.MonoRuntimeProvider
```

Это сообщение поступает из процесса, который был запущен, и из него поступают также все следующие сообщения, содержащие тот же pid. 
