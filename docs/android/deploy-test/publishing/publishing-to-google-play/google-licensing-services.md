---
title: Службы лицензирования Google
ms.prod: xamarin
ms.assetid: E96BDCC3-454A-A797-5819-905E2BB1AC41
ms.technology: xamarin-android
author: mgmclemore
ms.author: mamcle
ms.date: 12/20/2017
ms.openlocfilehash: ebc557ce16858c675b291f17620616a2dba4c054
ms.sourcegitcommit: 945df041e2180cb20af08b83cc703ecd1aedc6b0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/04/2018
ms.locfileid: "30762250"
---
# <a name="google-licensing-services"></a>Службы лицензирования Google

До Google Play для приложений Android действовал устаревший механизм защиты от копирования, предоставляемый Google Market, который гарантировал, что только авторизованные пользователи могут запускать приложения на своих устройствах. За счет налагаемых ограничений он был отнюдь не идеальным решением для защиты приложений.

Этот механизм защиты от копирования заменен лицензированием Google.
Лицензирование Google — это гибкая безопасная сетевая служба, к которой приложения Android могут отправлять запросы, чтобы определить, лицензировано ли приложение для запуска на конкретном устройстве.

Благодаря гибкости лицензирования Google приложения Android полностью контролируют такие моменты, как ситуация проверки лицензии, частота проверки лицензии и способ обработки ответа с сервера лицензирования.

Лицензирование Google безопасно до такой степени, что каждый ответ подписывается с помощью пары ключей RSA, которая является общей исключительно для сервера Google Play и приложения. Google Play предоставляет разработчикам открытый ключ, внедряемый в приложение Android и используемый для проверки подлинности ответов. Сервер Google Play хранит закрытый ключ во внутренней системе.

Приложение, поддерживающее лицензирование Google, отправляет запрос службе, размещенной приложением Google Play на устройстве. Затем Google Play отправляет этот запрос на сервер лицензирования Google, который отвечает с указанием состояния лицензирования: 

[![Схема рабочего процесса сервера лицензирования](google-licensing-services-images/gp-licensing-service-overview.png)](google-licensing-services-images/gp-licensing-service-overview.png#lightbox)

Этот процесс показан на схеме выше: 

-   Приложение предоставляет имя пакета, одноразовый код *nonce* (криптографическое средство проверки подлинности), используемый для проверки ответа сервера, и обратный вызов для асинхронной обработки ответа. 

-   Google Play предоставляет такие сведения, как учетная запись Google, и данные о самом устройстве, например номер IMSI. 

Служба лицензирования Google также является ключевым компонентом файлов расширения APK (они рассматриваются далее в этом документе). Файлы расширения APK используют службы лицензирования Google для получения URL-адресов файлов расширения, которые будут скачиваться.


## <a name="requirements"></a>Требования

На приложения, приобретенные не через Google Play, преимущества служб лицензирования Google не распространяются. Если Google Play не установлен на устройстве, приложения, использующие службы лицензирования, будут работать на устройстве в обычном режиме.

Для функционирования Google Play требуется доступ к Интернету. Приложение может кэшировать лицензии, чтобы поддерживать сценарии, когда у устройства нет доступа к серверам лицензирования Google Play.

Для бесплатных приложений лицензирование Google требуется только в случае, когда они используют файлы расширения APK.
